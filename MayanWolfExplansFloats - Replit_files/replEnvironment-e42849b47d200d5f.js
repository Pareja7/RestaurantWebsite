(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7363],{34203:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(65988),i=n.n(r),a=(n(67294),n(94184)),o=n.n(a),s=n(35944);function c(e){var t=e.unreadDot,n=e.size,r=void 0===n?12:n,a=e.count,c=void 0===a?null:a,l=c&&c>99,u=l?"99+":null===c||void 0===c?void 0:c.toString();return(0,s.BX)("span",{className:"jsx-2595643267",children:[(0,s.tZ)("svg",{width:r,height:r,viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},xmlns:"http://www.w3.org/2000/svg",className:"jsx-2595643267",children:(0,s.tZ)("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-2595643267"})}),t&&(0,s.tZ)("div",{className:"jsx-2595643267 unread-indicator"}),Boolean(c)&&(0,s.tZ)("div",{className:"jsx-2595643267 "+(o()("count",{overflow:l})||""),children:u}),(0,s.tZ)(i(),{id:"2595643267",children:["span.jsx-2595643267{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}",".unread-indicator.jsx-2595643267{width:5px;height:5px;border-radius:10px;background-color:var(--accent-red-default);-webkit-transform:translate(8px,-1px);-ms-transform:translate(8px,-1px);transform:translate(8px,-1px);position:absolute;}",".count.jsx-2595643267{border-radius:10px;background-color:var(--accent-negative-default);-webkit-transform:translate(50%,-50%);-ms-transform:translate(50%,-50%);transform:translate(50%,-50%);position:absolute;min-width:16px;padding:2px 3px;height:16px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:white;font-size:var(--font-size-small);}",".overflow.jsx-2595643267{-webkit-transform:translate(25%,-50%);-ms-transform:translate(25%,-50%);transform:translate(25%,-50%);}"]})]})}},41532:function(e,t,n){"use strict";var r=n(59499),i=n(17674),a=n(65988),o=n.n(a),s=n(67294),c=n(41850),l=n(2929),u=n(35944);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.title,n=void 0===t?"Sign up":t,r=e.description,a=void 0===r?"Code, create, and learn together on Replit":r,d=e.onSuccess,f=void 0===d?function(){}:d,h=e.onFailure,m=void 0===h?function(){}:h,g=e.onAnonSuccess,v=void 0===g?function(){}:g,b=e.showLoginFirst,y=void 0!==b&&b,x=e.isTeacher,w=void 0!==x&&x,k=e.toggleTeacher,Z=void 0===k?function(){}:k,j=e.allowAnon,O=void 0!==j&&j,E=e.source,_=s.useState(y),C=(0,i.Z)(_,2),S=C[0],P=C[1];return(0,u.BX)("div",{className:"jsx-845344649 auth-modal",children:[(0,u.BX)(c.gC,{align:"center",spacing:2,children:[(0,u.tZ)("div",{className:"jsx-845344649 auth-modal-title",children:n}),(0,u.tZ)("div",{className:"jsx-845344649 auth-modal-description",children:a}),(0,u.tZ)(l.Z,{onChangeAuth:function(){P(!S)},isTeacher:w,isLogin:S,onSubmit:function(e){"error"in e?m(e):"user"in e&&f(p(p({},e),{},{isLogin:S}))},toggleTeacher:Z,source:E}),O&&(0,u.tZ)("div",{className:"jsx-845344649 auth-modal-anon",children:(0,u.tZ)("a",{onClick:v,className:"jsx-845344649",children:"continue as Anonymous"})})]}),(0,u.tZ)(o(),{id:"845344649",children:[".auth-modal.jsx-845344649{max-width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:var(--space-32) var(--space-16);}",".title-container.jsx-845344649{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin-bottom:var(--space-16);}",".auth-modal-title.jsx-845344649{text-align:center;color:var(--foreground-default);font-size:var(--font-size-header-big);font-weight:var(--font-weight-medium);}",".auth-modal-description.jsx-845344649{text-align:center;color:var(--foreground-dimmer);font-size:var(--font-size-subhead-default);}",".auth-modal-anon.jsx-845344649{margin-top:14px;font-size:14px;}",".auth-modal-anon.jsx-845344649 a.jsx-845344649{color:var(--accent-primary-default);-webkit-text-decoration:none;text-decoration:none;cursor:pointer;}"]})]})}},4715:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(65988),i=n.n(r),a=n(5318),o=n(36732),s=n(41850),c=n(18952),l=n(35944);function u(e){var t=e.prompt,n=e.desc,r=e.confirmText,u=e.loading,d=void 0!==u&&u,p=e.onCancel,f=e.onConfirm,h=e.danger,m=e.padding,g=void 0===m?32:m;return(0,l.BX)("div",{className:i().dynamic([["1057179245",[g]]])+" content",children:[(0,l.BX)(s.gC,{spacing:4,children:[(0,l.BX)(s.gC,{spacing:1,children:[(0,l.tZ)(o.Z,{level:3,children:t}),(0,l.tZ)(c.Z,{foreground:2,children:n})]}),(0,l.BX)(s.Ug,{spacing:1,children:[p&&(0,l.tZ)(a.Z,{autoFocus:!0,loading:d,onClick:p,children:"Cancel"}),(0,l.tZ)(a.Z,{color:h?"negative":"primary",filled:!0,loading:d,onClick:f,children:r||"Ok"})]})]}),(0,l.tZ)(i(),{id:"1057179245",dynamic:[g],children:[".content.__jsx-style-dynamic-selector{padding:var(--space- ".concat(g,");}")]})]})}},13492:function(e,t,n){"use strict";var r=n(59499),i=n(4730),a=n(92777),o=n(82262),s=n(81531),c=n(63553),l=n(37247),u=n(65988),d=n.n(u),p=n(67294),f=n(47121),h=n(85893),m=["inputTriggerProps","tall"];function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var y=function(e){(0,s.Z)(n,e);var t=b(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){this.props.autoFocus&&this.focus()}},{key:"focus",value:function(){this.el&&this.el.focus()}},{key:"blur",value:function(){this.el&&this.el.blur()}},{key:"select",value:function(){this.el&&this.el.select()}},{key:"render",value:function(){var e=this,t=this.props,n=t.inputTriggerProps,r=t.tall,a=(0,i.Z)(t,m),o=n?function(e){return(0,h.jsx)(f.Z,v(v({},n),{},{children:e}))}:function(e){return e};return(0,h.jsxs)(h.Fragment,{children:[o((0,h.jsx)("textarea",v(v({ref:function(t){return e.el=t}},a),{},{className:"jsx-2349401589 "+d().dynamic([["3738306157",[r?250:60]]])+" form-textarea"}))),(0,h.jsx)(d(),{id:"2349401589",children:[".form-textarea.jsx-2349401589{resize:vertical;background-color:var(--background-default);color:var(--foreground-default);}",".form-textarea.jsx-2349401589:focus{border-color:var(--accent-primary-default);}",".form-textarea[disabled].jsx-2349401589{background-color:var(--background-root);color:var(--foreground-dimmer);opacity:0.5;}"]}),(0,h.jsx)(d(),{id:"3738306157",dynamic:[r?250:60],children:[".form-textarea.__jsx-style-dynamic-selector{color:var(--foreground-default);width:100%;max-width:100%;min-width:100%;min-height:".concat(r?250:60,"px;height:100%;box-sizing:border-box;padding:var(--space-8);outline:0px;font-size:15px;border:1px solid var(--foreground-dimmest);line-height:1.4;border-radius:var(--border-radius-4);}"),".form-textarea.__jsx-style-dynamic-selector:focus{outline:0 none;}",".form-textarea[readonly].__jsx-style-dynamic-selector{cursor:not-allowed;}"]})]})}}]),n}(p.Component);y.defaultProps={autoComplete:"off",required:!1},t.Z=y},72655:function(e,t,n){"use strict";n.d(t,{Aw:function(){return w},ck:function(){return k}});var r=n(59499),i=n(90116),a=n(17674),o=n(65988),s=n.n(o),c=n(67294),l=n(88942),u=n(94184),d=n.n(u),p=n(79453),f=n.n(p),h=n(50988),m=n(54585),g=n(86374),v=n(35335),b=n(35944);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){var t=e.children;return(0,b.BX)("div",{className:"jsx-2063872532",children:[t,(0,b.tZ)(s(),{id:"2063872532",children:["div.jsx-2063872532{padding:var(--space-4) var(--space-8);color:var(--foreground-dimmest);font-size:var(--font-size-small);text-transform:uppercase;font-weight:var(--font-weight-medium);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-letter-spacing:1px;-moz-letter-spacing:1px;-ms-letter-spacing:1px;letter-spacing:1px;}"]})]})}function k(e){var t=e.title,n=e.iconUrl,r=e.filter,i=e.isNew,a=e.active;return(0,b.BX)("div",{className:"jsx-69768995 "+(d()("item",{active:a})||""),children:[n?(0,b.tZ)("div",{className:"jsx-69768995 item-icon",children:(0,b.tZ)(v.Z,{iconUrl:n,size:16,alt:t})}):null,(0,b.tZ)("div",{className:"jsx-69768995 item-text",children:r?(0,b.tZ)(m.fs,{source:t,match:r}):t}),i?(0,b.tZ)("div",{className:"jsx-69768995 new",children:"new"}):null,(0,b.tZ)(s(),{id:"69768995",children:[".item.jsx-69768995{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;font-size:var(--font-size-subhead-default);padding:var(--space-8);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;height:40px;overflow:hidden;border-radius:var(--border-radius-4);}",".item-icon.jsx-69768995{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:var(--space-8);}",".item-text.jsx-69768995{-webkit-flex:0 1 auto;-ms-flex:0 1 auto;flex:0 1 auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}",".active.jsx-69768995{background-color:var(--background-highest);}",".new.jsx-69768995{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;margin-left:4px;border-radius:var(--border-radius-4);font-size:var(--font-size-small);padding:2px 6px;color:var(--white);background-color:var(--accent-primary-default);}"]})]})}t.ZP=function(e){var t=c.useState(e.initialSelectedItem),n=(0,a.Z)(t,2),r=n[0],o=n[1],u="";e.initialSelectedItem&&(u=e.initialSelectedItem.key);var p=c.useState(u),v=(0,a.Z)(p,2),y=v[0],Z=v[1],j=(0,h.STr)({variables:{includeInterestedIn:!0},skip:!e.withMostUsed}).data,O=c.useCallback((function(e){Z(e)}),[Z]),E=c.useMemo((function(){return j&&j.currentUser&&j.currentUser.languages?j.currentUser.languages.slice(0,7).map((function(e){return f().get(e.key)})):[]}),[j]),_=c.useMemo((function(){if(y)return f().search(y).slice(0,5);var e=f().allSupportedByPopularity({includeAliases:!0});return[].concat((0,i.Z)(E),(0,i.Z)(e.filter((function(e){return!E.find((function(t){return t.key===e.key&&t.displayName===e.displayName}))}))))}),[y,E]),C=c.useMemo((function(){var t=(0,i.Z)(_);return e.filterResults?t.filter(e.filterResults):t}),[_,e.filterResults]),S=c.useMemo((function(){return r?"key"in r?{src:r.icon||void 0,alt:r.displayName}:void 0:null}),[r]),P=c.useRef(null);return c.useEffect((function(){e.autoFocus&&P.current&&!r&&P.current.focus()}),[e.autoFocus]),(0,b.tZ)(l.ZP,{id:"languageSelector",initialHighlightedIndex:0,defaultHighlightedIndex:0,initialSelectedItem:r,selectedItem:r,itemToString:function(e){return e?e.displayName:""},onInputValueChange:O,onOuterClick:function(e){return(0,e.closeMenu)()},onChange:function(t){t&&(P.current&&P.current.blur(),o(t),e.onSelect(t))},children:function(t){var n=t.getInputProps,r=t.getMenuProps,i=t.getItemProps,a=t.highlightedIndex,o=t.isOpen,l=t.openMenu,u=t.closeMenu,p=t.inputValue,f=t.clearSelection;return(0,b.BX)("div",{className:"jsx-2121670637 "+(d()("language-selector",{"is-open":o,"has-error":e.hasError})||""),children:[(0,b.BX)("div",{className:"jsx-2121670637 input-wrap",children:[S&&(0,b.tZ)("img",x(x({},S),{},{width:18,className:"jsx-2121670637 selected-icon"})),(0,b.tZ)("input",x(x({},n({ref:P,placeholder:e.placeholder||"Search for a language",disabled:e.disabled,onFocus:function(e){e.target.value&&e.target.select(),Z(""),l()},onBlur:e.onBlur,onChange:function(e){""===e.target.value&&f()}})),{},{className:"jsx-2121670637"})),(0,b.tZ)("div",{onClick:function(e){(0,g.track)(g.events.CREATION_FLOW_LANGUAGE_DROPDOWN_ARROW_CLICKED),o?u():P.current&&P.current.focus()},className:"jsx-2121670637 arrow-icon-wrap",children:(0,b.tZ)(m.e0,{color:"var(--foreground-default)",flipped:o})})]}),(0,b.tZ)("div",x(x({},r()),{},{className:"jsx-2121670637 menu-anchor",children:o&&(0,b.tZ)("div",{className:"jsx-2121670637 menu",children:C?(0,b.tZ)("ul",{className:"jsx-2121670637",children:C.map((function(e,t){var n=a===t;return(0,b.BX)(c.Fragment,{children:[!p&&0===t&&E.length?(0,b.tZ)(w,{children:"favorites"}):null,!p&&E.length&&t===E.length-1?(0,b.tZ)(w,{children:"all languages"}):null,(0,b.tZ)("li",x(x({},i({index:t,item:e})),{},{className:"jsx-2121670637",children:(0,b.tZ)(k,{isNew:Boolean(e.isNew),iconUrl:e.icon,title:e.displayName,active:n,filter:p||void 0})}))]},e.key+e.displayName)}))}):null})})),(0,b.tZ)(s(),{id:"2121670637",children:[".language-selector.jsx-2121670637{width:100%;position:relative;border-radius:var(--border-radius-4);}",".input-wrap.jsx-2121670637{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}",".selected-icon.jsx-2121670637{position:absolute;left:8px;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);pointer-events:none;}",".arrow-icon-wrap.jsx-2121670637{position:absolute;right:0;top:0;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 10px;width:30px;cursor:pointer;}",".arrow-icon-wrap.jsx-2121670637>svg{display:block;width:100%;height:auto;}","input.jsx-2121670637{-webkit-appearance:none;-moz-appearance:none;appearance:none;font-size:var(--font-size-subhead-default);display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;width:100%;outline:0 none;background-color:transparent;border:1px solid var(--background-highest);margin:0;color:inherit;padding:var(--space-8);border-radius:var(--border-radius-4);-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}","input[disabled].jsx-2121670637{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0.5;}","input.jsx-2121670637:focus{border-color:var(--accent-primary-default);}",".selected-icon.jsx-2121670637+input.jsx-2121670637{padding-left:32px;}",".has-error.jsx-2121670637 input.jsx-2121670637:not(:focus){border-color:var(--accent-negative-default);}",".is-open.jsx-2121670637 input.jsx-2121670637{border-bottom-right-radius:0;border-bottom-left-radius:0;border-bottom-color:transparent;}","ul.jsx-2121670637{list-style:none;}",".menu-anchor.jsx-2121670637{position:absolute;width:100%;height:0;bottom:0;z-index:1000;}",".menu.jsx-2121670637{position:absolute;top:0;left:0;width:100%;background-color:var(--background-default);border:1px solid var(--accent-primary-default);border-top:0 none;max-height:320px;overflow-y:auto;border-bottom-left-radius:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);padding:var(--space-8);z-index:9999;}","li.jsx-2121670637{cursor:pointer;}"]})]})}})}},78139:function(e,t,n){"use strict";n.d(t,{N:function(){return f}});var r=n(50029),i=n(87794),a=n.n(i),o=n(83868),s=n.n(o),c=n(93235),l=n.n(c),u=n(20159);function d(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=[function(e){if(!l()(e,{min:8,max:255}))return{message:"Must be at least 8 characters long"}},function(e){if(!/[A-Z]+/.test(e))return{message:"Must contain an uppercase character"}},function(e){if(!/[a-z]+/.test(e))return{message:"Must contain a lowercase character"}},function(e){if(!/[0-9]+/.test(e))return{message:"Must contain a number"}},function(e){if(!/.*[^0-9a-zA-Z\s].*/.test(e))return{message:"Must contain a special character"}}];t.Z={isValidEmail:function(){var e=(0,r.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",{message:"Must include valid email address"});case 2:if(s()(t)){e.next=4;break}return e.abrupt("return",{message:"Invalid email address"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),email:function(){var e=(0,r.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if(s()(t)){e.next=4;break}return e.abrupt("return",{message:"Invalid email address"});case 4:return e.next=6,(0,u.uz)("/data/user/exists",{email:t});case 6:if(n=e.sent,!n.exists){e.next=10;break}return e.abrupt("return",{message:"Email already in use"});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),username:function(){var e=(0,r.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if(l()(t,{min:2,max:15})){e.next=4;break}return e.abrupt("return",{message:"Your username must be between 2 and 15 characters"});case 4:if(t.match(/^[0-9a-zA-Z]+$/)){e.next=6;break}return e.abrupt("return",{message:"Your username can only contain alphanumeric characters (letters A-Z, numbers 0-9)"});case 6:return e.next=8,(0,u.uz)("/data/user/exists",{username:t});case 8:if(n=e.sent,!n.exists){e.next=12;break}return e.abrupt("return",{message:"Username is taken"});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),teamUsername:function(){var e=(0,r.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if(l()(t,{min:2,max:28})){e.next=4;break}return e.abrupt("return",{message:"Your username must be between 2 and 28 characters"});case 4:if(t.match(/^[0-9a-zA-Z-]+$/)){e.next=6;break}return e.abrupt("return",{message:"Username can only contain alphanumeric characters (letters A-Z, numbers 0-9) and hyphens."});case 6:if(!t.match(/^-.*|.*-$|.*--.*/)){e.next=8;break}return e.abrupt("return",{message:"A username can not start or end with hyphens, or contain two consecutive hyphens."});case 8:return e.next=10,(0,u.uz)("/data/user/exists",{username:t});case 10:if(n=e.sent,!n.exists){e.next=14;break}return e.abrupt("return",{message:"Username is taken"});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),password:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){if(!e)return null;var t,n=d(f);try{for(n.s();!(t=n.n()).done;){var r=(0,t.value)(e);if(r)return r}}catch(i){n.e(i)}finally{n.f()}})),school:function(e){return null}}},67035:function(e,t,n){"use strict";n.d(t,{rM:function(){return g},G5:function(){return v},h$:function(){return b}});var r,i=n(4730),a=n(71383),o=n(56869),s=n.n(o),c=n(2466),l=n.n(c),u=n(44119),d=n.n(u),p=n(14907),f=["config"];function h(e){if(Array.isArray(e))return e.map(h);if(e&&"object"===typeof e){var t={};for(var n in e)t[l()(n)]=e[n];return t}return"string"===typeof e?l()(e):e}var m=d()(r||(r=(0,a.Z)(["\n  mutation ReduxUpdateReplMutation($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        title\n        description\n        language\n        url\n        config {\n          isServer\n          isVnc\n        }\n        isPrivate\n        isStarred\n      }\n    }\n  }\n"])));function g(e,t){return function(n){n({type:"UPDATE_REPL_REQUEST",id:e,updates:t});var r=h(t);if(Array.isArray(r)||"string"===typeof r)throw new Error("Repl updates should be an object");var a=t.config,o=(0,i.Z)(t,f);a&&("undefined"!==typeof a.isServer&&(o.isServer=a.isServer),"undefined"!==typeof a.isVnc&&(o.isVnc=a.isVnc)),o.id=e,p.l.mutate({mutation:m,variables:{input:o}}).then((function(t){var r=t.data,i=t.errors;i&&i.length||!r.updateRepl||!r.updateRepl.repl?n({type:"UPDATE_REPL_FAILURE",id:e}):n({type:"UPDATE_REPL_SUCCESS",repl:r.updateRepl.repl})}))}}function v(e){return function(t){return t({type:"UPDATE_REPL_SUCCESS",repl:e})}}function b(e){return{type:"FETCH_REPL_SUCCESS",repl:s()(e)}}},49455:function(e,t,n){"use strict";var r=n(90116),i=n(59499),a=n(40408),o=n(94690);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}a.Z.register("repls",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_REPL_SUCCESS":return c(c({},e),{},{data:c(c({},e.data),{},(0,i.Z)({},t.repl.id,t.repl))});case"UPDATE_REPL_SUCCESS":return c(c({},e),{},{data:c(c({},e.data),{},(0,i.Z)({},t.repl.id,c(c({},e.data[t.repl.id]),t.repl)))});case"ENSURE_FILE":var n=(0,o.Uo)(t.path),a=(0,o.Xp)(t.path),s=e.data[n];return!s||s.fileNames.includes(a)?e:c(c({},e),{},{data:c(c({},e.data),{},(0,i.Z)({},n,c(c({},s),{},{fileNames:[].concat((0,r.Z)(s.fileNames),[a])})))});case"MOVE_FILE_SUCCESS":var l=(0,o.Uo)(t.to),u=e.data[l];if(!u||l!==(0,o.Uo)(t.from))return e;var d=(0,o.Xp)(t.from),p=(0,o.Xp)(t.to);return c(c({},e),{},{data:c(c({},e.data),{},(0,i.Z)({},l,c(c({},u),{},{fileNames:[].concat((0,r.Z)(u.fileNames.filter((function(e){return e!==d}))),[p])})))});case"DELETE_FILE_SUCCESS":var f=(0,o.Uo)(t.path),h=(0,o.Xp)(t.path),m=e.data[f];return m?c(c({},e),{},{data:c(c({},e.data),{},(0,i.Z)({},f,c(c({},m),{},{fileNames:m.fileNames.filter((function(e){return e!==h}))})))}):e}return e})),a.Z.register("replsByUrl",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_REPL_SUCCESS":case"FETCH_REPL_SUCCESS":return c(c({},e),{},(0,i.Z)({},t.repl.url,t.repl.id))}return e})),a.Z.register("replsByUser",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"FETCH_REPL_SUCCESS"===t.type?e[t.repl.userId]&&e[t.repl.userId].includes(t.repl.id)?e:c(c({},e),{},(0,i.Z)({},t.repl.userId,(e[t.repl.userId]||[]).concat([t.repl.id]))):e}))},56021:function(e,t,n){"use strict";n.d(t,{D:function(){return r},V:function(){return a}});var r,i=n(94690);function a(e){return e.endsWith(".md")?r.Markdown:(0,i.sL)(e)?r.Draw:(0,i.IQ)(e)?r.Pedit:(0,i.T3)(e)?r.Media:r.Code}!function(e){e.Media="Media",e.Code="Code",e.Markdown="Markdown",e.Draw="Draw",e.Pedit="Pedit"}(r||(r={}))},70693:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(65988),i=n.n(r),a=(n(67294),n(18952)),o=n(35944);function s(e){var t=e.label;return(0,o.BX)(a.Z,{size:"xsmall",children:[(0,o.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":t,className:"jsx-3345761734 help",children:"?"}),(0,o.tZ)(i(),{id:"3345761734",children:[".help.jsx-3345761734{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border:1px solid var(--background-higher);border-radius:100%;width:var(--space-16);height:var(--space-16);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;}"]})]})}},30959:function(e,t,n){"use strict";var r=n(17674),i=n(65988),a=n.n(i),o=n(67294),s=n(19463),c=n(35944);t.Z=function(e){var t=e.id,n=e.isOn,i=e.onChange,l=o.useState(t),u=(0,r.Z)(l,2),d=u[0],p=u[1];return o.useEffect((function(){p(t||Math.random().toString(36).split(".")[1])}),[t]),(0,c.BX)("label",{htmlFor:d,className:"jsx-2525248183 checkbox",children:[(0,c.tZ)("input",{id:d,onChange:i,type:"checkbox",checked:n,className:"jsx-2525248183"}),(0,c.tZ)("div",{className:"jsx-2525248183 overlay",children:(0,c.tZ)("div",{className:"jsx-2525248183 icon",children:(0,c.tZ)(s.Z,{})})}),(0,c.tZ)(a(),{id:"2525248183",children:[".checkbox.jsx-2525248183 input.jsx-2525248183{position:absolute;opacity:0;}",".overlay.jsx-2525248183{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;position:relative;height:16px;width:16px;background-color:var(--background-higher);border:1px solid var(--outline-dimmest);border-radius:var(--border-radius-4);-webkit-transition:background-color 0.2s;transition:background-color 0.2s;color:var(--foreground-dimmer);cursor:pointer;}",".overlay.jsx-2525248183:hover{background-color:var(--background-higher);}",".icon.jsx-2525248183{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;opacity:0;-webkit-transition:opacity 0.1s;transition:opacity 0.1s;}",".overlay.jsx-2525248183:hover .icon.jsx-2525248183{opacity:1;}",".overlay.jsx-2525248183:active{background-color:var(--background-highest);}",".checkbox.jsx-2525248183 input.jsx-2525248183:checked~.overlay.jsx-2525248183{background-color:var(--accent-primary-default);opacity:1;border-color:var(--accent-primary-default);color:var(--white);}",".checkbox.jsx-2525248183 input.jsx-2525248183:checked~.overlay.jsx-2525248183 .icon.jsx-2525248183{opacity:1;}"]})]})}},22094:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(59499),i=(n(67294),n(16082)),a=n(35944);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return(0,a.tZ)(i.Z,s(s({},e),{},{children:(0,a.tZ)("path",{d:"M19 12L5 12M5 12L12 5M5 12L12 19",strokeLinecap:"round",strokeLinejoin:"round"})}))}},84188:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(59499),i=(n(67294),n(16082)),a=n(35944);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return(0,a.tZ)(i.Z,s(s({},e),{},{children:(0,a.tZ)("path",{d:"M5 12L19 12M19 12L12 5M19 12L12 19",strokeLinecap:"round",strokeLinejoin:"round"})}))}},81758:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(59499),i=(n(67294),n(16082)),a=n(35944);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return(0,a.tZ)(i.Z,s(s({},e),{},{children:(0,a.tZ)("path",{d:"M12 7V12.3333L16 15M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z",strokeLinecap:"round",strokeLinejoin:"round"})}))}},14490:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(59499),i=(n(67294),n(16082)),a=n(35944);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return(0,a.BX)(i.Z,s(s({strokeWidth:2},e),{},{children:[(0,a.tZ)("path",{d:"M23 4v6h-6M1 20v-6h6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.tZ)("path",{d:"M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15",strokeLinecap:"round",strokeLinejoin:"round"})]}))}},94769:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(59499),i=(n(67294),n(16082)),a=n(35944);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return(0,a.tZ)(i.Z,s(s({},e),{},{children:(0,a.tZ)("path",{d:"M21.8008 7.99963C21.8008 7.99963 21.6055 6.62073 21.0039 6.01526C20.2422 5.21838 19.3906 5.21448 19 5.1676C16.2031 4.96448 12.0039 4.96448 12.0039 4.96448H11.9961C11.9961 4.96448 7.79687 4.96448 5 5.1676C4.60938 5.21448 3.75781 5.21838 2.99609 6.01526C2.39453 6.62073 2.20312 7.99963 2.20312 7.99963C2.20312 7.99963 2 9.62073 2 11.2379V12.7535C2 14.3707 2.19922 15.9918 2.19922 15.9918C2.19922 15.9918 2.39453 17.3707 2.99219 17.9762C3.75391 18.7731 4.75391 18.7457 5.19922 18.8317C6.80078 18.984 12 19.0309 12 19.0309C12 19.0309 16.2031 19.0231 19 18.8239C19.3906 18.777 20.2422 18.7731 21.0039 17.9762C21.6055 17.3707 21.8008 15.9918 21.8008 15.9918C21.8008 15.9918 22 14.3746 22 12.7535V11.2379C22 9.62073 21.8008 7.99963 21.8008 7.99963ZM9.93359 14.5934V8.97229L15.3359 11.7926L9.93359 14.5934Z",strokeLinecap:"round",strokeLinejoin:"round"})}))}},28146:function(e,t,n){"use strict";function r(e){var t=document.createElement("canvas"),n=t.getContext("2d");if(t.width=e.width,t.height=e.height,!n)throw new Error("failed to get canvas ctx");return{version:"1",width:e.width,height:e.height,palette:[[0,0,0,255],[255,255,255,255],[255,255,128,255],[255,128,255,255],[0,128,128,255],[128,0,255,255],[255,0,128,255],[0,255,255,255]],anims:{},frames:e.frames.map((function(r){var i=new window.ImageData(new Uint8ClampedArray(r.pixels),e.width,e.height);return n.putImageData(i,0,0),t.toDataURL()}))}}function i(e){return new Promise((function(t,n){var r=new window.Image;r.src=e,r.onload=function(){t(r)},r.onerror=n}))}function a(e){return new Promise((function(t,n){Promise.all(e.frames.map(i)).then((function(r){var i=document.createElement("canvas");i.width=e.width,i.height=e.height;var a=i.getContext("2d");if(a){var o=r.map((function(t){return a.drawImage(t,0,0),{pixels:Array.from(a.getImageData(0,0,e.width,e.height).data),width:e.width,height:e.height}}));t({frames:o,preview:e.frames[0],width:e.width,height:e.height})}else n(new Error("failed to get canvas ctx"))})).catch(n)}))}n.d(t,{C:function(){return r},u:function(){return a}})},75218:function(e,t,n){"use strict";var r=n(11163);t.Z=function(){return Boolean(r.default.query.embed||r.default.query.lite)}},91365:function(e,t,n){"use strict";var r=n(5152);t.Z=(0,r.default)((function(){return Promise.all([n.e(4885),n.e(8966),n.e(9710),n.e(3220),n.e(6063),n.e(1948)]).then(n.bind(n,73871)).then((function(e){return e.EditReplTemplate}))}),{loadableGenerated:{webpack:function(){return[73871]}}})},61927:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(59499),i=(n(67294),n(65988)),a=n.n(i),o=n(99996),s=n(35944),c=function(e){var t=e.type,n=void 0===t?"default":t,r=e.onClick,i=e.label,c=e.icon,l=e.lite,u=e.cyName,d="run"===n?{backgroundColor:"var(--accent-positive-dimmest)",backgroundColorHover:"var(--accent-positive-default)",backgroundColorActive:"var(--accent-positive-dimmer)",borderColorActive:"var(--accent-positive-stronger)",textColor:"var(--accent-positive-stronger)",textColorHover:"var(--white)"}:{backgroundColor:"var(--background-higher)",backgroundColorHover:"var(--background-highest)",backgroundColorActive:"var(--outline-dimmest)",borderColorActive:"var(--outline-default)",textColor:"var(--foreground-dimmer)",textColorHover:"var(--foreground-default)"},p=d.backgroundColor,f=d.backgroundColorHover,h=d.backgroundColorActive,m=d.borderColorActive,g=d.textColor,v=d.textColorHover;return(0,s.BX)("div",{role:"button","data-cy":u,onClick:r,className:a().dynamic([["3775718333",[p,p,g,f,v,m,h,h,o.j.tabletMax,l?"100px":"60px",l?"100px":"60px"]]])+" ws-header-cta",children:[(0,s.tZ)("div",{className:a().dynamic([["3775718333",[p,p,g,f,v,m,h,h,o.j.tabletMax,l?"100px":"60px",l?"100px":"60px"]]])+" ws-header-cta-icon",children:c}),(0,s.tZ)("span",{className:a().dynamic([["3775718333",[p,p,g,f,v,m,h,h,o.j.tabletMax,l?"100px":"60px",l?"100px":"60px"]]])+" ws-header-cta-label",children:i}),(0,s.tZ)(a(),{id:"3775718333",dynamic:[p,p,g,f,v,m,h,h,o.j.tabletMax,l?"100px":"60px",l?"100px":"60px"],children:[".ws-header-cta.__jsx-style-dynamic-selector{border:1px solid ".concat(p,";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:100%;width:100px;cursor:pointer;position:relative;-webkit-transition:color 0.2s,background-color 0.2s;transition:color 0.2s,background-color 0.2s;z-index:1;border-radius:var(--border-radius-8);background-color:").concat(p,";color:").concat(g,";font-weight:var(--font-weight-medium);font-size:var(--font-size-subhead-default);}"),".ws-header-cta.__jsx-style-dynamic-selector:hover{background-color:".concat(f,";color:").concat(v,";}"),".ws-header-cta.__jsx-style-dynamic-selector:active{border:1px solid ".concat(m,";background-color:").concat(h,";}"),".ws-header-cta.__jsx-style-dynamic-selector:focus{box-shadow:0 0 0 2px ".concat(h,";}"),".ws-header-cta-label.__jsx-style-dynamic-selector{vertical-align:middle;text-align:center;line-height:100%;text-transform:capitalize;}",".ws-header-cta-icon.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-right:var(--space-8);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}","@media screen and (max-width:".concat(o.j.tabletMax,"px){.ws-header-cta.__jsx-style-dynamic-selector{max-width:").concat(l?"100px":"60px",";min-width:").concat(l?"100px":"60px",";}.ws-header-cta-label.__jsx-style-dynamic-selector{display:none;}.ws-header-cta-icon.__jsx-style-dynamic-selector{margin-right:0;}}")]})]})},l=n(5699),u=n(33893),d=n(53777);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){var t=e.runState,n=e.onClick,i=e.lite,a=function(e){switch(e){case"loading":return{label:"working",icon:(0,s.tZ)(l.Z,{})};case"idle":return{label:"run",type:"run",icon:(0,s.tZ)(u.Z,{filled:!0})};case"running":return{label:"stop",icon:(0,s.tZ)(d.Z,{filled:!0})};case"stopping":return{label:"stopping",icon:(0,s.tZ)(l.Z,{})}}}(t),o="idle"===t?"language-page-run-button":void 0;return(0,s.tZ)(c,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({lite:i,onClick:n,cyName:o},a),a.label)}},8717:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return fy}});var r={};n.r(r),n.d(r,{Component:function(){return yr},reducer:function(){return br}});var i={};n.r(i),n.d(i,{Component:function(){return Br},createOtOpsForEdits:function(){return Pr},parseDotReplit:function(){return Sr}});var a={};n.r(a),n.d(a,{Component:function(){return Kr},receiver:function(){return Qr},reducer:function(){return Jr}});var o={};n.r(o),n.d(o,{Component:function(){return ti.Z}});var s={};n.r(s),n.d(s,{Component:function(){return Si},reducer:function(){return Pi}});var c={};n.r(c),n.d(c,{Component:function(){return Ji},receiver:function(){return ta},reducer:function(){return ea}});var l={};n.r(l),n.d(l,{Component:function(){return ia}});var u={};n.r(u),n.d(u,{Component:function(){return oa},reducer:function(){return la}});var d={};n.r(d),n.d(d,{Component:function(){return da}});var p={};n.r(p),n.d(p,{Component:function(){return ha}});var f={};n.r(f),n.d(f,{Component:function(){return ba}});var h={};n.r(h),n.d(h,{Component:function(){return wa}});var m={};n.r(m),n.d(m,{Component:function(){return ja}});var g={};n.r(g),n.d(g,{Component:function(){return _a}});var v={};n.r(v),n.d(v,{Component:function(){return Aa},reducer:function(){return Ra}});var b={};n.r(b),n.d(b,{Component:function(){return Ka},receiver:function(){return Ha},reducer:function(){return Va}});var y={};n.r(y),n.d(y,{Component:function(){return uo},default:function(){return ao},receiver:function(){return co},reducer:function(){return po}});var x={};n.r(x),n.d(x,{Component:function(){return Zo}});var w={};n.r(w),n.d(w,{Component:function(){return Do}});var k={};n.r(k),n.d(k,{Component:function(){return ws},receiver:function(){return xs},reducer:function(){return ys}});var Z={};n.r(Z),n.d(Z,{Component:function(){return ks}});var j={};n.r(j),n.d(j,{Component:function(){return Ps},default:function(){return Is},receiver:function(){return Is},reducer:function(){return Ns}});var O={};n.r(O),n.d(O,{Component:function(){return Ls},reducer:function(){return As}});var E={};n.r(E),n.d(E,{Component:function(){return zs},receiver:function(){return Fs}});var _={};n.r(_),n.d(_,{Component:function(){return Ks}});var C={};n.r(C),n.d(C,{Component:function(){return ac},receiver:function(){return rc}});var S={};n.r(S),n.d(S,{Component:function(){return fc},receiver:function(){return dc},reducer:function(){return mc}});var P={};n.r(P),n.d(P,{Component:function(){return Tc},receiver:function(){return Nc}});var N={};n.r(N),n.d(N,{Component:function(){return Ac}});var I={};n.r(I),n.d(I,{Component:function(){return dl}});var T={};n.r(T),n.d(T,{Component:function(){return Cd},receiver:function(){return Od}});var D={};n.r(D),n.d(D,{Component:function(){return Ud},receiver:function(){return Fd}});var R={};n.r(R),n.d(R,{Component:function(){return Nf}});var A={};n.r(A),n.d(A,{Component:function(){return If}});var L={};n.r(L),n.d(L,{Component:function(){return ph}});var B={};n.r(B),n.d(B,{Component:function(){return am}});var U={};n.r(U),n.d(U,{Component:function(){return um}});var M={};n.r(M),n.d(M,{Component:function(){return eg},receiver:function(){return Jm}});var F={};n.r(F),n.d(F,{Component:function(){return jg}});var X={};n.r(X),n.d(X,{Component:function(){return Cg}});var z={};n.r(z),n.d(z,{Component:function(){return tv}});var V={};n.r(V),n.d(V,{Component:function(){return av}});var G={};n.r(G),n.d(G,{Component:function(){return sv}});var H={};n.r(H),n.d(H,{Component:function(){return dv}});var W={};n.r(W),n.d(W,{receiver:function(){return Wv},reducer:function(){return qv}});var K={};n.r(K),n.d(K,{Component:function(){return ib},receiver:function(){return nb}});var q={};n.r(q),n.d(q,{receiver:function(){return ob},reducer:function(){return ab}});var Y={};n.r(Y),n.d(Y,{receiver:function(){return ub},reducer:function(){return lb}});var Q={};n.r(Q),n.d(Q,{Component:function(){return pb}});var J=n(17674),$=n(50029),ee=n(59499),te=n(92777),ne=n(82262),re=n(81531),ie=n(63553),ae=n(37247),oe=n(65988),se=n.n(oe),ce=n(87794),le=n.n(ce);function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(40408).Z.register("replEnvironment",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isForking:!1,activeReplId:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACTIVE_REPL_ID":return de(de({},e),{},{activeReplId:t.replId});case"SET_IS_FORKING":return de(de({},e),{},{isForking:t.isForking});default:return e}}));n(49455);var pe=n(67294),fe=n(63805),he=n(8679),me=n.n(he),ge=n(14890),ve=n(11163),be=n(90682);function ye(e){return{type:"SET_ACTIVE_REPL_ID",replId:e.replId}}var xe=n(41038),we=n(79453),ke=n.n(we),Ze=n(99996),je=n(5318),Oe=n(18952),Ee=n(41850),_e=n(98883),Ce=n(5884),Se=n(50988),Pe=n(35237),Ne=n(91462),Ie=n(35944);function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Re=function(e){var t,n,r=e.isVisible,i=e.children,a=e.onDismiss,o=e.tooltipProps,s=(0,Ce.Z)(),c=(0,Se.CHr)({variables:{replId:s}}),l=c.data,u=c.loading,d="io-tests-popover-dismissed-".concat(s),p=Pe.Z.get(d);if(!l||u)return null;var f="Repl"===(null===l||void 0===l||null===(t=l.repl)||void 0===t?void 0:t.__typename)?l.repl:null;if(!f)return null;var h=f.isProjectFork,m=f.ioTests,g=f.owner,v=null!==(n=f.unitTests)&&void 0!==n&&n.tests?f.unitTests.tests:[],b="Team"===(null===g||void 0===g?void 0:g.__typename)&&(null===g||void 0===g?void 0:g.isAdmin),y=m.length>0||v.length>0,x=!b&&h&&!p&&y&&r;return(0,Ie.tZ)("div",De(De({css:[Ne.l0.display.flex,Ne.l0.width("100%"),Ne.l0.height("100%"),Ne.l0.center,"",""]},x?{}:o),{},{children:(0,Ie.BX)(_e.Z,{isOpen:x,placement:"right",showArrow:!0,borderColor:"var(--accent-purple-default)",children:[i,(0,Ie.BX)(Ee.gC,{spacing:1,align:"stretch",children:[m.length>0?(0,Ie.BX)(Oe.Z,{size:"small",children:["This project has ",(0,Ie.tZ)("strong",{children:m.length})," input/output"," ",m.length>1?"tests":"test","."]}):(0,Ie.BX)(Oe.Z,{size:"small",children:["This project has ",(0,Ie.tZ)("strong",{children:v.length})," unit"," ",v.length>1?"tests":"test","."]}),(0,Ie.tZ)(Oe.Z,{size:"small",children:"Run tests to check your work!"}),(0,Ie.tZ)(Ee.Ug,{justify:"end",children:(0,Ie.tZ)(je.Z,{onClick:function(e){e.stopPropagation(),Pe.Z.set(d,!0),a()},children:"dismiss"})})]})]})}))},Ae=n(16082);function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ue(e){return(0,Ie.tZ)(Ae.Z,Be(Be({},e),{},{children:(0,Ie.tZ)("path",{d:"M3 5V19C3 20.66 7 22 12 22C17 22 21 20.66 21 19V5M3 5C3 6.65685 7.02944 8 12 8C16.9706 8 21 6.65685 21 5M3 5C3 3.34315 7.02944 2 12 2C16.9706 2 21 3.34315 21 5M21 12C21 13.66 17 15 12 15C7 15 3 13.66 3 12",strokeLinecap:"round",strokeLinejoin:"round"})}))}var Me=n(8674),Fe=n(97498),Xe=n(36732),ze=n(90274);function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var He=function(e){var t=e.isVisible,n=e.children,r=e.onDismiss,i=e.tooltipProps,a=(0,Ce.Z)(),o=(0,Fe.Z)().fs,s=(0,ze.Z)("workspace","enveditorintro"),c=s.shouldDisplay,l=s.register,u=s.dismiss;return pe.useEffect((function(){var e=!1,n=function(){var n=(0,$.Z)(le().mark((function n(){var r;return le().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.readFile(".env");case 2:if(r=n.sent,!e){n.next=5;break}return n.abrupt("return");case 5:if(!r.error){n.next=7;break}return n.abrupt("return");case 7:t&&l();case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return n(),function(){e=!0}}),[a,o,t,l]),(0,Ie.tZ)("div",Ge(Ge({css:[Ne.l0.display.flex,Ne.l0.width("100%"),Ne.l0.height("100%"),Ne.l0.center,"",""]},c?{}:i),{},{children:(0,Ie.BX)(_e.Z,{isOpen:c,placement:"right",showArrow:!0,children:[n,(0,Ie.BX)(Ee.gC,{spacing:1,align:"stretch",children:[(0,Ie.tZ)(Xe.Z,{level:4,children:"Looking for your .env file?"}),(0,Ie.tZ)(Oe.Z,{size:"small",children:"Your environment moved here, click on the icon to the left to check it out and edit your environment."}),(0,Ie.tZ)(Ee.Ug,{justify:"end",children:(0,Ie.tZ)(je.Z,{color:"primary",onClick:function(e){e.stopPropagation(),u(),r()},children:"dismiss"})})]})]})}))},We=n(30945);function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ye(e){return(0,Ie.tZ)(Ae.Z,qe(qe({},e),{},{children:(0,Ie.tZ)("path",{d:"M22.0005 12.4999V8.50012H20.001V6.49987H18V5.50012H20.001V2.50012H17.001V4.49962H15V6.49987H9V4.49962H7.0005V2.50012H4.0005V5.50012H6V6.49987H4.0005V8.50012H2.001V12.4999H0V19.4996H3V15.4999H4.0005V19.4996H6V21.4999H11.001V18.4999H7.0005V17.5001H17.001V18.4999H13.0005V21.4999H18V19.4996H20.001V15.4999H21V19.4996H24V12.4999H22.0005ZM9 11.5001H6V8.50012H9V11.5001ZM18 11.5001H15V8.50012H18V11.5001Z",fill:"currentColor",stroke:"none"})}))}var Qe=n(94769),Je=n(11544);function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tt(e){var t=e.children,n=e.isVisible,r=e.onDismiss,i=e.tooltipProps,a=(0,ze.Z)("announcement","youtube-in-the-ws"),o=a.shouldDisplay,s=a.register,c=a.dismiss,l=pe.useState(!1),u=(0,J.Z)(l,2),d=u[0],p=u[1];pe.useEffect((function(){s()}),[s]);var f=o&&n;return(0,Ie.BX)("div",et(et({},i),{},{className:"jsx-3674292327 "+(i&&null!=i.className&&i.className||"wrapper"),children:[(0,Ie.BX)(_e.Z,{onClickOutside:function(){return r()},placement:"right",isOpen:f,showArrow:!0,borderColor:"var(--accent-negative-default)",children:[t,(0,Ie.tZ)("div",{className:"jsx-3674292327 youtube-popover",children:(0,Ie.BX)(Ee.gC,{spacing:2,align:"stretch",children:[(0,Ie.BX)(Ee.Ug,{spacing:1,children:[(0,Ie.tZ)(Je.Z,{color:"var(--accent-negative-default)"}),(0,Ie.tZ)(Xe.Z,{level:5,children:"Code with YouTube tutorials"})]}),(0,Ie.tZ)(Oe.Z,{children:"Choose from a list of recommended tutorials to code along to"}),(0,Ie.tZ)(Ee.Ug,{spacing:1,justify:"end",children:(0,Ie.tZ)(je.Z,{loading:d,onClick:function(){p(!0),r(),c()},children:"Got it"})})]})})]}),(0,Ie.tZ)(se(),{id:"3674292327",children:[".wrapper.jsx-3674292327{width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".youtube-popover.jsx-3674292327{border:1px solid var(--accent-negative-default);border-radius:var(--border-radius-4);background:var(--background-root);padding:var(--space-16);max-width:300px;position:relative;pointer-events:auto;}"]})]}))}function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function it(e){return(0,Ie.tZ)(Ae.Z,rt(rt({},e),{},{children:(0,Ie.tZ)("path",{d:"M16 6C16 7.65685 17.3431 9 19 9C20.6569 9 22 7.65685 22 6C22 4.34315 20.6569 3 19 3C17.3431 3 16 4.34315 16 6ZM16 6L12 6C10.8954 6 10 6.89543 10 8L10 16C10 17.1046 10.8954 18 12 18L16 18M16 18C16 19.6569 17.3431 21 19 21C20.6569 21 22 19.6569 22 18C22 16.3431 20.6569 15 19 15C17.3431 15 16 16.3431 16 18ZM2 12L10 12",strokeLinecap:"round",strokeLinejoin:"round"})}))}var at=n(42361),ot=n(17964),st=n(19463),ct=n(75107),lt=n(43340);function ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pt(e){var t,n=e.lang,r=e.lite,i=e.outputonly,a=e.sharing,o=e.isMobile,s=e.preferences,c=e.isServer,l=e.isVnc,u=e.inspector,d=e.gitRemoteUrl,p=e.showShareToTalkPromo,f=e.shouldShowMPInviteTour,h=e.isWindowingEnabled,m=e.hasAudioContext,g=e.preventFocusOnTerminal,v=e.isCluiCurlEnabled,b=e.shouldLoadAdminPanel,y=e.shouldShowEducationPane,x=e.shouldShowAutograderPane,w=e.shouldShowUnitTestPane,k=e.isLoggedIn,Z=e.shouldLoadYoutubePane,j=e.shouldUseDevtoolsWebview,O=ke().get(n),E="webview",_=!r;if("react_native"===O.key)return{language:n,layout:{floating:[],tiling:{type:"split",fixed:!0,leftSize:r?48:68,hideHandle:!0,stacked:!0,left:{type:"pane",pud:"header"},right:{type:"pane",pud:"output"}}},files:[],plugins:{header:{type:"header",title:"header",state:{lite:r,showShareToTalkPromo:p,shouldShowMPInviteTour:f}},output:{type:"snack",title:"console"},infoprovider:{type:"infoprovider",title:"infoprovider"}},preferences:s,activeFile:void 0};var C={fileviewercontroller:{type:"fileviewercontroller"},analytics:{type:"analytics"},replupdater:{type:"replupdater"},replforker:{type:"replforker"},packager:{type:"packager",title:"packages",isClosable:h,isDraggable:h},header:{type:"header",title:"header",state:{lite:r,showShareToTalkPromo:p,shouldShowMPInviteTour:f}},fileheader:{type:"fileheader",title:"fileheader"},infoprovider:{type:"infoprovider",title:"infoprovider"},markdownviewer:{type:"markdownviewer",title:"markdown"},instructionsviewer2:{type:"instructionsviewer2",title:"instructions"},hackerupgradeprompt:{type:"hackerupgradeprompt"},browsernotifications:{type:"browsernotifications"},services:{type:"services"},commandbar:{type:"commandbar"},fsreduxbridge:{type:"fsreduxbridge"},codemirror:{type:"codemirror"},mediaview:{type:"mediaview"},pedit:{type:"pedit"},draw:{type:"draw"},blank:{type:"blank"}};i&&(delete C.fileviewercontroller,delete C.commandbar),m&&(C=dt(dt({},C),{},{audio:{type:"audio"}})),_&&(C=dt(dt({},C),{},{annotations:{type:"annotations"}})),v&&(C=dt(dt({},C),{},{cluicurl:{type:"cluicurl",title:"HTTP"}})),u&&(C=dt(dt({},C),{},{inspector:{type:"inspector",title:"inspector"}})),b&&(C=dt(dt({},C),{},{adminpanel:{type:"adminpanel",title:"adminpanel"}}));var S,P=[];y&&(P.push({pud:"educationpane",pluginType:"educationpane",tooltip:"Teams for Education",icon:lt.Z}),C.educationpane={type:"educationpane",title:"Education Pane",isClosable:h,isDraggable:h}),ke().supportsGit(n)&&!a&&(P.push({pud:"git",pluginType:"git",tooltip:"Version control",icon:it}),C.git={type:"git",title:"git",isClosable:h,isDraggable:h,state:{gitRemoteUrl:d}}),ke().supportsDAP(n)&&(P.push({pud:"debugpanel",pluginType:"debugpanel",tooltip:"Debugger",icon:at.Z}),C.debugpanel={type:"debugpanel",title:"debugpanel",isClosable:h,isDraggable:h}),C.config={type:"config",title:"config",isClosable:!0,isDraggable:!1},C.lock={type:"lock",title:"lock"},(ke().supportsPackager3(n)||"html"===n||"html_beta"===n)&&P.push({pud:"packager",icon:Me.Z,pluginType:"packager",tooltip:"Packages"}),a||"replbox"===O.engine||(C.enveditor={type:"enveditor",title:"enveditor"},P.push({pud:"enveditor",pluginType:"enveditor",tooltip:"Secrets (Environment variables)",icon:We.Z,iconWrapper:He})),r||(C=dt(dt({},C),{},{prefs:{type:"preferences",title:"preferences",isClosable:h,isDraggable:h},help:{type:"help",title:"help",isClosable:h,isDraggable:h},floatingrun:{type:"floatingrun",title:"floatingrun",state:{maxWidthBreakpoint:Ze.j.mobileMax+100}}})),S=dt(dt({},S=ke().usesTerminal2(n)?{type:"terminal2",title:"console",state:{kind:ke().usesInterpreter(n)?"interp":"output",lite:r,preventFocus:g}}:{type:"goval"!==O.engine?"replboxconsole":"console",title:"console"}),{},{isDraggable:h}),C=j&&"html"===O.key?dt(dt({},C),{},(0,ee.Z)({},E,{type:"webview",title:"output",isDraggable:h,state:{canBeClosed:!1}})):ke().hasReplboxWebview(O.key)&&!ke().hasReplboxUrlBar(O.key)?dt(dt({},C),{},{output:{type:"replboxdisplay2",title:"output"},console:{type:"replboxconsole",title:"console"}}):ke().hasReplboxWebview(O.key)?dt(dt({},C),{},{output:{type:"replboxdisplay2",title:"output",state:{canBeClosed:!1}},console:{type:"replboxconsole",title:"console"}}):dt(dt({},C),{},{output:S}),!r&&k&&P.push({pud:"prefs",pluginType:"preferences",tooltip:"Settings",icon:ot.Z}),"replbox"!==O.engine&&(P.push({pud:"database",icon:Ue,pluginType:"database",tooltip:"Database"}),C.database={type:"database",title:"Database",isClosable:h,isDraggable:h}),x?(P.push({pud:"autograder",icon:st.Z,pluginType:"autograder",tooltip:"Tests",iconWrapper:Re}),C.autograder={type:"autograder",title:"Autograder",isClosable:h,isDraggable:h}):w&&(P.push({pud:"unittests",icon:st.Z,pluginType:"unittests",tooltip:"Unit tests"}),C.unittests={type:"unittests",title:"unittests",isClosable:h,isDraggable:h});var N=ke().supportsFiles(O.key)||"web_project"===O.key||"kaboom"===O.key||"html"===O.key,I="filetree";C=dt(dt({},C),{},(0,ee.Z)({},I,{type:I,title:"filetree",isClosable:h,isDraggable:h,state:void 0})),Z&&(C.youtube={type:"youtube",title:"Youtube",isClosable:h,isDraggable:h},C.youtubepreview={type:"youtubepreview",title:"Youtube Preview",isClosable:h,isDraggable:h},P.push({pud:"youtube",pluginType:"youtube",tooltip:"Youtube",icon:Qe.Z,iconWrapper:tt})),b&&P.push({pud:"adminpanel",pluginType:"adminpanel",tooltip:"Crosis Logs",svg:"Alien"}),N&&P.unshift({pud:I,pluginType:I,tooltip:"Files",icon:ct.Z}),"kaboom"===O.key&&(P.unshift({pud:"kaboombar",pluginType:"kaboombar",tooltip:"Kaboom",icon:Ye}),C.kaboombar={type:"kaboombar",title:"kaboombar",isClosable:h,isDraggable:h});var T,D={type:"pane",pud:"blank"},R=[{type:"pane",pud:"output"},{type:"pane",pud:"shell"}];if("web_project"===O.key||"python_turtle"===O.key||"html"===O.key||"kaboom"===O.key||"basic"===O.key)if(j&&"html"===O.key)T={type:"tabs",active:0,tabs:[{type:"pane",pud:E},{type:"pane",pud:"shell"}]};else if(o)T={type:"tabs",active:0,tabs:[{type:"pane",pud:"output"},{type:"pane",pud:"console"}]};else{T={type:"split",stacked:!s.isLayoutStacked,position:65,left:{type:"pane",pud:"output"},right:{type:"tabs",active:0,tabs:[{type:"pane",pud:"console"},{type:"pane",pud:"shell"}]}}}else if(c&&a){var A={type:"tabs",active:0,tabs:R};C=dt(dt({},C),{},(0,ee.Z)({},E,{type:"webview",title:"webview",isDraggable:h,state:{canBeClosed:!0}})),T={type:"split",stacked:!(o||r||s.isLayoutStacked),fixed:!1,left:{type:"pane",pud:E},right:A}}else if(l){t="vnc",C=dt(dt({},C),{},(0,ee.Z)({},t,{type:"vnc",title:"vnc",state:{}}));var L={type:"tabs",active:0,tabs:R};T={type:"split",stacked:!(o||r||s.isLayoutStacked),fixed:!1,left:{type:"pane",pud:t},right:L}}else T={type:"tabs",active:0,tabs:R};var B,U,M=i?T:{type:"split",stacked:o||r||s.isLayoutStacked,fixed:!1,left:{type:"split",stacked:!0,leftSize:32,left:{type:"pane",pud:"fileheader"},right:D},right:T};(h&&(M=i?T:{type:"split",left:dt(dt({},D),{},{header:{type:"pane",pud:"fileheader",height:32}}),right:T}),!P.length||i)?B=M:(o||!N||r||(U="filetree"),"kaboom"===O.key&&(U="kaboombar"),y&&(U="educationpane"),C=dt(dt({},C),{},{sidenav:{type:"sidenav",title:"side navigation",state:{navItems:P,activePanePuds:U?[U]:[]}}}),B={type:"split",stacked:!1,leftSize:50,left:{type:"pane",pud:"sidenav"},right:U?{type:"split",stacked:!1,position:15,left:{type:"pane",pud:U},right:M}:M});var F={floating:r?[]:["floatingrun","help","hackerupgradeprompt","browsernotifications","commandbar"],tiling:{type:"split",leftSize:r?48:68,stacked:!0,left:{type:"pane",pud:"header"},right:u?{type:"split",left:B,right:{type:"pane",pud:"inspector"}}:B}};return F.floating.push("desktoplayout"),F.floating.push("analytics"),F.floating.push("fileviewercontroller"),F.floating.push("fsreduxbridge"),m&&!r&&F.floating.push("audio"),_&&F.floating.push("annotations"),C.bsoder={type:"bsoder",title:"bsoder"},C.desktoplayout={type:"desktoplayout"},C.shell={type:"shell",title:"shell"},C.loadingresolver={type:"loadingresolver",title:"loadingresolver"},C.goval={type:"goval",title:"goval",state:{isOwner:!a,lite:r}},C.deeplink={type:"deeplink"},F.floating.push("deeplink"),{language:n,layout:F,files:[],plugins:C,preferences:s,activeFile:void 0,editorPud:undefined,webviewPud:E,vncPud:t,sideNavItems:P}}var ft=n(78135),ht=n(20159),mt=n(86646),gt=n(67035),vt=n(15098),bt=n(19484),yt=n(12069),xt=n(40802),wt=n(54144),kt=n(84470),Zt=n(86374),jt=n(8753),Ot=n(20278);function Et(e){var t={};return e.lite&&(t.lite=e.lite),e.classroom_template&&(t.classroom_template=e.classroom_template),e.outputonly&&(t.outputonly=e.outputonly),e.fileName&&(t.fileName=e.fileName),e.debug&&(t.debug=e.debug),e.inspector&&(t.inspector=e.inspector),e.fallback&&(t.fallback=e.fallback),e.vcr&&(t.vcr=e.vcr),t}var _t=n(78298),Ct=n(4962),St=n(39663),Pt=n(46327),Nt=n(94672),It=n(49024),Tt=n(2781),Dt=n(41664),Rt=n(78134),At=n(70117),Lt=n(2736);function Bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mt(e){function t(){e.canClick&&e.onClick&&e.onClick({username:e.username,id:e.id})}return(0,Ie.tZ)(It.ZP,{placement:"bottom",tooltip:"Observe ".concat(e.username),children:function(n,r){return(0,Ie.tZ)(Lt.Z,Ut(Ut({},n),{},{innerRef:r,onClick:t,children:(0,Ie.tZ)(At.Z,{size:e.size||35,src:e.image,alt:"avatar for ".concat(e.username),css:[e.canClick&&Ne.l0.cursor.pointer,{transition:"all 0.2s ease",border:"2px solid "+e.color,"&:hover":{filter:"brightness(95%)",boxShadow:Ne.TV.shadow1}},""]})}))}})}var Ft=n(94184),Xt=n.n(Ft),zt=n(59259),Vt=n(13261);function Gt(){var e=(0,Fe.Z)(),t=e.session,n=e.presence;return pe.useCallback((function(e){var r=e.username,i=e.id,a=n.getFollowedUser();if((null===a||void 0===a?void 0:a.username)!==r){n.followUser(r);var o=n.getActiveFileForUser(i),s=t.getActiveFile();o&&o!==s&&t.openFile(o)}else n.unfollowUser()}),[t,n])}function Ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kt(e){var t=e.hideModal,n=e.onUserClick,r=e.isOpen,i=(0,Ce.Z)(),a=(0,Fe.Z)().presence,o=(0,Rt.Z)({presence:a});return(0,Ie.tZ)(zt.Z,{isOpen:r,onRequestClose:t,children:(0,Ie.tZ)(Yt,{replId:i,onUserClick:n,activeUsers:o,hideModal:t})})}function qt(e,t){return t.some((function(t){return t.id===e}))}function Yt(e){var t=e.replId,n=e.activeUsers,r=e.onUserClick,i=e.hideModal,a=(0,Se.Flq)({variables:{replId:t}}),o=a.data,s=a.loading,c=a.error;if(s)return(0,Ie.BX)("div",{className:"jsx-1405322551 user-list-loader",children:[(0,Ie.tZ)(Vt.Z,{style:{width:"50px"}}),(0,Ie.tZ)(se(),{id:"1405322551",children:[".user-list-loader.jsx-1405322551{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;min-height:200px;}"]})]});if(c)return(0,Ie.tZ)("div",{children:c.message});if("Repl"===(null===o||void 0===o?void 0:o.repl.__typename)){var l=o.repl,u=o.currentUser,d=l.user,p=d&&n.find((function(e){return e.username===d.username})),f=l.permissions.filter((function(e){var t=e.user;return t&&qt(t.id,n)})),h=l.permissions.filter((function(e){var t=e.user;return t&&!qt(t.id,n)}));return(0,Ie.BX)("div",{className:"jsx-3569279364 user-list-modal",children:[(0,Ie.tZ)(Xe.Z,{level:2,children:"Multiplayers"}),(0,Ie.tZ)(Xe.Z,{level:5,children:"Users can interact with this repl in real time."}),(0,Ie.tZ)("div",{className:"jsx-3569279364 user-list",children:(0,Ie.BX)("div",{className:"jsx-3569279364",children:[d?(0,Ie.tZ)(Jt,Wt(Wt({},d),{},{onClick:r,isOnline:Boolean(p),color:p?p.color:"transparent",isOwner:!0,hideModal:i,canClickAvatar:Boolean(p)&&d.id!==(null===u||void 0===u?void 0:u.id),type:Se.aQH.Rw})):null,f.map((function(e){var t=e.type,a=e.user;if(!a)throw new Error("Expected user");var o=n.find((function(e){return e.username===a.username}));if(!o)throw new Error("Expected user online");var s=a.id!==(null===u||void 0===u?void 0:u.id);return(0,Ie.tZ)(Jt,Wt(Wt({onClick:r,type:t},a),{},{isOnline:!0,canClickAvatar:s,color:o.color,hideModal:i,isOwner:!1}),"chat-user-list-".concat(a.username))})),h.map((function(e){var t=e.type,n=e.user;if(!n)throw new Error("Expected user");return(0,Ie.tZ)(Jt,Wt(Wt({onClick:r,type:t},n),{},{canClickAvatar:!1,isOnline:!1,color:"transparent",hideModal:i,isOwner:!1}),"chat-user-list-".concat(n.username))}))]})}),(0,Ie.tZ)(se(),{id:"3569279364",children:[".user-list-modal.jsx-3569279364{color:var(--foreground-default);padding:var(--space-32);display:grid;grid-template-rows:auto auto 1fr;grid-gap:var(--space-16);}",".user-list.jsx-3569279364{max-height:330px;overflow-y:auto;}"]})]})}return"ReplRedirect"===(null===o||void 0===o?void 0:o.repl.__typename)?(0,Ie.BX)("div",{children:["This repl has moved to"," ",(0,Ie.tZ)("a",{href:o.repl.replUrl,children:o.repl.replUrl})]}):"SubscriptionExpiredError"===(null===o||void 0===o?void 0:o.repl.__typename)?(0,Ie.BX)("div",{children:["Your subscription has expired.",(0,Ie.tZ)("a",{href:"/pricing",children:"Upgrade here"})]}):null}var Qt={r:"read only",rw:"can edit"};function Jt(e){var t=e.type,n=e.id,r=e.username,i=e.image,a=e.isOnline,o=e.isOwner,s=e.color,c=e.onClick,l=e.hideModal,u=e.canClickAvatar,d=Gt();return(0,Ie.BX)("div",{className:se().dynamic([["1309780427",[u?"pointer":"auto",s]]])+" "+(Xt()("user-list-item-wrapper",{online:a})||""),children:[(0,Ie.tZ)("div",{onClick:function(){u&&(d({username:r,id:n}),l())},className:se().dynamic([["1309780427",[u?"pointer":"auto",s]]])+" image",children:(0,Ie.tZ)("img",{src:i,className:se().dynamic([["1309780427",[u?"pointer":"auto",s]]])+" "+((a?"":"offline")||"")})}),(0,Ie.BX)("div",{className:se().dynamic([["1309780427",[u?"pointer":"auto",s]]])+" info",children:[(0,Ie.BX)("div",{className:se().dynamic([["1309780427",[u?"pointer":"auto",s]]]),children:[(0,Ie.BX)("a",{href:"/@".concat(r),target:"_blank",onClick:c,className:se().dynamic([["1309780427",[u?"pointer":"auto",s]]]),children:["@",r]}),!a&&" (offline)"]}),(0,Ie.tZ)("div",{className:se().dynamic([["1309780427",[u?"pointer":"auto",s]]]),children:o?"owner":Qt[t]})]}),(0,Ie.tZ)(se(),{id:"1309780427",dynamic:[u?"pointer":"auto",s],children:[".user-list-item-wrapper.__jsx-style-dynamic-selector{padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-order:1;-ms-flex-order:1;order:1;}",".image.__jsx-style-dynamic-selector{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;cursor:".concat(u?"pointer":"auto",";}"),"img.__jsx-style-dynamic-selector{width:40px;height:40px;border-radius:20px;border:3px solid ".concat(s,";background:white;object-fit:cover;}"),".info.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-left:var(--space-8);}","img.offline.__jsx-style-dynamic-selector{-webkit-filter:grayscale(100%);filter:grayscale(100%);}",".user-list-item-wrapper.online.__jsx-style-dynamic-selector{-webkit-order:0;-ms-flex-order:0;order:0;}"]})]})}function $t(e){var t=pe.useState(!1),n=(0,J.Z)(t,2),r=n[0],i=n[1],a=(0,Ce.Z)(),o=Gt(),s=(0,Se.qC4)({variables:{ids:e.users.map((function(e){return e.id}))},ssr:!1,skip:!e.users.length}),c=s.data,l=s.loading,u=s.error,d=e.users.reduce((function(e,t){return e[t.id]=t.color,e}),{});if(l)return null;if(u)return null;if(null===c||void 0===c||!c.currentUser)return null;var p=c.usersByIds,f=c.currentUser,h=p.filter((function(e){return e.id!==f.id})),m=h.length-3;return(0,Ie.BX)("div",{className:se().dynamic([["3417583604",[Ze.j.mobileMax+100]]])+" multiplayer-users-container",children:[(0,Ie.BX)(Ee.Ug,{wrap:"nowrap",spacing:1,align:"center",children:[m>0?(0,Ie.tZ)("div",{className:se().dynamic([["3417583604",[Ze.j.mobileMax+100]]]),children:(0,Ie.BX)(je.Z,{filled:!1,border:!1,onClick:function(){return i(!0)},children:["+ ",m]})}):null,h.slice(0,3).map((function(e){return(0,Ie.tZ)("div",{className:se().dynamic([["3417583604",[Ze.j.mobileMax+100]]]),children:(0,Ie.tZ)(Mt,{id:e.id,username:e.username,image:e.image,color:d[e.id],onClick:o,canClick:!0})},e.id)})),(0,Ie.tZ)(Kt,{isOpen:r,hideModal:function(){return i(!1)},onUserClick:function(){(0,Zt.track)(Zt.events.MP2_VISITED_PROFILE,{replId:a,from:"OnlineUsers"})}})]}),(0,Ie.tZ)(se(),{id:"3417583604",dynamic:[Ze.j.mobileMax+100],children:[".multiplayer-users-container.__jsx-style-dynamic-selector{padding:0 var(--space-8);}","@media only screen and (max-width:".concat(Ze.j.mobileMax+100,"px){.multiplayer-users-container.__jsx-style-dynamic-selector{display:none;}}")]})]})}var en=n(439),tn=n(9298),nn=n(90116),rn=n(17130),an=n(19335),on=n(29060),sn=n(3316),cn=n(34399),ln=n(85776),un=n(42177),dn=n(54585),pn=n(31038),fn=n(88942),hn=n(74501);function mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vn(e){var t=e.onSubmit,n=e.existingUsernames,r=e.isDisabled,i=e.onChange,a=e.placeholder,o=pe.useState(""),s=(0,J.Z)(o,2),c=s[0],l=s[1],u=!!c.match(/.+@.+/),d=(0,hn.Z)(c.trim().replace(/^@/,""),250),p=(0,Se.skk)({skip:!d||u,variables:{query:d,limit:6}}),f=p.data,h=p.loading,m=p.error,g=(0,sn.Z)().showError;pe.useEffect((function(){m&&g(m.message)}),[m,g]);var v=null===f||void 0===f?void 0:f.usernameSearch;return(0,Ie.BX)("form",{onSubmit:function(e){e.preventDefault(),t(c),l("")},className:"jsx-1273575788",children:[(0,Ie.BX)("div",{className:"jsx-1273575788 form-content",children:[(0,Ie.tZ)(fn.ZP,{onChange:function(e){e&&l(e.username)},itemToString:function(e){return(null===e||void 0===e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var r=e.getInputProps,o=e.getItemProps,s=e.getMenuProps,u=e.isOpen,d=e.highlightedIndex;return(0,Ie.BX)("div",{className:"jsx-1273575788 dropdown",children:[(0,Ie.tZ)(un.ZP,gn({},r({ref:null,value:c,onChange:function(e){l(e.currentTarget.value),null===i||void 0===i||i(e.currentTarget.value)},placeholder:null!==a&&void 0!==a?a:"Search by username or invite by email",autoComplete:"off",onKeyDown:function(e){"Enter"===e.key&&c.match(/.+@.+/)&&(t(c),l(""),e.currentTarget.blur())}}))),(0,Ie.BX)("div",gn(gn({},s()),{},{className:"jsx-1273575788",children:[u&&v&&v.length?(0,Ie.tZ)("div",{className:"jsx-1273575788 dropdown-menu",children:v.map((function(e,t){return(0,Ie.tZ)("div",gn(gn({},o({item:e,index:t})),{},{className:"jsx-1273575788 "+(Xt()("result",{"is-active":d===t})||""),children:(0,Ie.BX)(Ee.Ug,{align:"center",spacing:1,children:[(0,Ie.tZ)(on.Z,{size:"s",url:e.image}),(0,Ie.tZ)("div",{className:"jsx-1273575788",children:e.username}),n.includes(e.username)?(0,Ie.tZ)("div",{className:"jsx-1273575788 check-icon",children:(0,Ie.tZ)(st.Z,{})}):null]})}),e.username)}))}):null,u&&h?(0,Ie.tZ)("div",{className:"jsx-1273575788 dropdown-menu is-loading",children:"loading..."}):null,u&&v&&0===v.length?(0,Ie.BX)("div",{className:"jsx-1273575788 dropdown-menu is-empty",children:['no results found for "',c,'"']}):null]}))]})}}),(0,Ie.tZ)("div",{className:"jsx-1273575788",children:(0,Ie.tZ)(je.Z,{color:"primary",type:"submit",filled:!0,disabled:r||!c,children:"Invite"})})]}),(0,Ie.tZ)(se(),{id:"1273575788",children:[".form-content.jsx-1273575788{display:grid;position:relative;width:100%;grid-template-columns:1fr auto;grid-column-gap:var(--space-8);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".dropdown.jsx-1273575788{position:relative;z-index:5;}",".dropdown-menu.jsx-1273575788{position:absolute;z-index:1;top:100%;left:0;width:100%;background-color:var(--background-default);border:1px solid var(--foreground-dimmest);border-top:0 none;border-radius:var(--border-radius-4);max-height:300px;overflow:auto;}",".dropdown-menu.is-loading.jsx-1273575788,.dropdown-menu.is-empty.jsx-1273575788{color:var(--foreground-dimmer);padding:var(--space-8);}",".dropdown.jsx-1273575788:focus-within .dropdown-menu.jsx-1273575788{border-color:var(--accent-primary-default);}",".spacer.jsx-1273575788{width:var(--space-8);pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}",".result.jsx-1273575788{cursor:pointer;padding:var(--space-8) var(--space-16);}",".result.jsx-1273575788:hover,.is-active.jsx-1273575788{background-color:var(--accent-primary-dimmer);}",".check-icon.jsx-1273575788{margin-left:auto;color:var(--accent-positive-default);}"]})]})}function bn(e){var t=e.value,n=e.onButtonPress,r=e.statusText,i=void 0===r?"":r,a=e.image,o=e.filterValue,s=e.type,c=e.Icon;return(0,Ie.BX)("div",{className:"jsx-1343607787 "+(Xt()("multiplayer-item",{"is-editable":!!n})||""),children:[(0,Ie.BX)(Ee.Ug,{align:"center",spacing:1,children:[(0,Ie.tZ)(on.Z,{size:"s",url:null!==a&&void 0!==a?a:""}),(0,Ie.tZ)("div",{className:"jsx-1343607787 label",children:o?(0,Ie.tZ)(dn.gr,{source:t,match:o}):"".concat(t," ").concat(i)}),!!n&&(0,Ie.tZ)(je.Z,{className:"remove-button",border:!1,filled:!1,"aria-label":"Remove ".concat(s||"email invite"),role:"tooltip","data-microtip-position":"left",onClick:n,children:c&&(0,Ie.tZ)(c,{size:12,className:"jsx-1343607787"})})]}),(0,Ie.tZ)(se(),{id:"1343607787",children:[".multiplayer-item.jsx-1343607787{padding:var(--space-4) var(--space-16);}",".multiplayer-item.is-editable.jsx-1343607787{padding-right:var(--space-8);}",".multiplayer-item.is-editable.jsx-1343607787:hover{background-color:var(--background-root);}",".label.jsx-1343607787{margin-right:auto;}"]})]})}var yn=n(1956);function xn(e){var t=e.email,n=e.onInvite,r=e.onCancel;return(0,Ie.BX)("div",{className:"jsx-861027202 root",children:[(0,Ie.tZ)(Xe.Z,{level:3,align:"center",children:"Are you sure?"}),(0,Ie.BX)(Oe.Z,{align:"center",children:[(0,Ie.tZ)("p",{className:"jsx-861027202 message",children:"Adding an external user as a guest to this repl will give the user read and write access. Please confirm the below email address before inviting the user as a guest."}),(0,Ie.tZ)("p",{className:"jsx-861027202 email",children:t})]}),(0,Ie.BX)("div",{className:"jsx-861027202 controls",children:[(0,Ie.tZ)(je.Z,{onClick:r,children:"Cancel"}),(0,Ie.tZ)(je.Z,{filled:!0,color:"primary",onClick:n,children:"Invite"})]}),(0,Ie.tZ)(se(),{id:"861027202",children:[".root.jsx-861027202{color:var(--foreground-default);padding:var(--space-24);display:grid;grid-gap:var(--space-24);}",".controls.jsx-861027202{display:grid;grid-gap:var(--space-8);grid-auto-flow:column;}",".message.jsx-861027202{padding-bottom:var(--space-16);}"]})]})}var wn=n(52537),kn=n(63364);function Zn(e){var t,n,r,i,a=e.replId,o=(0,Se.JT6)({variables:{replId:a}}),s=o.data,c=o.loading,l=(0,ft.v9)((function(e){return e.user.userInfo.isLoggedIn?e.user.userInfo.id:null})),u=(0,sn.Z)(),d=u.showConfirm,p=u.showError,f=pe.useState(""),h=(0,J.Z)(f,2),m=h[0],g=h[1],v=(0,Se.fSO)({onError:function(e){return p(e.message)},onCompleted:function(e){var t=e.addMultiplayerUser.user;(0,Zt.track)(Zt.events.MULTIPLAYER_INVITED,{replId:a,inviteMethod:"username"});var n=t?"@".concat(t.username):"Member";d("".concat(n," added"))}}),b=(0,J.Z)(v,2),y=b[0],x=b[1],w=(0,Se.QIy)({onError:function(e){return p(e.message)},onCompleted:function(e){var t=e.removeMultiplayerUser.user,n=t?"@".concat(t.username):"Member";d("".concat(n," removed"))}}),k=(0,J.Z)(w,2),Z=k[0],j=k[1],O="Repl"===(null===s||void 0===s?void 0:s.repl.__typename)?s.repl:null,E=(0,Se.SvR)({onError:function(e){p(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createMultiplayerInvite2;if(r)if("UserError"!==r.__typename){if("MultiplayerInvite"===r.__typename){var i=r.email;return(0,Zt.track)(Zt.events.MULTIPLAYER_INVITED,{replId:a,inviteMethod:"email"}),void d("Invited ".concat(i," via email"))}if("ReplPermission"===r.__typename){e.modify({id:e.identify({__typename:"Repl",id:a}),fields:{permissions:function(t){var n=e.writeFragment({data:r,fragment:Se.L13});return[].concat((0,nn.Z)(t),[n])}}});var o=r.user;(0,Zt.track)(Zt.events.MULTIPLAYER_INVITED,{replId:a,inviteMethod:"email"});var s=o?"@".concat(o.username):"Member";d("".concat(s," added"))}}else p(r.message)}}),_=(0,J.Z)(E,2),C=_[0],S=_[1],P=(0,Se.Ejz)({onError:function(e){return p(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var t=e.deleteMultiplayerInvite.email;(0,Zt.track)(Zt.events.MP2_REMOVED_EMAIL_INVITE,{replId:a,email:t}),d("Invite for ".concat(t," deleted"))}}else p(e.deleteMultiplayerInvite.message)}}),N=(0,J.Z)(P,2),I=N[0],T=N[1];if(O&&!O.owner)throw new Error("Cannot manage members on anon repls");if(null!==O&&void 0!==O&&O.owner&&"Team"!==(null===O||void 0===O?void 0:O.owner.__typename))throw new Error("Expect repl owned by a team");var D="Team"===(null===O||void 0===O||null===(t=O.owner)||void 0===t?void 0:t.__typename)?O.owner:null,R=null!==(n=null===O||void 0===O?void 0:O.permissions.reduce((function(e,t){return t.user?[].concat((0,nn.Z)(e),[t.user.username]):e}),[]))&&void 0!==n?n:[],A=null===O||void 0===O?void 0:O.permissions.reduce((function(e,t){if(!t.user)return e;var n=t.user;return!m||pn.Z.filter(m,[n.username]).length>0?(null!==D&&void 0!==D&&D.members.some((function(e){var t;return(null===(t=e.user)||void 0===t?void 0:t.id)===n.id}))||e.users.push(n),e):e}),{users:[]}),L=null===O||void 0===O?void 0:O.multiplayerInvites.filter((function(e){return!m||pn.Z.filter(m,[e.email]).length>0})),B=null===D||void 0===D?void 0:D.members.reduce((function(e,t){if(!t.user)return e;var n=t.user;if(!(!m||pn.Z.filter(m,[n.username]).length>0))return e;var r=t.permissions&&t.permissions!==Se.SV1.Member,i=null===O||void 0===O?void 0:O.permissions.find((function(e){var t;return e.user&&(null===(t=e.user)||void 0===t?void 0:t.id)===n.id}));return r?e.teamAdmins.push(n):null!==i&&void 0!==i&&i.type?e.withPermisison.push(n):e.withoutPermisison.push(n),e}),{teamAdmins:[],withPermisison:[],withoutPermisison:[]}),U=null===B||void 0===B?void 0:B.teamAdmins.some((function(e){return e.id===l})),M=(null!==(r=null===A||void 0===A?void 0:A.users.length)&&void 0!==r?r:0)+(null!==(i=null===L||void 0===L?void 0:L.length)&&void 0!==i?i:0),F=null===O||void 0===O?void 0:O.currentUserPermissions.editMultiplayers,X=null===O||void 0===O?void 0:O.currentUserPermissions.inviteGuests,z=Boolean(B&&!B.teamAdmins.length&&!B.withPermisison.length&&(!(null!==A&&void 0!==A&&A.users.length)&&!(null!==L&&void 0!==L&&L.length)&&X||!X&&!B.withoutPermisison.length)),V=pe.useState(null),G=(0,J.Z)(V,2),H=G[0],W=G[1];return(0,Ie.BX)("div",{className:se().dynamic([["754813262",[Ze.j.mobileMax]]])+" root",children:[(0,Ie.BX)(Ee.gC,{spacing:2,align:"stretch",children:[(0,Ie.BX)(Ee.Ug,{children:[(0,Ie.BX)(Xe.Z,{level:5,foreground:c?3:1,children:[F?"Add or remove members from this repl":null,c?"Loading...":null]}),F&&X&&!c&&(0,Ie.tZ)("div",{"aria-label":"  Add team members or invite external guests via email or username","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip",className:se().dynamic([["754813262",[Ze.j.mobileMax]]])+" information-icon-container",children:(0,Ie.tZ)(yn.Z,{})})]}),X?(0,Ie.tZ)(vn,{existingUsernames:R,onSubmit:function(e){!!e.match(/.+@.+/)&&!S.loading?W(e):x.loading||y({variables:{username:e,replId:a,type:"rw"}}),g("")},placeholder:F?"Search for users or invite guests":"Filter users",isDisabled:c,onChange:function(e){return g(e)}}):(0,Ie.tZ)(un.ZP,{disabled:c,value:m,onChange:function(e){return g(e.currentTarget.value)},placeholder:F?"Filter team members to add or remove":"Filter team members"}),(0,Ie.tZ)(zt.Z,{isOpen:!!H,onRequestClose:function(){return W(null)},children:H?(0,Ie.tZ)(xn,{email:H,onInvite:function(){C({variables:{email:H,replId:a,type:"rw"}}),W(null)},onCancel:function(){return W(null)}}):null}),(0,Ie.BX)("div",{className:se().dynamic([["754813262",[Ze.j.mobileMax]]])+" "+(Xt()("multiplayers-list",{"is-empty":z})||""),children:[null!==B&&void 0!==B&&B.withPermisison.length?(0,Ie.tZ)("div",{className:se().dynamic([["754813262",[Ze.j.mobileMax]]])+" list-heading",children:(0,Ie.BX)(Ee.Ug,{align:"center",spacing:1,children:[(0,Ie.tZ)(rn.Z,{size:12}),(0,Ie.BX)(Oe.Z,{foreground:2,size:"small",children:[null===B||void 0===B?void 0:B.withPermisison.length," member",1===(null===B||void 0===B?void 0:B.withPermisison.length)?"":"s"," with access"]})]})}):null,null===B||void 0===B?void 0:B.withPermisison.map((function(e){return(0,Ie.tZ)(bn,{value:e.username,image:e.image,statusText:"(can edit)",type:"member",onButtonPress:U?function(){j.loading||Z({variables:{replId:a,username:e.username}})}:void 0,Icon:cn.Z},e.id)})),!!M&&(0,Ie.tZ)("div",{className:se().dynamic([["754813262",[Ze.j.mobileMax]]])+" list-heading",children:(0,Ie.BX)(Ee.Ug,{align:"center",spacing:1,children:[(0,Ie.tZ)(rn.Z,{size:12}),(0,Ie.BX)(Oe.Z,{foreground:2,size:"small",children:[(0,kn.Z)("guest",M,!0),"with access"]})]})}),null===A||void 0===A?void 0:A.users.map((function(e){return(0,Ie.tZ)(bn,{value:e.username,image:e.image,statusText:"(can edit)",type:"guest",onButtonPress:U?function(){j.loading||Z({variables:{replId:a,username:e.username}})}:void 0,Icon:cn.Z},e.id)})),null===L||void 0===L?void 0:L.map((function(e){return(0,Ie.tZ)(bn,{value:e.email,statusText:"(pending)",onButtonPress:U?function(){T.loading||I({variables:{replId:a,email:e.email}})}:void 0,Icon:cn.Z},e.email)})),!X&&null!==B&&void 0!==B&&B.withoutPermisison.length?(0,Ie.tZ)("div",{className:se().dynamic([["754813262",[Ze.j.mobileMax]]])+" list-heading",children:(0,Ie.BX)(Ee.Ug,{align:"center",spacing:1,children:[(0,Ie.tZ)(an.Z,{size:12}),(0,Ie.BX)(Oe.Z,{foreground:2,size:"small",children:[(0,kn.Z)("member",null===B||void 0===B?void 0:B.withoutPermisison.length,!0),"without access"]})]})}):null,!X&&(null===B||void 0===B?void 0:B.withoutPermisison.map((function(e){return(0,Ie.tZ)(bn,{value:e.username,image:e.image,type:"member",onButtonPress:F?function(){x.loading||y({variables:{replId:a,username:e.username,type:"rw"}})}:void 0,Icon:ln.Z},e.id)}))),null!==B&&void 0!==B&&B.teamAdmins.length?(0,Ie.tZ)("div",{className:se().dynamic([["754813262",[Ze.j.mobileMax]]])+" list-heading",children:(0,Ie.BX)(Ee.Ug,{align:"center",spacing:1,children:[(0,Ie.tZ)(We.Z,{size:12}),(0,Ie.tZ)(Oe.Z,{foreground:2,size:"small",children:"Team admins cannot be removed from repls"})]})}):null,null===B||void 0===B?void 0:B.teamAdmins.map((function(e){return(0,Ie.tZ)("div",{className:se().dynamic([["754813262",[Ze.j.mobileMax]]])+" "+(Xt()("multiplayer-item",{"is-editable":F})||""),children:(0,Ie.BX)(Ee.Ug,{align:"center",spacing:1,children:[(0,Ie.tZ)(on.Z,{size:"s",url:e.image}),(0,Ie.tZ)("div",{className:se().dynamic([["754813262",[Ze.j.mobileMax]]])+" label",children:m?(0,Ie.tZ)(dn.gr,{source:e.username,match:m}):e.username})]})},e.id)})),z?(0,Ie.BX)(Oe.Z,{foreground:2,align:"center",children:['No members matching "',m,'" found']}):null]}),F||c?null:(0,Ie.tZ)(Oe.Z,{foreground:2,size:"small",children:"Only admins can add and remove members to multiplayer"}),F&&X&&(0,Ie.tZ)(wn.Z,{replId:a})]}),(0,Ie.tZ)(se(),{id:"754813262",dynamic:[Ze.j.mobileMax],children:[".root.__jsx-style-dynamic-selector{padding:var(--space-16);color:var(--foreground-default);}",".multiplayers-list.__jsx-style-dynamic-selector{background-color:var(--background-root);border-radius:var(--border-radius-4);height:300px;overflow-y:auto;}",".multiplayers-list.is-empty.__jsx-style-dynamic-selector{display:grid;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-16);word-break:break-word;}",".multiplayer-item.__jsx-style-dynamic-selector{padding:var(--space-4) var(--space-16);}",".multiplayer-item.is-editable.__jsx-style-dynamic-selector{padding-right:var(--space-8);}",".multiplayer-item.is-editable.__jsx-style-dynamic-selector:hover{background-color:var(--background-root);}",".list-heading.__jsx-style-dynamic-selector{padding:var(--space-16) var(--space-16) 0;}",".label.__jsx-style-dynamic-selector{margin-right:auto;}",".information-icon-container.__jsx-style-dynamic-selector{margin-left:5px;}","@media screen and (min-width:".concat(Ze.j.mobileMax,"px){.root.__jsx-style-dynamic-selector{padding:var(--space-48);}}")]})]})}var jn=n(41951),On=n(91365);function En(e){var t,n=e.replId,r=e.onDone,i=e.isResubmit,a=e.lastUpdated,o=e.wid,s=(0,ft.I0)(),c=(0,Fe.Z)().iotester,l=(0,Se.CHr)({variables:{replId:n}}),u=c.lastRunAt.getTime()>a,d=(0,Se.xhi)({variables:{replId:n}}).data,p="Repl"===(null===d||void 0===d?void 0:d.repl.__typename)?d.repl:null,f=(null===p||void 0===p?void 0:p.template)||null,h=(null===f||void 0===f?void 0:f.dueDate)||null,m=(new Date).toISOString(),g=(0,sn.Z)(),v=g.showConfirm,b=g.showError,y=(0,Se.xAQ)({variables:{replId:n},onCompleted:function(e){var t=e.submitRepl;"UserError"!==t.__typename?"Repl"===t.__typename&&(v("Repl submitted"),r()):b(t.message)},onError:function(e){b(e.message)}}),x=(0,J.Z)(y,2),w=x[0],k=x[1],Z=u&&c.lastRunDidPass;return"Repl"===(null===(t=l.data)||void 0===t?void 0:t.repl.__typename)&&l.data.repl.ioTests.length>0&&!Z?(0,Ie.BX)("div",{className:"jsx-3151227623 root",children:[(0,Ie.tZ)(Xe.Z,{level:3,align:"center",children:u?"Fix test failures before submitting":"Run tests before submitting"}),(0,Ie.tZ)(Oe.Z,{align:"center",children:u?"Input/Output tests did not pass.":"Input/Output tests have not been run since this repl was last changed."}),(0,Ie.BX)("div",{className:"jsx-3151227623 controls",children:[(0,Ie.tZ)(je.Z,{disabled:k.loading,filled:!0,color:"primary",onClick:function(){s({type:"OPEN_SIDEPANE_BY_TYPE",wid:o,paneType:"autograder"}),r()},children:"View tests"}),(0,Ie.tZ)(je.Z,{disabled:k.loading,onClick:function(){return w()},children:"Submit anyway"})]}),(0,Ie.tZ)(se(),{id:"3151227623",children:[".root.jsx-3151227623{color:var(--foreground-default);padding:var(--space-24);display:grid;grid-gap:var(--space-24);}",".controls.jsx-3151227623{display:grid;grid-gap:var(--space-8);grid-auto-flow:column;}"]})]}):(0,Ie.BX)("div",{className:"jsx-1002234268 root",children:[(0,Ie.tZ)(Xe.Z,{level:3,align:"center",children:i?" Resubmit this repl":"Submit this repl"}),(0,Ie.tZ)(Oe.Z,{align:"center",children:i?"This will re-notify team admins about your submission.":"This will submit your repl for review and notify the team's admins."}),h&&h<m&&(0,Ie.tZ)(Oe.Z,{align:"center",children:(0,Ie.tZ)("div",{className:"jsx-1002234268 late",children:"Note: Your submission is past the due date and will be marked late."})}),(0,Ie.BX)("div",{className:"jsx-1002234268 controls",children:[(0,Ie.tZ)(je.Z,{disabled:k.loading,onClick:r,children:"Cancel"}),(0,Ie.tZ)(je.Z,{filled:!0,color:"primary",disabled:k.loading,onClick:function(){return w()},children:i?"Submit again":"Submit"})]}),(0,Ie.tZ)(se(),{id:"1002234268",children:[".root.jsx-1002234268{color:var(--foreground-default);padding:var(--space-24);display:grid;grid-gap:var(--space-24);}",".controls.jsx-1002234268{display:grid;grid-gap:var(--space-8);grid-auto-flow:column;}",".late.jsx-1002234268{color:var(--accent-negative-default);}"]})]})}function _n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_n(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Sn="https://docs.replit.com/misc/annotations";function Pn(e){return(0,Ie.BX)(zt.Z,Cn(Cn({},e),{},{children:[(0,Ie.BX)("div",{className:"jsx-343567331 container",children:[(0,Ie.tZ)("h1",{className:"jsx-343567331",children:"Introducing Annotations"}),(0,Ie.tZ)("p",{className:"jsx-343567331",children:"Annotations is a new feature that lets you leave detailed feedback on a student's code!"}),(0,Ie.tZ)("div",{className:"jsx-343567331 loom-video-container",children:(0,Ie.tZ)("iframe",{src:"https://www.loom.com/embed/955fb177889c4838b9332224067d4be0?autoplay=1",frameBorder:"0",allowFullScreen:!0,webkitallowfullscreen:!0,mozallowfullscreen:!0,className:"jsx-343567331 loom-video"})}),(0,Ie.BX)("p",{className:"jsx-343567331",children:["To learn more, check out the"," ",(0,Ie.tZ)("a",{href:Sn,target:"_blank",className:"jsx-343567331",children:"docs"})]}),(0,Ie.BX)("div",{className:"jsx-343567331 buttons",children:[(0,Ie.tZ)("a",{href:Sn,target:"_blank",className:"jsx-343567331",children:(0,Ie.tZ)(je.Z,{children:"Learn More"})}),(0,Ie.tZ)(je.Z,{color:"primary",onClick:e.onRequestClose,children:"Okay"})]})]}),(0,Ie.tZ)(se(),{id:"343567331",children:[".container.jsx-343567331{padding:var(--space-48);display:grid;grid-auto-flow:row;grid-row-gap:var(--space-16);}",".container.jsx-343567331 h1.jsx-343567331{padding:var(--space-16) 0;color:var(--foreground-default);}",".container.jsx-343567331 p.jsx-343567331{color:var(--foreground-default);}",".buttons.jsx-343567331{display:grid;grid-auto-flow:column;-webkit-box-pack:end;-webkit-justify-content:end;-ms-flex-pack:end;justify-content:end;grid-column-gap:var(--space-8);}",".buttons.jsx-343567331 a.jsx-343567331{-webkit-text-decoration:none;text-decoration:none;}",".loom-video-container.jsx-343567331{position:relative;padding-bottom:56.25%;height:0;}",".loom-video.jsx-343567331{position:absolute;top:0;left:0;width:100%;height:100%;}"]})]}))}var Nn=n(49753),In=n(9571),Tn=n(94690),Dn=n(37424),Rn=n(73133),An=n(94830),Ln=n(73960),Bn=n(57159);var Un,Mn={name:"fjhvt3",styles:"text-decoration:italic"},Fn={name:"yvwru5",styles:"align-items:start"},Xn=function(e){var t,n,r,i,a,o,s,c,l,u=e.replId,d=e.onDone,p=(0,sn.Z)(),f=p.showConfirm,h=p.showError,m=(0,Se.fuF)({variables:{replId:u},onCompleted:function(e){var t,n,r=e.repl;"Repl"===r.__typename&&null!==(t=r.origin)&&void 0!==t&&null!==(n=t.template)&&void 0!==n&&n.modelSolution&&"ReplTemplateModelSolution"===r.origin.template.modelSolution.__typename&&(O(r.origin.template.modelSolution.visibleAfterSubmitting),S(r.origin.template.modelSolution.visibleAfterPassingTests),T(r.origin.template.modelSolution.visibleAfterDueDate))}}),g=m.data,v=m.loading,b=(0,Se.GA6)({onError:function(e){return h(e)},onCompleted:function(){f("Updated solution"),d()}}),y=(0,J.Z)(b,2),x=y[0],w=y[1],k=pe.useState(!1),Z=(0,J.Z)(k,2),j=Z[0],O=Z[1],E=pe.useState(!1),_=(0,J.Z)(E,2),C=_[0],S=_[1],P=pe.useState(!1),N=(0,J.Z)(P,2),I=N[0],T=N[1],D=pe.useState(),R=(0,J.Z)(D,2),A=R[0],L=R[1],B=(0,Dn.H)();if(pe.useEffect((function(){var e="Students can ";if(j||I||C){e+="view the solution after";var t=[];j&&t.push("submitting their project"),C&&t.push("passing all tests"),I&&t.push("the due date has passed");for(var n=0;n<t.length;n++)n>0&&(e+=",",n===t.length-1&&(e+=" and")),e+=" "+t[n];e+="."}else e+="never view the solution.";L(e)}),[j,C,I]),v)return(0,Ie.tZ)(Lt.Z,{css:[Ne.l0.center,"",""],children:(0,Ie.tZ)(Vt.Z,{})});var U="Repl"===(null===g||void 0===g?void 0:g.repl.__typename)&&"Team"===(null===(t=g.repl.owner)||void 0===t?void 0:t.__typename)&&(null===(n=g.repl.owner)||void 0===n?void 0:n.id),M="Repl"===(null===g||void 0===g?void 0:g.repl.__typename)&&(null===(r=g.repl.origin)||void 0===r||null===(i=r.template)||void 0===i?void 0:i.modelSolution);if(!M)return null;var F=M.id,X="Repl"===(null===g||void 0===g?void 0:g.repl.__typename)&&((null===(a=g.repl.origin)||void 0===a?void 0:a.ioTests.length)||(null===(o=g.repl.origin)||void 0===o||null===(s=o.unitTests)||void 0===s?void 0:s.tests.length)),z="Repl"===(null===g||void 0===g?void 0:g.repl.__typename)&&(null===(c=g.repl.origin)||void 0===c||null===(l=c.template)||void 0===l?void 0:l.dueDate);return(0,Ie.tZ)("form",{onSubmit:function(e){e.preventDefault(),U&&F&&x({variables:{input:{teamId:U,solutionId:F,visibleAfterSubmitting:j,visibleAfterPassingTests:C,visibleAfterDueDate:I}}})},children:(0,Ie.BX)(Lt.Z,{css:[Ne.l0.colWithGap(32),Ne.l0.p(24),"",""],children:[(0,Ie.tZ)(Rn.h,{level:2,variant:"headerDefault",children:"Update solution"}),(0,Ie.BX)(Lt.Z,{css:[Ne.l0.colWithGap(16),"",""],children:[(0,Ie.BX)(Lt.Z,{css:[Ne.l0.rowWithGap(8),"",""],children:[(0,Ie.tZ)(Ln.Z,{id:B("availableAfterSubmitting"),checked:j,onChange:function(){return O(!j)}}),(0,Ie.tZ)("label",{htmlFor:B("availableAfterSubmitting"),children:(0,Ie.tZ)(Rn.x,{children:"Available after submitting"})})]}),(0,Ie.BX)(Lt.Z,{css:[Ne.l0.rowWithGap(8),"",""],children:[(0,Ie.tZ)(Ln.Z,{id:B("availableAfterPassingTests"),checked:C,onChange:function(){return S(!C)}}),(0,Ie.tZ)("label",{htmlFor:B("availableAfterPassingTests"),children:(0,Ie.BX)(Lt.Z,{css:[Ne.l0.rowWithGap(4),"",""],children:[(0,Ie.tZ)(Rn.x,{children:"Available after passing tests"}),(0,Ie.BX)(Rn.x,{children:["(",X?"".concat(X," ").concat((0,kn.Z)("test",X)," defined"):"no tests exist yet",")"]})]})})]}),(0,Ie.BX)(Lt.Z,{css:[Ne.l0.rowWithGap(8),"vertical-align:baseline;",""],children:[(0,Ie.tZ)(Ln.Z,{id:B("availableAfterDueDate"),checked:I,onChange:function(){return T(!I)}}),(0,Ie.tZ)("label",{htmlFor:B("availableAfterDueDate"),children:(0,Ie.BX)(Lt.Z,{css:[Ne.l0.rowWithGap(4),"",""],children:[(0,Ie.tZ)(Rn.x,{children:"Available after due date"}),(0,Ie.BX)(Rn.x,{css:Mn,children:["(",z?(0,Bn.p)(z):"no due date set yet",")"]})]})})]})]}),(0,Ie.tZ)(Lt.Z,{css:[j||C||I?Ne.l0.backgroundColor.accentPositiveDimmest:Ne.l0.backgroundColor.accentNegativeDimmest,Ne.l0.p(8),Ne.l0.borderRadius(8),"",""],children:A}),(0,Ie.tZ)(Lt.Z,{css:Fn,children:(0,Ie.tZ)(An.zx,{stretch:!1,colorway:"primary",text:"Save",disabled:w.loading})})]})})},zn=(Un={},(0,ee.Z)(Un,Se.Sy.PublishTemplate,"Publish project"),(0,ee.Z)(Un,Se.Sy.EditTemplate,"Edit project"),(0,ee.Z)(Un,Se.Sy.Submit,"Submit"),(0,ee.Z)(Un,Se.Sy.Resubmit,"Resubmit"),(0,ee.Z)(Un,Se.Sy.UpdateModelSolution,"Update solution"),Un);function Vn(e){var t=e.cta,n=e.replId,r=e.isGroupProject,i=e.wid,a=e.pud,o=pe.useState(null),s=(0,J.Z)(o,2),c=s[0],l=s[1],u=function(){return l(null)},d=(0,Nn.Z)(),p=(0,Fe.Z)().fs,f=pe.useState(0),h=(0,J.Z)(f,2),m=h[0],g=h[1];pe.useEffect((function(){if(d&&!(0,Tn.T3)(d)&&!(0,Tn.sL)(d))return p.watchOtFile(d,{onChange:function(e){e.changeSource===In.Fl.Local&&g(Date.now())}})}),[d,p,g]);var v=Boolean(c&&[Se.Sy.PublishTemplate,Se.Sy.EditTemplate].includes(c));return pe.useEffect((function(){t===Se.Sy.ReviewSubmission&&(window.localStorage.getItem("annotations/educationModalDismissed")||(l(t),window.localStorage.setItem("annotations/educationModalDismissed","true")))}),[t]),(0,Ie.BX)(Ie.HY,{children:[zn[t]&&(0,Ie.tZ)(je.Z,{filled:!0,border:!1,onClick:function(){return l(t)},children:zn[t]}),(0,Ie.tZ)(zt.Z,{isOpen:c===Se.Sy.Submit||c===Se.Sy.Resubmit,onRequestClose:u,children:(0,Ie.tZ)(En,{replId:n,onDone:u,isResubmit:c===Se.Sy.Resubmit,lastUpdated:m,wid:i,pud:a})}),(0,Ie.tZ)(zt.Z,{preventClose:!0,isOpen:v,onRequestClose:u,width:r?"large":"medium",children:(0,Ie.tZ)(On.Z,{replId:n,onDone:u})}),(0,Ie.tZ)(jn.Z,{isOpen:c===Se.Sy.UpdateModelSolution,onRequestClose:u,maxWidth:600,children:(0,Ie.tZ)(Xn,{replId:n,onDone:u})}),(0,Ie.tZ)(Pn,{isOpen:c===Se.Sy.ReviewSubmission,onRequestClose:u})]})}var Gn=n(1564),Hn=n(5185),Wn=n(61927),Kn=n(5196),qn=n(7903),Yn=n(13634);function Qn(){var e=(0,Fe.Z)().session;return(0,Ie.tZ)("div",{className:"button-wrapper",children:(0,Ie.tZ)(Yn.Z,{size:28,onClick:function(){e.setIsCommandBarOpen(!0)},tooltipDelay:500,alt:"Search & run commands",tooltipPlacement:"bottom-end",children:(0,Ie.tZ)(qn.Z,{})})})}var Jn=n(60887);function $n(e){var t=e.replId,n=(0,Se.X6F)({variables:{replId:t},pollInterval:8e3}),r=n.data,i=n.loading,a=(0,sn.Z)(),o=a.showConfirm,s=a.showError,c=pe.useState(!1),l=(0,J.Z)(c,2),u=l[0],d=l[1],p=(0,Se.QNh)({onCompleted:function(e){var n,r=null===(n=e.addMultiplayerUser.user)||void 0===n?void 0:n.username;r&&((0,Zt.track)(Zt.events.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"username"}),o("Added @".concat(r)))}}),f=(0,J.Z)(p,2),h=f[0],m=f[1],g=(0,Se.GkG)({onError:function(e){return s(e.message)},onCompleted:function(e){var n,r=null===(n=e.removeMultiplayerUser.user)||void 0===n?void 0:n.username;r&&((0,Zt.track)(Zt.events.MP2_REMOVED_USER_PERMISSION,{replId:t,username:r}),o("".concat(r," removed")))}}),v=(0,J.Z)(g,2),b=v[0],y=v[1],x=(0,Se.SvR)({update:function(e,n){var r,i=null===(r=n.data)||void 0===r?void 0:r.createMultiplayerInvite2;if(i)if("UserError"!==i.__typename){if("MultiplayerInvite"===i.__typename){var a=i.email;return(0,Zt.track)(Zt.events.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"email"}),void o("Invited ".concat(a," via email"))}if("ReplPermission"===i.__typename){var c;e.modify({id:e.identify({__typename:"Repl",id:t}),fields:{permissions:function(t){var n=e.writeFragment({data:i,fragment:Se.L13});return[].concat((0,nn.Z)(t),[n])}}});var l=null===(c=i.user)||void 0===c?void 0:c.username;if(!l)return;(0,Zt.track)(Zt.events.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"email"}),o("Invited @".concat(l))}}else s(i.message)}}),w=(0,J.Z)(x,2),k=w[0],Z=w[1],j=(0,Se.Ejz)({onError:function(e){return s(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var n=e.deleteMultiplayerInvite.email;(0,Zt.track)(Zt.events.MP2_REMOVED_EMAIL_INVITE,{replId:t,email:n}),o("invite for ".concat(n," deleted"))}}else s(e.deleteMultiplayerInvite.message)}}),O=(0,J.Z)(j,2),E=O[0],_=O[1];pe.useEffect((function(){var e=m.error||Z.error;e&&(e.message.includes("reached the limit")?d(!0):s(e.message))}),[m.error,Z.error,s]);var C="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl:null,S=null===r||void 0===r?void 0:r.currentUser,P=null===C||void 0===C?void 0:C.permissions.reduce((function(e,t){return t.user?[].concat((0,nn.Z)(e),[t.user.username]):e}),[]),N=null===C||void 0===C?void 0:C.currentUserPermissions.editMultiplayers,I=Boolean(C&&!C.permissions.length&&!C.multiplayerInvites.length),T=null!==C&&void 0!==C&&C.permissions?C.permissions.length:null;return(0,Ie.BX)("div",{className:"jsx-1434523738 root",children:[(0,Ie.BX)(Ee.gC,{spacing:2,align:"stretch",children:[N&&P&&C?(0,Ie.tZ)("div",{className:"jsx-1434523738",children:(0,Ie.tZ)(vn,{existingUsernames:P,onSubmit:function(e){!!!e.match(/.+@.+/)||Z.loading?m.loading||h({variables:{username:e,replId:C.id,type:"rw"}}):k({variables:{email:e,replId:C.id,type:"rw"}})}})}):null,(0,Ie.BX)("div",{className:"jsx-1434523738",children:[(0,Ie.BX)(Xe.Z,{level:5,foreground:i?3:1,children:[null!==T&&null!==S&&void 0!==S&&S.isSubscribed?"".concat((0,kn.Z)("multiplayer",T,!0)):null,null===T||null!==S&&void 0!==S&&S.isSubscribed?null:"".concat(T,"/").concat(50," ").concat((0,kn.Z)("multiplayer",T)),i?"Loading...":null]}),!i&&!(null!==S&&void 0!==S&&S.isSubscribed)&&(0,Ie.BX)(Oe.Z,{size:"small",tag:"div",foreground:2,children:["Due to COVID-19, we're temporarily increasing the free multiplayer limit."," ",(0,Ie.tZ)("a",{onClick:function(){return d(!0)},"aria-label":"Click to upgrade for unlimited invites","data-microtip-position":"top",role:"tooltip",className:"jsx-1434523738 info-tooltip",children:(0,Ie.tZ)(yn.Z,{})})]})]}),I?(0,Ie.tZ)("div",{className:"jsx-1434523738 empty-list",children:(0,Ie.BX)(Ee.Ug,{align:"center",justify:"center",children:[(0,Ie.tZ)("div",{className:"jsx-1434523738",children:"No one is here"}),(0,Ie.tZ)("div",{className:"jsx-1434523738",children:(0,Ie.tZ)("img",{src:"/public/images/rainy-computer.png",className:"jsx-1434523738"})})]})}):(0,Ie.BX)("div",{className:"jsx-1434523738 multiplayers-list",children:[null===C||void 0===C?void 0:C.permissions.map((function(e){var n=e.user,r=e.type;return n?(0,Ie.BX)("div",{className:"jsx-1434523738 "+(Xt()("multiplayer-item",{"is-editable":C.currentUserPermissions.editMultiplayers})||""),children:[(0,Ie.tZ)(on.Z,{size:"s",url:n.image}),(0,Ie.BX)("div",{className:"jsx-1434523738 label",children:[n.username," ",r===Se.aQH.Rw?" (can edit)":null]}),C.currentUserPermissions.editMultiplayers?(0,Ie.tZ)(je.Z,{border:!1,filled:!1,"aria-label":"Remove member",role:"tooltip","data-microtip-position":"left",onClick:function(){y.loading||b({variables:{replId:t,username:n.username}})},children:(0,Ie.tZ)(cn.Z,{size:12})}):null]},n.id):null})),null===C||void 0===C?void 0:C.multiplayerInvites.map((function(e){return(0,Ie.BX)("div",{className:"jsx-1434523738 "+(Xt()("multiplayer-item",{"is-editable":N})||""),children:[(0,Ie.tZ)(on.Z,{size:"s"}),(0,Ie.BX)("div",{className:"jsx-1434523738 label",children:[e.email," (pending)"]}),N?(0,Ie.tZ)(je.Z,{border:!1,filled:!1,"aria-label":"Remove email invite",role:"tooltip","data-microtip-position":"left",onClick:function(){_.loading||E({variables:{replId:t,email:e.email}})},children:(0,Ie.tZ)(cn.Z,{size:12})}):null]},e.email)}))]})]}),(0,Ie.tZ)(Jn.Z,{isOpen:u,onClose:function(){return d(!1)},trackingInfo:{context:"workspace-multiplayer-header"}}),(0,Ie.tZ)(se(),{id:"1434523738",children:[".root.jsx-1434523738{color:var(--foreground-default);}",".multiplayers-list.jsx-1434523738,.empty-list.jsx-1434523738{background-color:var(--background-root);border-radius:var(--border-radius-4);height:200px;}",".multiplayers-list.jsx-1434523738{overflow-y:auto;padding:var(--space-8) 0;}",".multiplayer-item.jsx-1434523738{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:var(--space-4) var(--space-16);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".multiplayer-item.is-editable.jsx-1434523738{padding-right:var(--space-8);}",".multiplayer-item.is-editable.jsx-1434523738:hover{background-color:var(--background-root);}",".label.jsx-1434523738{margin-right:auto;padding-left:var(--space-8);}",".info-tooltip.jsx-1434523738{display:inline-block;}",".info-tooltip.jsx-1434523738,.info-tooltip.jsx-1434523738:hover,.info-tooltip.jsx-1434523738:focus{color:var(--foreground-default);border:none;outline:none;}",".empty-list.jsx-1434523738 img.jsx-1434523738{display:block;height:200px;opacity:60%;}"]})]})}function er(e){var t=e.replId;return(0,Ie.BX)("div",{className:se().dynamic([["1419674637",[Ze.j.mobileMax]]]),children:[(0,Ie.BX)(Ee.gC,{spacing:2,align:"stretch",children:[(0,Ie.tZ)(Xe.Z,{level:4,children:"Invite"}),(0,Ie.tZ)($n,{replId:t}),(0,Ie.tZ)(wn.Z,{replId:t})]}),(0,Ie.tZ)(se(),{id:"1419674637",dynamic:[Ze.j.mobileMax],children:["div.__jsx-style-dynamic-selector{padding:var(--space-16);}","@media screen and (min-width:".concat(Ze.j.mobileMax,"px){div.__jsx-style-dynamic-selector{padding:var(--space-32);}}")]})]})}var tr=function(e){var t=e.children,n=e.showPopover,r=(0,ze.Z)("announcement","add-guest-new-user"),i=r.shouldDisplay,a=r.register,o=r.dismiss,s=pe.useState(!1),c=(0,J.Z)(s,2),l=c[0],u=c[1],d=pe.useState(!1),p=(0,J.Z)(d,2),f=p[0],h=p[1];pe.useEffect((function(){n&&!f&&a()}),[f,a,n]);var m=i&&!f;return(0,Ie.BX)(_e.Z,{onClickOutside:function(){return h(!0)},isOpen:m,showArrow:!0,borderColor:"var(--accent-purple-default)",children:[t,(0,Ie.BX)(Ee.gC,{spacing:2,align:"stretch",children:[(0,Ie.BX)(Ee.Ug,{spacing:1,children:[(0,Ie.tZ)(Je.Z,{}),(0,Ie.tZ)(Xe.Z,{level:5,children:"Invite guests to your repl!"})]}),(0,Ie.BX)(Oe.Z,{children:[" ","Add external guests to your repl for interviews and collaborative projects."," "]}),(0,Ie.tZ)(Ee.Ug,{spacing:1,justify:"end",children:(0,Ie.tZ)(je.Z,{loading:l,onClick:function(){u(!0),(0,Zt.track)(Zt.events.ADD_GUEST_POPOVER_DISMISSED),o()},children:"Got it"})})]})]})},nr=n(99455);function rr(e){var t=e.replbox,n=pe.useState(t.getRunState()),r=(0,J.Z)(n,2),i=r[0],a=r[1];return pe.useEffect((function(){return t.onStateChanged(a)}),[t]),{runState:i,run:pe.useCallback(t.run,[t.run]),stopRun:pe.useCallback(t.stopRun,[t.stopRun])}}function ir(e){switch(e){case nr.A.OFFLINE:return"loading";case nr.A.IDLE:return"idle";case nr.A.RUNNING:return"running";case nr.A.STOPPING:return"stopping"}}var ar=n(5882),or=n(89788),sr=n(14998),cr=n(72779);function lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ur(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dr=60;function pr(e){var t,n,r,i,a=e.wid,o=e.pud,s=(0,ft.I0)(),c=(0,ve.useRouter)(),l=(0,Ce.Z)(),u=(0,sr.e$)(cr.H.Run),d=(0,sr.e$)(cr.H.Share),p=pe.useRef(null),f=pe.useState(null),h=(0,J.Z)(f,2),m=h[0],g=h[1],v=pe.useState(!1),b=(0,J.Z)(v,2),y=b[0],x=b[1],w=pe.useState(!1),k=(0,J.Z)(w,2),Z=k[0],j=k[1],O=pe.useRef(Z&&(null===d||void 0===d?void 0:d.isActive));pe.useEffect((function(){!O.current||null!==d&&void 0!==d&&d.isActive||j(!1),O.current=Z&&(null===d||void 0===d?void 0:d.isActive)}),[d,Z]),pe.useEffect((function(){null!==d&&void 0!==d&&d.isActive&&(Z&&m?null===d||void 0===d||d.delegateTooltip(m):d.delegateTooltip(p.current))}),[d,Z,m]);var E=(0,Tt.J)(a,o,"header"),_=(0,J.Z)(E,1)[0],C=_.runstate,S=_.loading,P=(0,Fe.Z)(),N=P.presence,I=P.replbox,T=P.debuggest,D=P.fs,R=(0,Rt.Z)({presence:N}),A=rr({replbox:I}),L=pe.useCallback((function(){N.getFollowedUser()&&N.unfollowUser()}),[N]),B=(0,ar.Z)(T.mainClient),U=(0,ar.Z)(null===B||void 0===B?void 0:B.state),M=(0,Se.ggE)({variables:{id:l}}),F=M.data,X=M.refetch;if("Repl"!==(null===F||void 0===F?void 0:F.repl.__typename))return(0,Ie.tZ)("header",{className:"jsx-1293497615",children:(0,Ie.tZ)(se(),{id:"1293497615",children:["header.jsx-1293497615{background-color:var(--background-default);height:".concat(dr,"px;}")]})},"loading-header");var z=F.currentUser,V=F.repl,G=null;G="html"===V.lang.id&&null!==z&&void 0!==z&&z.hasFlagDevtoolsWebview?(0,Ie.tZ)(Wn.Z,{runState:y?"running":"idle",onClick:function(){x(!0),D.flush().then((function(){x(!1),s({type:"REFRESH_WEBVIEW",wid:a})}))}}):"replbox"===V.lang.engine?(0,Ie.tZ)(Wn.Z,{runState:ir(A.runState),onClick:function(){L(),A.runState!==nr.A.RUNNING?A.runState===nr.A.IDLE&&((0,Zt.track)(Zt.events.RUN_BUTTON_CLICKED,{context:"workspace"}),A.run(),(0,Zt.track)(Zt.events.PROJECT_RAN,{wid:a,language:null===V||void 0===V?void 0:V.lang.id,replId:l,replTitle:null===V||void 0===V?void 0:V.title})):A.stopRun()}}):S?(0,Ie.tZ)(Wn.Z,{runState:"loading",onClick:function(){return null}}):"stopping"===C||B&&"stopping"===U?(0,Ie.tZ)(Wn.Z,{runState:"stopping",onClick:function(){return null}}):B&&"terminated"!==U?(0,Ie.tZ)(Wn.Z,{runState:"running",onClick:function(){L(),B.stop()}}):"running"===C?(0,Ie.tZ)(Wn.Z,{runState:"running",onClick:function(){L(),s({type:"STOP_EVAL",wid:a})}}):(0,Ie.tZ)(Wn.Z,{runState:"idle",onClick:function(){(0,Zt.track)(Zt.events.RUN_BUTTON_CLICKED,{context:"workspace"}),L(),s({type:"RUN_REPL",wid:a})}});var H="Team"===(null===(t=V.owner)||void 0===t?void 0:t.__typename),W=Boolean("Team"===(null===(n=V.owner)||void 0===n?void 0:n.__typename)&&(null===(r=V.owner.capabilities)||void 0===r?void 0:r.isEducationPlan)),K=V.workspaceCta&&[Se.Sy.Submit,Se.Sy.Resubmit,Se.Sy.UpdateModelSolution,Se.Sy.PublishTemplate,Se.Sy.EditTemplate,Se.Sy.ReviewSubmission].includes(V.workspaceCta)?V.workspaceCta:null,q=!W&&V.currentUserPermissions.editMultiplayers;return(0,Ie.BX)("header",{className:se().dynamic([["1460053546",[dr,Ze.j.tabletMax,Pt.X,Ze.j.mobileMax+100,Ze.j.mobileMax]]]),children:[(0,Ie.BX)(or.Z,{background:"default",css:[Ne.l0.align.center,Ne.l0.flex.row,Ne.l0.height("100%"),"",""],children:[(0,Ie.BX)("div",{className:se().dynamic([["1460053546",[dr,Ze.j.tabletMax,Pt.X,Ze.j.mobileMax+100,Ze.j.mobileMax]]])+" left",children:[(0,Ie.tZ)(Dt.default,{as:"/~",href:"/home",children:(0,Ie.tZ)("a",{className:se().dynamic([["1460053546",[dr,Ze.j.tabletMax,Pt.X,Ze.j.mobileMax+100,Ze.j.mobileMax]]])+" logo-link",children:(0,Ie.tZ)(Nt.Z,{})})}),(0,Ie.tZ)(en.Z,{repl:V,refetch:X,onUpdateRepl:function(e){var t=!!e.title&&e.title!==V.title;if(s({type:"REPL_UPDATED",wid:a,updates:e}),t){var n=Et(c.query);c.push({pathname:"/replEnvironment",query:ur(ur({},c.query),{},{replUrl:V.url})},{pathname:V.url,query:n},{shallow:!0})}}}),(0,Ie.tZ)(Hn.Z,{repl:V,canEdit:V.currentUserPermissions.containerAttach})]}),(0,Ie.tZ)("div",{className:se().dynamic([["1460053546",[dr,Ze.j.tabletMax,Pt.X,Ze.j.mobileMax+100,Ze.j.mobileMax]]])+" center",children:(0,Ie.tZ)("div",{"data-cy":"ws-run-btn",ref:null===u||void 0===u?void 0:u.delegateTooltip,onClick:function(){null!==u&&void 0!==u&&u.isActive&&u.next()},className:se().dynamic([["1460053546",[dr,Ze.j.tabletMax,Pt.X,Ze.j.mobileMax+100,Ze.j.mobileMax]]])+" run-button-container",children:(0,Ie.tZ)(It.ZP,{placement:"bottom",isDisabled:null===u||void 0===u?void 0:u.isActive,tooltip:(0,Ie.tZ)(Kn.Z,{shortcut:{cmdOrCtrlKey:!0,key:"Enter"}}),children:function(e,t){return(0,Ie.tZ)("div",ur(ur({},e),{},{ref:t,className:se().dynamic([["1460053546",[dr,Ze.j.tabletMax,Pt.X,Ze.j.mobileMax+100,Ze.j.mobileMax]]])+" "+(e&&null!=e.className&&e.className||"run-button"),children:G}))}})})}),(0,Ie.BX)("div",{className:se().dynamic([["1460053546",[dr,Ze.j.tabletMax,Pt.X,Ze.j.mobileMax+100,Ze.j.mobileMax]]])+" right",children:[R&&R.length>0?(0,Ie.tZ)($t,{users:R}):null,null!==z&&void 0!==z&&z.isExplorer?(0,Ie.tZ)("a",{href:"/account#roles",target:"_blank",className:se().dynamic([["1460053546",[dr,Ze.j.tabletMax,Pt.X,Ze.j.mobileMax+100,Ze.j.mobileMax]]])+" explorer-badge",children:(0,Ie.tZ)(Yn.Z,{colorway:"negative",size:28,alt:"You are an explorer. You may see bugs or other surprising behavior!",tooltipPlacement:"bottom-end",tooltipDelay:500,children:(0,Ie.tZ)(Gn.Z,{})})}):null,K?(0,Ie.tZ)(Vn,{cta:K,replId:V.id,isGroupProject:!(null===(i=V.template)||void 0===i||!i.isGroupProject),wid:a,pud:o}):null,q?(0,Ie.tZ)("div",{ref:p,className:se().dynamic([["1460053546",[dr,Ze.j.tabletMax,Pt.X,Ze.j.mobileMax+100,Ze.j.mobileMax]]]),children:(0,Ie.tZ)(tr,{showPopover:V.currentUserPermissions.inviteGuests,children:(0,Ie.tZ)(An.ZP,{onClick:function(){(0,Zt.track)(Zt.events.INVITE_MODAL_OPENED,{wid:a,language:V.lang.id,replId:V.id,source:"replEnvironment"}),j(!0)},iconLeft:(0,Ie.tZ)(tn.Z,{}),text:"Invite"})})}):null,(0,Ie.tZ)(Qn,{})]})]}),(0,Ie.tZ)(zt.Z,{isOpen:Z,onRequestClose:function(){return j(!1)},children:(0,Ie.tZ)("div",{ref:g,className:se().dynamic([["1460053546",[dr,Ze.j.tabletMax,Pt.X,Ze.j.mobileMax+100,Ze.j.mobileMax]]]),children:H?(0,Ie.tZ)(Zn,{replId:V.id}):(0,Ie.tZ)(er,{replId:V.id})})}),(0,Ie.tZ)(se(),{id:"1460053546",dynamic:[dr,Ze.j.tabletMax,Pt.X,Ze.j.mobileMax+100,Ze.j.mobileMax],children:["header.__jsx-style-dynamic-selector{position:fixed;top:0px;left:0px;width:100%;height:".concat(dr,"px;background-color:var(--background-default);border-bottom:0.5px solid var(--background-highest);--button-width:60px;--center-width:var(--button-width);}"),"@media screen and (min-width:".concat(Ze.j.tabletMax,"px){header.__jsx-style-dynamic-selector{--button-width:100px;}}"),".logo-link.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:var(--foreground-default);width:32px;height:32px;}",".left.__jsx-style-dynamic-selector,.right.__jsx-style-dynamic-selector{height:100%;padding:0 var(--space-8);display:grid;grid-auto-flow:column;grid-column-gap:var(--space-8);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".left.__jsx-style-dynamic-selector{padding-left:".concat(Pt.X,"px;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;}"),".right.__jsx-style-dynamic-selector{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}",".center.__jsx-style-dynamic-selector{display:none;width:var(--center-width);position:absolute;top:0;left:50%;height:100%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);padding:var(--space-8) 0;}",".run-button-container.__jsx-style-dynamic-selector{height:100%;}",".run-button.__jsx-style-dynamic-selector{height:100%;}",".center.__jsx-style-dynamic-selector>div,.left.__jsx-style-dynamic-selector>div{margin:0 !important;}",".explorer-badge.__jsx-style-dynamic-selector{display:none;}","@media screen and (min-width:".concat(Ze.j.mobileMax+100,"px){.left.__jsx-style-dynamic-selector,.right.__jsx-style-dynamic-selector{width:50%;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;}.center.__jsx-style-dynamic-selector{display:block;}.left.__jsx-style-dynamic-selector{padding-right:calc(var(--center-width) / 2 + var(--space-8));}.right.__jsx-style-dynamic-selector{padding-left:calc(var(--center-width) / 2 + var(--space-8));}}"),"@media screen and (min-width:".concat(Ze.j.mobileMax,"px){.explorer-badge.__jsx-style-dynamic-selector{display:unset;color:var(--foreground-default);border-radius:var(--border-radius-8);background-color:var(--accent-negative-dimmest);height:28px;}}")]})]})}function fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fr(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mr(e){var t=e.wid,n=e.pud,r=e.style,i=(0,ft.I0)(),a=(0,Ce.Z)(),o=(0,ve.useRouter)(),s=(0,Tt.J)(t,n,"header"),c=(0,J.Z)(s,1)[0],l=c.runstate,u=c.loading,d=(0,Se.f7Y)({variables:{id:a}}).data,p=rr({replbox:(0,Fe.Z)().replbox});if("Repl"!==(null===d||void 0===d?void 0:d.repl.__typename))return(0,Ie.BX)("div",{style:r,className:"jsx-3273477858 lite-header",children:[(0,Ie.BX)("div",{className:"jsx-3273477858 lite-header-cta",children:[(0,Ie.tZ)(Wn.Z,{runState:"loading",onClick:function(){return null},lite:!0}),";"]}),(0,Ie.tZ)(se(),{id:"3273477858",children:[".lite-header.jsx-3273477858{background:var(--background-default);border-bottom:1px solid var(--outline-dimmest);height:40px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;}",".lite-header-cta.jsx-3273477858{margin-left:auto;margin-right:auto;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;width:100px;padding:var(--space-4) 0;}"]})]});var f=null,h=d.repl;f="replbox"===h.lang.engine?(0,Ie.tZ)(Wn.Z,{lite:!0,runState:ir(p.runState),onClick:function(){p.runState!==nr.A.RUNNING?p.runState===nr.A.IDLE&&(p.run(),(0,Zt.track)(Zt.events.PROJECT_RAN,{wid:t,language:null===h||void 0===h?void 0:h.lang.id,replId:a,replTitle:null===h||void 0===h?void 0:h.title})):p.stopRun()}}):u?(0,Ie.tZ)(Wn.Z,{runState:"loading",onClick:function(){return null},lite:!0}):"stopping"===l?(0,Ie.tZ)(Wn.Z,{runState:"stopping",onClick:function(){return null},lite:!0}):"running"===l?(0,Ie.tZ)(Wn.Z,{runState:"running",onClick:function(){return i({type:"STOP_EVAL",wid:t})},lite:!0}):(0,Ie.tZ)(Wn.Z,{runState:"idle",onClick:function(){return i({type:"RUN_REPL",wid:t})},lite:!0});var m={href:"https://replit.com".concat(h.url),target:"_blank",title:"open ".concat(h.title)},g=o.query.lite,v=h.lang,b=v.displayName,y=v.icon;return(0,Ie.BX)("div",{style:r,className:"jsx-1667408490 lite-header",children:[(0,Ie.tZ)("div",{className:"jsx-1667408490 lite-header-left",children:g.includes("icon")||g.includes("title")?(0,Ie.BX)("a",hr(hr({},m),{},{className:"jsx-1667408490 "+(m&&null!=m.className&&m.className||"lite-header-title-link"),children:[g.includes("icon")?(0,Ie.tZ)("img",{alt:b,title:b,src:y||void 0,className:"jsx-1667408490 lite-header-lang-icon"}):null,g.includes("title")?(0,Ie.tZ)("div",{className:"jsx-1667408490 lite-header-title",children:(0,Ie.tZ)("div",{className:"jsx-1667408490",children:h.title})}):null]})):null}),(0,Ie.tZ)("div",{className:"jsx-1667408490 lite-header-cta",children:f}),(0,Ie.tZ)("div",{className:"jsx-1667408490 lite-header-right",children:g.includes("nologo")?(0,Ie.tZ)("a",hr(hr({},m),{},{className:"jsx-1667408490 "+(m&&null!=m.className&&m.className||"lite-header-open-link"),children:"open"})):(0,Ie.BX)("a",hr(hr({},m),{},{className:"jsx-1667408490 "+(m&&null!=m.className&&m.className||"lite-header-logo-link"),children:["open in"," ",(0,Ie.tZ)("img",{src:"/public/images/logo-small.png",className:"jsx-1667408490 lite-header-logo"})]}))}),(0,Ie.tZ)(se(),{id:"1667408490",children:[".lite-header.jsx-1667408490{background:var(--background-root);border-bottom:1px solid var(--outline-dimmest);height:40px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;}",".lite-header-title-link.jsx-1667408490{font-size:12px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;max-width:100%;position:relative;-webkit-text-decoration:none;text-decoration:none;}",".lite-header-title.jsx-1667408490{position:relative;top:1px;display:none;max-width:100%;overflow:hidden;-webkit-text-decoration:none;text-decoration:none;}",".lite-header-title.jsx-1667408490>div.jsx-1667408490{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}",".lite-header-title-link.jsx-1667408490:hover .lite-header-title.jsx-1667408490{border-color:var(--accent-primary-default);}",".lite-header-cta.jsx-1667408490{margin-left:auto;margin-right:auto;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;width:100px;padding:var(--space-4) 0;}",".lite-header-cta.jsx-1667408490>div{margin-left:0px;height:100%;border-bottom:0 none;}",".lite-header-lang-icon.jsx-1667408490{width:20px;margin-right:4px;}",".lite-header-left.jsx-1667408490,.lite-header-right.jsx-1667408490{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;width:calc(50% - 50px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-left:10px;padding-right:10px;}",".lite-header-right.jsx-1667408490{-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}",".lite-header-logo-link.jsx-1667408490{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;border-bottom:none;color:var(--foreground-dimmest);font-size:14px;-webkit-text-decoration:none;text-decoration:none;}",".lite-header-logo-link.jsx-1667408490:hover{color:var(--accent-primary-default);}",".lite-header-logo.jsx-1667408490{width:60px;margin-left:4px;}","@media screen and (min-width:400px){.lite-header-title.jsx-1667408490{display:block;}.lite-header-logo.jsx-1667408490{width:80px;margin-left:8px;}}"]})]})}function gr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gr(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var br=(0,Ct.$)({primary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _t.qg:return vr(vr({},e),t.initialState);case _t.hq:return vr(vr({},e),{},{loading:!0});case _t.FG:return vr(vr({},e),{},{loading:!1});case"WORKSPACE_WILL_UNMOUNT":return vr({},e);default:return e}},runstate:St.Z});function yr(e){return(0,ve.useRouter)().query.lite?(0,Ie.tZ)(mr,vr({},e)):(0,Ie.tZ)(pr,vr({},e))}var xr=n(70917),wr=n(21145),kr=n(21458),Zr=n(72655),jr=n(82625),Or=n(84062),Er=n(76259);var _r=/(^.*language.*=.*?)(".*").*$/m,Cr=/(^.*run.*=.*?)(".*").*$/m;function Sr(e){if(!e.match(_r)||!e.match(Cr))return null;var t=_r.exec(e),n=Cr.exec(e);if(!t||!n)return null;var r,i,a=(0,J.Z)(t,3),o=a[1],s=a[2],c=(0,J.Z)(n,3),l=c[1],u=c[2];try{r=JSON.parse(s),i=JSON.parse(u)}catch(d){return null}return"string"!==typeof r||"string"!==typeof i?null:{languageBefore:o,language:r,languageIndex:t.index,runBefore:l,run:i,runIndex:n.index}}function Pr(e){var t=e.contents,n=e.language,r=e.run,i=Sr(t);if(!i)throw new Error("Parse error");var a=[];a.push(i.languageIndex+i.languageBefore.length+1),i.language.length&&a.push({d:i.language.length}),a.push(n);var o=[];return o.push(i.runIndex+i.runBefore.length+1),i.run.length&&o.push({d:i.run.length}),o.push(r),i.runIndex>i.languageIndex?wr.type.compose(o,a):wr.type.compose(a,o)}function Nr(e){return Ir.apply(this,arguments)}function Ir(){return Ir=(0,$.Z)(le().mark((function e(t){var n,r,i;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fs,r=t.run,i=t.language,e.abrupt("return",new Promise((function(e,t){var a=n.watchOtFile(".replit",{onReady:function(n){var o=n.initialContent,s=n.writeOps,c=o.toString("utf8");if(!Sr(c))return t(new Error("Parse error")),void a();s(Pr({contents:c,run:r,language:i})),e(a)},onError:t})})));case 2:case"end":return e.stop()}}),e)}))),Ir.apply(this,arguments)}function Tr(e){var t=e.children;return(0,Ie.BX)(Lt.Z,{css:(0,xr.iv)({width:"100% ",height:"100%",backgroundColor:"var(--background-default)",color:Ne.TV.foregroundDefault,fontSize:Ne.TV.fontSizeDefault,overflowY:"auto"},"",""),children:[(0,Ie.tZ)(Lt.Z,{css:[Ne.l0.flex.row,"",""],children:(0,Ie.BX)(Lt.Z,{css:[Ne.l0.flex.row,Ne.l0.align.center,Ne.l0.p(4),"font-family:var(--font-family-code);background-color:var(--accent-primary-dimmest);color:var(--accent-primary-default);",""],children:[(0,Ie.tZ)("img",{css:[Ne.l0.mr(8),"height:10px;width:8px;",""],src:"/public/images/prompt.png"}),(0,Ie.tZ)(Oe.Z,{size:"small",children:".replit"})]})}),(0,Ie.tZ)(Lt.Z,{css:[Ne.l0.p(16),"flex:1 1 auto;overflow-y:auto;",""],children:t})]})}var Dr={name:"1ww443i",styles:"max-width:200px"};function Rr(e){var t=e.isApplyingConfig,n=pe.useState("Unknown"===ke().get(e.initialLanguage).displayName?"bash":e.initialLanguage),r=(0,J.Z)(n,2),i=r[0],a=r[1],o=(0,Or.Y)(e.initialRun,(function(e){if(!e)return{message:"add a run command"}}));return(0,Ie.BX)("form",{css:(0,xr.iv)({fontFamily:Ne.TV.fontFamilyCode},"",""),onSubmit:function(t){t.preventDefault(),o.value?e.onSubmit({language:i,run:o.value}):o.validate()},children:[(0,Ie.BX)(Lt.Z,{css:[Ne.l0.pt(16),"",""],children:[(0,Ie.tZ)("label",{css:[Ne.l0.pb(8),"",""],htmlFor:"lang-sel",children:"select language"}),(0,Ie.tZ)(Lt.Z,{css:Dr,children:(0,Ie.tZ)(Zr.ZP,{disabled:t,initialSelectedItem:ke().get(i),placeholder:"Language",onSelect:function(e){e&&a(e.key)}})})]}),(0,Ie.BX)(Lt.Z,{css:["max-width:400px;",Ne.l0.pt(32),Ne.l0.colWithGap(8),"",""],children:[(0,Ie.tZ)("label",{htmlFor:"run-sel",children:"configure the run button"}),(0,Ie.tZ)(un.ZP,{disabled:t,id:"run-sel",type:"text",value:o.value,style:{padding:"8px",fontFamily:Ne.TV.fontFamilyCode},placeholder:"enter command",onChange:function(e){o.setValue(e.currentTarget.value)}}),o.error?(0,Ie.BX)(Lt.Z,{css:[{color:"var(--accent-negative-default)",fontSize:Ne.TV.fontSizeSmall},Ne.l0.rowWithGap(4),Ne.l0.align.center,"",""],children:[(0,Ie.tZ)(Er.Z,{size:12}),(0,Ie.tZ)(Lt.Z,{children:o.error.message})]}):null,(0,Ie.tZ)("a",{css:[{fontSize:Ne.TV.fontSizeSmall},"",""],target:"_blank",href:"https://docs.replit.com/repls/dot-replit",children:"not sure what to do?"})]}),(0,Ie.tZ)(Lt.Z,{css:[Ne.l0.flex.row,Ne.l0.pt(32),"",""],children:(0,Ie.tZ)(je.Z,{color:"primary",type:"submit",disabled:t||Boolean(o.error),children:t?"saving...":"done"})}),(0,Ie.tZ)(zt.Z,{isOpen:!1,preventClose:!0,onRequestClose:function(){},children:(0,Ie.tZ)(Lt.Z,{css:[Ne.l0.borderRadius(16),Ne.l0.p(32),"background-color:var(--background-default);",""],children:(0,Ie.BX)(Ee.gC,{align:"center",spacing:1,children:[(0,Ie.tZ)(Vt.Z,{}),(0,Ie.BX)(Oe.Z,{children:["Upgrading to ",ke().get(i).displayName]})]})})})]})}function Ar(){return(0,Ie.BX)(Lt.Z,{css:(0,xr.iv)({fontFamily:Ne.TV.fontFamilyCode},"",""),children:[(0,Ie.tZ)(Lt.Z,{children:".replit looks a lil messed up :/"}),(0,Ie.tZ)("a",{css:[Ne.l0.pt(8),{fontSize:Ne.TV.fontSizeSmall},"",""],target:"_blank",href:"https://docs.replit.com/repls/dot-replit",children:"view docs"})]})}function Lr(){return(0,Ie.tZ)(Lt.Z,{children:(0,Ie.BX)("p",{css:(0,xr.iv)({fontFamily:Ne.TV.fontFamilyCode},"",""),children:["initializing run configuration",(0,Ie.tZ)(kr.Z,{style:{color:"var(--foreground-default)"}})]})})}var Br=function(){var e,t=(0,Ce.Z)(),n=(0,Fe.Z)().fs,r=(0,Se.HmU)({variables:{replId:t}}),i="Repl"===(null===(e=r.data)||void 0===e?void 0:e.repl.__typename)?r.data.repl:null,a=function(e,t){var n=pe.useState(null),r=(0,J.Z)(n,2),i=r[0],a=r[1];return pe.useEffect((function(){var n=!1;return e.readFile(t).then((function(e){n||a(e)})),function(){n=!0}}),[e,t]),i}(n,".replit"),o=pe.useState(!1),s=(0,J.Z)(o,2),c=s[0],l=s[1],u=(0,Se.Fn2)(),d=(0,J.Z)(u,1)[0],p=function(){var e=(0,$.Z)(le().mark((function e(r){var i,a,o,s,c;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.language,a=r.run,l(!0),(0,Zt.track)(Zt.events.REPL_FROM_REPO_RUN_CONFIG_COMPLETED),e.next=5,n.readFile(".replit");case 5:if(o=e.sent,s=function(){},!o.error){e.next=12;break}return e.next=10,n.writeFile(".replit",jr.Z.from(['language = "'.concat(i,'"'),'run = "'.concat(a,'"')].join("\n")));case 10:e.next=15;break;case 12:return e.next=14,Nr({fs:n,run:a,language:i});case 14:s=e.sent;case 15:return e.next=17,n.flush();case 17:return e.next=19,n.persist({skipDebounce:!0});case 19:return s(),c={id:t,language:i},e.next=23,d({variables:{input:c}});case 23:window.location.replace(window.location.pathname);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(!i||!a)return(0,Ie.tZ)(Tr,{children:(0,Ie.tZ)(Lr,{})});if(null!==a&&void 0!==a&&a.error)return(0,Ie.tZ)(Tr,{children:(0,Ie.tZ)(Ar,{})});var f=Sr(a.content.toString("utf8"));return f?(0,Ie.tZ)(Tr,{children:(0,Ie.tZ)(Rr,{initialLanguage:f.language,initialRun:f.run,isApplyingConfig:c,onSubmit:p})}):(0,Ie.tZ)(Tr,{children:(0,Ie.tZ)(Ar,{})})},Ur=n(53769);function Mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mr(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xr=function(e){var t=e.navItems,n=e.activePanePuds;return pe.useEffect((function(){var e=document.body;e&&e.classList&&(t.some((function(e){return n.includes(e.pud)}))?e.classList.remove("sidenav-closed"):e.classList.add("sidenav-closed"))}),[t,n]),(0,Ie.BX)("div",{className:"jsx-3085448894 side-nav",children:[(0,Ie.tZ)("div",{className:"jsx-3085448894 side-nav-options",children:t.map((function(e){return(0,Ie.tZ)(zr,Fr({},e),e.type)}))}),(0,Ie.tZ)(se(),{id:"3085448894",children:[".side-nav.jsx-3085448894{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;background-color:var(--background-default);border-top-left-radius:var(--border-radius-4);border-bottom-left-radius:var(--border-radius-4);border-right:1px solid var(--background-higher);}",".side-nav-options.jsx-3085448894{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;height:100%;padding:var(--space-4) 0;}",".side-nav-active-pane.jsx-3085448894{-webkit-flex:1;-ms-flex:1;flex:1;height:100%;overflow:hidden;}"]})]})},zr=function(e){var t=e.icon?e.icon:Ur[e.svg],n=e.iconWrapper,r=pe.useState(!0),i=(0,J.Z)(r,2),a=i[0],o=i[1],s={"data-testid":"sidenav-".concat(e.type),"aria-label":e.tooltip,"data-microtip-position":"right",role:"tooltip"};return(0,Ie.BX)("div",Fr(Fr({onClick:function(){e.onClick()}},n?{}:s),{},{className:"jsx-1201232229 "+(Xt()("side-nav-item",{"side-nav-item-active":e.isActive})||""),children:[n?(0,Ie.tZ)(n,{pud:e.pud,wid:e.wid,isVisible:a,onDismiss:function(){return o(!1)},tooltipProps:s,className:"jsx-1201232229",children:(0,Ie.tZ)("div",{onClick:function(){return o(!1)},className:"jsx-1201232229 side-nav-item-img",children:(0,Ie.tZ)(t,{className:"jsx-1201232229"})})}):(0,Ie.tZ)("div",{className:"jsx-1201232229 side-nav-item-img",children:(0,Ie.tZ)(t,{className:"jsx-1201232229"})}),(0,Ie.tZ)(se(),{id:"1201232229",children:[".side-nav-item.jsx-1201232229{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;border-radius:var(--border-radius-4);height:calc(var(--space-48) - var(--space-8));width:calc(var(--space-48) - var(--space-8));margin-bottom:var(--space-4);}",".side-nav-item.jsx-1201232229:hover{background:var(--background-higher);}",".side-nav-item.jsx-1201232229:active{background:var(--background-higher);}",".side-nav-item-active.jsx-1201232229{background:var(--accent-primary-dimmest);color:var(--foreground-default);}",".side-nav-item-img.jsx-1201232229{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:20px;width:20px;color:var(--foreground-dimmest);}",".side-nav-item-img.jsx-1201232229 svg.jsx-1201232229{height:100%;width:100%;}",".side-nav-item.jsx-1201232229:hover .side-nav-item-img.jsx-1201232229,.side-nav-item-active.jsx-1201232229 .side-nav-item-img.jsx-1201232229{color:var(--accent-primary-strongest);}"]})]}))};function Vr(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Gr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gr(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Gr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hr(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kr=function(e){var t=e.wid,n=e.pud,r=(0,Tt.J)(t,n,"sidenav"),i=(0,J.Z)(r,1)[0],a=i.activePanePuds,o=i.navItems,s=(0,ft.I0)();return(0,Ie.tZ)(Xr,{activePanePuds:a,navItems:o.map((function(e){return{type:e.pluginType,wid:t,pud:e.pud,onClick:function(){return s(function(e){var t=e.wid,n=e.pud,r=e.forPud;return function(e,i){i().workspace[t].plugins[n].state.activePanePuds.includes(r)?e(qr({wid:t,pud:n,forPud:r})):e(Yr({wid:t,pud:n,forPud:r}))}}({wid:t,pud:n,forPud:e.pud}))},isActive:a.includes(e.pud),svg:e.svg,tooltip:e.tooltip,icon:e.icon,iconWrapper:e.iconWrapper}}))})};function qr(e){var t=e.wid,n=e.pud,r=e.forPud;return function(e,i){var a=i().workspace[t].layout;e((0,_t.fc)(Wr({property:void 0,wid:t},Ot.Od(a,r)))),e({type:"ON_SIDEPANE_CLOSE",wid:t,pud:n,forPud:r})}}function Yr(e){var t=e.wid,n=e.pud,r=e.forPud;return function(e,i){var a=i().workspace[t].layout,o=i().workspace[t].plugins[n].state.activePanePuds,s=Ot.Bp(a,n);if(s){for(var c=Ot.QK(a,Ot.J9(s));"split"===c.type;)c=c.left;"pud"in c&&o.includes(c.pud)&&e(qr({wid:t,pud:n,forPud:c.pud})),a=i().workspace[t].layout;var l=i().workspace[t].plugins[n].state.savedPos;e((0,_t.fc)(Wr({property:void 0,wid:t},Ot.$T(a,r,"leftOf",Ot.J9(s),{position:l})))),(0,Zt.track)(Zt.events.SIDEPANE_PLUGIN_OPENED,{plugin:r}),e({type:"ON_SIDEPANE_OPEN",wid:t,activePanePud:r})}}}function Qr(e,t,n){switch(n.type){case _t.tK:return function(e){var t=e.wid,n=e.pud,r=e.paneType;return function(e,i){var a,o=Vr(i().workspace[t].plugins[n].state.navItems);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(s.pluginType===r)return void e(Yr({wid:t,pud:n,forPud:s.pud}))}}catch(c){o.e(c)}finally{o.f()}}}({wid:e,pud:t,paneType:n.paneType});case"SET_SPLIT_POSITION":return function(e){var t=e.wid,n=e.pud,r=e.position,i=e.path;return 0===r?function(e,r){var a=r().workspace[t],o=a.layout,s=a.plugins[n].state,c=Ot.QK(o,i);"left"in c&&"pud"in c.left&&s.activePanePuds.includes(c.left.pud)&&e(qr({wid:t,pud:n,forPud:c.left.pud}))}:100===r?function(e,r){var a=r().workspace[t],o=a.layout,s=a.plugins[n].state,c=Ot.QK(o,i);"right"in c&&"pud"in c.right&&s.activePanePuds.includes(c.right.pud)&&e(qr({wid:t,pud:n,forPud:c.right.pud}))}:function(e,a){var o=a().workspace[t],s=o.layout,c=o.plugins[n].state,l=Ot.QK(s,i);"left"in l&&"pud"in l.left&&c.activePanePuds.includes(l.left.pud)&&e({type:"SET_SAVED_POSITION",position:r,pud:n,wid:t})}}({wid:e,pud:t,position:n.position,path:n.path});case"OPEN_SIDE_NAV_ITEM":return Yr({wid:e,pud:t,forPud:n.navItem.pud});case"REMOVE_SIDE_NAV_ITEM":return function(r,i){(0,Tt.Z)(i(),e,t,"sidenav").activePanePuds.includes(n.navItemPud)&&r(qr({wid:e,pud:t,forPud:n.navItemPud}))};default:return null}}function Jr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{navItems:[],activePanePuds:[],savedPos:15},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _t.qg:return Wr(Wr({},e),t.initialState);case"PLUGIN_CLOSED":var n=t.closedPud;return Wr(Wr({},e),{},{activePanePuds:e.activePanePuds.filter((function(e){return e!==n}))});case"ON_SIDEPANE_CLOSE":var r=t.forPud;return Wr(Wr({},e),{},{activePanePuds:e.activePanePuds.filter((function(e){return e!==r}))});case"ON_SIDEPANE_OPEN":return e.activePanePuds.includes(t.activePanePud)?e:Wr(Wr({},e),{},{activePanePuds:[].concat((0,nn.Z)(e.activePanePuds),[t.activePanePud])});case"SET_SAVED_POSITION":return Wr(Wr({},e),{},{savedPos:t.position});case"ADD_SIDE_NAV_ITEM":if(e.navItems.some((function(e){return e.pud===t.navItem.pud})))return e;if("index"in t){var i=Math.min(t.index,e.navItems.length);return Wr(Wr({},e),{},{navItems:[].concat((0,nn.Z)(e.navItems.slice(0,i)),[t.navItem],(0,nn.Z)(e.navItems.slice(i)))})}return Wr(Wr({},e),{},{navItems:[].concat((0,nn.Z)(e.navItems),[t.navItem])});case"REMOVE_SIDE_NAV_ITEM":var a=e.navItems.filter((function(e){return e.pud!==t.navItemPud}));return a.length===e.navItems.length?e:Wr(Wr({},e),{},{navItems:a});default:return e}}var $r,ei,ti=n(48756),ni=n(51739),ri=n(1861),ii=n(90579),ai=n(94907),oi=n(11193);function si(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ci(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?si(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):si(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.Unloaded="UNLOADED",e.Loading="LOADING",e.Clean="CLEAN",e.Dirty="DIRTY",e.Syncing="SYNCING",e.Err="ERR"}(ei||(ei={}));var li=($r={},(0,ee.Z)($r,ei.Unloaded,{FILE_UNLOAD:ei.Unloaded,FILE_LOADING:ei.Loading}),(0,ee.Z)($r,ei.Loading,{FILE_UNLOAD:ei.Unloaded,FILE_LOADED:ei.Clean,FILE_ERROR:ei.Err}),(0,ee.Z)($r,ei.Clean,{FILE_UNLOAD:ei.Unloaded,FILE_DIRTY:ei.Dirty}),(0,ee.Z)($r,ei.Dirty,{FILE_UNLOAD:ei.Unloaded,FILE_SYNCING:ei.Syncing,FILE_DIRTY:ei.Dirty}),(0,ee.Z)($r,ei.Syncing,{FILE_UNLOAD:ei.Unloaded,FILE_CLEAN:ei.Clean,FILE_DIRTY:ei.Dirty,FILE_ERROR:ei.Err}),(0,ee.Z)($r,ei.Err,{FILE_UNLOAD:ei.Unloaded}),$r);function ui(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.path&&(0,ai.isHiddenFile)(t.path))return e;switch(t.type){case"FILE_UNLOAD":case"FILE_LOADING":case"FILE_LOADED":case"FILE_SYNCING":case"FILE_DIRTY":case"FILE_CLEAN":case"FILE_ERROR":if((0,ii.GA)(e,t.path).length)return e;var n=e[t.path];if(!n)throw new oi.default("unable to perform file state transition: unknown file").setExtras({currentState:n,action:t});if(!li[n])throw new oi.default("unable to perform file state transition: file is in an unknown state").setExtras({currentState:n,action:t});var r=li[n][t.type];if(!r)throw new oi.default("unable to perform file state transition: invalid state transition").setExtras({currentState:n,action:t});return r===n?e:ci(ci({},e),{},(0,ee.Z)({},t.path,r));case"DELETE_FILE":var i=(0,ii.GA)(e,t.path),a=ci({},e);return i.length?i.forEach((function(e){delete a[e]})):delete a[t.path],a;case"MOVE_FILE":var o=(0,ii.vk)(e,t.path,t.to);if(!o.length)return e;var s=ci({},e);return o.forEach((function(t){var n=(0,J.Z)(t,2),r=n[0],i=n[1];delete s[r],s[i]=e[r]})),s;case"CREATE_FILE":if(e[t.path])throw new oi.default("unable to perform file state transition: invalid state transition").setExtras({currentState:e[t.path],action:t});return ci(ci({},e),{},(0,ee.Z)({},t.path,t.file&&t.file.loaded?ei.Clean:ei.Unloaded));default:return e}}var di=n(55076),pi=n(43421),fi=n(38223),hi=n(17062);var mi=function(e){var t=e.wid,n=e.language,r=e.tabIndex,i=e.filePath,a=e.onClick,o=e.onClose,s=e.isActiveFile,c=(0,Fe.Z)(),l=c.session,u=c.fs,d=(0,pi.c)({item:{type:di.z.FileHeaderTab,path:i,isFolder:!1},type:di.z.FileHeaderTab}),p=(0,J.Z)(d,2)[1],f=(0,ni.L)({accept:[In.Tv.File,di.z.FileNode,di.z.FileHeaderTab],collect:function(e){var t,n=null===(t=e.getItem())||void 0===t?void 0:t.isFolder;return{isOver:e.isOver()&&!n}},drop:function(e){if(e&&!e.isFolder){var a=e.path;a!==i&&(l.openFile(a,{tabIndex:r}),(0,Zt.track)(Zt.events.FILE_HEADER_TAB_REPLACED,{wid:t,language:n,tabIndex:r}))}}}),h=(0,J.Z)(f,2),m=h[0],g=h[1],v=function(e,t){return e?"var(--background-default)":t?"var(--background-higher)":"var(--background-root)"}(s,m.isOver),b=pe.useState(!1),y=(0,J.Z)(b,2),x=y[0],w=y[1],k=i.split("/"),Z=k.pop(),j=k.join("/"),O=function(e){var t=e.path,n=e.initialExpanded,r=(0,Fe.Z)().fs;return(0,hi.Z)({path:t,initialExpanded:n,fs:r})}({path:j.length>0?j:".",initialExpanded:!0}),E=O.children,_=null===E||void 0===E?void 0:E.filter((function(e){return e.filename!==Z}));return(0,Ie.BX)("div",{ref:function(e){p(e),g(e)},onClick:a,className:se().dynamic([["3231529517",[v,s?"var(--foreground-default)":"var(--foreground-dimmer)",s?"var(--shadow-1)":"none",s?"auto":"var(--background-root)"]]])+" "+(Xt()("file-header-tab",{first:0===r})||""),children:[(0,Ie.tZ)("span",{onDoubleClick:function(){w(!0)},className:se().dynamic([["3231529517",[v,s?"var(--foreground-default)":"var(--foreground-dimmer)",s?"var(--shadow-1)":"none",s?"auto":"var(--background-root)"]]])+" file-path",children:x?(0,Ie.tZ)(fi.Z,{onSubmit:function(e){var t=j.length>0?j+"/"+e:e;u.moveFile(i,t),w(!1)},onCancel:function(){w(!1)},loading:!1,siblings:_||[],parentPath:j,type:In.Tv.File,initialValue:Z,rename:!0}):i}),(0,Ie.tZ)(je.Z,{className:"close-file-button",size:"small",border:!1,filled:!1,Icon:cn.Z,onClick:o}),(0,Ie.tZ)(se(),{id:"3231529517",dynamic:[v,s?"var(--foreground-default)":"var(--foreground-dimmer)",s?"var(--shadow-1)":"none",s?"auto":"var(--background-root)"],children:[".file-header-tab.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:0 var(--space-24) 0 var(--space-8);cursor:pointer;height:100%;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;position:relative;background-color:".concat(v,";color:").concat(s?"var(--foreground-default)":"var(--foreground-dimmer)",";box-shadow:").concat(s?"var(--shadow-1)":"none",";min-width:var(--space-80);-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;border-top-right-radius:var(--border-radius-4);border-top-left-radius:var(--border-radius-4);}"),".sidenav-closed .file-header-tab.first{border-top-left-radius:0px;}",".close-file-button{opacity:0.7;position:absolute;right:var(--space-4);padding:2px !important;color:var(--foreground-dimmer) !important;}",".file-header-tab.__jsx-style-dynamic-selector:hover{background-color:".concat(s?"auto":"var(--background-root)",";color:var(--foreground-default);}"),".file-header-tab.__jsx-style-dynamic-selector:hover .file-path{color:var(--foreground-default);}",".file-header-tab.__jsx-style-dynamic-selector:hover .close-file-button{opacity:1;}",".close-file-button:hover{color:var(--foreground-default) !important;}",".file-path.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;}",".spacer.__jsx-style-dynamic-selector{width:var(--space-8);}"]})]})},gi=function(e){var t=e.text;return(0,Ie.BX)("div",{className:"jsx-2757879686 empty",children:[(0,Ie.tZ)(Oe.Z,{size:"small",foreground:2,children:t}),(0,Ie.tZ)(se(),{id:"2757879686",children:[".empty.jsx-2757879686{background-color:var(--background-default);height:100%;min-width:var(--space-80);padding:var(--space-8) var(--space-16);border-top-right-radius:var(--border-radius-4);border-top-left-radius:var(--border-radius-4);}"]})]})},vi=n(13788),bi=n(72318),yi=n(2044);function xi(){var e=(0,Fe.Z)().session,t=pe.useState(e.getPreviewedFile()),n=(0,J.Z)(t,2),r=n[0],i=n[1];return pe.useEffect((function(){return i(e.getPreviewedFile()),e.onPreviewedFileChanged(i)}),[e]),r}var wi=n(63997),ki=n(46290),Zi=n(71225);function ji(e){var t=e.id,n=e.username,r=e.color,i=(0,Fe.Z)().presence,a=(0,Se.qC4)({variables:{ids:[t]},ssr:!1}).data;if(!a)return null;var o=a.usersByIds,s=(0,J.Z)(o,1)[0].image;return(0,Ie.BX)("div",{className:se().dynamic([["2308562916",[r]]])+" following-indicator",children:[(0,Ie.BX)(Ee.Ug,{wrap:"nowrap",className:"stack",spacing:"var(--space-4)",children:[(0,Ie.tZ)(Ee.gC,{className:"stack",align:"center",justify:"center",children:(0,Ie.tZ)(Mt,{id:t,username:n,image:s,color:r,size:22})}),(0,Ie.tZ)(Ee.gC,{className:"text-container",align:"center",justify:"center",children:(0,Ie.BX)(Oe.Z,{className:"following-text",children:["Observing ",n]})}),(0,Ie.tZ)(Ee.gC,{className:"stack",align:"center",justify:"center",children:(0,Ie.tZ)(je.Z,{size:"small",filled:!1,border:!1,textColor:r,onClick:function(){i.unfollowUser()},children:(0,Ie.tZ)(cn.Z,{})})})]}),(0,Ie.tZ)(se(),{id:"2308562916",dynamic:[r],children:[".following-indicator.__jsx-style-dynamic-selector{height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8);}",".following-indicator.__jsx-style-dynamic-selector .stack{height:100%;max-width:100%;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;overflow:clip;}",".following-indicator.__jsx-style-dynamic-selector .text-container{height:100%;margin-right:-2px;}",".following-indicator.__jsx-style-dynamic-selector .following-text{color:".concat(r,";white-space:nowrap;}")]})]})}function Oi(){var e=function(){var e=(0,Fe.Z)().presence,t=pe.useState(e.getFollowingUsers()),n=(0,J.Z)(t,2),r=n[0],i=n[1];return pe.useEffect((function(){return i(e.getFollowingUsers()),e.onFollowingUsersChanged((function(e){i(e.followingUsers)}))}),[e]),r}();return 0===e.length?null:1===e.length?(0,Ie.tZ)(Ei,{user:e[0]}):(0,Ie.BX)("div",{className:"jsx-2812325962 followed-indicator",children:[(0,Ie.BX)(Oe.Z,{children:[e.length," users are observing you"]}),(0,Ie.tZ)(se(),{id:"2812325962",children:[".followed-indicator.jsx-2812325962{white-space:nowrap;height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}"]})]})}function Ei(e){var t=e.user,n=(0,Se.qC4)({variables:{ids:[t.id]},ssr:!1}).data;if(!n)return null;var r=n.usersByIds,i=(0,J.Z)(r,1)[0].image,a=t.id,o=t.username,s=t.color;return(0,Ie.BX)("div",{className:"jsx-1146426626 followed-indicator",children:[(0,Ie.BX)(Ee.Ug,{wrap:"nowrap",align:"center",className:"stack",spacing:"var(--space-4)",children:[(0,Ie.tZ)(Mt,{id:a,username:o,image:i,color:s,size:22}),(0,Ie.tZ)(Oe.Z,{className:"username",children:o}),(0,Ie.tZ)("div",{className:"jsx-1146426626 text",children:(0,Ie.tZ)(Oe.Z,{children:"is observing you"})})]}),(0,Ie.tZ)(se(),{id:"1146426626",children:[".followed-indicator.jsx-1146426626{height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8);}",".text.jsx-1146426626{white-space:nowrap;}",".followed-indicator.jsx-1146426626 .stack{height:100%;}",".followed-indicator.jsx-1146426626 .username{overflow:clip;max-width:150px;display:inline-block;text-overflow:ellipsis;}"]})]})}var _i=n(91189),Ci=n(56810),Si=function(e){var t,n=e.style,r=e.wid,i=e.pud,a=(0,vi.Fg)(),o=(0,Ce.Z)(),s=(0,Fe.Z)(),c=s.session,l=s.fs,u=s.presence,d=(0,bi.Z)().openFiles,p=(0,Nn.Z)(),f=xi(),h=(0,Zi.Z)(),m=(0,ki.Z)(),g=(0,hi.Z)({fs:l,path:wi.Q,initialExpanded:!0}).loading,v=(0,Se.IqK)({variables:{replId:o}}).data,b="Repl"===(null===v||void 0===v?void 0:v.repl.__typename)?v.repl.language:"",y=(0,ft.v9)((function(e){var t=(0,Tt.Z)(e,r,i,"fileheader").filestatus;if(!p||!b)return!0;var n=t[p];return n===ei.Unloaded||n===ei.Loading})),x="md"===(0,Tn.r6)(p||""),w=pe.useCallback((function(){(0,Zt.track)(Zt.events.MARKDOWN_PREVIEW_TOGGLE_CLICKED,{isOn:Boolean(f)}),c.setPreviewedFile(f?null:p)}),[c,f,p]),k=d.map((function(e,t){return(0,Ie.tZ)(mi,{wid:r,language:b,filePath:e,tabIndex:t,onClick:function(){e!==p&&(c.openFile(e),h&&u.unfollowUser())},onClose:function(e){e.stopPropagation(),c.closeTab(t),(0,Zt.track)(Zt.events.FILE_HEADER_TAB_CLOSED,{wid:r,language:b})},isActiveFile:e===p},t)})),Z=pe.useRef(null),j=null===(t=Z.current)||void 0===t?void 0:t.osInstance(),O=pe.useRef(0),E=pe.useRef(0),_=(0,ni.L)({accept:[In.Tv.File,di.z.FileNode,di.z.FileHeaderTab],collect:function(e){var t,n=null===(t=e.getItem())||void 0===t?void 0:t.isFolder;return{isOver:e.isOver({shallow:!0})&&!n}},canDrop:function(e){return!e.isFolder},drop:function(e,t){if(e&&!e.isFolder&&!t.didDrop()){var n=d.length;c.openFile(e.path,{tabIndex:n}),(0,Ci.Z)({replId:o,action:"newTab",source:"dragdrop"})}}}),C=(0,J.Z)(_,2),S=C[0],P=C[1],N=a===vi.V2.replitLight?"os-theme-dark":"os-theme-light",I=g?"Loading files...":"No files open";return(0,Ie.BX)("div",{ref:P,style:n,className:se().dynamic([["1385826773",[S.isOver?"var(--background-higher)":"var(--background-root)",m?"0 0 0 3px ".concat(m):"0",h?"inset(-4px -4px 0px -4px)":"none",S.isOver?"var(--background-higher)":"var(--background-root)"]]])+" file-header",children:[(0,Ie.tZ)(ri.E,{className:N,options:{overflowBehavior:{y:"hidden"},scrollbars:{autoHide:"leave"}},onWheel:function(e){if(j&&0!==e.deltaY&&0===e.deltaX){var t=e.deltaY<0?-1:1,n=E.current!==t?j.scroll().position.x:O.current,r=25*t,i=j.scroll().max.x;O.current=Math.max(0,Math.min(i,n-r)),E.current=t;window.requestAnimationFrame((function e(){if(j){var t=j.scroll().position.x,n=O.current-t,r=Math.round(t+n/10);0!==n&&(j.scroll({x:r}),window.requestAnimationFrame(e))}}))}},ref:Z,children:(0,Ie.tZ)("div",{className:se().dynamic([["1385826773",[S.isOver?"var(--background-higher)":"var(--background-root)",m?"0 0 0 3px ".concat(m):"0",h?"inset(-4px -4px 0px -4px)":"none",S.isOver?"var(--background-higher)":"var(--background-root)"]]])+" file-header-name",children:k.length>0?k:(0,Ie.tZ)(gi,{text:I})})}),y&&(0,Ie.tZ)("div",{className:se().dynamic([["1385826773",[S.isOver?"var(--background-higher)":"var(--background-root)",m?"0 0 0 3px ".concat(m):"0",h?"inset(-4px -4px 0px -4px)":"none",S.isOver?"var(--background-higher)":"var(--background-root)"]]])+" loading-wrapper",children:(0,Ie.tZ)("div",{className:se().dynamic([["1385826773",[S.isOver?"var(--background-higher)":"var(--background-root)",m?"0 0 0 3px ".concat(m):"0",h?"inset(-4px -4px 0px -4px)":"none",S.isOver?"var(--background-higher)":"var(--background-root)"]]])+" file-header-loading-bar"})}),h?null:(0,Ie.tZ)(Oi,{}),x||y||!p||h?null:(0,Ie.tZ)(_i.Z,{filePath:p,replLanguage:b}),h?(0,Ie.tZ)(ji,{id:h.id,username:h.username,color:h.color}):null,x&&!h?(0,Ie.tZ)(yi.Z,{isOn:Boolean(f),onChange:w}):null,(0,Ie.tZ)(se(),{id:"1385826773",dynamic:[S.isOver?"var(--background-higher)":"var(--background-root)",m?"0 0 0 3px ".concat(m):"0",h?"inset(-4px -4px 0px -4px)":"none",S.isOver?"var(--background-higher)":"var(--background-root)"],children:[".file-header.__jsx-style-dynamic-selector{position:relative;z-index:3;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:48px;width:100%;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;background-color:".concat(S.isOver?"var(--background-higher)":"var(--background-root)",";border-top-right-radius:var(--border-radius-4);border-top-left-radius:var(--border-radius-4);box-shadow:").concat(m?"0 0 0 3px ".concat(m):"0",";-webkit-clip-path:").concat(h?"inset(-4px -4px 0px -4px)":"none",";clip-path:").concat(h?"inset(-4px -4px 0px -4px)":"none",";}"),".file-header.__jsx-style-dynamic-selector .os-host{height:100%;-webkit-flex:auto;-ms-flex:auto;flex:auto;min-width:0;}",".os-content-glue{height:50px !important;}",".file-header.__jsx-style-dynamic-selector .os-scrollbar-handle{max-width:300px;}",".file-header-name.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;background-color:".concat(S.isOver?"var(--background-higher)":"var(--background-root)",";color:var(--foreground-dimmer);font-size:var(--font-size-default);height:100%;text-align:center;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;}"),".loading-wrapper.__jsx-style-dynamic-selector{position:absolute;bottom:0;left:0;right:0;height:2px;overflow:hidden;}",".file-header-loading-bar.__jsx-style-dynamic-selector{width:40px;height:2px;position:absolute;bottom:0;left:0;background:var(--background-higher);-webkit-animation:loading-bar-move-__jsx-style-dynamic-selector 2.5s ease-in-out 0s infinite;animation:loading-bar-move-__jsx-style-dynamic-selector 2.5s ease-in-out 0s infinite;-webkit-animation-fill-mode:forward;animation-fill-mode:forward;}","@-webkit-keyframes loading-bar-move-__jsx-style-dynamic-selector{0%{left:-7%;}100%{left:105%;}}","@keyframes loading-bar-move-__jsx-style-dynamic-selector{0%{left:-7%;}100%{left:105%;}}"]})]})},Pi=(0,Ct.$)({filestatus:ui}),Ni=n(90471),Ii=n(50055);var Ti,Di=n(96128),Ri=n(66941),Ai=function(e){var t=e.style,n=e.clearConsole,r=e.findPrevious,i=e.findNext,a=e.refCallback,o=e.wid,s=e.pud,c=(0,vi.Fg)(),l=pe.useState(!1),u=(0,J.Z)(l,2),d=u[0],p=u[1];return(0,Ie.tZ)(sr.xW,{stepId:cr.H.Output,children:(0,Ie.BX)("div",{style:t,onKeyDown:function(e){"f"===e.key&&(0,Ri.jh)(e)&&!e.shiftKey&&(p(!0),e.preventDefault())},className:"jsx-2887662465 "+"".concat(vi.RJ," ").concat(c===vi.V2.replitSpooky?"spooky":"dark"),children:[(0,Ie.BX)("div",{style:{},className:"jsx-2887662465 console",children:[(0,Ie.tZ)("div",{className:"jsx-2887662465 controls",children:(0,Ie.BX)(Ee.Ug,{align:"center",wrap:"nowrap",children:[d?(0,Ie.tZ)(Di.Rh,{findPrevious:r,findNext:i,exit:function(){return p(!1)}}):(0,Ie.tZ)(Di.lD,{onClick:function(){return p(!0)}}),(0,Ie.tZ)(Di.Zr,{onClick:n})]})}),(0,Ie.tZ)("div",{ref:a,className:"jsx-2887662465 xterm-container"}),(0,Ie.tZ)(Bi,{wid:o,pud:s})]}),(0,Ie.tZ)(se(),{id:"664855680",children:[".xterm .xterm-viewport{overflow-y:auto !important;}"]}),(0,Ie.tZ)(se(),{id:"123353512",children:[".console.jsx-2887662465{height:100%;position:relative;background-color:var(--background-default);border-radius:var(--border-radius-4);overflow:hidden;padding-left:1em;padding-top:10px;z-index:1;}",".controls.jsx-2887662465{position:absolute;top:var(--space-8);right:var(--space-16);z-index:5;opacity:0;}",".console.jsx-2887662465:hover .controls.jsx-2887662465{opacity:1;}",".xterm-container.jsx-2887662465{width:100%;box-sizing:border-box;height:100%;}"]})]})})},Li=(Ti={},(0,ee.Z)(Ti,-1,"Loading..."),(0,ee.Z)(Ti,-2,"Fetching token"),(0,ee.Z)(Ti,Ii.api.BootStatus.Stage.ACQUIRING,"Booting Repl"),(0,ee.Z)(Ti,Ii.api.BootStatus.Stage.PULL_FILES,"Downloading files"),(0,ee.Z)(Ti,Ii.api.BootStatus.Stage.LOAD_BLOCK,"Downloading files"),(0,ee.Z)(Ti,Ii.api.BootStatus.Stage.COMPLETE,"Ready"),Ti),Bi=function(e){var t=e.wid,n=e.pud,r=(0,Tt.J)(t,n,"terminal2"),i=(0,J.Z)(r,1)[0],a=i.connectionLoadingStatus,o=i.loadingEngine,s=pe.useState(!o),c=(0,J.Z)(s,2),l=c[0],u=c[1],d=pe.useState(null),p=(0,J.Z)(d,2),f=p[0],h=p[1],m=pe.useState(a.stage in Li?a:{stage:-1}),g=(0,J.Z)(m,2),v=g[0],b=g[1],y=pe.useState(v.progress||0),x=(0,J.Z)(y,2),w=x[0],k=x[1],Z=pe.useRef(v.progress||0),j=pe.useRef(null);pe.useEffect((function(){a.stage in Li&&(v.stage!==a.stage&&(h(v),k(0),j.current=null),b(a))}),[a]),pe.useEffect((function(){if(v.progress&&v.total)if(v.stage===Ii.api.BootStatus.Stage.LOAD_BLOCK){if(!(w>v.progress)){var e=Date.now(),t=0;if(j.current){var n=e-j.current,r=v.progress-Z.current;t=r/n*50}else{t=5e4}j.current=e,Z.current=v.progress;var i=v.total,a=setInterval((function(){k((function(e){var n=e+t;return n>i?i:n}))}),50);return function(){return clearInterval(a)}}}else k(v.progress)}),[v.progress]);var O=v.stage===Ii.api.BootStatus.Stage.COMPLETE;if(pe.useEffect((function(){if(O){var e=setTimeout((function(){u(!0)}),1e3);return function(){return clearTimeout(e)}}}),[O]),l)return(0,Ie.tZ)(Ie.HY,{});var E=0;switch(v.stage){case-2:E=0;break;case-1:E=10;break;case Ii.api.BootStatus.Stage.ACQUIRING:E=20;break;case Ii.api.BootStatus.Stage.PULL_FILES:case Ii.api.BootStatus.Stage.LOAD_BLOCK:E=20+70*(v.total?w/v.total:1);break;case Ii.api.BootStatus.Stage.COMPLETE:E=100;break;default:!function(e){throw new Error("Unhandled discriminated union member: ".concat(JSON.stringify(e)))}(v.stage)}return(0,Ie.BX)("div",{style:{opacity:O?0:1},className:"jsx-3665755028 loader-container",children:[(0,Ie.BX)("div",{className:"jsx-3665755028",children:[f&&(0,Ie.BX)("div",{className:"jsx-3665755028 prev-status status",children:[Li[f.stage],f.total&&" 100%"]},Li[f.stage]),(0,Ie.BX)("div",{className:"jsx-3665755028 current-status status",children:[Li[v.stage],v.total&&" ".concat(Math.floor(w/v.total*100),"%")]},Li[v.stage])]}),(0,Ie.tZ)("div",{className:"jsx-3665755028 loader-bar",children:(0,Ie.tZ)("div",{style:{width:E+"%"},className:"jsx-3665755028 loader-filler"})}),(0,Ie.tZ)(se(),{id:"3665755028",children:[".loader-container.jsx-3665755028{position:absolute;left:25%;right:25%;top:47%;background-color:transparent;color:white;-webkit-transition:opacity 0.5s 2s;transition:opacity 0.5s 2s;}",".loader-bar.jsx-3665755028{background:none;border:solid white 1px;border-radius:10px;}",".loader-filler.jsx-3665755028{height:5px;background-color:#fff;-webkit-transition:width cubic-bezier(0.28,0.26,0.33,1) 2s;transition:width cubic-bezier(0.28,0.26,0.33,1) 2s;}",".status.jsx-3665755028{text-align:center;position:absolute;width:100%;top:-2em;opacity:1;}",".current-status.jsx-3665755028{-webkit-animation:fade-in-jsx-3665755028 0.6s;animation:fade-in-jsx-3665755028 0.6s;}",".prev-status.jsx-3665755028{top:-6em;opacity:0;-webkit-transition:top 0.4s,opacity 0.4s;transition:top 0.4s,opacity 0.4s;}","@-webkit-keyframes fade-in-jsx-3665755028{0%{opacity:0;top:0em;}100%{opacity:1;top:-2em;}}","@keyframes fade-in-jsx-3665755028{0%{opacity:0;top:0em;}100%{opacity:1;top:-2em;}}"]})]})},Ui=n(15542);function Mi(e){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,$.Z)(le().mark((function e(t){var n,r,i,a,o;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ui.Z)(t);case 2:return n=e.sent,r=n.xterm,i=n.fitAddon,a=n.searchAddon,o=n.setTheme,r.fit=function(){return i.fit()},r.searchAddon=a,r.setTheme=o,e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xi=n(93096),zi=n.n(Xi),Vi=n(14907),Gi=n(58526),Hi=n(42463);function Wi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ki(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wi(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qi(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Yi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yi(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Yi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qi(e){return!!e&&!(0===e.h.px&&0===e.h.pc||0===e.w.px&&0===e.w.pc)}function Ji(e){var t=e.wid,n=e.pud,r=e.style,i=e.dimensions,a=(0,Ce.Z)(),o=(0,Tt.J)(t,n,"terminal2"),s=(0,J.Z)(o,1)[0],c=s.lite,l=s.preventFocus,u=s.enabled,d=(0,Fe.Z)(),p=d.fs,f=d.debuggest,h=(0,Gi.Z)("flag-xterm-file-parser"),m=pe.useState(null),g=(0,J.Z)(m,2),v=g[0],b=g[1],y=pe.useRef(null),x=(0,ft.I0)(),w=pe.useCallback((function(){x((0,_t.En)({wid:t,pud:n}))}),[x,t,n]),k=pe.useCallback((function(e){v&&v.searchAddon.findNext(e)}),[v]),Z=pe.useCallback((function(e){v&&v.searchAddon.findPrevious(e)}),[v]),j=pe.useCallback((function(){O.current&&O.current.fit()}),[]),O=pe.useRef(null);pe.useEffect((function(){O.current=v,j()}),[v,j]);var E=pe.useRef(zi()(j,50)).current,_=pe.useCallback((function(){v&&(window.removeEventListener("resize",E),v.dispose())}),[v,E]);pe.useEffect((function(){return function(){_()}}),[_]),pe.useEffect((function(){Qi(i)&&E()}),[i,E]);var C=pe.useCallback(function(){var e=(0,$.Z)(le().mark((function e(r){var o,s,d,m,g,w;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&y.current!==r&&(!i||Qi(i))){e.next=3;break}return!v||c||l||v.focus(),e.abrupt("return");case 3:return y.current=r,v&&_(),e.next=7,Vi.l.query({query:Se.DkS,variables:{replId:a}});case 7:return o=e.sent,s="Repl"===o.data.repl.__typename?o.data.repl:void 0,e.next=11,Mi({loadFileParserAddon:h,onFileLinkClick:function(e,n,r){return x({wid:t,type:"OPEN_DEEP_LINK",path:e,line:n,col:r})},listFiles:p.listFiles,replSlug:null===s||void 0===s?void 0:s.slug});case 11:d=e.sent,b(d),d.open(r),m=null===s||void 0===s?void 0:s.lang.header,d.clear=function(){d.reset(),m&&d.write("".concat(m.replace(/\n/g,"\n\r"),"\n\r"))},d.clear(),g=d.rows,w=d.cols,x((0,_t.H2)({rows:g,cols:w,wid:t})),d.onData((function(e){if(u){var n=(0,Ui.I)(e),r=f.mainClient.current;r&&"terminated"!==r.state.current?r.sendInput(n):x({type:"CONSOLE_INPUT",wid:t,input:n})}})),d.onResize((function(){x((0,_t.H2)({rows:g,cols:w,wid:t}))})),d.attachCustomKeyEventHandler((function(e){return(0,Hi.h)(d,e)})),c||l||d.focus(),window.addEventListener("resize",E),x($i({wid:t,pud:n,term:d}));case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[x,_,i,E,c,l,a,n,v,t,u,p,f,h]),S=(0,vi.Fg)();return pe.useEffect((function(){v&&v.setTheme(S)}),[v,S]),(0,Ie.tZ)(Ai,{wid:t,pud:n,style:r,clearConsole:w,refCallback:C,findNext:k,findPrevious:Z},"".concat(t).concat(n,"terminal2"))}function $i(e){var t=e.wid,n=e.pud,r=e.term;return function(e,i){var a=(0,Tt.Z)(i(),t,n,"terminal2").bufferedTermData;e({type:"CLEAR_BUFFERED_DATA",wid:t,pud:n});var o,s=qi(a);try{for(s.s();!(o=s.n()).done;){var c=o.value;r.write(c)}}catch(l){s.e(l)}finally{s.f()}e({type:"SET_TERM",wid:t,pud:n,termHandle:Ni.Z.getHandle(r)})}}function ea(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{termHandle:null,loadingEngine:!0,bufferedTermData:[],lite:!1,connectionLoadingStatus:{stage:-2},enabled:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _t.qg:return Ki(Ki({},e),t.initialState);case _t.zT:return Ki(Ki({},e),{},{termHandle:null,connectionLoadingStatus:{stage:-2}});case _t.hq:return Ki(Ki({},e),{},{loadingEngine:!0,bufferedTermData:[],connectionLoadingStatus:{stage:-1}});case _t.FG:return Ki(Ki({},e),{},{loadingEngine:!1});case"DISABLE_CONSOLE":return Ki(Ki({},e),{},{enabled:!1});case"ENABLE_CONSOLE":return Ki(Ki({},e),{},{enabled:!0});case"SET_TERM":return Ki(Ki({},e),{},{termHandle:t.termHandle});case"BUFFER_TERM_DATA":return Ki(Ki({},e),{},{bufferedTermData:e.bufferedTermData.concat(t.data)});case"CLEAR_BUFFERED_DATA":return Ki(Ki({},e),{},{bufferedTermData:[]});case"UPDATE_ENGINE_LOAD_STATUS":return Ki(Ki({},e),{},{connectionLoadingStatus:{stage:t.stage,progress:t.progress,total:t.total}});default:return e}}function ta(e,t,n){switch(n.type){case"EVAL_SETUP":return function(e){var t=e.wid,n=e.pud;return function(e,r){var i=(0,Tt.Z)(r(),t,n,"terminal2"),a=i.termHandle,o=i.preventFocus;if(a&&!o&&a){var s=Ni.Z.get(a);s&&s.focus()}}}({wid:e,pud:t});case _t.fv:return function(e){var t=e.wid,n=e.pud;return function(e,r){var i=(0,Tt.Z)(r(),t,n,"terminal2").termHandle;if(i){var a=Ni.Z.get(i);a&&a.clear()}}}({wid:e,pud:t});case _t.wP:return function(e){var t=e.wid,n=e.pud,r=e.message;return function(e,i){var a=(0,Tt.Z)(i(),t,n,"terminal2"),o=a.termHandle;if(a.enabled){var s=r.data;if(r.raw||(s=s.replace(/\n/g,"\n\r"),"error"===r.type&&(s="\x1b[31m".concat(s,"\x1b[00m"))),o){var c=Ni.Z.get(o);c?c.write(s):e({type:"BUFFER_TERM_DATA",wid:t,pud:n,data:s})}else e({type:"BUFFER_TERM_DATA",wid:t,pud:n,data:s})}}}({wid:e,pud:t,message:n.message});case _t.FG:return function(e){var t=e.wid,n=e.pud;return function(e,r){var i=(0,Tt.Z)(r(),t,n,"terminal2").termHandle;if(i){var a=Ni.Z.get(i);a&&e((0,_t.H2)({rows:a.rows,cols:a.cols,wid:t}))}}}({wid:e,pud:t});case"FIT_TERMINAL":return function(e){var t=e.wid,n=e.pud;return function(e,r){var i=(0,Tt.Z)(r(),t,n,"terminal2").termHandle;if(i){var a=Ni.Z.get(i);a&&a.fit()}}}({wid:e,pud:t});default:return null}}var na=n(80506),ra=n(73367);function ia(){var e=(0,Fe.Z)().replbox;return(0,Ie.tZ)(ra.Z,{replbox:e})}var aa=(0,ft.$j)((function(e,t){return e.workspace[t.wid].plugins[t.pud].state}),{evalProject:_t.mT,stopEval:_t.Rl})((function(e){var t=e.wid,n=e.loading,r=e.runstate,i=e.maxWidthBreakpoint,a=e.evalProject,o=e.stopEval,s=(0,Ce.Z)(),c=(0,Se.Iz6)({variables:{id:s}}).data,l=rr({replbox:(0,Fe.Z)().replbox}),u=(0,vi.Fg)(),d="floating-run",p=function(){};if(c)if("Repl"===c.repl.__typename&&"replbox"===c.repl.lang.engine){var f=c.repl;l.runState===nr.A.OFFLINE||l.runState===nr.A.STOPPING?d+=" floating-run-loading":l.runState===nr.A.RUNNING?(d+=" floating-run-stop",p=function(){l.stopRun()}):l.runState===nr.A.IDLE&&(p=function(){l.run(),(0,Zt.track)(Zt.events.PROJECT_RAN,{wid:t,language:f.language,replId:s,replTitle:f.title})})}else n||"stopping"===r?d+=" floating-run-loading":"running"===r?(d+=" floating-run-stop",p=function(){o({wid:t})}):p=function(){a({wid:t})};else d+=" floating-run-loading";return(0,Ie.tZ)("div",{onClick:p,className:se().dynamic([["1448111686",[u===vi.V2.replitSpooky?"url(/public/images/run_orange.svg)":"url(/public/images/run_green.svg)",i]]])+" "+(d||""),children:(0,Ie.tZ)(se(),{id:"1448111686",dynamic:[u===vi.V2.replitSpooky?"url(/public/images/run_orange.svg)":"url(/public/images/run_green.svg)",i],children:[".floating-run.__jsx-style-dynamic-selector{display:none;position:absolute;bottom:24px;right:24px;height:50px;width:50px;border-radius:100%;border:solid 2px var(--accent-positive-dimmer);cursor:pointer;background-image:".concat(u===vi.V2.replitSpooky?"url(/public/images/run_orange.svg)":"url(/public/images/run_green.svg)",";background-size:20px 20px;background-position:center;background-repeat:no-repeat;background-color:var(--accent-positive-dimmest);z-index:1000;opacity:0.5;}"),".floating-run-loading.__jsx-style-dynamic-selector{background-image:url(/public/images/loading_dots.gif);}",".floating-run-stop.__jsx-style-dynamic-selector{background-image:url(/public/images/stop_green.svg);}",".run-cta.__jsx-style-dynamic-selector{background:var(--accent-primary-default);padding:var(--space-16);color:var(--white);border-radius:var(--border-radius-4);}","@media screen and (max-width:".concat(i,"px){.floating-run.__jsx-style-dynamic-selector{display:block;}}")]})})})),oa=aa;function sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ca(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sa(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var la=(0,Ct.$)({primary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0,maxWidthBreakpoint:500},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _t.qg:return ca(ca({},e),t.initialState);case _t.hq:return ca(ca({},e),{},{loading:!0});case _t.FG:return ca(ca({},e),{},{loading:!1});default:return e}},runstate:St.Z}),ua=n(59909),da=function(){var e=(0,Se.__3)().data;return null!==e&&void 0!==e&&e.currentUser?(0,Ie.BX)("div",{className:"jsx-1557842061 help-container",children:[(0,Ie.tZ)(ua.Z,{currentUser:e.currentUser,tooltipPlacement:"right"}),(0,Ie.tZ)(se(),{id:"1557842061",children:[".help-container.jsx-1557842061{position:absolute;left:var(--space-8);bottom:var(--space-16);z-index:20;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:var(--space-32);height:var(--space-32);cursor:pointer;border-radius:100%;background-color:var(--background-default);color:var(--foreground-dimmer);border:1px solid var(--background-highest);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-shadow:var(--shadow-1);-webkit-transition:0.1s;transition:0.1s;}",".help-container.jsx-1557842061:hover{border:1px solid var(--outline-default);box-shadow:var(--shadow-2);}",".help-container.jsx-1557842061:active{border:1px solid var(--accent-primary-default);box-shadow:var(--shadow-1);}"]})]}):null},pa=n(7),fa=n(77822);function ha(e){var t=(0,pa.x)();return pe.useEffect((function(){null!==t&&void 0!==t&&t.language&&(0,Zt.track)(Zt.events.LIBRARIES_SEARCHED,{language:null===t||void 0===t?void 0:t.language})}),[null===t||void 0===t?void 0:t.language]),(0,Ie.BX)(or.Z,{background:"default",css:(0,xr.iv)({justifyContent:"flex-start",borderTopRightRadius:Ne.TV.borderRadius4,borderBottomRightRadius:Ne.TV.borderRadius4,height:"100%"},"",""),children:[(0,Ie.tZ)(Lt.Z,{css:(0,xr.iv)({position:"relative",height:Ne.TV.space48,justifyContent:"center",padding:Ne.TV.space12},"",""),children:(0,Ie.tZ)(Rn.h,{variant:"subheadBig",level:3,children:"Packages"})}),(0,Ie.tZ)(fa.Z,{}),(0,Ie.tZ)(se(),{id:"641917437",children:[".pkgsearch-header.jsx-641917437{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;height:var(--space-48);padding:var(--space-16) var(--space-8);position:relative;color:var(--foreground-default);width:100%;}"]})]})}var ma=n(62884);function ga(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function va(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ga(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ga(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ba=function(e){var t=e.style,n=(0,Fe.Z)().fs,r=(0,Nn.Z)(),i=(0,ki.Z)();return r?(0,Ie.tZ)(Lt.Z,{css:(0,xr.iv)(va(va({},t),{},{zIndex:3,position:"relative",boxShadow:i?"0 3px 0 3px ".concat(i):"0"}),"",""),children:(0,Ie.tZ)(ma.Z,{filePath:r,fs:n})}):(0,Ie.tZ)("div",{style:t,children:"No file to show"})},ya=n(68603),xa=n(85636);function wa(e){var t=e.wid,n=e.style,r=(0,xa.Z)(),i=(0,ft.I0)();return pe.useEffect((function(){r&&(0,Zt.track)(Zt.events.PREFERENCES_OPENED,{wid:t,language:r.language})}),[t,r]),(0,Ie.BX)("div",{style:n,className:"jsx-275685224 workspace-preferences",children:[(0,Ie.tZ)("div",{className:"jsx-275685224 preferences-header",children:(0,Ie.tZ)(Xe.Z,{level:4,children:"Settings"})}),(0,Ie.tZ)(ya.Z,{onBeforePreferencesUpdate:function(e){void 0!==e.isLayoutStacked&&i(function(e,t){return function(n,r){var i=r().workspace[e],a=i.layout,o=i.plugins,s=Ot.PP(a,o,"editor")||Ot.PP(a,o,"codemirror")||Ot.PP(a,o,"blank")||Ot.PP(a,o,"markdownviewer")||Ot.PP(a,o,"mediaview"),c=Ot.PP(a,o,"console")||Ot.PP(a,o,"terminal2");if(c&&s){var l=Ot.i3(s,c);if(l){n((0,_t.fc)({wid:e,path:l,property:"stacked",to:t}));var u=Ot.PP(a,o,"webview")||Ot.PP(a,o,"replboxdisplay");if(u){var d=Ot.i3(u,c);d&&n((0,_t.fc)({wid:e,path:d,property:"stacked",to:!t}))}}}}}(t,e.isLayoutStacked)),i({type:_t.Dq,wid:t,updates:e})}}),(0,Ie.tZ)(se(),{id:"275685224",children:[".workspace-preferences.jsx-275685224{background:var(--background-default);border-top-right-radius:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);overflow-y:auto;}",".preferences-header.jsx-275685224{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;height:var(--space-48);padding:var(--space-16) var(--space-8);color:var(--foreground-default);width:100%;}"]})]})}var ka=n(74358),Za=n(82448);function ja(){var e=(0,Fe.Z)().replbox;return(0,Ie.tZ)(Za.Z,{replbox:e})}var Oa=n(85893);function Ea(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,ae.Z)(e);if(t){var i=(0,ae.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,ie.Z)(this,n)}}var _a=function(e){(0,re.Z)(n,e);var t=Ea(n);function n(){return(0,te.Z)(this,n),t.apply(this,arguments)}return(0,ne.Z)(n,[{key:"render",value:function(){return(0,Oa.jsxs)("div",{style:this.props.style,className:"jsx-849216488 react-native-container",children:[(0,Oa.jsxs)("div",{className:"jsx-849216488 react-native-content",children:[(0,Oa.jsx)("div",{style:{fontSize:"25px",textAlign:"center"},className:"jsx-849216488",children:"\ud83d\ude14"}),(0,Oa.jsx)("br",{className:"jsx-849216488"}),(0,Oa.jsx)("br",{className:"jsx-849216488"}),"We have discontinued support for React Native on Replit to focus more on other languages that use our infrastracture. We had a good run and we're happy to have served thousands of users play with mobile apps using their favorite web IDE.",(0,Oa.jsx)("br",{className:"jsx-849216488"}),(0,Oa.jsx)("br",{className:"jsx-849216488"}),"You can checkout our"," ",(0,Oa.jsx)(Dt.default,{href:"/languages",children:(0,Oa.jsx)("a",{className:"jsx-849216488",children:"broad list of languages."})}),(0,Oa.jsx)("br",{className:"jsx-849216488"}),(0,Oa.jsx)("br",{className:"jsx-849216488"}),"For React Native you should head over to"," ",(0,Oa.jsx)("a",{href:"https://snack.expo.io/",target:"_blank",className:"jsx-849216488",children:"Snack"})," ","where our friends at ",(0,Oa.jsx)("a",{href:"https://expo.io/",className:"jsx-849216488",children:"Expo"})," have created a playground dedicated to React Native mobile development."]}),(0,Oa.jsx)(se(),{id:"849216488",children:[".react-native-container.jsx-849216488{font-size:17px;line-height:1.2;}",".react-native-content.jsx-849216488{max-width:800px;margin:30px auto;}"]})]})}}]),n}(pe.Component),Ca=n(3139),Sa=n(57638);function Pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Na(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pa(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ia="CONNECT_VNC",Ta="SET_VNC_URL",Da="LOADING_GOVAL_STARTED";function Ra(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{vncUrl:"",connectCalled:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ta:return Na(Na({},e),{},{vncUrl:t.vncUrl});case Ia:return Na(Na({},e),{},{connectCalled:!0,vncUrl:t.vncUrl});case Da:return Na(Na({},e),{},{connectCalled:!1});default:return e}}var Aa=function(e){var t=e.wid,n=e.pud,r=(0,Tt.J)(t,n,"vnc"),i=(0,J.Z)(r,1)[0].connectCalled,a=(0,Fe.Z)(),o=a.fs,s=a.container;return pe.useContext(Sa.F)?(0,Ie.tZ)(Sa.Y,{}):i?(0,Ie.BX)("div",{className:"jsx-1356276128",children:[(0,Ie.tZ)(Ca.Z,{container:s,fs:o}),(0,Ie.tZ)(se(),{id:"1356276128",children:["div.jsx-1356276128{background:var(--background-root);height:100%;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]}):(0,Ie.BX)("div",{className:"jsx-2244211679",children:[(0,Ie.BX)(Oe.Z,{children:[(0,Ie.tZ)(Oe.Z,{style:{color:"var(--accent-positive-default)"},children:"Run "}),"your repl to see output"]}),(0,Ie.tZ)(se(),{id:"2244211679",children:["div.jsx-2244211679{background:var(--background-root);height:100%;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]})};function La(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Ba(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ba(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Ba(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ua=function e(){var t=this;(0,te.Z)(this,e),this.waits=void 0,this.rcv=function(e){var n,r=La(t.waits.entries());try{for(r.s();!(n=r.n()).done;){var i=(0,J.Z)(n.value,2),a=i[0],o=i[1],s=void 0;try{s=a(e)}catch(c){return t.waits.delete(a),void o.reject(c)}if("boolean"!==typeof s){t.waits.delete(a);var c=new Error("Your wait callback must return a boolean");return void o.reject(c)}s&&(t.waits.delete(a),o.resolve(e))}}catch(l){r.e(l)}finally{r.f()}},this.wait=function(){var e=(0,$.Z)(le().mark((function e(n){return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){t.waits.set(n,{resolve:e,reject:r})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.waits=new Map};var Ma=function(e){var t=[],n=null;return{receiver:function(e){var t={};return function(n,r,i){return t[n+r]||(t[n+r]=new Ua),t[n+r].rcv(i),e(n,r,i,t[n+r].wait)}}((function(r,i,a,o){var s={wid:r,pud:i,action:a,wait:o};return e&&!e.includes(s.action.type)?null:n?(n(s),null):(t.push(s),null)})),useReceiver:function(e){var r,i;pe.useDebugValue("Captured events: ".concat(t.length)),pe.useDebugValue("First event: ".concat(null===(r=t[0])||void 0===r?void 0:r.action.type)),pe.useDebugValue("Last event: ".concat(null===(i=t[t.length-1])||void 0===i?void 0:i.action.type)),pe.useEffect((function(){if(null!==n)throw new Error("Expected callback to be null, please useReceiver once in your plugin, or avoid using multiple instances of the plugin");return t.forEach(e),t=[],n=e,function(){n=null}}),[e])}}},Fa=n(15004);function Xa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function za(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xa(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Va(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{canBeClosed:!1,autoReload:!1},t=arguments.length>1?arguments[1]:void 0;return t.type===_t.qg?za(za({},e),t.initialState):e}var Ga=Ma(["REFRESH_WEBVIEW","EVAL_ENDED","FILE_CLEAN"]),Ha=Ga.receiver,Wa=Ga.useReceiver;function Ka(e){var t=e.wid,n=e.pud,r=(0,ft.I0)(),i=(0,Ce.Z)(),a=(0,Tt.J)(t,n,"webview"),o=(0,J.Z)(a,1)[0],s=o.canBeClosed,c=o.autoReload,l=(0,Se.Qte)(),u=(0,J.Z)(l,2),d=u[0],p=u[1],f=(0,sn.Z)().showError;pe.useEffect((function(){p.error&&f(p.error)}),[p.error,f]),pe.useEffect((function(){if(p.data){var e=p.data.updateRepl.repl.config;r({wid:t,type:"REPL_UPDATED",updates:{config:e}})}}),[p.data,r,t]);var h=pe.useRef(null),m=(0,Fe.Z)().fs;return Wa((function(e){var t;switch(e.action.type){case"EVAL_ENDED":case"REFRESH_WEBVIEW":null===(t=h.current)||void 0===t||t.refresh();break;case"FILE_CLEAN":var n;if(c)null===(n=h.current)||void 0===n||n.refresh()}return null})),(0,Ie.tZ)(Fa.Z,{ref:h,fs:m,trackUrlSelect:function(e){r((0,_t.R$)({wid:t,eventKey:"WEB_HOSTING_URL_SELECTED",properties:{url:e},trackOnce:!0}))},canBeClosed:s,onClose:function(){d({variables:{input:{id:i,isServer:!1}}}),r(function(e){var t=e.wid,n=e.pud;return function(e,r){var i=r().workspace[t].layout,a=Ot.Od(i,n),o=a.path,s=a.to;e((0,_t.fc)({wid:t,path:o,to:s,property:null})),e({type:"UNLOAD_PLUGIN",wid:t,pud:n})}}({wid:t,pud:n}))}})}function qa(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Ya(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ya(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Ya(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ja(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qa(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $a={};function eo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$a,t=arguments.length>1?arguments[1]:void 0,n=function(){switch(t.type){case"FILE_UNLOAD":return Ja(Ja({},e),{},(0,ee.Z)({},t.path,{path:t.path,loaded:!1}));case"FILE_LOADED":case"FILE_CACHE_HIT":return Ja(Ja({},e),{},(0,ee.Z)({},t.path,Ja(Ja({},e[t.path]),t.file)));case"CREATE_FILE":return Ja(Ja({},e),{},(0,ee.Z)({},t.path,t.file||{path:t.path,loaded:!1}));case"MOVE_FILE":var n=(0,ii.vk)(e,t.path,t.to);if(!n.length)return e;var r=Ja({},e);return n.forEach((function(t){var n=(0,J.Z)(t,2),i=n[0],a=n[1];delete r[i];var o=e[i];if(!o)throw new Error("No source file!");r[a]=Ja(Ja({},o),{},{path:a})})),r;case"DELETE_FILE":var i=(0,ii.GA)(e,t.path);if(i.length&&e[t.path])throw new oi.default("matched children and node while deleting").setExtras({path:t.path,fileState:e});var a=Ja({},e);return i.length?i.forEach((function(e){delete a[e]})):delete a[t.path],a;case"OT_FILE_OP":if(!t.changeSource)throw new Error("Expected changeSource on action OT_FILE_OP got "+JSON.stringify(t));var o=e[t.path];if(!o)throw new Error("tried to perform an OT op on "+t.path+" but we don't know about that file.");if(!o.loaded)return e;var s=to(jr.Z.from(o.content).toString("utf8"),t.op);return Ja(Ja({},e),{},(0,ee.Z)({},t.path,Ja(Ja({},o),{},{content:jr.Z.from(s)})));default:return e}}();return t.path&&n!==e&&!e[t.path]&&n[t.path]&&"CREATE_FILE"!==t.type&&xt.$e((function(n){n.setExtra("action",t),n.setExtra("prevstate",e),xt.Tb(new Error("created file without using CREATE_FILE or FILE_CACHE_HIT"))})),n}function to(e,t){var n,r=e,i=0,a=qa(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;if("string"===typeof o)r=r.slice(0,i)+o+r.slice(i),i+=o.length;else if("object"===typeof o&&"number"===typeof o.d)r=r.slice(0,i)+r.slice(i+o.d);else{if("number"!==typeof o)throw new Error("bad ot op: "+o);i+=o}}}catch(s){a.e(s)}finally{a.f()}return r}function no(e){var t=e.wid;return function(e,n){var r=n(),i=r.workspace?r.workspace[t]:r,a=function(e,t){var n=Ot.PP(e,t,"fileheader");if(!n)throw new Error("expected to find fileHeader in layout!");return window["flag-windowing"]?Ot.Il(n):Ot.J9(n)}(i.layout,i.plugins);if(!a)throw new Error("No editor mounted");e({type:"UPDATE_LAYOUT",wid:t,path:a,to:"blank",property:"pud"})}}function ro(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var io="fileviewercontroller";function ao(e){return(0,Tn.T3)(e)?"mediaview":(0,Tn.sL)(e)?"draw":(0,Tn.IQ)(e)?"pedit":"codemirror"}function oo(e){var t=e.wid,n=e.pud,r=e.path;return function(e,i){if(window["open-markdown-split"]&&"md"!==(0,Tn.r6)(r)){var a=i().workspace[t],o=a.layout,s=a.plugins;if(Ot.PP(o,s,"markdownviewer")){var c=Object.keys(s).find((function(e){return"markdownviewer"===s[e].type}));if(!c)throw new Error("Expect a markdownviewer to be in pluginlist");e(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ro(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ro(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"UPDATE_LAYOUT",wid:t},Ot.Od(o,c)))}}var l=i().workspace[t],u=function(e,t){var n=Ot.PP(e,t,"fileheader");if(!n)throw new Error("expected to find fileHeader in layout!");return window["flag-windowing"]?Ot.Il(n):Ot.J9(n)}(l.layout,l.plugins);if(!u)throw new Error("No editor mounted");var d=(0,Tt.Z)(i(),t,n,io).files[r];d&&d.loaded||e({type:"LOAD_FILE",wid:t,path:r}),e({type:"UPDATE_LAYOUT",wid:t,path:u,to:ao(r),property:"pud"})}}var so=Ma(["WORKSPACE_MOUNTED","FILE_UNLOAD","OPEN_FILE","MOVE_FILE","DELETE_FILE","WORKSPACE_WILL_UNMOUNT"]),co=so.receiver,lo=so.useReceiver;function uo(e){var t=e.wid,n=e.pud,r=(0,ft.I0)(),i=(0,Fe.Z)().session,a=xi(),o=pe.useState(!1),s=(0,J.Z)(o,2),c=s[0],l=s[1],u=(0,Tt.J)(t,n,"fileviewercontroller"),d=(0,J.Z)(u,1)[0].files,p=(0,ft.v9)((function(e){return e.workspace[t].activeFile}));return pe.useEffect((function(){a&&(d[a]||p&&"md"===(0,Tn.r6)(p)||i.setPreviewedFile(null))}),[a,i,d,p]),pe.useEffect((function(){p&&"md"===(0,Tn.r6)(p)&&i.setPreviewedFile(p)}),[i,p]),lo((function(e){var i=e.action;switch(i.type){case"WORKSPACE_MOUNTED":if(l(!0),!p)break;r({type:"LOAD_FILE",wid:t,path:p});break;case"FILE_UNLOAD":if(!c)break;var a=i.path;r(function(e){var t=e.wid,n=e.path;return function(e,r){setTimeout((function(){var i=r().workspace[t].activeFile;n===i&&e({type:"LOAD_FILE",wid:t,path:i})}))}}({wid:t,path:a}));break;case"OPEN_FILE":var o=i.path;if(!o)break;r(oo({wid:t,pud:n,path:o}));break;case"MOVE_FILE":var s=i.path,u=i.to;if(p!==s)break;r({type:"OPEN_FILE",wid:t,path:u});break;case"DELETE_FILE":var d=i.path;r(function(e){var t=e.wid,n=e.pud,r=e.path;return function(e,i){var a=i().workspace[t].activeFile;if(a&&(a===r||(0,ii.yr)(r,a))){var o=(0,Tt.Z)(i(),t,n,io).files,s=Object.keys(o).concat(r).sort(),c=s.indexOf(r),l=s[0===c?1:c-1];e(void 0!==l?{type:"OPEN_FILE",wid:t,path:l}:no({wid:t}))}}}({wid:t,pud:n,path:d}));break;case"WORKSPACE_WILL_UNMOUNT":l(!1)}return null})),null}var po=(0,Ct.$)({files:eo}),fo=n(24561);function ho(e){var t=e.preventHighlightBorder,n=(0,ki.Z)();return(0,Ie.BX)("div",{className:se().dynamic([["3681970762",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])+" loader",children:[(0,Ie.tZ)("div",{className:se().dynamic([["3681970762",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])+" wrap",children:(0,Ie.BX)(fo.ZP,{primaryColor:"var(--background-highest)",secondaryColor:"var(--background-higher)",uniquekey:"editorLoader",children:[(0,Ie.tZ)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"70",height:"10",className:se().dynamic([["3681970762",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,Ie.tZ)("rect",{x:"80",y:"0",rx:"3",ry:"3",width:"100",height:"10",className:se().dynamic([["3681970762",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,Ie.tZ)("rect",{x:"190",y:"0",rx:"3",ry:"3",width:"10",height:"10",className:se().dynamic([["3681970762",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,Ie.tZ)("rect",{x:"15",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:se().dynamic([["3681970762",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,Ie.tZ)("rect",{x:"155",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:se().dynamic([["3681970762",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,Ie.tZ)("rect",{x:"15",y:"40",rx:"3",ry:"3",width:"90",height:"10",className:se().dynamic([["3681970762",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,Ie.tZ)("rect",{x:"115",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:se().dynamic([["3681970762",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,Ie.tZ)("rect",{x:"185",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:se().dynamic([["3681970762",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,Ie.tZ)("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"30",height:"10",className:se().dynamic([["3681970762",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,Ie.tZ)("rect",{x:"15",y:"80",rx:"3",ry:"3",width:"70",height:"10",className:se().dynamic([["3681970762",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,Ie.tZ)("rect",{x:"95",y:"80",rx:"3",ry:"3",width:"60",height:"10",className:se().dynamic([["3681970762",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,Ie.tZ)("rect",{x:"165",y:"80",rx:"3",ry:"3",width:"30",height:"10",className:se().dynamic([["3681970762",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,Ie.tZ)("rect",{x:"15",y:"100",rx:"3",ry:"3",width:"110",height:"10",className:se().dynamic([["3681970762",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,Ie.tZ)("rect",{x:"135",y:"100",rx:"3",ry:"3",width:"100",height:"10",className:se().dynamic([["3681970762",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,Ie.tZ)("rect",{x:"0",y:"120",rx:"3",ry:"3",width:"70",height:"10",className:se().dynamic([["3681970762",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])})]})}),(0,Ie.tZ)(se(),{id:"3681970762",dynamic:[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"],children:[".loader.__jsx-style-dynamic-selector{position:absolute;z-index:3;right:0;top:0;height:100%;width:100%;background-color:var(--background-default);overflow:hidden;padding:var(--space-16);border-bottom-right-radius:var(--border-radius-4);border-bottom-left-radius:var(--border-radius-4);box-shadow:".concat(n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)",";}"),".wrap.__jsx-style-dynamic-selector{overflow:hidden;}",".wrap.__jsx-style-dynamic-selector>svg{max-width:640px;min-width:500px;height:auto;}","@media screen and (min-width:900px){.loader.__jsx-style-dynamic-selector{padding:30px;}}"]})]})}function mo(){var e=(0,Fe.Z)().session,t=pe.useState(e.getCursorPosition()),n=(0,J.Z)(t,2),r=n[0],i=n[1];return pe.useEffect((function(){return i(e.getCursorPosition()),e.onCursorPositionChanged(i)}),[e]),r}var go=n(53339),vo=n(46657),bo=n(17426),yo=n(22094),xo=n(84188),wo=zi()((function(e){e.scrollIntoView({behavior:"smooth",block:"center"})}),100),ko=pe.memo(vo.Z),Zo=function(e){var t=(0,Fe.Z)().fs,n=mo(),r=(0,Nn.Z)(),i=(0,Fe.Z)().session,a=pe.useState(!1),o=(0,J.Z)(a,2),s=o[0],c=o[1],l=xi(),u=pe.useState(!0),d=(0,J.Z)(u,2),p=d[0],f=d[1];pe.useEffect((function(){r&&l!==r&&"md"===(0,Tn.r6)(r)&&i.setPreviewedFile(r)}),[l,r,i]);var h=pe.useRef(null),m=(0,go.Z)((function(){c(!0),h.current&&clearTimeout(h.current),h.current=setTimeout((function(){c(!1)}),150)}),{type:"throttle",wait:37.5});pe.useLayoutEffect((function(){if(!s&&r===l){var e=document.querySelectorAll(".rendered-markdown [data-sourcepos]"),t=Array.from(e);if(t)for(var i=n.lineNumber,a=n.column,o=0,c=t;o<c.length;o++){var u=c[o],d=u.dataset.sourcepos;if(!d)throw new Error("Expected data source pos on selected element");var p=d.split("-"),f=(0,J.Z)(p,2),h=f[0],m=f[1],g=h.split(":").map(Number),v=(0,J.Z)(g,2),b=v[0],y=v[1],x=m.split(":").map(Number),w=(0,J.Z)(x,2),k=w[0],Z=w[1];if(i>=b&&a>=y&&(i<k||i===k&&a<=Z))return void wo(u)}}}),[n,s,r,l]);var g=pe.useState(null),v=(0,J.Z)(g,2),b=v[0],y=v[1];return pe.useEffect((function(){if(y(null),l&&(0,Tn.Mb)(l)){var e=t.watchOtFile(l,{onReady:function(e){var t=e.initialContent;y(t.toString())},onChange:function(e){var t=e.latestContent;y(t)}});return e}}),[l,t]),l?null===b?(0,Ie.tZ)(ho,{preventHighlightBorder:!0}):(0,Ie.BX)(bo.G7,{css:[bo.l0.colWithGap(8),bo.l0.height("100%"),bo.l0.width("100%"),bo.l0.overflow("auto"),bo.l0.backgroundColor.backgroundDefault,bo.l0.zIndex(2),bo.l0.align.center,bo.l0.py(16),bo.l0.px(16),(0,ee.Z)({margin:"0 auto"},"@media only screen and (min-width: ".concat(Ze.j.tabletMin,"px)"),bo.l0.px(32)),"",""],tag:"div",innerRef:m,children:[(0,Ie.BX)(bo.G7,{css:[bo.l0.rowWithGap(0),bo.l0.height(30),bo.l0.width("100%"),bo.l0.justify.spaceBetween,bo.l0.align.center,bo.l0.backgroundColor.backgroundDefault,"",""],children:[(0,Ie.tZ)(jo,{}),(0,Ie.tZ)(bo.hU,{alt:p?"Unconstrain content width":"Constrain content width",onClick:function(){return f((function(e){return!e}))},children:(0,Ie.BX)(bo.G7,{css:[bo.l0.rowWithGap(0),bo.l0.align.center,"",""],children:[p?(0,Ie.tZ)(yo.Z,{}):(0,Ie.tZ)(xo.Z,{}),p?(0,Ie.tZ)(xo.Z,{}):(0,Ie.tZ)(yo.Z,{})]})})]}),(0,Ie.tZ)(bo.G7,{css:[p&&bo.l0.maxWidth(840),bo.l0.width("100%"),"",""],children:(0,Ie.tZ)(ko,{path:l,source:b,fs:t,sourcePos:!0})})]}):(0,Ie.tZ)("div",{style:e.style,children:"No current file"})},jo=function(){var e=xi();return(0,Ie.BX)(bo.G7,{css:[bo.l0.rowWithGap(2),bo.l0.color.foregroundDimmer,bo.l0.width("calc(100% - ".concat(bo.TV.space16,")")),bo.l0.align.center,"",""],children:[(0,Ie.tZ)(rn.Z,{}),(0,Ie.BX)(bo.xv,{css:bo.l0.m(4),color:"dimmer",children:["Preview of ",(0,Ie.tZ)("a",{href:"#".concat(e),children:e})]})]})},Oo=n(37662),Eo=n(95676),_o=n(38217),Co=n(26936),So=n(25108);function Po(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function No(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Po(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Po(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Io=".lesson/".concat("instructions.md"),To=function(e){var t=e.contents,n=(0,Fe.Z)().fs,r=(0,Eo.mn)({fs:n}),i=pe.useCallback((function(e){var t=e.src;return(0,Ie.tZ)(Eo.TS,{previewFilePath:Io,src:t,getImageContent:r,deeplink:!0})}),[r]);return(0,Ie.BX)("div",{className:se().dynamic([["3947362509",[Ze.j.tabletMin]]])+" root",children:[(0,Ie.tZ)("div",{className:se().dynamic([["3947362509",[Ze.j.tabletMin]]])+" content",children:(0,Ie.tZ)(Oo.Z,{components:{code:_o.Z,a:Eo._,img:i},sourcePos:!0,children:t})}),(0,Ie.tZ)(se(),{id:"3947362509",dynamic:[Ze.j.tabletMin],children:[".root.__jsx-style-dynamic-selector{height:100%;width:100%;overflow:auto;background:var(--background-default);z-index:2;position:relative;}",".content.__jsx-style-dynamic-selector{max-width:840px;margin:0 auto;padding:var(--space-32) var(--space-16);}","@media only screen and (min-width:".concat(Ze.j.tabletMin,"px){.content.__jsx-style-dynamic-selector{padding:var(--space-48) var(--space-32);}}")]})]})},Do=function(e){var t=(0,Ce.Z)(),n=(0,Fe.Z)().fs,r=(0,Co.Z)(),i=pe.useState(null),a=(0,J.Z)(i,2),o=a[0],s=a[1];return pe.useEffect((function(){n.readFile(Io).then((function(e){if(r.current)return e.error?(So.error(e.error),void xt.$e((function(t){t.setTag("instructions-viewer",!0),xt.Tb("Error loading instructions viewier: ".concat(e.error))}))):void s(e.content.toString())}))}),[n,r,t]),o?(0,Ie.tZ)(To,No(No({},e),{},{contents:o})):(0,Ie.tZ)(ho,{preventHighlightBorder:!0})},Ro=n(86343),Ao=n(95143);function Lo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lo(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Uo=function(e){var t=e.logs,n=e.timeRef,r=e.setTimeRef;return(0,Ie.BX)("div",{className:"jsx-3515057655 log-list",children:[t.map((function(e){var t=JSON.stringify(e.cmd,null,2),i=n?e.timestamp-n:e.timestamp;return(0,Ie.BX)("div",{className:"jsx-3515057655 "+("log "+(e.highlighted?"highlighted ":"")+("in"===e.dir?"in":"")||0),children:[(0,Ie.BX)("div",{className:"jsx-3515057655 direction",children:[(0,Ie.tZ)("div",{className:"jsx-3515057655",children:e.dir}),(0,Ie.tZ)("div",{className:"jsx-3515057655",children:"in"===e.dir?"\u25b6\ufe0f":"\u2b05\ufe0f"}),(0,Ie.tZ)("div",{className:"jsx-3515057655",children:(0,Ie.BX)(je.Z,{size:"small",filled:!0,color:"positive",onClick:function(){return r(e.timestamp)},children:[i.toFixed(0),"ms"]})})]}),(0,Ie.tZ)("pre",{className:"jsx-3515057655",children:t})]},e.index)})),(0,Ie.tZ)("div",{className:"jsx-3515057655 bottom-anchor"}),(0,Ie.tZ)(se(),{id:"3515057655",children:[".log-list.jsx-3515057655{overflow:auto;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".log-list.jsx-3515057655 *.jsx-3515057655{overflow-anchor:none;}",".bottom-anchor.jsx-3515057655{overflow-anchor:auto !important;min-height:1px;}",".log.jsx-3515057655{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;color:deepskyblue;border:1px solid;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}",".in.jsx-3515057655{color:red;}",".highlighted.jsx-3515057655{background:yellow;}",".direction.jsx-3515057655{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;text-align:center;min-width:30px;border-right:1px solid;}",".direction.jsx-3515057655>div.jsx-3515057655:not(:last-child){border-bottom:1px solid;width:100%;}"]})]})};var Mo=function(e){var t=e.filters,n=e.updateFilters;return(0,Ie.BX)(Lt.Z,{css:Ne.l0.colWithGap(4),children:[(0,Ie.tZ)(Rn.x,{variant:"subheadDefault",children:"Regex (regex,flags):"}),(0,Ie.tZ)(Ro.ZP,{id:"regex",onChange:function(e){var t=null;if(e.currentTarget.value){var r=e.currentTarget.value.split(","),i=(0,J.Z)(r,2),a=i[0],o=i[1];try{t=new RegExp(a,o)}catch(s){}}n({regexp:t})},placeholder:"\\w+,gi"}),(0,Ie.tZ)(Rn.x,{variant:"subheadDefault",children:"Directions:"}),(0,Ie.tZ)(Ao.E,{css:Ne.l0.rowWithGap(16),name:"direction",value:t.direction,onChange:function(e){var t,r=e.target.value;n({direction:(t=r,"in"===t||"out"===t||""===t?r:"")})},children:[{val:"",text:"Both"},{val:"in",text:"In"},{val:"out",text:"Out"}].map((function(e){return(0,Ie.BX)(Lt.Z,{css:[Ne.l0.rowWithGap(8),"",""],children:[(0,Ie.tZ)(Ao.Y,{id:e.val,value:e.val}),(0,Ie.tZ)("label",{htmlFor:e.val,children:e.text})]})}))}),(0,Ie.tZ)(Rn.x,{variant:"subheadDefault",children:"Filter style:"}),(0,Ie.tZ)(Ao.E,{css:Ne.l0.rowWithGap(16),name:"filter-style",value:t.highlightOnly?"highlight":"filter",onChange:function(e){return n({highlightOnly:"highlight"===e.target.value})},children:[{val:"highlight",text:"Highlight"},{val:"filter",text:"Filter"}].map((function(e){return(0,Ie.BX)(Lt.Z,{css:[Ne.l0.rowWithGap(8),"",""],children:[(0,Ie.tZ)(Ao.Y,{id:e.val,value:e.val}),(0,Ie.tZ)("label",{htmlFor:e.val,children:e.text})]})}))})]})},Fo=function(e,t){if(!t.regexp&&!t.direction)return e.map((function(e){return Bo(Bo({},e),{},{highlighted:!1})}));var n=function(e){var n=e.dir,r=e.cmd;return(!t.direction||n===t.direction)&&!(t.regexp&&t.regexp.test&&!t.regexp.test(JSON.stringify(r)))};return t.highlightOnly?e.map((function(e){return n(e)?Bo(Bo({},e),{},{highlighted:!0}):e})):e.filter(n)},Xo=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=pe.useState(e),n=(0,J.Z)(t,2),r=n[0],i=n[1],a=pe.useCallback((function(){return i((function(e){return!e}))}),[]);return[r,a]},zo=function(e){var t=e.wid,n=e.pud,r=Xo(!0),i=(0,J.Z)(r,2),a=i[0],o=i[1],s=pe.useState(null),c=(0,J.Z)(s,2),l=c[0],u=c[1],d=(0,Tt.J)(t,n,"adminpanel"),p=(0,J.Z)(d,2),f=p[0],h=f.crosisDebug,m=f.filters,g=f.crosisLogs,v=p[1],b=(0,ft.I0)();return h?(0,Ie.BX)("div",{className:"jsx-1975817957 crosis-logs",children:[(0,Ie.BX)("div",{className:"jsx-1975817957",children:[(0,Ie.BX)("div",{className:"jsx-1975817957 buttons",children:[(0,Ie.tZ)(je.Z,{color:"orange",onClick:o,children:a?"hide filters":"show filters"}),l&&(0,Ie.tZ)(je.Z,{color:"negative",onClick:function(){return u(null)},children:"Reset Time Ref"}),(0,Ie.tZ)(je.Z,{color:"negative",onClick:function(){return b({type:"CLEAR_CROSIS_LOGS",wid:t})},children:"Clear logs"})]}),a?(0,Ie.tZ)(Mo,{filters:m,updateFilters:function(e){v({filters:Bo(Bo({},m),e)})}}):null]}),(0,Ie.tZ)(Uo,{logs:Fo(g,m),timeRef:l,setTimeRef:u}),(0,Ie.tZ)(se(),{id:"1975817957",children:[".crosis-logs.jsx-1975817957{height:100%;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".buttons.jsx-1975817957{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}"]})]}):(0,Ie.tZ)(je.Z,{color:"positive",filled:!0,onClick:function(){v({crosisDebug:!0}),b({type:"START_CROSIS_ADMIN_LOGS",wid:t})},children:"Start logging crosis v5"})},Vo=n(4730),Go=n(13492),Ho=n(45779),Wo=["salt","iat","exp"],Ko=["salt","iat","exp","presenced"];function qo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qo(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qo=function(e){var t=e.wid,n=e.pud,r=(0,Tt.J)(t,n,"adminpanel"),i=(0,J.Z)(r,1)[0].token,a=(0,ft.I0)();return i?(0,Ie.BX)("div",{className:"jsx-4043509441 token-viewer",children:[(0,Ie.BX)("div",{className:"jsx-4043509441",children:["raw:",(0,Ie.tZ)("pre",{className:"jsx-4043509441",children:i})]}),(0,Ie.tZ)("br",{className:"jsx-4043509441"}),(0,Ie.BX)("div",{className:"jsx-4043509441",children:["parsed:",(0,Ie.tZ)("pre",{className:"jsx-4043509441",children:JSON.stringify((0,Ho.h)(i),null,2)})]}),(0,Ie.tZ)("br",{className:"jsx-4043509441"}),(0,Ie.tZ)("br",{className:"jsx-4043509441"}),(0,Ie.tZ)(Jo,{token:i,setToken:function(e){a({wid:t,type:"USE_CUSTOM_TOKEN",customToken:e})},becomeOwner:function(){a({wid:t,type:"REPL_UPDATED",updates:{isOwner:!0}})}}),(0,Ie.tZ)(se(),{id:"4043509441",children:[".token-viewer.jsx-4043509441{height:100%;overflow:auto;padding:10px;}","pre.jsx-4043509441{white-space:pre-wrap;word-wrap:break-word;}"]})]}):(0,Ie.tZ)("div",{children:"no token yet, wait for connection"})},Jo=function(e){var t=e.token,n=e.setToken,r=e.becomeOwner,i=pe.useState((function(){var e=(0,Ho.h)(t),n=(e.salt,e.iat,e.exp,(0,Vo.Z)(e,Wo));return JSON.stringify(n,null,2)})),a=(0,J.Z)(i,2),o=a[0],s=a[1],c=pe.useState(!1),l=(0,J.Z)(c,2),u=l[0],d=l[1],p=function(){var e=(0,$.Z)(le().mark((function e(t){var r;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,(0,ht.uz)("/data/admin/custom_token_please_be_careful_or_you_will_be_fired",{tokenOptions:t});case 3:(r=e.sent).token&&"string"===typeof r.token&&n(r.token),d(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u?(0,Ie.tZ)("div",{children:"Getting yer token, please wait..."}):(0,Ie.BX)("div",{children:[(0,Ie.tZ)(je.Z,{color:"negative",onClick:(0,$.Z)(le().mark((function e(){var n,i,a,o,s,c,l,u,d,f;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(0,Ho.h)(t),a.salt,a.iat,a.exp,a.presenced,o=(0,Vo.Z)(a,Ko),s=(null===(n=o.repl)||void 0===n?void 0:n.sourceRepl)||(null===(i=o.id)||void 0===i?void 0:i.sourceRepl)){e.next=5;break}return window.alert("You own this repl?!"),e.abrupt("return");case 5:return c=ve.default.query.replUrl.split("/"),l=(0,J.Z)(c,3),u=l[1],d=l[2],f=Yo(Yo({},o),{},{id:s,slug:d,user:u.replace("@","")}),r(),e.next=10,p(f);case 10:case"end":return e.stop()}}),e)}))),children:"\ud83d\udea7 Experimental. Impersonate Owner & RECONNECT\ud83d\udea7"}),(0,Ie.tZ)("br",{}),(0,Ie.tZ)("br",{}),(0,Ie.BX)("div",{children:["\u26a0\ufe0fBE REALL CAREFUL HERE!\u26a0\ufe0f You can possibly break the world! \ud83d\ude35",(0,Ie.tZ)("br",{}),(0,Ie.tZ)("br",{}),"Double check all the values, double check the flags and everything.",(0,Ie.tZ)("br",{}),(0,Ie.tZ)("br",{}),"You should probably go look at the code and how these values are used"]}),(0,Ie.tZ)("br",{}),(0,Ie.tZ)(Go.Z,{rows:25,value:o,onChange:function(e){return s(e.currentTarget.value)}}),(0,Ie.tZ)(je.Z,{color:"negative",onClick:function(){var e;try{e=JSON.parse(o)}catch(t){return void window.alert("INVALID JSON!! Be careful!")}p(e)},children:"\u26a0\ufe0fGIMME TOKEN & RECONNECT\u26a0\ufe0f"})]})},$o=n(45213),es=function(e){var t=e.wid,n=e.pud,r=(0,Tt.J)(t,n,"adminpanel"),i=(0,J.Z)(r,1)[0].customGurl,a=(0,ft.I0)(),o=pe.useState(i),s=(0,J.Z)(o,2),c=s[0],l=s[1],u="default";return localStorage.getItem("gurl")?u="from localStorage: "+localStorage.getItem("gurl"):i&&(u="from session state "+i),(0,Ie.BX)("div",{style:{height:"100%",overflow:"auto"},children:[(0,Ie.tZ)(un.ZP,{value:c,onChange:function(e){return l(e.currentTarget.value)}}),(0,Ie.tZ)("br",{}),(0,Ie.BX)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,Ie.tZ)(je.Z,{color:"positive",onClick:function(){a({type:"SET_CUSTOM_GURL",wid:t,gurl:c})},children:"Set gurl"}),(0,Ie.tZ)(je.Z,{color:"orange",onClick:function(){a({type:"SET_CUSTOM_GURL",wid:t,gurl:"wss://eval.global.replit.com"}),localStorage.removeItem("gurl")},children:"reset"})]}),(0,Ie.tZ)("br",{}),(0,Ie.tZ)("br",{}),(0,Ie.BX)("div",{children:["Current gurl: ",u]}),(0,Ie.tZ)("br",{}),i&&(0,Ie.BX)(je.Z,{color:"negative",onClick:function(){localStorage.setItem("gurl",i)},children:['Persist "',i,'" in local storage']}),(0,Ie.tZ)("br",{}),(0,Ie.tZ)("br",{}),"Gurl order of precedence:",(0,Ie.BX)("ol",{style:{margin:20},children:[(0,Ie.tZ)("li",{children:"gurl set in the form above"}),(0,Ie.tZ)("li",{children:"gurl in localStorage"}),(0,Ie.BX)("li",{children:["If in development webapp and a there's a response from",(0,Ie.tZ)("code",{children:"https://currenthost:4563"})," or",(0,Ie.tZ)("code",{children:"http://currenthost:4560"}),", then it will use that."]}),(0,Ie.BX)("li",{children:["default is ",(0,Ie.tZ)("code",{children:"wss://eval.global.replit.com"})]})]})]})};function ts(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ns(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ts(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ts(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};function n(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e(),r=arguments.length>1?arguments[1]:void 0;if("SET_STATE"===r.type){if(!r.pud)throw new Error("SET_STATE action should be namespaced");return ns(ns({},n),r.state)}return t(n,r)}return{reducer:n,setState:function(e,t,n,r){n({type:"SET_STATE",wid:e,pud:t,state:r})}}}function is(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function as(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?is(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):is(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function os(e){var t=e.wid,n=e.pud,r=Xo(!1),i=(0,J.Z)(r,2),a=i[0],o=i[1],s=pe.useState(null),c=(0,J.Z)(s,2),l=c[0],u=c[1],d=(0,Tt.J)(t,n,"adminpanel"),p=(0,J.Z)(d,2),f=p[0],h=f.v6filters,m=f.crosisV6Logs,g=p[1];return(0,Ie.BX)(Lt.Z,{css:[Ne.l0.colWithGap(8),Ne.l0.height("100%"),"",""],children:[(0,Ie.BX)(Lt.Z,{css:[Ne.l0.rowWithGap(4),Ne.l0.justify.spaceBetween,"",""],children:[(0,Ie.tZ)(An.ZP,{onClick:o,text:a?"Hide filters":"Show filters"}),l&&(0,Ie.tZ)(An.ZP,{onClick:function(){return u(null)},text:"Reset Time Ref"}),(0,Ie.tZ)(An.ZP,{colorway:"negative",onClick:function(){g({crosisV6Logs:[]})},text:"Clear logs"})]}),a?(0,Ie.tZ)(Mo,{filters:h,updateFilters:function(e){g({v6filters:as(as({},h),e)})}}):null,(0,Ie.tZ)(Lt.Z,{css:[Ne.l0.flex.growAndShrink(1),Ne.l0.overflow("auto"),Ne.l0.height("100%"),"",""],children:(0,Ie.tZ)(Uo,{logs:Fo(m,h),timeRef:l,setTimeRef:u})})]})}function ss(e){var t=(0,Tt.J)(e.wid,e.pud,"adminpanel"),n=(0,J.Z)(t,2),r=n[0].crosisDebug,i=n[1],a=(0,ft.I0)();return r?(0,Ie.tZ)(os,as({},e)):(0,Ie.tZ)(An.ZP,{colorway:"positive",onClick:function(){i({crosisDebug:!0}),a({type:"START_CROSIS_ADMIN_LOGS",wid:e.wid})},text:"Start logging goval"})}var cs=n(58636),ls=n(5152),us=n(89361),ds=n(93442),ps=(0,ls.default)((function(){return n.e(367).then(n.t.bind(n,55171,23))}),{loadableGenerated:{webpack:function(){return[55171]}}}),fs=function(){var e,t,n=(0,Ce.Z)(),r=(0,Se.bPN)({variables:{replId:n}}).data,i="replitDark"===(0,vi.Fg)()?"bright":"bright:inverted",a="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?JSON.parse(JSON.stringify(r.repl)):void 0;a&&(delete a.__typename,null===(e=a.user)||void 0===e||delete e.__typename,null===(t=a.origin)||void 0===t||delete t.__typename,delete a.config.__typename);return(0,Ie.BX)(Lt.Z,{css:[Ne.l0.colWithGap(16),Ne.l0.p(4),"",""],children:[(0,Ie.BX)(Lt.Z,{css:Ne.l0.rowWithGap(2),children:[(0,Ie.BX)(Rn.x,{children:["Repl ID: ",(0,Ie.tZ)(us.Z,{children:n})]}),(0,Ie.tZ)(Yn.Z,{alt:"Copy to clipboard",onClick:function(){return(0,cs.Z)(n)},children:(0,Ie.tZ)(ds.Z,{})})]}),(0,Ie.tZ)("div",{className:"jsx-3817476767",children:a&&(0,Ie.tZ)(ps,{iconStyle:"circle",style:{backgroundColor:"transparent"},displayDataTypes:!1,theme:i,src:a,collapseStringsAfterLength:40})}),(0,Ie.tZ)(se(),{id:"3817476767",children:["pre.jsx-3817476767{white-space:pre-wrap;word-wrap:break-word;}"]})]})};function hs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ms(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hs(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gs=rs((function(){return{crosisDebug:!1,crosisLogs:[],crosisV6Logs:[],v6filters:{regexp:null,direction:"",highlightOnly:!0},filters:{regexp:null,direction:"",highlightOnly:!0},token:"",customGurl:""}}),(function(e,t){return"START_CROSIS_ADMIN_LOGS"===t.type?ms(ms({},e),{},{crosisDebug:!0}):"CROSIS_ADMIN_LOG"===t.type?ms(ms({},e),{},{crosisLogs:[].concat((0,nn.Z)(e.crosisLogs),[{index:e.crosisLogs.length,dir:t.dir,cmd:t.cmd,timestamp:t.timestamp}])}):"CLEAR_CROSIS_LOGS"===t.type?ms(ms({},e),{},{crosisLogs:[]}):"GOVAL_TOKEN"===t.type?ms(ms({},e),{},{token:t.token}):"SET_CUSTOM_GURL"===t.type?ms(ms({},e),{},{customGurl:t.gurl}):e})),vs=gs.reducer,bs=gs.setState,ys=(0,Ct.$)({primary:vs});function xs(e,t,n){return"WORKSPACE_MOUNTED"===n.type?function(){var t=(0,$.Z)(le().mark((function t(n){var r;return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,$o.Z)();case 2:(r=t.sent)&&n({type:"SET_CUSTOM_GURL",wid:e,gurl:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}():"START_CROSIS_ADMIN_LOGS"===n.type?function(n,r){r().services.container.client().addDebugFunc((function(i){if("log"===i.type){var a=(0,Tt.Z)(r(),e,t,"adminpanel").crosisV6Logs;bs(e,t,n,{crosisV6Logs:[].concat((0,nn.Z)(a),[{index:a.length+1,dir:i.log.direction,cmd:i.log.cmd,timestamp:window.performance.now()}])})}}))}:null}var ws=function(e){var t,n=e.wid,r=e.pud,i=pe.useState("repl"),a=(0,J.Z)(i,2),o=a[0],s=a[1];t="repl"===o?fs:"logs"===o?zo:"logs2"===o?ss:"token"===o?Qo:es;var c=["repl","logs","logs2","token","gurl"].map((function(e){return(0,Ie.tZ)(An.ZP,{css:Ne.l0.flex.grow(1),colorway:e===o?"primary":void 0,onClick:function(){return s(e)},text:e},e)}));return(0,Ie.BX)(or.Z,{background:"default",css:[Ne.l0.colWithGap(8),Ne.l0.p(4),Ne.l0.height("100%"),"",""],children:[(0,Ie.tZ)(Lt.Z,{css:Ne.l0.rowWithGap(2),children:c}),(0,Ie.tZ)(Lt.Z,{css:[Ne.l0.flex.growAndShrink(1),Ne.l0.overflow("auto"),"",""],children:(0,Ie.tZ)(t,{wid:n,pud:r})})]})},ks=function(){var e=(0,Fe.Z)().fs;return(0,hi.Z)({fs:e,path:wi.Q,initialExpanded:!0}).loading?(0,Ie.tZ)(ho,{}):(0,Ie.tZ)("div",{className:"jsx-3424832388 blank",children:(0,Ie.tZ)(se(),{id:"3424832388",children:[".blank.jsx-3424832388{background-color:var(--background-default);height:100%;width:100%;}"]})})};function Zs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function js(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zs(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Os=mt.L;function Es(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Os,t=arguments.length>1?arguments[1]:void 0;return"UPDATE_WORKSPACE_PREFERENCES"===t.type?js(js({},e),t.updates):e}function _s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_s(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ss=function(e){var t=e.reason;return(0,Ie.BX)("div",{className:"jsx-1201232931 spinner-modal-container",children:[(0,Ie.tZ)("div",{className:"jsx-1201232931 spinner",children:(0,Ie.tZ)(Nt.Z,{})}),(0,Ie.BX)("h3",{className:"jsx-1201232931 reason",children:[t,"..."]}),(0,Ie.tZ)(se(),{id:"1201232931",children:["@-webkit-keyframes replit-logo-spin-jsx-1201232931{0%{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}","@keyframes replit-logo-spin-jsx-1201232931{0%{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}",".spinner-modal-container.jsx-1201232931{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;min-width:225px;height:225px;cursor:not-allowed;background-color:var(--background-overlay);border-radius:var(--border-radius-4);z-index:500000;padding:var(--space-16);color:white;}",".spinner.jsx-1201232931{width:80px;height:80px;-webkit-animation:replit-logo-spin-jsx-1201232931 1.5s linear infinite;animation:replit-logo-spin-jsx-1201232931 1.5s linear infinite;}",".reason.jsx-1201232931{margin-top:20px;font-size:18px;font-weight:500;}"]})]})},Ps=function(e){var t=e.style,n=e.wid,r=e.pud,i=(0,ft.v9)((function(e){return(0,Tt.Z)(e,n,r,"lock")})),a=i.isLocked,o=i.showSpinner,s=i.reason;return a?o?(0,Ie.BX)("div",{style:t,className:"jsx-2297509473",children:[(0,Ie.tZ)(Ss,{reason:s}),(0,Ie.tZ)(se(),{id:"2297509473",children:[".jsx-2297509473{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;position:fixed;top:0;bottom:0;left:0;right:0;cursor:not-allowed;background-color:rgba(0,0,0,0.25);z-index:500000;}"]})]}):(0,Ie.tZ)("div",{style:t,className:"jsx-2427369210",children:(0,Ie.tZ)(se(),{id:"2427369210",children:[".jsx-2427369210{position:fixed;top:0;bottom:0;left:0;right:0;cursor:not-allowed;z-index:500000;}"]})}):null},Ns=(0,Ct.$)({primary:function(e,t){switch(t.type){case"LOCK_WORKSPACE":return Cs(Cs({},e),{},{showSpinner:t.showSpinner,reason:t.reason,isLocked:!0});case"UNLOCK_WORKSPACE":return Cs(Cs({},e),{},{showSpinner:!1,isLocked:!1});default:return e}},preferences:Es});function Is(e,t,n){switch(n.type){case"LOCK_WORKSPACE":return function(){var t=(0,$.Z)(le().mark((function t(n,r){var i;return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r().workspace[e].layout,!Ot.Bp(i,"lock")){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,n(Cs({wid:e,type:"UPDATE_LAYOUT"},Ot.$T(i,"lock","inside",["floating"])));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();case"UNLOCK_WORKSPACE":return function(){var t=(0,$.Z)(le().mark((function t(n,r){var i;return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r().workspace[e].layout,t.next=3,n(Cs({wid:e,type:"UPDATE_LAYOUT"},Ot.Od(i,"lock")));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();default:return null}}var Ts=n(41532);function Ds(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ds(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ds(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function As(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{closable:!0,title:"",message:"",trackingCtx:"",isOpen:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PROMPT_HACKER_UPGRADE":return{isOpen:!0,title:t.title,message:t.message,closable:t.closable,trackingCtx:t.trackingCtx};case"DISMISS_HACKER_UPGRADE":return Rs(Rs({},e),{},{isOpen:!1});default:return e}}var Ls=function(e){var t=e.wid,n=e.pud,r=(0,Tt.J)(t,n,"hackerupgradeprompt"),i=(0,J.Z)(r,1)[0],a=i.title,o=i.message,s=i.trackingCtx,c=i.isOpen,l=i.closable,u=pe.useState(!1),d=(0,J.Z)(u,2),p=d[0],f=d[1],h=pe.useState(!1),m=(0,J.Z)(h,2),g=m[0],v=m[1],b=pe.useState(!1),y=(0,J.Z)(b,2),x=y[0],w=y[1],k=function(){return f(!1)},Z=(0,Se.KiG)({ssr:!1}),j=function(e){var t=e.loading,n=e.data;return t?"loading":n&&n.currentUser?n.currentUser.isHacker?"hacker":"signedUp":"anon"}(Z),O=(0,ft.I0)();return pe.useEffect((function(){x&&"hacker"===j&&v(!0)}),[x,j]),pe.useEffect((function(){if(g){var e=setTimeout((function(){window.location.reload()}),1500);return function(){return clearTimeout(e)}}}),[g]),g?(0,Ie.BX)(zt.Z,{isOpen:!0,onRequestClose:function(){return!1},preventClose:!0,children:[(0,Ie.BX)("div",{className:"jsx-3902013120",children:[(0,Ie.tZ)("h3",{className:"jsx-3902013120",children:"The page will reload soon with your new superpowers"}),(0,Ie.tZ)("br",{className:"jsx-3902013120"}),(0,Ie.tZ)(Vt.Z,{style:{width:76,height:76,margin:"0 auto"}})]}),(0,Ie.tZ)(se(),{id:"3902013120",children:["div.jsx-3902013120{padding:75px 52.5px;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;font-weight:100;text-align:center;}"]})]}):c?(0,Ie.BX)(Ie.HY,{children:[p?"loading"===j?(0,Ie.tZ)(zt.Z,{isOpen:!0,onRequestClose:function(){return!1},preventClose:!0,children:(0,Ie.tZ)(Vt.Z,{style:{width:76,height:76,margin:"0 auto"}})}):"anon"===j?(0,Ie.tZ)(zt.Z,{isOpen:!0,onRequestClose:k,children:(0,Ie.tZ)(Ts.Z,{onSuccess:function(){Z.refetch(),w(!0)}})}):(0,Ie.tZ)(Jn.Z,{onClose:k,isOpen:p,trackingInfo:{context:s}}):null,(0,Ie.BX)("div",{className:"jsx-279563936 warning-label-outer",children:[(0,Ie.BX)("div",{className:"jsx-279563936 warning-label-inner",children:[(0,Ie.tZ)("span",{className:"jsx-279563936 warning-label-warning",children:a}),(0,Ie.tZ)("span",{className:"jsx-279563936 warning-label-message",children:"hacker"!==j?o:"\ud83e\udd26\u200d\u2640\ufe0f You've run out of disk space."}),"hacker"!==j&&(0,Ie.tZ)("button",{onClick:function(){(0,Zt.track)(Zt.events.UPGRADE_SELECTED,{source:"inline",planID:"hacker"}),f(!0)},className:"jsx-279563936 warning-label-upgrade",children:"Upgrade"}),l&&(0,Ie.tZ)("button",{onClick:function(){O({type:"DISMISS_HACKER_UPGRADE",wid:t})},className:"jsx-279563936 warning-label-x",children:"\xd7"})]}),(0,Ie.tZ)(se(),{id:"279563936",children:[".warning-label-outer.jsx-279563936{display:table;background:var(--background-default);position:absolute;bottom:24px;left:50%;-webkit-transform:translate(-50%,0);-ms-transform:translate(-50%,0);transform:translate(-50%,0);border-radius:5px;z-index:30;box-shadow:var(--shadow-1);}",".warning-label-inner.jsx-279563936{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;background-color:white;padding:8px;background-color:var(--accent-orange-dimmest);color:var(--accent-orange-strongest);border-radius:5px;min-width:400px;max-width:600px;}",".warning-label-upgrade.jsx-279563936{margin:8px;padding:8px 16px;background-color:var(--accent-positive-dimmest);color:var(--white);border-radius:5px;border:none;font-size:1em;font-weight:bold;}",".warning-label-warning.jsx-279563936{font-weight:bold;margin:0px 8px;}",".warning-label-x.jsx-279563936{font-weight:bold;font-size:1.5em;text-align:center;vertical-align:center;color:grey;outline:none;background:none;border:none;cursor:pointer;margin:8px;}"]})]})]}):null};function Bs(e){return Us.apply(this,arguments)}function Us(){return(Us=(0,$.Z)(le().mark((function e(t){var n,r;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Vi.l){e.next=2;break}throw new Error("Expected Apollo Client");case 2:return e.next=4,Vi.l.query({query:Se.zTE,variables:{replId:t}});case 4:if(n=e.sent,"Repl"===(r=n.data).repl.__typename){e.next=8;break}throw new Error("Expected repl");case 8:return e.abrupt("return",r.repl);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ms=Ma(["OPEN_SHELL","PORT_OPEN","SET_VNC_URL","RUN_REPL"]),Fs=Ms.receiver,Xs=Ms.useReceiver;function zs(){var e=(0,Ce.Z)(),t=pe.useState(""),n=(0,J.Z)(t,2),r=n[0],i=n[1],a=(0,ft.I0)();return Xs((function(t){var n=t.action,o=t.wid;switch(n.type){case"SET_VNC_URL":i(n.vncUrl);break;case"OPEN_SHELL":a(function(e){var t=e.wid;return function(e,n){(0,Zt.track)(Zt.events.SHELL_OPENED);var r=n().workspace[t],i=r.layout,a=r.plugins,o=Ot.PP(i,a,"shell");o&&e({type:"SET_ACTIVE_TAB",path:Ot.Il(Ot.Il(o)),tabIndex:1,wid:t})}}({wid:o}));break;case"PORT_OPEN":if(5900===n.port){a(function(e){var t=e.wid,n=e.replId,r=e.vncUrl;return function(){var e=(0,$.Z)(le().mark((function e(i,a){var o,s,c,l,u,d,p,f,h,m,g;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a().workspace[t],c=s.layout,l=s.plugins,e.next=3,Bs(n);case 3:if(!(u=e.sent).config.isVnc&&null!==(o=u.currentUserPermissions)&&void 0!==o&&o.changeConfig&&i({type:"REQUEST_REPL_UPDATE",wid:t,updates:{config:{isVnc:!0,isServer:!1}}}),!Ot.PP(c,l,"vnc")){e.next=9;break}return i({type:"CONNECT_VNC",vncUrl:r,wid:t}),e.abrupt("return");case 9:i({type:"LOAD_PLUGIN",wid:t,pluginPud:d="vnc",pluginType:"vnc",title:"output",initialState:{}}),Ot.e$(c,d)||(p=Ot.PP(c,l,"console")||Ot.PP(c,l,"terminal2")||Ot.Jz(),f=Ot.Il(Ot.Il(p)),h=Ot.$T(c,d,"above",f),m=h.path,g=h.to,i({type:"UPDATE_LAYOUT",wid:t,path:m,to:g,property:void 0})),i({type:"CONNECT_VNC",vncUrl:r,wid:t});case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}({wid:o,replId:e,vncUrl:r}));break}a(function(e){var t=e.wid,n=e.replId;return function(){var e=(0,$.Z)(le().mark((function e(r,i){var a,o,s,c,l,u,d,p,f,h,m;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i().workspace[t],s=o.layout,c=o.plugins,e.next=3,Bs(n);case 3:if(!(l=e.sent).config.isServer&&null!==(a=l.currentUserPermissions)&&void 0!==a&&a.changeConfig&&r({type:"REQUEST_REPL_UPDATE",wid:t,updates:{config:{isServer:!0,isVnc:!1}}}),!Ot.PP(s,c,"webview")){e.next=9;break}return r({type:"REFRESH_WEBVIEW",wid:t}),e.abrupt("return");case 9:r({type:"LOAD_PLUGIN",wid:t,pluginPud:u="webview",pluginType:"webview",title:"output",initialState:{canBeClosed:!0}}),Ot.e$(s,u)||(d=Ot.PP(s,c,"console")||Ot.PP(s,c,"terminal2")||Ot.Jz(),p=Ot.Il(Ot.Il(d)),f=Ot.$T(s,u,"above",p),h=f.path,m=f.to,r({type:"UPDATE_LAYOUT",wid:t,path:h,to:m,property:void 0}));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}({wid:o,replId:e}));break;case"RUN_REPL":a(function(e){var t=e.wid;return function(e,n){var r=n().workspace[t],i=r.layout,a=r.plugins,o=Ot.PP(i,a,"shell");o&&e({type:"SET_ACTIVE_TAB",path:Ot.Il(Ot.Il(o)),tabIndex:0,wid:t})}}({wid:o}))}return null})),null}var Vs=44100,Gs=32896,Hs=function e(){var t=this;(0,te.Z)(this,e),this.samples=void 0,this.bufferSource=void 0,this.audioCtx=void 0,this.gainNode=void 0,this.startTime=void 0,this.audioStart=0,this.correction=void 0,this.feed=function(e){var n=t.getFormatedValue(e),r=new Float32Array(t.samples.length+n.length);r.set(t.samples,0),r.set(n,t.samples.length),t.samples=r},this.getFormatedValue=function(e){for(var t=new Float32Array(e.length),n=0;n<e.length;n++)t[n]=e[n]/2147483648;return t},this.stop=function(){if(t.bufferSource)try{t.bufferSource.stop()}catch(e){if("InvalidStateError"!==e.name&&"RangeError"!==e.name)throw e}},this.flush=function(e){if(t.audioCtx&&t.samples.length){var n=0,r=t.audioCtx.currentTime;if(0===e)t.startTime=r,t.audioStart=r;else{for(var i=r-t.audioStart,a=Math.floor(i*Vs);a>e-Gs;)t.audioStart+=.7459410430839002,a-=Gs;a>e&&(n=a-e,t.startTime=r),t.startTime=r}t.samples=t.samples.slice(n,t.samples.length);for(var o,s,c,l=t.audioCtx.createBufferSource(),u=t.samples.length/1,d=t.audioCtx.createBuffer(1,u,Vs),p=0;p<1;p++)for(o=d.getChannelData(p),s=p,c=0;c<u;c++)o[c]=t.samples[s],s+=1;t.startTime<t.audioCtx.currentTime&&(t.startTime=t.audioCtx.currentTime),l.buffer=d,l.connect(t.gainNode),l.start(t.startTime),t.stop(),t.bufferSource=l,t.startTime+=d.duration,t.samples=new Float32Array}},this.samples=new Float32Array;var n=window.AudioContext||window.webkitAudioContext;this.audioCtx=new n,this.gainNode=this.audioCtx.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioCtx.destination),this.startTime=this.audioCtx.currentTime};function Ws(e){var t=e.container,n=(0,pe.useState)(!1),r=n[0],i=n[1],a=(0,pe.useRef)(null);(0,pe.useEffect)((function(){return t.openChannel({name:"audio",service:"audio"},(function(e){var t=e.channel;if(t){var n=null,r=!1;return t.onCommand((function(e){var t;r||(r=!0,(0,Zt.track)(Zt.events.AUDIO_PLAYING_STARTED),a.current=function(){n=new Hs,a.current=null},i(!0)),n&&null!==e&&void 0!==e&&null!==(t=e.audio2)&&void 0!==t&&t.data&&(e.audio2.samples||(e.audio2.samples=0),n.feed(Int32Array.from(e.audio2.data)),n.flush(e.audio2.samples))})),function(){i(!1),n&&(n.stop(),n=null),a.current=null}}}))}),[t]);var o=function(){i(!1),(0,Zt.track)(Zt.events.AUDIO_PROMPT_CLOSED,{accepted:!1})};return(0,Ie.tZ)(zt.Z,{isOpen:r,preventClose:!0,onRequestClose:o,children:(0,Ie.BX)(Lt.Z,{css:[Ne.l0.colWithGap(32),Ne.l0.p(32),"",""],children:[(0,Ie.BX)(Lt.Z,{css:[Ne.l0.colWithGap(16),"",""],children:[(0,Ie.tZ)(Rn.h,{variant:"headerBig",level:3,children:"We hear audio!"}),(0,Ie.tZ)(Rn.x,{children:"Hey! It appears that this repl is playing audio."}),(0,Ie.tZ)(Rn.x,{children:"In order for us to hear the audio you're receiving, please click confirm."})]}),(0,Ie.BX)(Lt.Z,{css:[Ne.l0.rowWithGap(16),"",""],children:[(0,Ie.tZ)(je.Z,{onClick:o,children:"Cancel"}),(0,Ie.tZ)(je.Z,{color:"positive",filled:!0,onClick:function(){i(!1),(0,Zt.track)(Zt.events.AUDIO_PROMPT_CLOSED,{accepted:!0}),a.current&&a.current()},children:"Confirm"})]})]})})}function Ks(){var e=(0,Fe.Z)().container;return(0,Ie.tZ)(Ws,{container:e})}var qs=n(35424),Ys=n.n(qs),Qs=n(60785);function Js(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Js(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Js(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ec(e){return new Promise((function(t,n){var r=e.openChannel({service:"gcsfiles"},(function(e){if(!e.error)return e.channel.request({persistMirror:{path:"."}}).then((function(e){e.ok,r(),t()})),function(e){e.willReconnect&&r()};n(e.error)}))}))}var tc=function(e){var t={"go.mod":"go","package.json":"nodejs","Cargo.toml":"rust","requirements.txt":"python3","pyproject.toml":"python3","index.html":"html",Gemfile:"ruby",Makefile:"bash"};for(var n in t)if(e.includes(n))return t[n];var r=ke().allSupportedByPopularity().reduce((function(e,t){var n=t.ext,r=t.key;return e[n]=e[n]?e[n]:r,e}),{}),i=e.map((function(e){return e.split(".").slice(-1)[0]})).reduce((function(e,t){var n=e.find((function(e){return e.ext===t}));return n?n.count++:e.push({ext:t,count:1}),e}),[]).sort((function(e,t){return t.count-e.count}));return i.length&&(1===i.length||i[0].count>=2*i[1].count)&&r[i[0].ext]?r[i[0].count]:"bash"};var nc=Ma(["START_GIT_CLONE","END_GIT_CLONE","INSERT_RUN_FLOW_PLUGIN"]),rc=nc.receiver,ic=nc.useReceiver;function ac(){var e=(0,Ce.Z)(),t=(0,ft.I0)(),n=(0,ve.useRouter)(),r=(0,Se.jCQ)({variables:{replId:e}}).data,i=(0,Se.IRU)(),a=(0,J.Z)(i,1)[0],o=pe.useState(null),s=(0,J.Z)(o,2),c=s[0],l=s[1];return ic((function(e){var i=e.action,o=e.wid;switch(i.type){case"START_GIT_CLONE":var s="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl.url:void 0;if(!s)throw new Error("expected url");n.replace({pathname:n.pathname,query:n.query},s,{shallow:!0});break;case"END_GIT_CLONE":var u="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl:void 0;if(!u)throw new Error("Expected repl");t(function(e){var t=e.wid,n=e.replLanguage,r=e.onDone;return function(){var e=(0,$.Z)(le().mark((function e(i,a){var o,s,c,l,u,d,p,f,h,m,g,v,b,y,x,w;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i({type:"LOCK_WORKSPACE",showSpinner:!0,reason:"Detecting Language",wid:t}),o=a().services,s=o.fs,c=o.session,l=o.container,e.next=4,s.readDir(wi.Q);case 4:return u=e.sent,d=u.error?[]:u.children.filter((function(e){return e.type===In.Tv.File})).map((function(e){return e.filename})),(p=d.find((function(e){return e.toLowerCase().includes("readme")}))||(0,Qs.T)(d,n)||d[0])&&c.openFile(p),e.next=10,ec(l);case 10:return e.next=12,s.readFile(".replit");case 12:return f=e.sent,e.next=15,s.stat("replit.nix");case 15:if(h=e.sent,m=null,g={displayName:""},v=!1,null===f.error&&h.exists?(m="nix",g=ke().get(m),v=!0):null===f.error&&(m=Ys().parse(f.content.toString("utf8")).language,g=ke().get(m),v="Unknown"!==g.displayName),!f.error&&m&&v){e.next=30;break}if(i({type:"UNLOCK_WORKSPACE",wid:t}),!f.error){e.next=28;break}return b=tc(d),y="nodejs"===b?"npm start":"",x='language = "'.concat(b,'"\nrun = "').concat(y,'"'),e.next=28,s.writeFile(".replit",jr.Z.from(x));case 28:return i({type:"INSERT_RUN_FLOW_PLUGIN",wid:t,pudToInsert:"config"}),e.abrupt("return");case 30:if(m!==n){e.next=33;break}return i({type:"UNLOCK_WORKSPACE",wid:t}),e.abrupt("return");case 33:return w=g.displayName,i({type:"LOCK_WORKSPACE",showSpinner:!0,reason:"Upgrading to ".concat(w),wid:t}),e.next=37,s.persist({skipDebounce:!0});case 37:r(ke().getCanonicalName(m));case 38:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}({wid:o,replLanguage:u.language,onDone:function(e){a({variables:{input:{id:u.id,language:e}}}).then((function(){window.location.replace(window.location.pathname)}))}}));break;case"INSERT_RUN_FLOW_PLUGIN":var d=i.pudToInsert;t(function(e){var t=e.wid,n=e.currentPud,r=e.pudToInsert,i=e.setCurrentPud;return function(e,a){var o=a().workspace[t],s=o.layout,c=o.plugins;if(!Ot.e$(s,r)){var l=Ot.PP(s,c,"shell");if(!l)throw new Error("Expected shell path");var u=Ot.Il(Ot.Il(l));e($s({wid:t,type:"UPDATE_LAYOUT"},Ot.$T(s,r,"above",u)));var d=a().workspace[t].layout;n&&e($s({wid:t,type:"UPDATE_LAYOUT"},Ot.Od(d,n))),i(r)}}}({wid:o,currentPud:c,pudToInsert:d,setCurrentPud:l}))}return null})),null}var oc=n(33042),sc="deeplink";function cc(e){var t=e.wid,n=e.path,r=e.line,i=e.col,a=e.wait,o=e.indexStart,s=e.indexEnd;return function(){var e=(0,$.Z)(le().mark((function e(c,l){var u,d;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=l().services.session,l().workspace[t].activeFile===n){e.next=7;break}return d=a((function(e){return("FILE_LOADED"===e.type||"FILE_CACHE_HIT"===e.type)&&e.path===n})),c({type:"OPEN_FILE",path:n,wid:t}),e.next=7,d;case 7:r&&c({type:"SELECT_EDITOR_POSITION",path:n,wid:t,position:{lineNumber:r,column:(i||0)+1}}),u.updateDeeplink({path:n,line:r,col:i}),o&&c({type:"SELECT_MODEL_INDEX",path:n,wid:t,indexStart:o,indexEnd:s});case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}function lc(e){var t=e.wid,n=e.pud,r=e.wait,i=e.fs;return function(){var e=(0,$.Z)(le().mark((function e(a){var o,s,c,l;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,oc.u9)()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,oc.mv)(i);case 4:if(o=e.sent,s=o.path,c=o.line,l=o.col,s){e.next=10;break}return e.abrupt("return");case 10:a(cc({wid:t,pud:n,path:s,line:c,col:l,wait:r}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}var uc=Ma(["WORKSPACE_MOUNTED","WORKSPACE_WILL_UNMOUNT","OPEN_DEEP_LINK","OPEN_FILE"]),dc=uc.receiver,pc=uc.useReceiver;function fc(){var e=(0,Ce.Z)(),t=(0,ft.I0)(),n=(0,Fe.Z)(),r=n.fs,i=n.session,a=n.dotReplit;return pe.useEffect((function(){return i.onDeeplinkUpdated((function(e){var t=(0,oc.YM)(e);window.location.hash=t}))}),[i]),pc((function(n){var o=n.wid,s=n.pud,c=n.action,l=n.wait;switch(c.type){case"WORKSPACE_MOUNTED":t(function(e){var t=e.wid,n=e.pud,r=e.wait,i=e.fs;return function(e,a){var o=function(){(0,Tt.Z)(a(),t,n,sc).isSettingHash?gc(t,n,e,{isSettingHash:!1}):e(lc({wid:t,pud:n,wait:r,fs:i}))};gc(t,n,e,{handleHashChange:o}),window.addEventListener("hashchange",o)}}({wid:o,pud:s,wait:l,fs:r})),(0,oc.u9)()?t(lc({wid:o,pud:s,wait:l,fs:r})):t(function(e){var t=e.wid,n=e.replId,r=e.fs,i=e.dotReplit;return function(){var e=(0,$.Z)(le().mark((function e(a,o){var s,c;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o().workspace[t].activeFile){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,(0,Qs.W)({replId:n,fs:r,dotReplit:i});case 5:if(s=e.sent,c=s.entrypoint){e.next=10;break}return a(no({wid:t})),e.abrupt("return");case 10:a({type:"OPEN_FILE",wid:t,path:c});case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}({wid:o,replId:e,fs:r,dotReplit:a}));break;case"WORKSPACE_WILL_UNMOUNT":t(function(e,t){return function(n,r){var i=(0,Tt.Z)(r(),e,t,sc).handleHashChange;i&&window.removeEventListener("hashchange",i)}}(o,s));break;case"OPEN_DEEP_LINK":var u=c.path,d=c.line,p=c.col,f=c.indexStart,h=c.indexEnd;t(cc({wid:o,pud:s,path:u,line:d,col:p,wait:l,indexStart:f,indexEnd:h}));break;case"OPEN_FILE":var m=c.path||"";t(function(e,t,n,r,i){return function(){var a=(0,$.Z)(le().mark((function a(o){var s;return le().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,oc.mv)(r);case 2:a.sent.path!==n&&(gc(e,t,o,{isSettingHash:!0}),window.location.hash.length>0?i.updateDeeplink({path:n}):(s=ve.default.asPath.includes("#")?ve.default.asPath.slice(0,ve.default.asPath.indexOf("#")):ve.default.asPath,ve.default.replace({pathname:ve.default.pathname,query:ve.default.query},"".concat(s,"#").concat(n),{shallow:!0})));case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(o,s,m,r,i))}return null})),null}var hc=rs((function(){return{isSettingHash:!1,handleHashChange:void 0}})),mc=hc.reducer,gc=hc.setState;var vc=function(e){return(0,Ie.BX)(zt.Z,{preventClose:!0,isOpen:!0,onRequestClose:e.onCancel,children:[(0,Ie.BX)("div",{className:"jsx-1092762125 notification-perm-container",children:[(0,Ie.BX)("div",{className:"jsx-1092762125 infobox",children:[(0,Ie.tZ)("h2",{className:"jsx-1092762125 title",children:"Replit needs your permission to enable notifications."}),(0,Ie.tZ)("div",{className:"jsx-1092762125",children:"Never miss messages from your collaborators if you\u2019re in another tab or window."})]}),(0,Ie.BX)("div",{className:"jsx-1092762125 controlbox",children:[(0,Ie.tZ)(je.Z,{onClick:e.onCancel,children:"Cancel"}),(0,Ie.tZ)(je.Z,{filled:!0,color:"positive",onClick:e.onConfirm,children:"Confirm"})]})]}),(0,Ie.tZ)(se(),{id:"1092762125",children:[".notification-perm-container.jsx-1092762125{padding:30px;}",".infobox.jsx-1092762125{padding-bottom:75px;}",".infobox.jsx-1092762125 .title.jsx-1092762125{padding-bottom:22px;}",".controlbox.jsx-1092762125{display:grid;grid-template-columns:auto auto;grid-column-gap:10px;-webkit-box-pack:end;-webkit-justify-content:end;-ms-flex-pack:end;justify-content:end;}"]})]})};function bc(e){return yc.apply(this,arguments)}function yc(){return(yc=(0,$.Z)(le().mark((function e(t){var n,r,i;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==Vi.l){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Vi.l.query({query:Se.vce,variables:{username:t}});case 4:return r=e.sent,i=r.data,e.abrupt("return",null===i||void 0===i||null===(n=i.user)||void 0===n?void 0:n.image);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xc(){return"Notification"in window?"true"===window.localStorage.getItem(Oc)?"dismissed":window.Notification.permission:"denied"}function wc(){return kc.apply(this,arguments)}function kc(){return(kc=(0,$.Z)(le().mark((function e(){return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,window.Notification.requestPermission().then(),e.next=7;break;case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return",new Promise((function(e){window.Notification.requestPermission((function(t){e(t)}))})));case 7:return e.abrupt("return",window.Notification.requestPermission());case 8:case"end":return e.stop()}}),e,null,[[0,4]])})))).apply(this,arguments)}function Zc(){return jc.apply(this,arguments)}function jc(){return(jc=(0,$.Z)(le().mark((function e(){var t;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wc();case 2:t=e.sent,Ec(!1),(0,Zt.track)("granted"===t?Zt.events.WEB_NOTIFICATION_PERM_GRANTED:Zt.events.WEB_NOTIFICATION_PERM_DENIED);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Oc="notifications/dismissedModal";function Ec(e){window.localStorage.setItem(Oc,String(e)),e&&(0,Zt.track)(Zt.events.WEB_NOTIFICATION_PERM_DISMISSED_MODAL)}var _c={};function Cc(e){return Sc.apply(this,arguments)}function Sc(){return Sc=(0,$.Z)(le().mark((function e(t){var n,r,i,a,o,s,c,l,u,d,p;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.title,r=t.body,i=t.badge,a=t.icon,o=t.iconByUsername,s=t.tag,c=t.onClick,l=t.cacheDuration,u=void 0===l?0:l,document.hidden||!document.hasFocus()){e.next=3;break}return e.abrupt("return");case 3:if("granted"===xc()){e.next=5;break}return e.abrupt("return");case 5:if(d=Date.now(),!(s in _c)){e.next=9;break}if(!(_c[s]+u>d)){e.next=9;break}return e.abrupt("return");case 9:if(!o){e.next=13;break}return e.next=12,bc(o);case 12:a=e.sent;case 13:(p=new window.Notification(n,{body:r,badge:i||"/public/images/logo-grayscale.png",icon:a||"/public/images/icon-square.png",tag:s})).addEventListener("click",(function(){window.focus(),p.close()})),c&&p.addEventListener("click",c),_c[s]=d;case 17:case"end":return e.stop()}}),e)}))),Sc.apply(this,arguments)}var Pc=Ma(["REQUEST_NOTIFICATION_PERMS"]),Nc=Pc.receiver,Ic=Pc.useReceiver;function Tc(){var e=(0,pe.useState)(!1),t=e[0],n=e[1];Ic((function(e){var t=e.action;if("REQUEST_NOTIFICATION_PERMS"===t.type){var r=xc();("default"===r||"dismissed"===r&&t.force)&&n(!0)}return null}));var r=function(){var e=(0,$.Z)(le().mark((function e(){return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zc();case 2:n(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?(0,Ie.tZ)(vc,{onCancel:function(){Ec(!0),n(!1)},onConfirm:r}):null}var Dc=n(99042),Rc=n(68063),Ac=function(e){var t,n,r,i=e.style,a=(0,Ce.Z)(),o=(0,Se.r8C)({variables:{replID:a},pollInterval:1e4}),s=o.data,c=o.error,l=o.loading;s&&("Repl"===s.repl.__typename?n=null===s||void 0===s||null===(r=s.repl)||void 0===r?void 0:r.database:t="Could not fetch Database info");c&&("GraphQL error: You don't have access to this database"===c.message?n=null:t=c.message);var u=(0,ft.v9)((function(e){return e.user.userInfo}));return(0,Ie.BX)("div",{style:i,className:"jsx-1980359980 database",children:[(0,Ie.tZ)("div",{className:"jsx-1980359980 header",children:(0,Ie.tZ)(Xe.Z,{level:4,children:"Database"})}),(0,Ie.tZ)(Dc.Z,{height:1}),(0,Ie.tZ)("div",{className:"jsx-1980359980 wrapper",children:u.isLoggedIn?(0,Ie.BX)(Ie.HY,{children:[(0,Ie.BX)("span",{className:"jsx-1980359980 description",children:[(0,Ie.tZ)("a",{href:"https://docs.replit.com/misc/database",target:"_blank",rel:"noopener",className:"jsx-1980359980 docs-link",children:"Replit Database"}),"is an easy to use key-value store."]}),t&&(0,Ie.tZ)("div",{className:"jsx-1980359980 error",children:t}),(n||l)&&(0,Ie.tZ)("div",{className:"jsx-1980359980 usage",children:(0,Ie.tZ)(Lc,{database:n,loading:l})}),!l&&(0,Ie.BX)("div",{className:"jsx-1980359980",children:[(0,Ie.tZ)("span",{className:"jsx-1980359980 command-title",children:"commands"}),(0,Ie.tZ)(Bc,{})]})]}):(0,Ie.tZ)(Kc,{})}),(0,Ie.tZ)(Wc,{}),(0,Ie.tZ)(se(),{id:"1980359980",children:[".database.jsx-1980359980{text-overflow:ellipsis;background-color:var(--background-default);color:var(--foreground-default);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-width:120px;padding:var(--space-8);border-top-right-radius:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);}",".header.jsx-1980359980{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:var(--space-32);position:relative;color:var(--foreground-default);width:100%;}",".description.jsx-1980359980{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;color:var(--foreground-dimmer);padding-bottom:var(--space-16) 0;}",".docs-link.jsx-1980359980{font-weight:var(--font-weight-medium);color:var(--accent-primary-default);margin-right:var(--space-4);}",".wrapper.jsx-1980359980{overflow-y:auto;-webkit-flex:1;-ms-flex:1;flex:1;width:100%;}",".error.jsx-1980359980{color:var(--accent-negative-default);margin-bottom:var(--space-16);}",".usage.jsx-1980359980{margin-bottom:var(--space-16);}",".command-title.jsx-1980359980{font-size:var(--font-size-small);text-transform:uppercase;font-weight:var(--font-weight-medium);-webkit-letter-spacing:0.5px;-moz-letter-spacing:0.5px;-ms-letter-spacing:0.5px;letter-spacing:0.5px;margin-bottom:var(--space-16);}"]})]})},Lc=function(e){var t=e.database;if(e.loading)return(0,Ie.tZ)(Vt.Z,{style:{margin:"10px auto",width:"35px",height:"35px"}});if(!t)return null;var n=t.sizeMB||0,r="MB";return n<1&&(n*=1e3,r="KB"),(0,Ie.BX)("div",{className:"jsx-1393931180 storage-section",children:[(0,Ie.tZ)("span",{className:"jsx-1393931180 storage-title",children:"storage"}),(0,Ie.BX)("div",{className:"jsx-1393931180",children:[(0,Ie.BX)("span",{className:"jsx-1393931180 storage-data",children:[n.toFixed(2)," ",r]}),(0,Ie.tZ)("span",{className:"jsx-1393931180 separator",children:"|"}),(0,Ie.tZ)("span",{className:"jsx-1393931180 storage-data",children:"".concat(t.keysCount||0," ").concat(1===t.keysCount?"key":"keys")})]}),(0,Ie.tZ)(se(),{id:"1393931180",children:[".storage-section.jsx-1393931180{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:var(--space-8) 0;}",".storage-title.jsx-1393931180{font-size:var(--font-size-small);text-transform:uppercase;font-weight:var(--font-weight-medium);-webkit-letter-spacing:0.5px;-moz-letter-spacing:0.5px;-ms-letter-spacing:0.5px;letter-spacing:0.5px;padding-bottom:var(--space-4);}",".separator.jsx-1393931180{color:var(--foreground-dimmest);padding:0 var(--space-8);}",".storage-data.jsx-1393931180{color:var(--foreground-dimmer);}"]})]})},Bc=function(){var e=(0,Nn.Z)(),t=(0,Ie.tZ)(Hc,{});if(e)switch((0,Tn.r6)(e)){case"go":t=(0,Ie.tZ)(Gc,{examples:zc});break;case"js":case"ts":case"tsx":case"jsx":case"mjs":t=(0,Ie.tZ)(Gc,{examples:Vc});break;case"py":t=(0,Ie.tZ)(Gc,{examples:Xc})}return(0,Ie.BX)("div",{className:"jsx-4017018285 examples-container",children:[t,(0,Ie.tZ)(se(),{id:"4017018285",children:[".examples-container.jsx-4017018285{padding:var(--space-4) 0;}"]})]})},Uc=function(e){var t=e.title,n=e.content,r=pe.useState(n),i=(0,J.Z)(r,2),a=i[0],o=i[1],s=function(){var e=t.split(" ");return[e[0],e.slice(1).join(" ")]}(),c=(0,J.Z)(s,2),l=c[0],u=c[1];return(0,Ie.BX)("div",{className:"jsx-4013288462 command-container",children:[(0,Ie.BX)("span",{className:"jsx-4013288462 command-title",children:[(0,Ie.tZ)("span",{className:"jsx-4013288462 command-keyword",children:l}),u]}),(0,Ie.BX)("div",{className:"jsx-4013288462 command-wrapper",children:[(0,Ie.tZ)("div",{className:"jsx-4013288462 command-example",children:n.map((function(e,n){return"input"===e.type?(0,Ie.tZ)("input",{onChange:function(e){var t=(0,nn.Z)(a);t[n].value=e.target.value,o(t)},placeholder:e.placeholder,value:e.value||"",className:"jsx-4013288462"},"".concat(t,"-").concat(n)):(0,Ie.tZ)("code",{className:"jsx-4013288462",children:e.value},"".concat(t,"-").concat(n))}))}),(0,Ie.tZ)(Mc,{code:a.reduce((function(e,t){return"input"===t.type?e+(t.value||t.placeholder):e+t.value}),"")})]}),(0,Ie.tZ)(se(),{id:"4013288462",children:[".command-container.jsx-4013288462{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:start;-webkit-box-align:start;-ms-flex-align:start;align-items:start;}",".command-title.jsx-4013288462{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;white-space:nowrap;margin-bottom:var(--space-8);color:var(--foreground-dimmer);}",".command-keyword.jsx-4013288462{color:var(--foreground-default);font-weight:var(--font-weight-medium);margin-right:var(--space-4);}",".command-wrapper.jsx-4013288462{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}",".command-example.jsx-4013288462{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;padding:2px 4px;border-radius:var(--border-radius-4);background-color:var(--background-higher);-webkit-transition:background-color 0.1s;transition:background-color 0.1s;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:var(--space-4);margin-bottom:var(--space-4);}",".command-example.jsx-4013288462:hover,.command-example.jsx-4013288462:hover>code.jsx-4013288462{background-color:var(--background-higher);}","code.jsx-4013288462{padding:2px;background-color:var(--background-higher);color:var(--accent-negative-default);-webkit-transition:background-color 0.1s;transition:background-color 0.1s;white-space:nowrap;}","input.jsx-4013288462{text-align:center;width:40px;height:auto;background-color:var(--background-default);border:1px solid var(--background-highest);color:var(--foreground-default);border-radius:var(--border-radius-4);-webkit-transition:background-color 0.1s;transition:background-color 0.1s;cursor:text;}","input.jsx-4013288462:focus{border:0.5px solid var(--accent-primary-default);outline:none;}"]})]})},Mc=function(e){var t=e.code,n=(0,Rc.Z)();return n?(0,Ie.tZ)(je.Z,{className:"button",size:"small",onClick:function(){n({code:t})},children:"Insert \u2192"}):(0,Ie.tZ)(je.Z,{className:"button",size:"small",onClick:function(){return(0,cs.Z)(t)},children:"Copy"})},Fc=[{title:"Set a key to a value",content:[{type:"code",value:"curl $REPLIT_DB_URL -d '"},{type:"input",placeholder:"key"},{type:"code",value:"="},{type:"input",placeholder:"value"},{type:"code",value:"'"}]},{title:"Get a key's value",content:[{type:"code",value:"curl $REPLIT_DB_URL/"},{type:"input",placeholder:"key"}]},{title:"Delete a key",content:[{type:"code",value:"curl -XDELETE $REPLIT_DB_URL/"},{type:"input",placeholder:"key"}]},{title:"List all keys",content:[{type:"code",value:'curl "$REPLIT_DB_URL?prefix='},{type:"input",placeholder:"key"},{type:"code",value:'"'}]}],Xc=[{title:"Import the database",content:[{type:"code",value:"from replit import db"}]},{title:"Set a key to a value",content:[{type:"code",value:'db["'},{type:"input",placeholder:"key"},{type:"code",value:'"] = "'},{type:"input",placeholder:"value"},{type:"code",value:'"'}]},{title:"Get a key's value",content:[{type:"code",value:'value = db["'},{type:"input",placeholder:"key"},{type:"code",value:'"]'}]},{title:"Delete a key",content:[{type:"code",value:'del db["'},{type:"input",placeholder:"key"},{type:"code",value:'"]'}]},{title:"List all keys",content:[{type:"code",value:"keys = db.keys()"}]},{title:"List keys with a prefix",content:[{type:"code",value:'matches = db.prefix("'},{type:"input",placeholder:"prefix"},{type:"code",value:'")'}]}],zc=[{title:"Import the database",content:[{type:"code",value:'import "github.com/replit/database-go"'}]},{title:"Set a key to a value",content:[{type:"code",value:'database.Set("'},{type:"input",placeholder:"key"},{type:"code",value:'", "'},{type:"input",placeholder:"value"},{type:"code",value:'")'}]},{title:"Get a key's value",content:[{type:"code",value:'value, _ := database.Get("'},{type:"input",placeholder:"key"},{type:"code",value:'")'}]},{title:"Delete a key",content:[{type:"code",value:'database.Delete("'},{type:"input",placeholder:"key"},{type:"code",value:'")'}]},{title:"List all keys",content:[{type:"code",value:'keys, _ := database.ListKeys("")'}]},{title:"List keys with a prefix",content:[{type:"code",value:"matches, _ := database.ListKeys("},{type:"input",placeholder:"prefix"},{type:"code",value:'")'}]}],Vc=[{title:"Import the database",content:[{type:"code",value:'const Database = require("@replit/database")'}]},{title:"Create a new database",content:[{type:"code",value:"const db = new Database()"}]},{title:"Set a key to a value",content:[{type:"code",value:'db.set("'},{type:"input",placeholder:"key"},{type:"code",value:'", "'},{type:"input",placeholder:"value"},{type:"code",value:'").then(() => {});'}]},{title:"Get a key's value",content:[{type:"code",value:'db.get("'},{type:"input",placeholder:"key"},{type:"code",value:'").then(value => {});'}]},{title:"Delete a key",content:[{type:"code",value:'db.delete("'},{type:"input",placeholder:"key"},{type:"code",value:'").then(() => {});'}]},{title:"List all keys",content:[{type:"code",value:"db.list().then(keys => {});"}]},{title:"List keys with a prefix",content:[{type:"code",value:'db.list("'},{type:"input",placeholder:"prefix"},{type:"code",value:'").then(matches => {});'}]}],Gc=function(e){var t=e.examples;return(0,Ie.tZ)("div",{children:(0,Ie.tZ)(Ee.gC,{spacing:2,children:t.map((function(e,t){return(0,Ie.tZ)(Uc,{title:e.title,content:e.content},t)}))})})},Hc=function(){return(0,Ie.BX)(Ie.HY,{children:[(0,Ie.BX)("span",{className:"jsx-1406247759 intro",children:["We've set an environment variable called ",(0,Ie.tZ)("code",{className:"jsx-1406247759",children:"REPLIT_DB_URL"})," in your repl."]}),(0,Ie.tZ)("div",{className:"jsx-1406247759 examples",children:(0,Ie.tZ)(Ee.gC,{spacing:2,children:Fc.map((function(e,t){return(0,Ie.tZ)(Uc,{title:e.title,content:e.content},t)}))})}),(0,Ie.tZ)("span",{className:"jsx-1406247759 disclaimer",children:"You can use the Database from any repl by making HTTP requests similar to those above. We have language clients for Python, Go, and Node, switch to a file that uses that language to see how to use the client."}),(0,Ie.tZ)(se(),{id:"1406247759",children:[".intro.jsx-1406247759{color:var(--foreground-dimmer);padding-top:var(--space-8);padding-bottom:var(--space-16);}",".examples.jsx-1406247759{padding:var(--space-8) 0;}",".disclaimer.jsx-1406247759{padding-top:var(--space-8);padding-bottom:var(--space-16);color:var(--foreground-dimmer);}","code.jsx-1406247759{padding:2px;background-color:var(--background-higher);color:var(--accent-negative-default);-webkit-transition:background-color 0.1s;transition:background-color 0.1s;white-space:nowrap;}"]})]})},Wc=function(){return(0,Ie.BX)("div",{className:"jsx-1270927779",children:[(0,Ie.tZ)("a",{href:"https://replit.com/talk/announcements/Replit-Database-feedback/51085",target:"_blank",rel:"noopener",className:"jsx-1270927779",children:"Send feedback"}),(0,Ie.tZ)(se(),{id:"1270927779",children:["div.jsx-1270927779{background-color:var(--background-root);color:var(--foreground-default);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;height:var(--space-32);padding:var(--space-16) var(--space-8) var(--space-16) var(--space-16);position:relative;font-size:var(--font-size-default);}"]})]})},Kc=function(){return(0,Ie.BX)("div",{className:"jsx-3518544417 wrapper",children:[(0,Ie.BX)("span",{className:"jsx-3518544417 description",children:[(0,Ie.tZ)("a",{href:"https://docs.replit.com/misc/database",target:"_blank",rel:"noopener",className:"jsx-3518544417 docs-link",children:"Replit Database"}),"is the fastest and easiest way to store data from your repl. Try it out by logging in or signing up."]}),(0,Ie.tZ)("a",{href:"/signup",className:"jsx-3518544417",children:(0,Ie.tZ)(je.Z,{fullWidth:!0,color:"primary",filled:!0,children:"Sign up"})}),(0,Ie.tZ)(se(),{id:"3518544417",children:[".wrapper.jsx-3518544417{padding:var(--space-8) 0;color:var(--foreground-dimmer);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}","span.jsx-3518544417{margin-bottom:var(--space-8);}",".docs-link.jsx-3518544417{font-weight:var(--font-weight-medium);color:var(--accent-primary-default);margin-right:var(--space-4);}"]})]})},qc=n(59403),Yc=n(33893),Qc=n(95273),Jc=n(79977),$c=n(61952),el=n(63848),tl=n(47999),nl=n(39985),rl=n(14252),il=n(48777),al=n(85313);var ol=n(34878),sl=n(25539),cl=n(93586);function ll(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ul(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ll(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ll(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dl(e){var t,n=e.wid,r=(0,Fe.Z)(),i=r.container,a=r.session,o=r.presence,s=r.replbox,c=r.fs,l=rr({replbox:s}),u=pe.useRef(l);pe.useEffect((function(){u.current=l}),[l]);var d=(0,ft.I0)(),p=function(){var e=(0,Fe.Z)().session,t=pe.useState(e.getIsCommandBarOpen()),n=(0,J.Z)(t,2),r=n[0],i=n[1];return pe.useEffect((function(){return i(e.getIsCommandBarOpen()),e.onCommandBarToggled(i)}),[e]),r}(),f=(0,Gi.Z)("flag-cluicurl"),h=(0,Ce.Z)(),m=(0,ft.v9)((function(e){return e.workspace[n].plugins})),g=Object.values(m).some((function(e){return"webview"===e.type})),v=(0,Se.g2A)({variables:{replId:h}}).data,b=pe.useState(null),y=(0,J.Z)(b,2),x=y[0],w=y[1],k=(0,cl.Z)(x),Z=pe.useState(null),j=(0,J.Z)(Z,2),O=j[0],E=j[1],_=pe.useState(!1),C=(0,J.Z)(_,2),S=C[0],P=C[1],N=pe.useCallback((function(){o.getFollowedUser()&&o.unfollowUser()}),[o]);pe.useEffect((function(){p&&(0,Zt.track)(Zt.events.COMMAND_BAR_SELECTED,{source:"workspace"}),p&&k.current||w(!!p||null)}),[p,k]),pe.useEffect((function(){null!==x&&N(),a.setIsCommandBarOpen(null!==x)}),[x,a,N]);var I="Repl"===(null===v||void 0===v?void 0:v.repl.__typename)?v.repl:null,T="Team"===(null===I||void 0===I||null===(t=I.owner)||void 0===t?void 0:t.__typename),D=pe.useMemo((function(){var e,t;if(I){var r=Boolean("Team"===(null===(e=I.owner)||void 0===e?void 0:e.__typename)&&(null===(t=I.owner.capabilities)||void 0===t?void 0:t.isEducationPlan)),o=f?{curl:{data:{type:"action",label:"curl",icon:(0,Ie.tZ)($c.Z,{}),description:"Make http requests",run:function(){(0,Zt.track)(Zt.events.CLUI_COMMAND_EXECUTED,{command:"curl",source:"clui"}),d({type:"ADD_CLUI_CURL_TAB",wid:n}),w(null)}}}}:{};return ul(ul(ul({files:(0,il.ZP)({fs:c,session:a,onSelect:function(e){(0,Zt.track)(Zt.events.CLUI_COMMAND_EXECUTED,{command:"find",source:"clui"}),d({wid:n,type:"OPEN_FILE",path:e}),s()},onCreateNewFile:function(e){s(),c.writeFile(e,jr.Z.from("")).then((function(){a.openFile(e)})),(0,Ci.Z)({replId:I.id,action:"create",source:"commandbar"})}}),search:(0,al.ZP)({container:i,onSelect:function(e,t,r){(0,Zt.track)(Zt.events.CLUI_COMMAND_EXECUTED,{command:"search",source:"clui"}),(0,Ci.Z)({replId:I.id,action:"select",source:"commandbar"}),d({wid:n,type:"OPEN_DEEP_LINK",path:e,line:t,col:r}),s()}})},r?{}:{multiplayer:{data:{type:"action",label:"Multiplayer",icon:(0,Ie.tZ)(qc.Z,{}),description:"Open multiplayer mode",keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"M"},run:function(e){(0,Zt.track)(Zt.events.CLUI_COMMAND_EXECUTED,{command:"multiplayer",source:e?"shortcut":"clui"}),(0,Zt.track)(Zt.events.INVITE_MODAL_OPENED,{wid:n,language:I.lang.id,replId:I.id,source:"clui"}),P(!0),s()}}}}),{},{run:{data:{type:"action",label:"Run",icon:(0,Ie.tZ)(Yc.Z,{}),description:"Run repl",keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"Enter"},run:function(e){(0,Zt.track)(Zt.events.CLUI_COMMAND_EXECUTED,{command:"run",source:e?"shortcut":"clui"}),"replbox"===I.lang.engine&&u.current.runState===nr.A.IDLE?(u.current.run(),(0,Zt.track)(Zt.events.PROJECT_RAN,{wid:n,language:null===I||void 0===I?void 0:I.lang.id,replId:I.id,replTitle:I.title})):d({wid:n,type:"RUN_REPL"}),s()}}}},g?{refresh:{data:{type:"action",label:"Refresh",icon:(0,Ie.tZ)(Qc.Z,{}),description:"Refresh webview",keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"S"},run:function(e){(0,Zt.track)(Zt.events.CLUI_COMMAND_EXECUTED,{command:"refresh",source:e?"shortcut":"clui"}),d({wid:n,type:"REFRESH_WEBVIEW"}),s()}}}}:{}),{},{shell:{data:{type:"action",label:"Shell",icon:(0,Ie.tZ)(Jc.Z,{}),description:"Open shell",keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"S"},run:function(e){(0,Zt.track)(Zt.events.CLUI_COMMAND_EXECUTED,{command:"shell",source:e?"shortcut":"clui"}),d({wid:n,type:"OPEN_SHELL"}),s()}}},settings:{data:{type:"action",label:"Settings",icon:(0,Ie.tZ)(ot.Z,{}),description:"Manage editor settings",keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:","},run:function(e){(0,Zt.track)(Zt.events.CLUI_COMMAND_EXECUTED,{command:"settings",source:e?"shortcut":"clui"}),d({type:"OPEN_SIDEPANE_BY_TYPE",paneType:"preferences",wid:n}),s()}}},"version-control":{data:{label:"Version control",type:"action",icon:(0,Ie.tZ)(el.Z,{}),description:"Open version control sidebar",keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"G"},run:function(e){(0,Zt.track)(Zt.events.CLUI_COMMAND_EXECUTED,{command:"version control",source:e?"shortcut":"clui"}),d({type:"OPEN_SIDEPANE_BY_TYPE",paneType:"git",wid:n}),s()}}},new:(0,ol.Z)({transformMatchScore:function(e){return.1*e},onLanguageOrReplSelected:function(e){s(),E(e)}})},o)}function s(){w(null)}}),[I,c,f,i,a,d,n,g]),R={data:{type:"basic",description:"Type a command..."},commands:D};return(0,sl.Z)({onActive:function(){w(!0)},onDismiss:function(){w(null)}}),pe.useEffect((function(){var e=function(e){if(D){(0,nl.b)(e);for(var t=0,n=Object.entries(D);t<n.length;t++){var r,i=(0,J.Z)(n[t],2),a=i[0],o=i[1],s=o.data&&"keyboardShortcut"in o.data?o.data.keyboardShortcut:null;if(s&&(s.cmdOrCtrlKey===Boolean((0,Ri.jh)(e))&&s.altKey===Boolean(e.altKey)&&s.shiftKey===Boolean(e.shiftKey)&&(null===(r=s.key)||void 0===r?void 0:r.toLowerCase())===e.key.toLowerCase())){var c;if(e.preventDefault(),N(),"action"===(null===(c=o.data)||void 0===c?void 0:c.type))return void o.data.run(!0);w([{value:a,command:o}])}}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[D,N,w]),(0,Ie.BX)(Ie.HY,{children:[(0,Ie.tZ)(zt.Z,{isOpen:Boolean(O),onRequestClose:function(){return E(null)},children:(0,Ie.tZ)(tl.Z,{initialSelectedLanguageOrReplId:O||void 0,onCancel:function(){return E(null)}})}),(0,Ie.tZ)(zt.Z,{isOpen:null!==x,onRequestClose:function(){return w(null)},hideCloseButton:!0,children:(0,Ie.tZ)(rl.ZP,{keyboardShortcut:sl.q,root:R,initialCommandPath:Array.isArray(x)?x:void 0})}),I?(0,Ie.tZ)(zt.Z,{isOpen:S,onRequestClose:function(){return P(!1)},children:T?(0,Ie.tZ)(Zn,{replId:I.id}):(0,Ie.tZ)(er,{replId:I.id})}):null]})}var pl,fl=n(71171),hl=n.n(fl);function ml(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ml(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ml(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vl(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return bl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bl(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){throw e})),f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){s=!0,a=e})),f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function bl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}!function(e){e.TEXT="TEXT",e.MENTION="MENTION",e.LINK="LINK",e.REPL_LINK="REPL_LINK",e.DEEP_LINK="DEEP_LINK",e.CODE="CODE",e.BOLD="BOLD",e.ITALICS="ITALICS",e.STRIKETHROUGH="STRIKETHROUGH",e.QUOTE="QUOTE"}(pl||(pl={}));var yl=function(e){var t=e.fragment,n=e.onClick;return(0,Ie.tZ)(Oe.Z,{size:"small",onClick:n,children:t.content})},xl=function(e){var t=e.fragment,n=e.onClick;return(0,Ie.tZ)(Oe.Z,{size:"small",fontWeight:"medium",onClick:n,children:t.content})},wl=function(e){var t=e.fragment,n=e.onClick;return(0,Ie.tZ)("a",{href:t.url,onClick:n,rel:"noreferrer noopener nofollow",target:"_blank",children:t.content})},kl=function(e){var t=e.fragment,n=e.onClick;return(0,Ie.tZ)("a",{href:t.url,onClick:n,target:"_blank",children:t.content})},Zl=function(e){var t=e.fragment,n=e.onClick;return(0,Ie.tZ)("a",{href:t.url,onClick:n,children:t.content})},jl=function(e){var t=e.fragment,n=e.onClick,r=e.style;return(0,Ie.tZ)("code",{onClick:n,style:r,children:t.content})},Ol=function(e){var t=e.fragment,n=e.onClick;return(0,Ie.tZ)("b",{onClick:n,children:t.content})},El=function(e){var t=e.fragment,n=e.onClick;return(0,Ie.tZ)("i",{onClick:n,children:t.content})},_l=function(e){var t=e.fragment,n=e.onClick;return(0,Ie.BX)("span",{onClick:n,className:"jsx-2019770874",children:[t.content,(0,Ie.tZ)(se(),{id:"2019770874",children:["span.jsx-2019770874{-webkit-text-decoration:line-through;text-decoration:line-through;}"]})]})},Cl=function(e){var t=e.fragment,n=e.onClick;return(0,Ie.BX)("blockquote",{onClick:n,className:"jsx-3586083531",children:[t.content,(0,Ie.tZ)(se(),{id:"3586083531",children:["blockquote.jsx-3586083531{border-left:2px solid var(--foreground-dimmest);padding-left:6px;color:var(--foreground-dimmest);}"]})]})},Sl=/(@[0-9a-zA-Z_]+)/,Pl=/(#[-a-zA-Z0-9@:%._+~#=/]+)/,Nl=/(https?:\/\/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{2,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&//=]*))/,Il=/(`.+?`)/,Tl=/(\*\*.+?\*\*)/,Dl=/(_.+?_)/,Rl=/(\*.+?\*)/,Al=/(~~.+?~~)/,Ll=/(^>.+?$\n?)/m,Bl=/\/@([0-9a-zA-Z_]+)\/(.+)/;function Ul(e){var t=e.url;return{type:pl.LINK,url:t,content:t}}function Ml(e){var t=e.hash;return{type:pl.DEEP_LINK,url:t,content:t}}function Fl(e,t){if(Nl.test(e)){var n={};try{n=new window.URL(e)}catch(i){return{content:e,type:pl.TEXT}}return["repl.it","replit.com",document.location.host].includes(n.host)?n.pathname===t.replUrl?Ml({hash:n.hash}):Bl.test(n.pathname)?function(e){var t=e.url,n=Bl.exec(t.pathname);if(!n)throw new Error("Not a repl URL");return{type:pl.REPL_LINK,url:t.href,content:"@".concat(n[1],"/").concat(n[2]).concat(t.hash)}}({url:n}):Ul({url:e}):Ul({url:e})}if(Pl.test(e))return Ml({hash:e});if(Ll.test(e))return function(e){var t=e.text;return{type:pl.QUOTE,content:t}}({text:e.slice(1).trim()});if(Il.test(e))return function(e){var t=e.code;return{type:pl.CODE,content:t}}({code:e.slice(1,-1)});if(Tl.test(e))return function(e){var t=e.text;return{type:pl.BOLD,content:t}}({text:e.slice(2,-2)});if(Dl.test(e)||Rl.test(e))return function(e){var t=e.text;return{type:pl.ITALICS,content:t}}({text:e.slice(1,-1)});if(Al.test(e))return function(e){var t=e.text;return{type:pl.STRIKETHROUGH,content:t}}({text:e.slice(2,-2)});if(Sl.test(e)){var r=e.slice(1);if(!t.users||t.users.includes(r))return function(e){var t=e.username;return{type:pl.MENTION,username:t,content:"@".concat(t)}}({username:r})}return{content:e,type:pl.TEXT}}var Xl=new RegExp([Il.source,Tl.source,Dl.source,Rl.source,Al.source,Nl.source,Sl.source,Pl.source,Ll.source].join("|"),"m");function zl(e,t){var n,r=[],i=[],a=vl(e.split(Xl));try{for(a.s();!(n=a.n()).done;){var o=n.value;if(o){var s=Fl(o,t);if(s){if(s.type===pl.MENTION){if(!s.username)continue;r.push(s.username)}i.push(s)}}}}catch(c){a.e(c)}finally{a.f()}return{tokens:i,mentions:r}}function Vl(e){var t=e.message,n=e.onMentionClick,r=void 0===n?function(){}:n,i=e.codeStyles,a=void 0===i?{}:i;return(0,Ie.tZ)(Ie.HY,{children:t.tokens.map((function(e,t){var n={fragment:e,key:t};return e.type===pl.MENTION?(0,Ie.tZ)(xl,gl(gl({},n),{},{onClick:function(){return r(e)}})):e.type===pl.LINK?(0,Ie.tZ)(wl,gl({},n)):e.type===pl.REPL_LINK?(0,Ie.tZ)(kl,gl({},n)):e.type===pl.DEEP_LINK?(0,Ie.tZ)(Zl,gl({},n)):e.type===pl.CODE?(0,Ie.tZ)(jl,gl(gl({},n),{},{style:a})):e.type===pl.BOLD?(0,Ie.tZ)(Ol,gl({},n)):e.type===pl.ITALICS?(0,Ie.tZ)(El,gl({},n)):e.type===pl.STRIKETHROUGH?(0,Ie.tZ)(_l,gl({},n)):e.type===pl.QUOTE?(0,Ie.tZ)(Cl,gl({},n)):(0,Ie.tZ)(yl,gl({},n))}))})}var Gl=n(34203);function Hl(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Wl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wl(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Wl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Kl=function(e){var t,n={},r=Hl(e.messages);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.user&&(n[i.user.id]=i.user)}}catch(a){r.e(a)}finally{r.f()}return Object.values(n)};var ql=function(e){var t,n,r=e.annote,i=e.onClick,a=((null===(t=(0,Se.Fqz)().data)||void 0===t||null===(n=t.currentUser)||void 0===n?void 0:n.editorPreferences.fontSize)||14)-2,o=r.messages.some((function(e){return!e.seen})),s=Kl(r).filter((function(e){return!r.user||e.id!==r.user.id})),c="".concat(a,"px");return(0,Ie.BX)("div",{onClick:i,className:se().dynamic([["2154061002",[a]]])+" annotation-preview",children:[(0,Ie.tZ)("div",{className:se().dynamic([["2154061002",[a]]])+" user-stack",children:[r.user].concat((0,nn.Z)(s)).slice(0,3).map((function(e){return e&&(0,Ie.tZ)(on.Z,{url:e.image,size:"xs",style:{minWidth:c,minHeight:c,height:c,width:c}},e.id)}))}),r.messages.length>0&&(0,Ie.BX)("div",{className:se().dynamic([["2154061002",[a]]])+" comment-info",children:[(0,Ie.tZ)("div",{className:se().dynamic([["2154061002",[a]]])+" comment-count",children:r.messages.length}),(0,Ie.tZ)(Gl.Z,{size:a,unreadDot:o})]}),(0,Ie.tZ)(se(),{id:"2154061002",dynamic:[a],children:[".annotation-preview.__jsx-style-dynamic-selector{position:absolute;padding:4px;border-radius:var(--border-radius-4);border-top-right-radius:0;border-bottom-right-radius:0;background-color:var(--background-default);color:var(--foreground-default);display:grid;grid-auto-flow:column;grid-column-gap:var(--space-8);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border:0.5px solid var(--background-higher);-webkit-transform:translateX(-100%);-ms-transform:translateX(-100%);transform:translateX(-100%);box-shadow:var(--shadow-1);-webkit-transition:width 0.2s,background-color 0.2s,-webkit-transform 0.1s;-webkit-transition:width 0.2s,background-color 0.2s,transform 0.1s;transition:width 0.2s,background-color 0.2s,transform 0.1s;z-index:1;}",".annotation-preview.__jsx-style-dynamic-selector:hover{-webkit-transform:translateX(-100%) translateX(-5%) scale(1.1);-ms-transform:translateX(-100%) translateX(-5%) scale(1.1);transform:translateX(-100%) translateX(-5%) scale(1.1);}",".user-stack.__jsx-style-dynamic-selector{display:grid;grid-auto-flow:column;grid-column-gap:var(--space-4);}",".comment-info.__jsx-style-dynamic-selector{display:grid;grid-auto-flow:column;grid-gap:var(--space-4);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".comment-count.__jsx-style-dynamic-selector{font-weight:var(--font-weight-medium);font-size:0.8em;font-size:".concat(a,"px;}")]})]})},Yl=n(76931),Ql=n(89408);function Jl(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return $l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $l(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function $l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var eu=["TextMessageContentType","PreviewMessageContentType"];function tu(e){var t,n=[],r=null,i=Jl(e);try{for(i.s();!(t=i.n()).done;){var a,o,s,c,l,u,d=t.value;if(!r||(null===d||void 0===d||null===(a=d.user)||void 0===a?void 0:a.id)!==(null===(o=r)||void 0===o||null===(s=o.user)||void 0===s?void 0:s.id)||(null===d||void 0===d||null===(c=d.anchor)||void 0===c?void 0:c.id)!==(null===(l=r)||void 0===l?void 0:l.anchorId)||!eu.includes(r.messageType)||!eu.includes(d.content.__typename)||new Date(d.timeCreated).getTime()-new Date(r.timeCreated).getTime()>6e5)r&&n.push(r),r={user:d.user,timeCreated:d.timeCreated,anchorId:null===d||void 0===d||null===(u=d.anchor)||void 0===u?void 0:u.id,messages:[d],messageType:d.content.__typename};else r.messages.push(d)}}catch(p){i.e(p)}finally{i.f()}return r&&n.push(r),n}function nu(e){var t=(0,Ce.Z)(),n=(0,Se.nAY)(),r=(0,J.Z)(n,1)[0];pe.useEffect((function(){if(e){var n=e.messages.filter((function(e){return!e.seen})).map((function(e){return e.id}));0!==n.length&&r({variables:{replId:t,threadId:e.id,messageIds:n},optimisticResponse:{markMessagesAsSeen:{messages:n.map((function(e){return{id:e,seen:!0,__typename:"AnnotationMessage"}})),__typename:"AnnotationMessageList"}}})}}),[t,e,r])}var ru=pe.createContext({activeFile:null,users:[],annotations:[],generalThread:void 0,explainAnchor:null,visibleAnnotation:null,onRequestCloseThread:function(){},setVisibleAnnotation:function(){},setExplainAnchor:function(){},handleFinalizeMessage:function(){},handleChangeMessage:function(){},handleResolveAnnotation:function(){},createAnnotationAnchorPlaceholder:function(){},markAllMessagesInReplAsSeenByUser:function(){}});function iu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function au(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iu(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ou(e){var t=(0,Gi.Z)("flag-typing-indicator"),n=pe.useContext(ru).users,r=pe.useState({}),i=(0,J.Z)(r,2),a=i[0],o=i[1],s=pe.useRef(null),c=pe.useCallback((function(){var e={};for(var t in a)Date.now()-a[t].time<1e3&&(e[t]=a[t]);o(e)}),[a,o]);return(0,Se.qxQ)({variables:{threadId:e},onSubscriptionData:function(t){var r,i,a=t.subscriptionData;if(null!==(r=a.data)&&void 0!==r&&r.threadPreview){var l=null===(i=a.data)||void 0===i?void 0:i.threadPreview;if("number"===typeof l.userId){var u=new Date,d=u.toJSON();o((function(t){return au(au({},t),{},(0,ee.Z)({},l.userId,{time:u.getTime(),user:n.find((function(e){return e.id===l.userId})),id:l.messageId,currentUserIsAuthor:!1,timeCreated:d,timeUpdated:d,anchor:{id:e},content:{__typename:"PreviewMessageContentType",preview:l.message}}))})),s.current&&clearTimeout(s.current),s.current=setTimeout(c,2e3)}}},skip:!t}),pe.useMemo((function(){return Object.values(a)}),[a])}var su=n(97203),cu=n(3658);function lu(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return uu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uu(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function uu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function du(){var e,t=(0,Ce.Z)(),n=(0,Se.OEU)({variables:{replId:t}}).data;if("Repl"!==(null===n||void 0===n?void 0:n.repl.__typename))return[];var r=[];null!==(e=n.repl.owner)&&void 0!==e&&e.username&&"User"===n.repl.owner.__typename&&r.push(n.repl.owner);var i,a=lu(n.repl.permissions);try{for(a.s();!(i=a.n()).done;){var o,s=i.value;null!==(o=s.user)&&void 0!==o&&o.username&&r.push(s.user)}}catch(c){a.e(c)}finally{a.f()}return r}function pu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pu(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hu=pe.forwardRef((function(e,t){var n,r,i=e.annote,a=e.placeholder,o=e.onChangeMessage,s=e.onFinalizeMessage,c=null===(n=(0,Se.Fqz)().data)||void 0===n||null===(r=n.currentUser)||void 0===r?void 0:r.id,l=pe.useState(""),u=(0,J.Z)(l,2),d=u[0],p=u[1],f=pe.useState(!1),h=(0,J.Z)(f,2),m=h[0],g=h[1],v=pe.useRef(null),b=pe.useState(null),y=(0,J.Z)(b,2),x=y[0],w=y[1],k=du(),Z=(0,cu.Z)(),j=Z.ref,O=Z.update,E=(0,su.Z)({"@":function(){var e=(0,$.Z)(le().mark((function e(t){var n,r;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=k.filter((function(e){return e.id!==c})),t&&(r=t.toLowerCase(),n=n.filter((function(e){return e.username.toLowerCase().startsWith(r)}))),e.abrupt("return",n.slice(0,5).map((function(e){return{icon:(0,Ie.tZ)(on.Z,{url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),_=(0,J.Z)(E,2),C=_[0].suggestions,S=_[1],P=(0,fn.Kb)({items:(null===C||void 0===C?void 0:C.results)||[],defaultHighlightedIndex:0,isOpen:Boolean(null===C||void 0===C?void 0:C.results.length),onSelectedItemChange:function(e){var t=e.selectedItem;if(C&&t){var n=C.applySuggestion({targetValue:d,suggestionValue:t.value}),r=n.fullValue,i=n.cursorIndex;p(r),setTimeout((function(){v.current&&(v.current.setSelectionRange(i,i),v.current.focus(),O())}))}}}),N=P.isOpen,I=P.getInputProps,T=P.getMenuProps,D=P.getItemProps,R=P.highlightedIndex,A=P.getComboboxProps;pe.useEffect((function(){var e="threads/drafts/".concat(i.id),t=localStorage.getItem(e);t&&p(t);var n=v.current;return function(){if(n){var t=n.value;0!==t.length?localStorage.setItem(e,t):localStorage.removeItem(e)}}}),[]),pe.useEffect((function(){setTimeout((function(){v.current&&v.current.focus()}))}),[v]);var L=Kl(i).filter((function(e){return e.id!==c}));function B(){""!==d.trim()&&(s({messageId:x||hl()(),message:d.trim()}),w(null),p(""),setTimeout(O),(0,Zt.track)(Zt.events.CONVERSATION_MESSAGE_SENT,{threadMessagesCount:i.messages.length,otherThreadParticipantsCount:L.length,anchorId:i.id}))}var U="Add a comment";return 1===L.length?U="Reply to @".concat(L[0].username):L.length>1&&(U="Reply"),a&&(U=a),(0,Ie.BX)("div",{className:"jsx-940626112",children:[(0,Ie.BX)("div",fu(fu({},A()),{},{className:"jsx-940626112 input-group",children:[(0,Ie.tZ)("textarea",fu(fu({},I({autoFocus:!0,placeholder:U,value:d,onCompositionStart:function(){return g(!0)},onCompositionEnd:function(){return g(!1)},onChange:function(e){var t=e.target.value,n=x||hl()();x||w(n),p(t),o({messageId:n,message:t})},onKeyDown:function(e){N||(e.nativeEvent.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||m||(e.preventDefault(),B()))},rows:1,ref:function(e){v.current=e,t&&"object"===typeof t&&(t.current=e),S(e),j(e)}})),{},{className:"jsx-940626112 "+(Xt()("inputbox",{hasContent:d.length>0})||"")})),(0,Ie.tZ)("button",{onClick:B,className:"jsx-940626112 "+(Xt()("send-button",{isValid:d.length>0})||""),children:(0,Ie.tZ)(Yc.Z,{filled:!0,size:12})})]})),(0,Ie.tZ)("div",fu(fu({},T({})),{},{className:"jsx-940626112",children:N&&(0,Ie.tZ)("div",{className:"jsx-940626112 mention-suggestions-container",children:C.results.map((function(e,t){return(0,xr.az)("div",fu(fu({},D({item:e,index:t})),{},{key:e.value,className:"jsx-940626112 "+(Xt()("mention-suggestion",{selected:R===t})||"")}),e.icon,(0,Ie.tZ)("div",{className:"jsx-940626112",children:e.value}))}))})})),(0,Ie.tZ)(se(),{id:"940626112",children:[".input-group.jsx-940626112{display:grid;grid-template-columns:1fr min-content;grid-gap:10px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;}",".inputbox.jsx-940626112{background:var(--background-higher);color:var(--foreground-default);border:none;border-radius:var(--border-radius-8);padding:var(--space-8);outline:none;resize:none;font-family:'IBM Plex Sans',sans-serif;font-size:var(--font-size-default);line-height:16px;overflow-y:auto;max-height:calc(var(--font-size-default) * 18);}",".inputbox.jsx-940626112::-webkit-input-placeholder{white-space:pre;}",".inputbox.jsx-940626112::-moz-placeholder{white-space:pre;}",".inputbox.jsx-940626112:-ms-input-placeholder{white-space:pre;}",".inputbox.jsx-940626112::placeholder{white-space:pre;}",".inputbox.hasContent.jsx-940626112{border-radius:6px;}",".send-button.jsx-940626112{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:24px;height:24px;background:var(--background-highest);color:var(--foreground-dimmest);border:none;border-radius:50%;}",".send-button.jsx-940626112:focus{outline:none;}",".send-button.isValid.jsx-940626112{background:var(--accent-primary-default);color:var(--white);cursor:pointer;}",".send-button.isValid.jsx-940626112:hover{background:var(--accent-primary-default);}",".send-button.isValid.jsx-940626112:active{background:var(--accent-primary-default);}",".mention-suggestions-container.jsx-940626112{padding-top:1em;display:grid;grid-row-gap:var(--space-4);overflow:hidden;}",".mention-suggestion.jsx-940626112{display:grid;grid-template-columns:min-content max-content;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-column-gap:var(--space-8);padding:var(--space-8) 0;cursor:pointer;color:var(--foreground-default);}",".mention-suggestion.selected.jsx-940626112{background-color:var(--background-root);}",".mention-suggestion.selected.jsx-940626112>*.jsx-940626112{-webkit-transform:scale(1.1);-ms-transform:scale(1.1);transform:scale(1.1);}"]})]})})),mu=hu,gu=n(59818),vu=n(35977);function bu(e){var t=e.message,n=e.messageStyle,r=pe.useMemo((function(){return"TextMessageContentType"===t.content.__typename?zl(t.content.text,{}):"PreviewMessageContentType"===t.content.__typename&&"string"===typeof t.content.preview?zl(t.content.preview,{}):null}),[t.content]),i="PreviewMessageContentType"===t.content.__typename&&"string"!==typeof t.content.preview;return t.user&&(r||i)?(0,Ie.BX)("div",{className:"jsx-3163292258 "+(n||""),children:[(0,Ie.BX)("div",{className:"jsx-3163292258 message",children:[r&&(0,Ie.tZ)(Vl,{message:r,codeStyles:{color:"var(--accent-negative-default)",background:"var(--background-highest)"}}),i&&(0,Ie.BX)("span",{className:"jsx-3163292258 typing-indicator",children:[(0,Ie.tZ)("span",{className:"jsx-3163292258 dot"}),(0,Ie.tZ)("span",{className:"jsx-3163292258 dot"}),(0,Ie.tZ)("span",{className:"jsx-3163292258 dot"})]})]}),(0,Ie.tZ)(se(),{id:"3163292258",children:[".message.jsx-3163292258{background:var(--background-higher);padding:var(--space-4) var(--space-8);border-radius:var(--border-radius-8);font-size:var(--font-size-default);overflow-wrap:break-word;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;max-width:100%;white-space:pre-wrap;}",".userhighlight.jsx-3163292258 .message.jsx-3163292258{background:transparent;}",".typing-indicator.jsx-3163292258{min-height:1em;display:grid;grid-auto-flow:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:var(--space-8);}",".dot.jsx-3163292258{width:6px;height:6px;border-radius:6px;display:inline-block;background-color:var(--foreground-dimmest);-webkit-animation:pulse-jsx-3163292258 0.6s infinite;animation:pulse-jsx-3163292258 0.6s infinite;}",".dot.jsx-3163292258:nth-child(1){-webkit-animation-delay:0s;animation-delay:0s;}",".dot.jsx-3163292258:nth-child(2){-webkit-animation-delay:0.2s;animation-delay:0.2s;}",".dot.jsx-3163292258:nth-child(3){-webkit-animation-delay:0.4s;animation-delay:0.4s;}","@-webkit-keyframes pulse-jsx-3163292258{0%{background-color:var(--foreground-dimmest);}50%{background-color:var(--foreground-dimmest);}100%{background-color:var(--foreground-dimmest);}}","@keyframes pulse-jsx-3163292258{0%{background-color:var(--foreground-dimmest);}50%{background-color:var(--foreground-dimmest);}100%{background-color:var(--foreground-dimmest);}}"]})]}):null}var yu=n(61261);function xu(e){var t=e.message,n=pe.useMemo((function(){var e=t.timeCreated;return e?(0,yu.Z)(new Date(e),"do MMM, hh:mm a"):""}),[t]),r=t.user;return(0,Ie.tZ)("div",{className:"resolved-message",children:(0,Ie.BX)(Ee.Ug,{align:"center",spacing:1,children:[r&&(0,Ie.tZ)(on.Z,{url:r.image,size:"m"}),(0,Ie.tZ)(st.Z,{color:"var(--foreground-default)",size:24}),(0,Ie.BX)(Oe.Z,{size:"xsmall",children:["Resolved ",n]})]})})}function wu(e){var t=e.message,n=pe.useMemo((function(){var e=t.timeCreated;return e?(0,yu.Z)(new Date(e),"do MMM, hh:mm a"):""}),[t]),r=t.user;return(0,Ie.tZ)("div",{className:"resolved-message",children:(0,Ie.BX)(Ee.Ug,{align:"center",spacing:1,children:[r&&(0,Ie.tZ)(on.Z,{url:r.image,size:"m"}),(0,Ie.tZ)(st.Z,{size:24,color:"var(--foreground-dimmest)"}),(0,Ie.BX)(Oe.Z,{size:"xsmall",children:["Unresolved ",n]})]})})}var ku=function(e){var t=new Date(e),n=new Date;return(0,vu.Z)(n,t)<60?"now":(0,gu.F)(t,!0)};function Zu(e){var t=e.messageGroup,n=t.messages,r=t.user,i=t.timeCreated;return r?(0,Ie.BX)("div",{className:"jsx-651827874 message-group",children:[(0,Ie.BX)("div",{className:"jsx-651827874 message-info",children:[(0,Ie.tZ)("div",{className:"jsx-651827874 avatar",children:(0,Ie.tZ)(on.Z,{url:r.image,size:"xs",style:{minHeight:"15px",minWidth:"15px",height:"15px",width:"15px"}})}),(0,Ie.tZ)("div",{className:"jsx-651827874 username",children:r.username}),(0,Ie.tZ)("div",{className:"jsx-651827874 time",children:ku(i)})]}),(0,Ie.tZ)("div",{className:"jsx-651827874 messages",children:n.map((function(e){return(0,Ie.tZ)(bu,{message:e},e.id)}))}),(0,Ie.tZ)(se(),{id:"651827874",children:[".message-group.jsx-651827874{background-color:var(--background-default);color:var(--foreground-default);display:grid;position:relative;grid-template-rows:auto auto;grid-row-gap:var(--space-8);grid-template-columns:minmax(0,1fr);}",".message-info.jsx-651827874{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:var(--font-size-small);}",".messages.jsx-651827874{display:grid;grid-row-gap:var(--space-4);grid-template-columns:minmax(0,1fr);}",".avatar.jsx-651827874{margin-right:5px;}",".username.jsx-651827874{color:var(--foreground-dimmer);font-weight:var(--font-weight-medium);margin-right:3px;}",".time.jsx-651827874{color:var(--foreground-dimmest);}"]})]}):null}function ju(e){var t=e.messageGroup;if("TextMessageContentType"===t.messageType||"PreviewMessageContentType"===t.messageType)return(0,Ie.tZ)(Zu,{messageGroup:t});if("StatusMessageContentType"===t.messageType){var n=t.messages[0];if("StatusMessageContentType"===n.content.__typename&&"resolved"===n.content.status)return(0,Ie.tZ)(xu,{message:n});if("StatusMessageContentType"===n.content.__typename&&"unresolved"===n.content.status)return(0,Ie.tZ)(wu,{message:n})}return null}var Ou=function(e){var t=e.annote,n=e.onFinalizeMessage,r=void 0===n?function(){}:n,i=e.onChangeMessage,a=void 0===i?function(){}:i,o=e.onResolve,s=void 0===o?function(){}:o,c=e.onRequestClose,l=void 0===c?function(){}:c,u=e.style,d=e.width,p=t.messages,f=pe.useRef(null),h=pe.useRef(null),m=ou(t.id),g=(0,ni.L)({accept:[di.z.FileNode,di.z.FileHeaderTab],collect:function(e){var t,n=null===(t=e.getItem())||void 0===t?void 0:t.isFolder;return{isOver:e.isOver({shallow:!0})&&!n}},canDrop:function(e){return!e.isFolder},drop:function(e){e&&!e.isFolder&&r({messageId:hl()(),message:"#".concat(e.path)})}}),v=(0,J.Z)(g,2),b=v[0],y=v[1],x=(0,Yl.Z)((function(e){var t,n=e.target;n.closest(".node-row")||n.closest(".file-header-tab")||""!==(null===(t=h.current)||void 0===t?void 0:t.value)||l()}),[]);nu(t),pe.useEffect((function(){function e(e){var t;"Escape"===e.key&&""===(null===(t=h.current)||void 0===t?void 0:t.value)&&l()}return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[l]),pe.useEffect((function(){f.current&&(f.current.scrollTop=f.current.scrollHeight)}),[p]);var w=pe.useMemo((function(){var e=(0,nn.Z)(p).sort((function(e,t){return new Date(e.timeCreated).getTime()-new Date(t.timeCreated).getTime()}));return e.push.apply(e,(0,nn.Z)(m.filter((function(t){return!e.slice(-5).find((function(e){return e.id===t.id}))})))),tu(e)}),[p,m]),k=p.length>0;return(0,Ie.BX)("div",{style:u,ref:function(e){y(e),x.current=e},className:"jsx-".concat(Ql.Q.__hash)+" "+se().dynamic([["2932506883",[d]]])+" "+(Xt()("annotation-group",{"is-over":b.isOver})||""),children:[w.length>0&&(0,Ie.tZ)("div",{ref:f,className:"jsx-".concat(Ql.Q.__hash)+" "+se().dynamic([["2932506883",[d]]])+" message-group-container",children:w.map((function(e){return(0,Ie.tZ)(ju,{messageGroup:e},e.messages[0].id)}))}),(0,Ie.tZ)(mu,{annote:t,onChangeMessage:a,onFinalizeMessage:r,ref:h}),(0,Ie.BX)("div",{className:"jsx-".concat(Ql.Q.__hash)+" "+se().dynamic([["2932506883",[d]]])+" floating-group",children:[k?(0,Ie.tZ)("div",{className:"jsx-".concat(Ql.Q.__hash)+" "+se().dynamic([["2932506883",[d]]])+" delete show-on-hover",children:(0,Ie.tZ)("button",{"aria-label":"Resolve","data-microtip-position":"top",role:"tooltip",onClick:function(e){s(e)},className:"jsx-".concat(Ql.Q.__hash)+" "+se().dynamic([["2932506883",[d]]])+" floating-button resolve",children:(0,Ie.tZ)(st.Z,{})})}):null,(0,Ie.tZ)("div",{className:"jsx-".concat(Ql.Q.__hash)+" "+se().dynamic([["2932506883",[d]]])+" close",children:(0,Ie.tZ)("button",{"aria-label":"Close","data-microtip-position":"top",role:"tooltip",onClick:l,className:"jsx-".concat(Ql.Q.__hash)+" "+se().dynamic([["2932506883",[d]]])+" floating-button close",children:(0,Ie.tZ)(cn.Z,{})})})]}),(0,Ie.tZ)(se(),{id:Ql.Q.__hash,children:Ql.Q}),(0,Ie.tZ)(se(),{id:"2932506883",dynamic:[d],children:[".annotation-group.__jsx-style-dynamic-selector{position:absolute;z-index:10;position:relative;display:grid;grid-row-gap:var(--space-16);-webkit-box-pack:stretch;-webkit-justify-content:stretch;-ms-flex-pack:stretch;justify-content:stretch;background-color:var(--background-default);padding:var(--space-8);border-radius:var(--border-radius-4);width:".concat(d,"px;box-shadow:var(--shadow-2);border:0.5px solid var(--background-higher);}"),".annotation-group.is-over.__jsx-style-dynamic-selector{background-color:var(--background-root);}",".annotation-group.__jsx-style-dynamic-selector *.__jsx-style-dynamic-selector{-webkit-transition:all 0.2s;transition:all 0.2s;}",".message-group-container.__jsx-style-dynamic-selector{display:grid;grid-row-gap:var(--space-16);max-height:275px;overflow-y:auto;padding:var(--space-8);padding-bottom:0;grid-template-columns:minmax(0,1fr);}",".floating-group.__jsx-style-dynamic-selector{position:absolute;display:grid;grid-auto-flow:column;-webkit-box-pack:end;-webkit-justify-content:end;-ms-flex-pack:end;justify-content:end;grid-column-gap:8px;top:-32px;left:0;right:0;}",".floating-group.__jsx-style-dynamic-selector .show-on-hover.__jsx-style-dynamic-selector{opacity:0;}",".annotation-group.__jsx-style-dynamic-selector:hover>.floating-group.__jsx-style-dynamic-selector .show-on-hover.__jsx-style-dynamic-selector{opacity:1;}",".feedback.__jsx-style-dynamic-selector{position:absolute;-webkit-text-decoration:none;text-decoration:none;}",".floating-button.__jsx-style-dynamic-selector{width:24px;height:24px;border-radius:50%;background:var(--background-higher);color:var(--foreground-dimmer);border:1px solid var(--background-highest);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;box-shadow:var(--shadow-2);}",".floating-button.__jsx-style-dynamic-selector:focus{outline:none;}",".floating-button.__jsx-style-dynamic-selector:hover{color:var(--foreground-default);background:var(--background-higher);}",".floating-button.delete.__jsx-style-dynamic-selector:hover{color:var(--white);background:var(--accent-negative-default);border-color:var(--accent-negative-default);}",".floating-button.resolve.__jsx-style-dynamic-selector:hover{color:var(--white);background:var(--accent-positive-default);border-color:var(--accent-positive-default);}",".floating-button.__jsx-style-dynamic-selector:active{background:var(--background-highest);}"]})]})};function Eu(e){var t=e.annote,n=pe.useState(null),r=(0,J.Z)(n,2),i=r[0],a=r[1];pe.useEffect((function(){var e=t.messages[t.messages.length-1];if(e&&!e.currentUserIsAuthor){var n=new Date(e.timeCreated).getTime();if(!(Date.now()-n>5e3)){a(e);var r=setTimeout((function(){a(null)}),3e3);return function(){return clearTimeout(r)}}a(null)}else a(null)}),[t]);var o=pe.useMemo((function(){if("TextMessageContentType"!==(null===i||void 0===i?void 0:i.content.__typename))return null;var e=null===i||void 0===i?void 0:i.content.text;return e?zl(e,{}):null}),[i]);return i&&o?(0,Ie.BX)("div",{className:"jsx-712750148 annotation-message-popup",children:[i.user&&(0,Ie.tZ)(on.Z,{url:i.user.image,size:"xs",style:{minWidth:"16px",minHeight:"16px",height:"16px",width:"16px"}},i.user.id),(0,Ie.tZ)("div",{className:"jsx-712750148 annotation-message-popup-text",children:(0,Ie.tZ)(Vl,{message:o})}),(0,Ie.tZ)(se(),{id:"712750148",children:[".annotation-message-popup.jsx-712750148{position:absolute;background-color:var(--background-default);padding:4px;border-radius:var(--border-radius-4);border:0.5px solid var(--background-higher);box-shadow:var(--shadow-1);display:grid;grid-auto-flow:column;grid-column-gap:var(--space-8);grid-template-columns:min-content max-content;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;-webkit-transform:translateX(5px);-ms-transform:translateX(5px);transform:translateX(5px);}",".annotation-message-popup-text.jsx-712750148{font-family:IBM Plex Sans;font-style:normal;font-weight:normal;font-size:0.8em;color:var(--foreground-default);}"]})]}):null}function _u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_u(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Su(e,t){var n=t.onReceiveAnnotationUpdate,r=void 0===n?function(){}:n,i=(0,sn.Z)().showError,a=pe.useState(null),o=(0,J.Z)(a,2),s=o[0],c=o[1],l=(0,Se.xTD)({variables:{replId:e}}),u=function(){var e,t=null===(e=l.data)||void 0===e?void 0:e.currentUser;return t?{user:{__typename:"User",id:t.id,username:t.username,image:t.image}}:{}},d=function(t,n){var r=t.readQuery({query:Se.yiQ,variables:{replId:e}}),i=[],a=r.repl.annotationAnchors,o=a.findIndex((function(e){return e.id===n.id}));i=-1===o?[].concat((0,nn.Z)(a),[n]):[].concat((0,nn.Z)(a.slice(0,o)),[n],(0,nn.Z)(a.slice(o+1))),t.writeQuery({query:Se.yiQ,variables:{replId:e},data:Cu(Cu({},r),{},{repl:Cu(Cu({},r.repl),{},{annotationAnchors:i})})})},p=(0,Se.ASh)({onError:function(e){return i(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return i(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.createAnnotationAnchor;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&d(e,r))}}}),f=(0,J.Z)(p,1)[0],h=(0,Se.gEq)({onError:function(e){return i(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return i(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.createAnnotationMessage;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&d(e,r))}}}),m=(0,J.Z)(h,1)[0],g=(0,Se.RpE)({onError:function(e){return i(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return i(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.updateAnnotationAnchor;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&d(e,r))}}}),v=(0,J.Z)(g,1)[0],b=(0,Se.nAY)(),y=(0,J.Z)(b,1)[0],x=(0,Se.HjV)(),w=(0,J.Z)(x,1)[0];(0,Se.Tt1)({variables:{replId:e},onSubscriptionData:function(e){var t=e.subscriptionData.data,n=e.client,i=null===t||void 0===t?void 0:t.updatedAnnotation;i&&(d(n,i),r(i))}});var k=pe.useState([]),Z=(0,J.Z)(k,2),j=Z[0],O=Z[1];pe.useEffect((function(){var e,t=[];"Repl"===(null===(e=l.data)||void 0===e?void 0:e.repl.__typename)&&t.push.apply(t,(0,nn.Z)(l.data.repl.annotationAnchors)),s&&t.push(Cu(Cu({},s),{},{isGeneral:Boolean(s.isGeneral),messages:[],isResolved:!1,__typename:"AnnotationAnchor"})),O(t)}),[l,s]);var E=pe.useMemo((function(){return j.find((function(e){return e.isGeneral}))}),[j]),_=pe.useMemo((function(){return j.reduce((function(e,t){return t.isResolved?e:t.messages.some((function(e){return!1===e.seen}))?e+1:e}),0)}),[j]),C=function(e){var t=e.annotationAnchor,n=e.annotationMessage,r=e.highlight;f({variables:{annotationAnchor:t,annotationMessage:n,highlight:r},optimisticResponse:{createAnnotationAnchor:Cu(Cu(Cu({},u()),t),{},{isGeneral:Boolean(t.isGeneral),__typename:"AnnotationAnchor",messages:n?[Cu(Cu(Cu({},u()),n),{},{content:{text:n.text,__typename:"TextMessageContentType"},anchor:{id:t.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:Date.now(),currentUserIsAuthor:!0,seen:!0})]:[],isResolved:!1})}})};return{annotations:j,generalThread:E,unreadThreadCount:_,placeholderAnchorId:null===s||void 0===s?void 0:s.id,createAnnotationAnchorPlaceholder:function(e){var t=e.annotationAnchor;c(t)},deleteAnnotationAnchorPlaceholder:function(){c(null)},createAnnotationAnchor:C,createAnnotationMessage:function(t){var n=t.anchor,r=t.annotationMessage,i=t.highlight;(null===s||void 0===s?void 0:s.id)===n.id?(c(null),C({annotationAnchor:Cu({},s),annotationMessage:r,highlight:i})):m({variables:{replId:e,anchorId:n.id,annotationMessage:r,highlight:i},optimisticResponse:{createAnnotationMessage:Cu(Cu({},n),{},{messages:[].concat((0,nn.Z)(n.messages.filter((function(e){return!e.id.startsWith("chat-")}))),[Cu(Cu(Cu({},u()),r),{},{content:{text:r.text,__typename:"TextMessageContentType"},anchor:{id:n.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:Date.now(),currentUserIsAuthor:!0,seen:!0})])})}})},updateAnnotationAnchor:function(e){var t=e.annotationAnchor,n=e.changes;v({variables:{id:t.id,changes:n},optimisticResponse:{updateAnnotationAnchor:Cu(Cu(Cu({},t),n),{},{isResolved:"boolean"===typeof n.isResolved?n.isResolved:t.isResolved})}})},updateThreadPreview:function(e){var t=e.threadId,n=e.messageId,r=e.message;w({variables:{threadId:t,messageId:n,message:r}})},markAllMessagesInReplAsSeenByUser:function(){y({variables:{replId:e}})}}}var Pu=n(61790),Nu=n(56667),Iu=n(45896),Tu=n(91855),Du=n(83371),Ru=n(53526),Au=pe.createContext({setThreadsVisibility:function(){},threadsVisibility:!1}),Lu=Au;function Bu(e){var t=e.children,n=pe.useState(!1),r=(0,J.Z)(n,2),i=r[0],a=r[1];return(0,Ie.tZ)(Au.Provider,{value:{threadsVisibility:i,setThreadsVisibility:a},children:t})}var Uu=n(57265);var Mu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.allowNoWid,n=pe.useContext(Uu.Z);if(!n){if(t)return null;throw new Error("Expected wid to be in wid context")}return n},Fu=n(18220);var Xu,zu=n(60172);function Vu(e,t,n){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,$.Z)(le().mark((function e(t,n,r){var i,a,o,s;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.path&&"number"===typeof t.indexStart&&"number"===typeof t.indexEnd&&t.otVersion){e.next=2;break}return e.abrupt("return");case 2:if(r!==t.otVersion){e.next=4;break}return e.abrupt("return",{path:t.path,indexStart:t.indexStart,indexEnd:t.indexEnd,otVersion:t.otVersion});case 4:return i=r,a=window.performance.now(),o=function(){(0,Zt.track)(Zt.events.ANNOTATION_FASTFORWARDED,{opCount:i-t.otVersion,anchorId:t.id,flagPid1Fastforwards:!0,time:window.performance.now()-a})},e.next=9,n({indexStart:t.indexStart,indexEnd:t.indexEnd,versionFrom:t.otVersion,versionTo:i});case 9:return s=e.sent,o(),e.abrupt("return",{path:t.path,indexStart:s.indexStart,indexEnd:s.indexEnd,otVersion:i});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hu(){return Hu=(0,$.Z)(le().mark((function e(t){var n,r,i,a,o,s,c,l;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.anchor,r=t.version,i=t.transformSelection,a=t.content,n.path){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,Vu(n,i,r);case 5:if(o=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return c=function(){},l=function(){try{for(var e=zu.xv.of(a.split("\n")),t=e.lineAt(o.indexStart),n=e.lineAt(o.indexEnd),r=[],i=t.number===n.number?Math.max(0,t.number-1):t.number,s=Math.min(e.lines,n.number+1),c=i;c<=s;c++)r.push(e.line(c).text);return{startLineNumber:i,lines:r}}catch(l){xt.Tb(l)}},e.abrupt("return",{anchor:n,newSelection:o,newPosition:undefined,selectedContent:s,getHighlight:c,getSnippet:l});case 11:case"end":return e.stop()}}),e)}))),Hu.apply(this,arguments)}function Wu(e){var t=(0,Fe.Z)().fs,n=pe.useState(null),r=(0,J.Z)(n,2),i=r[0],a=r[1],o=pe.useRef(null),s=pe.useRef(null),c=pe.useState(!1),l=(0,J.Z)(c,2),u=l[0],d=l[1];return pe.useEffect((function(){if(null!==e&&void 0!==e&&e.path){var n=function(){s.current=null,d(!1)},r=t.watchOtFile(e.path,{onReady:function(e){var t=e.transformSelection,n=e.initialContent;o.current=n.toString(),s.current=t,d(!0)},onMoveOrDelete:function(){n()},onError:function(e){xt.Tb(e),n()},onChange:function(e){var t=e.latestContent;o.current=t}});return function(){n(),r()}}}),[e,t]),pe.useEffect((function(){null!==e&&void 0!==e&&e.path&&u&&s.current&&null!==o.current&&function(e){return Hu.apply(this,arguments)}({anchor:e,version:t.getOTVersion(e.path),transformSelection:s.current,content:o.current}).then((function(e){a(e)})).catch((function(){a(null)}))}),[t,e,u]),i}function Ku(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return qu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qu(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function qu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yu(e){var t,n=e.annotation,r=e.onChangeMessage,i=void 0===r?function(){}:r,a=e.onFinalizeMessage,o=void 0===a?function(){}:a,s=e.onCloseThread,c=void 0===s?function(){}:s,l=e.scrollToAnchor,u=void 0===l?function(){}:l,d=e.markThreadResolved,p=void 0===d?function(){}:d,f=(0,Gi.Z)("flag-thread-snippets"),h=ou(n.id),m=Wu(n),g=pe.useMemo((function(){var e=(0,nn.Z)(n.messages).sort((function(e,t){return new Date(e.timeCreated).getTime()-new Date(t.timeCreated).getTime()}));return e.push.apply(e,(0,nn.Z)(h.filter((function(t){return!e.slice(-5).find((function(e){return e.id===t.id}))})))),tu(e)}),[n,h]),v=pe.useMemo((function(){if(m)return null===m||void 0===m?void 0:m.getSnippet()}),[m]),b=pe.useRef(null);nu(n);pe.useEffect((function(){b.current&&(b.current.scrollTop=b.current.scrollHeight)}),[b,n]);var y=(null===m||void 0===m||null===(t=m.anchor)||void 0===t?void 0:t.path)||n.path||"";return(0,Ie.BX)(Ie.HY,{children:[(0,Ie.BX)("div",{className:"jsx-1845381324 header",children:[(0,Ie.tZ)("span",{className:"jsx-1845381324",children:(0,Ie.tZ)(je.Z,{filled:!1,border:!1,onClick:c,children:(0,Ie.tZ)(Pu.Z,{rotate:90})})}),(0,Ie.tZ)("span",{className:"jsx-1845381324 separator"}),(0,Ie.BX)(Ee.Ug,{children:[!n.isResolved&&n.path&&(0,Ie.tZ)(je.Z,{filled:!1,border:!1,"aria-label":"Jump to code",role:"tooltip","data-microtip-position":"left",onClick:function(){return u(n.id)},children:(0,Ie.tZ)(Nu.Z,{})}),!n.isResolved&&!n.isGeneral&&(0,Ie.tZ)(je.Z,{filled:!1,border:!1,"aria-label":"Resolve thread",role:"tooltip","data-microtip-position":"left",onClick:function(){return p(n)},children:(0,Ie.tZ)(st.Z,{})})]}),(0,Ie.tZ)(se(),{id:"1845381324",children:[".separator.jsx-1845381324{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".header.jsx-1845381324{padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;min-height:32px;}"]})]}),(0,Ie.BX)("div",{className:"jsx-1632399811 "+"jsx-".concat(Ql.Q.__hash)+" thread",children:[(0,Ie.tZ)("div",{className:"jsx-1632399811 "+"jsx-".concat(Ql.Q.__hash)+" message-group-container-container",children:(0,Ie.BX)("div",{ref:b,className:"jsx-1632399811 "+"jsx-".concat(Ql.Q.__hash)+" message-group-container",children:[f&&n.path&&(0,Ie.tZ)(Ru.u5,{path:y,snippet:v,onNavigateToCode:function(){return u(n.id)}}),g.map((function(e){return(0,Ie.tZ)(ju,{messageGroup:e},e.messages[0].id)}))]})}),(0,Ie.tZ)(mu,{annote:n,onChangeMessage:i,onFinalizeMessage:o}),(0,Ie.tZ)(se(),{id:Ql.Q.__hash,children:Ql.Q}),(0,Ie.tZ)(se(),{id:"1632399811",children:[".thread.jsx-1632399811{position:relative;display:grid;grid-row-gap:var(--space-16);-webkit-box-pack:stretch;-webkit-justify-content:stretch;-ms-flex-pack:stretch;justify-content:stretch;overflow:hidden;padding:var(--space-16);padding-top:0;grid-template-rows:1fr min-content;height:100%;}",".message-group-container-container.jsx-1632399811{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;overflow:hidden;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".message-group-container.jsx-1632399811{display:grid;grid-row-gap:var(--space-16);overflow-y:auto;padding:var(--space-8);padding-bottom:0;}"]})]})]})}function Qu(e){var t=e.unreadCount;return(0,Ie.BX)("div",{className:"jsx-2446661984 count-container",children:[t>0?(0,Ie.tZ)("div",{className:"jsx-2446661984 count",children:t}):null,(0,Ie.tZ)(se(),{id:"2446661984",children:[".count-container.jsx-2446661984{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;height:15px;}",".count.jsx-2446661984{background:var(--accent-primary-default);color:var(--white);font-size:var(--font-size-small);height:15px;padding:0 5px;border-radius:20px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]})}function Ju(e){var t,n=e.annotation,r=e.onClick,i=n.messages.some((function(e){return!e.seen})),a=Wu(n),o=pe.useMemo((function(){return n.messages.filter((function(e){return!1===e.seen})).length}),[n]),s=Kl(n),c=s.map((function(e){return e.username})).join(", "),l=n.messages[0],u=n.messages[n.messages.length-1],d=(null===a||void 0===a?void 0:a.anchor.path)||(null===n||void 0===n?void 0:n.path)||void 0,p=pe.useMemo((function(){if(a)return null===a||void 0===a?void 0:a.getSnippet()}),[a]),f=null!==n&&void 0!==n&&n.user?{src:n.user.image,alt:"".concat(null===(t=n.user)||void 0===t?void 0:t.username,"'s avatar")}:void 0,h="TextMessageContentType"===(null===n||void 0===n?void 0:n.messages[0].content.__typename)?n.messages[0].content.text:void 0,m=pe.useMemo((function(){if(null===u||void 0===u||!u.timeCreated)return"";var e=new Date(u.timeCreated),t=e.getTime();return Date.now()-t<1e3?"just now":"".concat((0,gu.F)(e,!0)," ago")}),[u]);return l?n.path?(0,Ie.tZ)(Ru.dp,{path:d,snippet:p,timeString:m,onClick:r,avatar:f,message:h}):(0,Ie.BX)("button",{onClick:r,tabIndex:0,className:"jsx-3048065987 "+(Xt()("thread",{unread:i})||""),children:[(0,Ie.tZ)("div",{className:"jsx-3048065987 profile",children:(0,Ie.tZ)(Du.Z,{users:s})}),(0,Ie.BX)("div",{className:"jsx-3048065987 message-preview",children:[(0,Ie.tZ)("div",{className:"jsx-3048065987 thread-title",children:c}),"TextMessageContentType"===l.content.__typename&&(0,Ie.tZ)("div",{className:"jsx-3048065987 thread-preview",children:l.content.text})]}),(0,Ie.BX)("div",{className:"jsx-3048065987 info",children:[(0,Ie.tZ)(Qu,{unreadCount:o}),(0,Ie.tZ)("div",{className:"jsx-3048065987 time",children:m})]}),(0,Ie.tZ)(se(),{id:"3048065987",children:[".thread.jsx-3048065987{background:var(--background-default);padding:var(--space-8);border-radius:var(--border-radius-4);display:grid;grid-auto-flow:column;grid-template-columns:min-content minmax(0,1fr) min-content;grid-gap:var(--space-8);width:100%;max-height:52px;overflow:hidden;cursor:pointer;-webkit-transition:0.1s all ease-in-out;transition:0.1s all ease-in-out;border:none;text-align:left;}",".thread.unread.jsx-3048065987 .thread-title.jsx-3048065987{font-weight:var(--font-weight-bold);}",".thread.jsx-3048065987:hover{-webkit-transform:scale(1.05);-ms-transform:scale(1.05);transform:scale(1.05);-webkit-transition:0.2s all;transition:0.2s all;}",".thread.jsx-3048065987:focus{outline:none;outline-offset:2px;box-shadow:0 0 0 3px var(--accent-primary-dimmer);}",".thread-title.jsx-3048065987,.thread-preview.jsx-3048065987{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}",".thread-title.jsx-3048065987{color:var(--foreground-default);font-size:var(--font-size-default);}",".thread-preview.jsx-3048065987{color:var(--foreground-dimmer);font-size:var(--font-size-small);}",".profile.jsx-3048065987{width:25px;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".time.jsx-3048065987{white-space:pre;font-size:var(--font-size-small);color:var(--foreground-dimmest);}",".info.jsx-3048065987{display:grid;grid-gap:var(--space-4);-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;}"]})]}):null}function $u(e){var t=e.generalThreadsOpen,n=e.setGeneralThreadsOpen,r=(0,Ce.Z)(),i=pe.useContext(ru),a=i.generalThread,o=i.handleChangeMessage,s=i.handleFinalizeMessage,c=i.createAnnotationAnchorPlaceholder,l=pe.useMemo((function(){return a?tu((0,nn.Z)(a.messages).sort((function(e,t){return new Date(e.timeCreated).getTime()-new Date(t.timeCreated).getTime()}))):[]}),[a]);pe.useEffect((function(){a||c({annotationAnchor:{id:hl()(),replId:r,isGeneral:!0,indexStart:null,indexEnd:null,isResolved:!1,otVersion:null,path:null}})}),[a,r,c]);var u=pe.useMemo((function(){return a?a.messages.filter((function(e){return!1===e.seen})).length:0}),[a]),d=pe.useRef(null);nu(t&&a||null);return pe.useEffect((function(){d.current&&(d.current.scrollTop=d.current.scrollHeight)}),[d,a]),a?(0,Ie.BX)("div",{onClick:function(){return n(!0)},className:"jsx-4170203878 "+"jsx-".concat(Ql.Q.__hash)+" "+(Xt()("general-thread",{"is-open":t})||""),children:[(0,Ie.BX)("div",{className:"jsx-4170203878 "+"jsx-".concat(Ql.Q.__hash)+" general-thread-header",children:[(0,Ie.BX)(Ee.Ug,{spacing:1,align:"center",children:[(0,Ie.tZ)(Xe.Z,{level:5,children:"Chat"}),(0,Ie.tZ)(Qu,{unreadCount:u})]}),(0,Ie.tZ)(Ee.Ug,{spacing:1,align:"center",children:(0,Ie.tZ)(je.Z,{onClick:function(e){n(!t),e.stopPropagation()},filled:!1,Icon:function(){return(0,Ie.tZ)(Pu.Z,{rotate:t?0:180})},border:!1,size:"small"})})]}),(0,Ie.tZ)("div",{className:"jsx-4170203878 "+"jsx-".concat(Ql.Q.__hash)+" message-group-container-container",children:(0,Ie.tZ)("div",{ref:d,className:"jsx-4170203878 "+"jsx-".concat(Ql.Q.__hash)+" message-group-container",children:l.map((function(e){return(0,Ie.tZ)(ju,{messageGroup:e},e.messages[0].id)}))})}),(0,Ie.tZ)("div",{className:"jsx-4170203878 "+"jsx-".concat(Ql.Q.__hash)+" thread-input-container",children:(0,Ie.tZ)(mu,{placeholder:"Send message",annote:a,onChangeMessage:function(e){o({anchor:a,message:e.message,messageId:e.messageId}),n(!0)},onFinalizeMessage:function(e){s({anchor:a,message:e.message,messageId:e.messageId}),n(!0),(0,Zt.track)(Zt.events.MESSAGE_SENT,{replId:r,source:"generalThreads",variant:"replace-chat"})}})}),(0,Ie.tZ)(se(),{id:Ql.Q.__hash,children:Ql.Q}),(0,Ie.tZ)(se(),{id:"4170203878",children:[".general-thread.jsx-4170203878{margin:1px;padding:var(--space-16);border-radius:var(--border-radius-8);border-top:1px solid var(--background-higher);box-shadow:var(--shadow-2);z-index:100;position:absolute;bottom:0;left:0;right:0;background:var(--background-default);display:grid;overflow:hidden;grid-template-rows:min-content 1fr min-content;grid-gap:var(--space-8);cursor:pointer;-webkit-transition:0.2s height;transition:0.2s height;height:7.5em;}",".general-thread.is-open.jsx-4170203878{height:100%;cursor:unset;}",".general-thread-header.jsx-4170203878{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}",".message-group-container-container.jsx-4170203878{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;overflow:hidden;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:0;}",".general-thread.is-open.jsx-4170203878 .message-group-container-container.jsx-4170203878{height:100%;}",".message-group-container.jsx-4170203878{display:grid;grid-row-gap:var(--space-16);overflow-y:auto;padding:var(--space-8);padding-bottom:0;}",".thread-input-container.jsx-4170203878{width:100%;}"]})]}):null}function ed(e,t){var n,r,i=null===(n=e.messages)||void 0===n?void 0:n[e.messages.length-1],a=null===(r=t.messages)||void 0===r?void 0:r[t.messages.length-1];return i||a?i?a?new Date(a.timeCreated).getTime()-new Date(i.timeCreated).getTime():1:-1:0}function td(e){var t=e.annotations,n=e.inboxMode,r=e.generalThreadsOpen,i=e.setInboxMode,a=e.onThreadClick,o=e.onMarkAllAsReadClick,s=e.onClose,c=e.setGeneralThreadsOpen,l=(0,Gi.Z)("flag-mark-all-threads-as-read"),u=pe.useState(!1),d=(0,J.Z)(u,2),p=d[0],f=d[1],h=(0,Fe.Z)().session,m=pe.useMemo((function(){return t.filter((function(e){return!e.isGeneral&&(n===Xu.ACTIVE?!e.isResolved:e.isResolved)})).sort(ed)}),[t,n]),g=pe.useState(3),v=(0,J.Z)(g,2),b=v[0],y=v[1],x=function(e){var t=pe.useRef(null),n=pe.useRef(e);return pe.useEffect((function(){n.current=e}),[e]),function(e){t.current&&t.current.disconnect(),e&&window.IntersectionObserver&&(t.current=new window.IntersectionObserver((function(e){e[0].isIntersecting&&n.current()})),t.current.observe(e))}}((function(){y((function(e){return e+3}))})),w=pe.useMemo((function(){var e,t={},n=Ku(m);try{for(n.s();!(e=n.n()).done;){var r,i=e.value,a=i.messages[i.messages.length-1];if(a){var o=i.path||-1,s=t[o]||{threads:[],unreadCount:0,lastMessageTime:null,path:o,lang:null===(r=i.path)||void 0===r?void 0:r.split(".").slice(-1)[0]};s.threads.push(i),s.unreadCount+=i.messages.filter((function(e){return!1===e.seen})).length,s.lastMessageTime?s.lastMessageTime=new Date(Math.max(s.lastMessageTime.getTime(),new Date(a.timeCreated).getTime())):s.lastMessageTime=new Date(a.timeCreated),t[o]=s}}}catch(c){n.e(c)}finally{n.f()}return Object.values(t).sort((function(e,t){return t.lastMessageTime.getTime()-e.lastMessageTime.getTime()}))}),[m]);return(0,Ie.BX)("div",{className:"jsx-4132187754 "+"jsx-".concat(Ql.Q.__hash)+" threads-feed",children:[(0,Ie.BX)("div",{className:"jsx-4132187754 "+"jsx-".concat(Ql.Q.__hash)+" header",children:[(0,Ie.BX)(Ee.Ug,{align:"center",spacing:1,children:[(0,Ie.tZ)(Xe.Z,{level:4,style:{marginLeft:"var(--space-8)"},children:"Threads"}),(0,Ie.tZ)(Tu.Z,{isMenuOpen:p,renderAnchorComponent:function(){return(0,Ie.tZ)(je.Z,{filled:!0,border:!1,onClick:function(){return f(!p)},Icon:Pu.Z,iconOnRight:!0,children:n})},renderItemChildComponent:function(e){return(0,Ie.tZ)("div",{className:"jsx-4132187754 "+"jsx-".concat(Ql.Q.__hash),children:e.label})},onClick:function(e){i(e.mode),f(!1)},items:[{label:"Active",mode:Xu.ACTIVE},{label:"Resolved",mode:Xu.RESOLVED}]}),l&&(0,Ie.tZ)(je.Z,{border:!1,filled:!1,Icon:Iu.Z,onClick:o,"aria-label":"Mark all as read",role:"tooltip","data-microtip-position":"bottom"})]}),(0,Ie.tZ)("span",{className:"jsx-4132187754 "+"jsx-".concat(Ql.Q.__hash),children:(0,Ie.tZ)(je.Z,{filled:!1,border:!1,onClick:s,children:(0,Ie.tZ)(cn.Z,{})})})]}),(0,Ie.tZ)("div",{className:"jsx-4132187754 "+"jsx-".concat(Ql.Q.__hash)+" threads-container",children:(0,Ie.BX)(Ee.gC,{spacing:6,align:"stretch",children:[(0,Ie.BX)(Ie.HY,{children:[w.slice(0,b).map((function(e){return(0,Ie.BX)("div",{className:"jsx-4132187754 "+"jsx-".concat(Ql.Q.__hash)+" thread-group",children:[-1!==e.path&&(0,Ie.tZ)("button",{onClick:function(){"string"===typeof e.path&&h.openFile(e.path)},className:"jsx-4132187754 "+"jsx-".concat(Ql.Q.__hash)+" group-header",children:(0,Ie.BX)("div",{className:"jsx-4132187754 "+"jsx-".concat(Ql.Q.__hash)+" left",children:[(0,Ie.tZ)(Fu.Z,{path:"number"!==typeof e.path?e.path:"",size:20}),(0,Ie.tZ)("span",{className:"jsx-4132187754 "+"jsx-".concat(Ql.Q.__hash)+" path",children:e.path}),(0,Ie.tZ)(Qu,{unreadCount:e.unreadCount})]})}),e.threads.map((function(e){return(0,Ie.tZ)(Ju,{annotation:e,onClick:function(){return a(e.id)}},e.id)}))]},e.path)})),b<w.length&&(0,Ie.tZ)("div",{ref:x,style:{height:"100px"},className:"jsx-4132187754 "+"jsx-".concat(Ql.Q.__hash)})]}),(0,Ie.tZ)("div",{className:"jsx-4132187754 "+"jsx-".concat(Ql.Q.__hash)+" general-threads-buffer"})]})}),(0,Ie.tZ)($u,{generalThreadsOpen:r,setGeneralThreadsOpen:c}),(0,Ie.tZ)(se(),{id:Ql.Q.__hash,children:Ql.Q}),(0,Ie.tZ)(se(),{id:"989187587",children:["::-webkit-scrollbar-track{background:transparent !important;}"]}),(0,Ie.tZ)(se(),{id:"2986800960",children:[".feedback.jsx-4132187754{-webkit-text-decoration:none;text-decoration:none;}",".threads-feed.jsx-4132187754 .list-wrapper{z-index:1;}",".threads-feed.jsx-4132187754{height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".threads-container.jsx-4132187754{position:relative;padding:var(--space-16);overflow-y:auto;overflow-y:overlay;}",".header.jsx-4132187754{box-sizing:content-box;padding:var(--space-8);padding-top:var(--space-16);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;min-height:32px;}",".thread-group.jsx-4132187754{max-width:100%;display:grid;grid-gap:var(--space-16);}",".group-header.jsx-4132187754{color:var(--foreground-default);font-size:var(--font-size-subhead-default);cursor:pointer;display:grid;border:none;background-color:transparent;grid-gap:var(--space-8);grid-auto-flow:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-weight:var(--font-weight-medium);max-width:100%;overflow:hidden;}",".group-header.jsx-4132187754:hover{color:var(--accent-primary-stronger);}",".group-header.jsx-4132187754 .left.jsx-4132187754{display:grid;grid-auto-flow:column;grid-template-columns:min-content 1fr max-content;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:var(--space-8);}",".path.jsx-4132187754{text-align:left;overflow:hidden;text-overflow:ellipsis;}",".general-threads-buffer.jsx-4132187754{height:104px;}"]})]})}function nd(e){var t,n,r=e.isOpen,i=Mu(),a=(0,Ce.Z)(),o=(0,Se.sw0)({variables:{replId:a}}).data,s=pe.useContext(Lu).setThreadsVisibility,c=pe.useRef(null),l=pe.useState(null),u=(0,J.Z)(l,2),d=u[0],p=u[1],f=pe.useState(Xu.ACTIVE),h=(0,J.Z)(f,2),m=h[0],g=h[1],v=pe.useState(!1),b=(0,J.Z)(v,2),y=b[0],x=b[1],w=pe.useContext(ru),k=w.annotations,Z=w.handleFinalizeMessage,j=w.handleChangeMessage,O=w.handleResolveAnnotation,E=w.createAnnotationAnchorPlaceholder,_=w.markAllMessagesInReplAsSeenByUser;pe.useEffect((function(){var e=function(e){var t;if("Escape"===e.key&&c.current){var n=document.querySelectorAll(":hover"),r=Array.from(n).filter((function(e){var t;return null===(t=c.current)||void 0===t?void 0:t.contains(e)})).length>0,i=e.target&&(null===(t=c.current)||void 0===t?void 0:t.contains(e.target));(r||i)&&(d?p(null):y?x(!1):s(!1))}};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[c,d,y,x,p,s]);var C=(0,ft.I0)();if("Repl"!==(null===o||void 0===o||null===(t=o.repl)||void 0===t?void 0:t.__typename)||null===(n=o.repl)||void 0===n||!n.user||!o.currentUser)return null;if(!r)return null;var S=k.find((function(e){return e.id===d}));return(0,Ie.BX)("div",{ref:c,className:"jsx-985858534 "+"jsx-".concat(Ql.Q.__hash)+" conversations-container",children:[!S&&(0,Ie.tZ)(td,{annotations:k,onThreadClick:function(e){p(e),"Repl"===o.repl.__typename&&(0,Zt.track)(Zt.events.THREAD_SELECTED,{replId:a,source:"threads",general:!1,variant:"replace-chat"})},onNewThreadClick:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=hl()();E({annotationAnchor:{id:t,replId:a,path:null,otVersion:null,indexStart:null,indexEnd:null,isGeneral:e}}),p(t)}()},onMarkAllAsReadClick:_,inboxMode:m,onClose:function(){return s(!1)},setInboxMode:function(e){return g(e)},generalThreadsOpen:y,setGeneralThreadsOpen:function(e){e!==y&&(x(e),"Repl"===o.repl.__typename&&e&&(0,Zt.track)(Zt.events.THREAD_SELECTED,{replId:a,source:"threads",general:!0,variant:"replace-chat"}))}}),S&&(0,Ie.tZ)(Yu,{annotation:S,onCloseThread:function(){return p(null)},onFinalizeMessage:function(e){Z({anchor:S,message:e.message,messageId:e.messageId}),"Repl"===o.repl.__typename&&(0,Zt.track)(Zt.events.MESSAGE_SENT,{replId:a,source:"threads",variant:"replace-chat"})},onChangeMessage:function(e){j({anchor:S,message:e.message,messageId:e.messageId})},markThreadResolved:function(e){O(e),p(null)},scrollToAnchor:function(e){C({type:"SCROLL_TO_ANNOTATION",anchorId:e,wid:i})}}),(0,Ie.tZ)(se(),{id:Ql.Q.__hash,children:Ql.Q}),(0,Ie.tZ)(se(),{id:"985858534",children:[".conversations-container.jsx-985858534{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:575px;width:350px;border-radius:var(--border-radius-8);border-color:var(--background-higher);border-width:1px;border-style:solid;box-shadow:var(--shadow-1);background-color:var(--background-default);}","@media only screen and (max-height:672px){.conversations-container.jsx-985858534{height:450px;width:300px;}}"]})]})}!function(e){e.ACTIVE="Active",e.RESOLVED="Resolved"}(Xu||(Xu={}));var rd=n(104),id=n(45786);function ad(e){var t,n,r=e.onClick,i=(0,Se.r92)(),a=(0,Gi.Z)("flag-threads-popup-notifications"),o=pe.useContext(ru).generalThread,s=function(e){var t=pe.useState([]),n=(0,J.Z)(t,2),r=n[0],i=n[1],a=pe.useState(null),o=(0,J.Z)(a,2),s=o[0],c=o[1],l=pe.useRef(r);l.current=r;var u=pe.useRef(null);return pe.useEffect((function(){if(null===u.current){var e=r[0];e&&(c(e),u.current=setTimeout((function(){i(l.current.slice(1)),0===l.current.length&&c(null),u.current=null}),2500))}}),[r]),(0,id.Z)((function(){e[e.length-1]&&i([].concat((0,nn.Z)(r),[e[e.length-1]]))}),[e.length]),s}((null===o||void 0===o?void 0:o.messages)||[]),c=pe.useMemo((function(){if("TextMessageContentType"!==(null===s||void 0===s?void 0:s.content.__typename))return null;var e=null===s||void 0===s?void 0:s.content.text;return e?zl(e,{}):null}),[s]);return a&&s&&s.user&&s.user.id!==(null===(t=i.data)||void 0===t||null===(n=t.currentUser)||void 0===n?void 0:n.id)?(0,Ie.BX)("div",{onClick:function(e){e.stopPropagation(),r(e)},className:"jsx-1782386374 message-notification",children:[(0,Ie.tZ)(Se.jq$,{variables:{username:s.user.username},children:function(e){var t=e.loading,n=e.data;return!t&&n&&n.user&&n.user.image?(0,Ie.tZ)("img",{src:n.user.image,className:"jsx-1782386374 chat-message-picture"}):(0,Ie.tZ)("div",{className:"jsx-1782386374 chat-message-picture"})}}),(0,Ie.BX)("div",{className:"jsx-1782386374 message",children:[(0,Ie.tZ)("span",{className:"jsx-1782386374 dimmed-text",children:s.user.username}),":"," ",(0,Ie.tZ)("span",{className:"jsx-1782386374 bold-text",children:c&&(0,Ie.tZ)(Vl,{message:c})})]}),(0,Ie.tZ)(se(),{id:"1782386374",children:[".message-notification.jsx-1782386374{background:var(--background-default);border:1px solid var(--accent-purple-default);position:absolute;right:60px;bottom:0;color:var(--foreground-default);border-radius:6px;padding:3px 15px;cursor:auto;max-width:250px;width:auto;height:36px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;opacity:1;cursor:pointer;font-size:14px;}",".chat-message-picture.jsx-1782386374{min-width:24px;margin-right:10px;width:24px;border-radius:15px;border:1px solid transparent;}",".bold-text.jsx-1782386374{color:var(--foreground-default);}",".dimmed-text.jsx-1782386374{color:var(--foreground-dimmest);}",".message.jsx-1782386374{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;}"]})]}):null}var od=function(e){var t=e.unreadThreadCount,n=e.onClick,r=(0,vi.Fg)();return(0,Ie.BX)("div",{onClick:n,css:(0,xr.iv)({backgroundColor:r===vi.V2.replitSpooky?Ne.o6.orangeDefault:Ne.o6.blurpleDefault},"",""),className:se().dynamic([["1918740453",[Ne.TV.borderRadius8,Ne.TV.borderRadius8]]])+" floating-icon-wrapper",children:[(0,Ie.tZ)(ad,{onClick:n}),(0,Ie.tZ)("div",{className:se().dynamic([["1918740453",[Ne.TV.borderRadius8,Ne.TV.borderRadius8]]])+" chat-icon-wrapper",children:(0,Ie.tZ)(rd.Z,{})}),t>0&&(0,Ie.tZ)("div",{className:se().dynamic([["1918740453",[Ne.TV.borderRadius8,Ne.TV.borderRadius8]]])+" unread-icon"}),(0,Ie.tZ)(se(),{id:"1918740453",dynamic:[Ne.TV.borderRadius8,Ne.TV.borderRadius8],children:[".floating-icon-wrapper.__jsx-style-dynamic-selector{height:36px;width:50px;border-radius:".concat(Ne.TV.borderRadius8," 0 0 ").concat(Ne.TV.borderRadius8,";position:absolute;right:0px;bottom:var(--space-16);z-index:10;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;opacity:1;-webkit-transition:300ms;transition:300ms;}"),".chat-icon-wrapper.__jsx-style-dynamic-selector{width:32px;height:32px;padding:5px;color:#fff;}",".unread-icon.__jsx-style-dynamic-selector{position:absolute;top:5px;left:12px;background:red;width:8px;height:8px;border-radius:4px;z-index:11;}"]})]})};function sd(){var e=(0,Ce.Z)(),t=Su(e,{onReceiveAnnotationUpdate:function(){}}).unreadThreadCount,n=pe.useContext(Lu);return(0,Ie.tZ)(od,{onClick:function(){n.threadsVisibility||((0,Zt.track)(Zt.events.THREADS_OPENED,{unread:Boolean(t)}),(0,Zt.track)(Zt.events.MESSAGES_LIST_OPENED,{replId:e,context:"threads",variant:"replace-chat"})),n.setThreadsVisibility((function(e){return!e}))},unreadThreadCount:t})}var cd=n(55110);function ld(e){var t=(0,Fe.Z)().anchorer,n=pe.useState(null),r=(0,J.Z)(n,2),i=r[0],a=r[1];return pe.useEffect((function(){if(e){var n=t.onAnchorPortalSet(e,(function(e){a(e)}));return function(){n()}}}),[e,t]),i}var ud=function(){var e=(0,$.Z)(le().mark((function e(t){var n,r,i;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.code,r=t.language,e.next=3,null===Vi.l||void 0===Vi.l?void 0:Vi.l.query({query:Se.nFn,variables:{code:n,language:r}});case 3:if("ExplainCodeResult"!==(null===(i=e.sent)||void 0===i?void 0:i.data.explainCode.__typename)){e.next=6;break}return e.abrupt("return",i.data.explainCode.explanation);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var dd=n(52194),pd=n(91331),fd=n(14490);var hd=function(e){var t=e.explanation,n=e.errorMessage,r=e.loading,i=e.codexFeedback,a=e.onRequestClose,o=e.onRequestExplainAgain,s=e.onExplainFail,c=e.onExplainSuccess,l=null;return r?l=(0,Ie.tZ)("div",{css:[Ne.l0.p(16),"",""],children:(0,Ie.BX)(fo.ZP,{viewBox:"0 0 100 10",primaryColor:"var(--background-higher)",secondaryColor:"var(--background-highest)",speed:1.5,children:[(0,Ie.tZ)("rect",{x:"0",y:"0",rx:"2",ry:"2",width:"100",height:"4"}),(0,Ie.tZ)("rect",{x:"0",y:"6",rx:"2",ry:"2",width:"33",height:"4"})]})}):t?l=(0,Ie.BX)("div",{css:[Ne.l0.p(8),{display:"grid",gridGap:Ne.TV.space8},"",""],children:[(0,Ie.tZ)("pre",{css:(0,xr.iv)({fontFamily:Ne.TV.fontFamilyCode,whiteSpace:"pre-wrap",lineHeight:Ne.TV.lineHeightDefault,fontSize:Ne.TV.fontSizeDefault,color:Ne.TV.foregroundDefault,backgroundColor:Ne.TV.backgroundHighest,padding:Ne.TV.space8,borderRadius:Ne.TV.borderRadius8},"",""),children:t}),(0,Ie.tZ)("div",{css:(0,xr.iv)({color:Ne.TV.foregroundDefault},"",""),children:"Is this a good explanation?"}),r?null:(0,Ie.BX)(Lt.Z,{css:[Ne.l0.rowWithGap(8),Ne.l0.justify.start,Ne.l0.align.center,"",""],children:[i?(0,Ie.tZ)(An.ZP,{disabled:!0,iconLeft:(0,Ie.tZ)(pd.Z,{}),onClick:function(){},small:!0,text:"Thanks!"}):(0,Ie.BX)(Lt.Z,{css:[Ne.l0.rowWithGap(8),Ne.l0.justify.start,Ne.l0.align.center,"",""],children:[(0,Ie.tZ)(An.ZP,{text:"No",colorway:"negative",outlined:"no"!==i,onClick:s,small:!0,iconLeft:(0,Ie.tZ)(cn.Z,{})}),(0,Ie.tZ)(An.ZP,{text:"Yes",colorway:"positive",onClick:c,small:!0,outlined:"yes"!==i,iconLeft:(0,Ie.tZ)(st.Z,{})})]}),(0,Ie.tZ)("a",{href:"https://replit.com/support",target:"_blank",rel:"noopener noreferrer",css:[Ne.l0.color.foregroundDimmest,{fontSize:Ne.TV.fontSizeSmall,"&:hover":{color:Ne.TV.foregroundDefault}},"",""],children:"Send Feedback"})]})]}):n&&(l=(0,Ie.tZ)("div",{css:[Ne.l0.p(8),{display:"grid",gridGap:Ne.TV.space8},"",""],children:n})),(0,Ie.BX)(or.Z,{background:"higher",css:(0,xr.iv)({background:Ne.TV.backgroundHigher,boxShadow:Ne.TV.shadow1,borderWidth:1,borderColor:Ne.TV.backgroundHighest,borderStyle:"solid",borderRadius:Ne.TV.borderRadius8,width:"320px"},"",""),children:[(0,Ie.BX)("div",{css:[{display:"flex",justifyContent:"space-between",borderBottom:"1px solid",borderBottomColor:Ne.TV.backgroundHighest},Ne.l0.flex.row,Ne.l0.rowWithGap(2),Ne.l0.p(8),"",""],children:[(0,Ie.BX)("div",{css:(0,xr.iv)({display:"grid",gridAutoFlow:"column",gridGap:Ne.TV.space8,alignItems:"center"},"",""),children:[(0,Ie.tZ)(dd.Z,{}),(0,Ie.tZ)("div",{css:(0,xr.iv)({color:Ne.TV.foregroundDefault},"",""),children:"Explain Code"}),(0,Ie.tZ)("a",{href:"https://blog.replit.com/codex",target:"_blank",css:Ne.l0.color.foregroundDefault,children:(0,Ie.tZ)(Yn.Z,{alt:"Learn more",tooltipDelay:0,tooltipText:"This beta feature uses Codex by OpenAI. Click to learn more.",type:"button",children:(0,Ie.tZ)(yn.Z,{color:Ne.TV.foregroundDefault})})}),(0,Ie.tZ)(Yn.Z,{alt:"Generate new explanation",onClick:o,type:"button",children:(0,Ie.tZ)(fd.Z,{})})]}),(0,Ie.tZ)("div",{className:"right",children:(0,Ie.tZ)(Yn.Z,{alt:"Close",tooltipHidden:!0,onClick:a,type:"button",children:(0,Ie.tZ)(cn.Z,{})})})]}),l]})},md=n(73935),gd=pe.createContext({editorRight:0});function vd(e){var t=e.anchor,n=e.children,r=(0,Nn.Z)(),i=(0,Fe.Z)().anchorer,a=ld(t.id);return pe.useEffect((function(){if(r===t.path)return i.addAnchors([t]),function(){i.removeAnchors([t.id])}}),[r,t.id]),a?md.createPortal((0,Ie.tZ)(gd.Provider,{value:{editorRight:a.getEditorRight()},children:n}),a.dom,t.id):null}function bd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bd(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xd={name:"1396v9u",styles:"left:2em;position:fixed"};var wd=function(){var e=(0,Fe.Z)().anchorer,t=function(){var e,t,n,r,i,a,o,s,c,l,u=(0,Ce.Z)(),d=pe.useContext(ru),p=d.explainAnchor,f=d.setExplainAnchor,h=Wu(p),m=ld(null===p||void 0===p?void 0:p.id),g=pe.useMemo((function(){return null!==h&&void 0!==h&&h.anchor.path?(0,cd.UP)(h.anchor.path):null!==p&&void 0!==p&&p.path?(0,cd.UP)(null===p||void 0===p?void 0:p.path):"unknown"}),[h,m,p]),v=pe.useMemo((function(){return null!==h&&void 0!==h&&h.selectedContent?null===h||void 0===h?void 0:h.selectedContent:m?m.getContent():void 0}),[h,m]),b=(0,Se.LxS)({fetchPolicy:"no-cache",variables:{code:v,language:g,replId:u},skip:!h||!v,notifyOnNetworkStatusChange:!0}),y=(0,Se.CUF)(),x=(0,J.Z)(y,2),w=x[0],k=x[1],Z=function(){var e=(0,$.Z)(le().mark((function e(t){var n;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ExplainCodeResult"===(null===(n=b.data)||void 0===n?void 0:n.explainCode.__typename)&&!b.loading&&!k.loading){e.next=2;break}return e.abrupt("return");case 2:w({variables:{completionId:b.data.explainCode.id,feedback:t},optimisticResponse:{__typename:"RootMutationType",giveCodexFeedback:{__typename:"CodexFeedback",id:b.data.explainCode.id,feedback:t}}}),(0,Zt.track)(Zt.events.CODEX_FEEDBACK_SUBMITTED,{language:g,feedback:t,feature:"explanation"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j="ExplainCodeResult"===(null===(e=b.data)||void 0===e||null===(t=e.explainCode)||void 0===t?void 0:t.__typename)?b.data.explainCode.explanation:void 0,O="UserError"===(null===(n=b.data)||void 0===n||null===(r=n.explainCode)||void 0===r?void 0:r.__typename)||"UnauthorizedError"===(null===(i=b.data)||void 0===i||null===(a=i.explainCode)||void 0===a?void 0:a.__typename)?b.data.explainCode.message:null,E="ExplainCodeResult"===(null===(o=b.data)||void 0===o||null===(s=o.explainCode)||void 0===s?void 0:s.__typename)&&b.data.explainCode.id===(null===(c=k.data)||void 0===c||null===(l=c.giveCodexFeedback)||void 0===l?void 0:l.id)?k.data.giveCodexFeedback.feedback:null;return{explainAnchor:p,setExplainAnchor:f,resolvedExplainAnchor:h,anchorPortal:m,getCodeExplanation:ud,loading:b.loading,explanation:j,errorMessage:O,refetchExplanation:function(){var e=(0,$.Z)(le().mark((function e(){return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,Zt.track)(Zt.events.CODEX_FEATURE_USED,{feature:"explanation",isRetry:!0,language:g}),e.abrupt("return",b.refetch());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),giveCodexFeedback:Z,codexFeedback:E}}(),n=t.explainAnchor,r=t.setExplainAnchor,i=t.explanation,a=t.errorMessage,o=t.loading,s=t.refetchExplanation,c=t.giveCodexFeedback,l=t.codexFeedback;if(pe.useEffect((function(){return e.onCodeExplained((function(e){r(yd(yd({},e),{},{id:hl()()}))}))}),[]),!n)return null;var u={explanation:i,errorMessage:a,loading:o,onRequestClose:function(){return r(null)},onRequestExplainAgain:function(){return s()},codexFeedback:l,onExplainFail:function(){return c(Se.TYv.No)},onExplainSuccess:function(){return c(Se.TYv.Yes)}};return(0,Ie.tZ)("div",{children:(0,Ie.tZ)(vd,{anchor:n,children:(0,Ie.tZ)("div",{css:xd,children:(0,Ie.tZ)(hd,yd({},u))})})})},kd=n(43686);function Zd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var jd=Ma(["SCROLL_TO_ANNOTATION","FILE_CACHE_HIT","FILE_LOADED"]),Od=jd.receiver,Ed=jd.useReceiver;function _d(e){var t=e.thread,n=(0,Ce.Z)(),r=pe.useContext(ru),i=r.visibleAnnotation,a=r.setVisibleAnnotation,o=r.handleChangeMessage,s=r.handleFinalizeMessage,c=r.handleResolveAnnotation,l=r.onRequestCloseThread,u=pe.useContext(gd);return t?(0,Ie.tZ)("div",{children:i===t.id?(0,Ie.tZ)(Ou,{annote:t,onFinalizeMessage:function(e){s({anchor:t,message:e.message,messageId:e.messageId})},onChangeMessage:function(e){o({anchor:t,message:e.message,messageId:e.messageId})},onResolve:function(){c(t)},onRequestClose:l,width:225,style:{position:"fixed",left:null===u||void 0===u?void 0:u.editorRight,transform:"translate(-".concat(window.innerWidth<(null===u||void 0===u?void 0:u.editorRight)+10?225:0,"px)")}}):(0,Ie.BX)(Lt.Z,{css:(0,xr.iv)({position:"fixed",left:null===u||void 0===u?void 0:u.editorRight,transform:"translateX(-100%)"},"",""),children:[(0,Ie.tZ)(ql,{annote:t,onClick:function(){a(t.id),(0,Zt.track)(Zt.events.THREAD_SELECTED,{replId:n,source:"file",general:!1,variant:"replace-chat"})}}),(0,Ie.tZ)(Eu,{annote:t})]})}):null}function Cd(e){var t=e.wid,n=(0,Ce.Z)(),r=pe.useContext(Lu).threadsVisibility,i=(0,Nn.Z)(),a=(0,Gi.Z)("flag-typing-indicator"),o=(0,Gi.Z)("flag-typing-presence"),s=(0,kd.Z)({filePath:i,replId:n}),c=(0,Fe.Z)(),l=c.container,u=c.anchorer,d=pe.useState(null),p=(0,J.Z)(d,2),f=p[0],h=p[1],m=du(),g=m.map((function(e){return e.username})),v=(0,Se.Fqz)(),b=Su(n,{onReceiveAnnotationUpdate:function(e){var t,n,r;if(e.messages){var i=e.messages[e.messages.length-1];i&&(null===(t=i.user)||void 0===t?void 0:t.id)!==(null===(n=v.data)||void 0===n||null===(r=n.currentUser)||void 0===r?void 0:r.id)&&"TextMessageContentType"===i.content.__typename&&i.user&&(Cc({title:"".concat(i.user.username," made an annotation"),body:i.content.text,tag:"annotation-".concat(i.id),iconByUsername:i.user.username}),(0,Zt.track)(Zt.events.ANNOTATION_UPDATE_RECEIVED,{messageId:i.id,sender:i.user.id,time:new Date(i.timeCreated).getTime()}))}}}),y=b.annotations,x=b.generalThread,w=b.placeholderAnchorId,k=b.createAnnotationAnchorPlaceholder,Z=b.deleteAnnotationAnchorPlaceholder,j=b.createAnnotationMessage,O=b.updateAnnotationAnchor,E=b.updateThreadPreview,_=b.markAllMessagesInReplAsSeenByUser,C=pe.useState(null),S=(0,J.Z)(C,2),P=S[0],N=S[1],I=(0,ft.I0)();pe.useEffect((function(){return u.onThreadCreated((function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zd(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:hl()(),replId:n},e);k({annotationAnchor:t}),h(t.id)}))}),[u,k,n]),Ed((function(e){var n=e.action;return"SCROLL_TO_ANNOTATION"===n.type&&I((0,$.Z)(le().mark((function e(){var r;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(r=y.find((function(e){return e.id===n.anchorId})))&&void 0!==r&&r.path){e.next=3;break}return e.abrupt("return");case 3:if(i===r.path){e.next=15;break}return e.prev=4,e.next=7,l.exec("test","-f",r.path);case 7:if(null===e.sent.error){e.next=10;break}return e.abrupt("return");case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(4),e.abrupt("return");case 15:I({type:"OPEN_DEEP_LINK",path:r.path,wid:t,indexStart:r.indexStart,indexEnd:r.indexEnd}),h(r.id);case 17:case"end":return e.stop()}}),e,null,[[4,12]])})))),null}));if(!window)return null;return(0,Ie.BX)(ru.Provider,{value:{activeFile:i,users:m,annotations:y,generalThread:x,explainAnchor:P,visibleAnnotation:f,onRequestCloseThread:function(){h(null),Z()},setVisibleAnnotation:h,setExplainAnchor:N,handleFinalizeMessage:function(e){var t=e.anchor,n=e.resolvedAnchor,r=e.message,i=e.messageId,a=zl(r,{users:[].concat((0,nn.Z)(g),["everyone"])}),o=null===n||void 0===n?void 0:n.getHighlight();j({anchor:t,annotationMessage:{id:i,text:r,mentions:a.mentions},highlight:o})},handleChangeMessage:function(e){var t=e.anchor,n=e.message,r=e.messageId;a&&E({threadId:t.id,message:o?n:null,messageId:r})},handleResolveAnnotation:function(e){if(w===e.id)Z();else{O({annotationAnchor:e,changes:{isResolved:!0}})}},createAnnotationAnchorPlaceholder:k,markAllMessagesInReplAsSeenByUser:_},children:[(0,Ie.BX)("div",{className:"jsx-4216846857 annotations-container",children:[s&&(0,Ie.tZ)(wd,{}),(0,Ie.BX)("div",{style:{position:"fixed",bottom:"var(--space-24)",right:"var(--space-8)",zIndex:1},className:"jsx-4216846857",children:[!r&&(0,Ie.tZ)("div",{className:"jsx-4216846857",children:(0,Ie.tZ)(sd,{})}),(0,Ie.tZ)("div",{style:{position:"relative",right:"var(--space-8)"},className:"jsx-4216846857",children:(0,Ie.tZ)(nd,{isOpen:Boolean(r)})})]}),(0,Ie.tZ)(se(),{id:"4216846857",children:[".annotations-container.jsx-4216846857{z-index:10;position:absolute;height:0;width:0;}",".new-annotation-button.jsx-4216846857{position:absolute;-webkit-transform:translateY(calc(-100% - 8px)) translateX(56px);-ms-transform:translateY(calc(-100% - 8px)) translateX(56px);transform:translateY(calc(-100% - 8px)) translateX(56px);border-radius:var(--border-radius-4);background-color:var(--background-higher);color:var(--foreground-default);cursor:pointer;border:0.5px solid var(--outline-dimmest);box-shadow:var(--shadow-1);-webkit-transition:width 0.2s,background-color 0.2s,-webkit-transform 0.1s, opacity 0.2s ease 0.3s;-webkit-transition:width 0.2s,background-color 0.2s,transform 0.1s, opacity 0.2s ease 0.3s;transition:width 0.2s,background-color 0.2s,transform 0.1s, opacity 0.2s ease 0.3s;z-index:1;white-space:pre;font-weight:var(--font-weight-medium);font-size:var(--font-size-small);padding:4px 8px;display:grid;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-auto-flow:column;grid-gap:4px;}",".new-annotation-button.jsx-4216846857:hover{-webkit-transform:translateY(calc(-100% - 8px)) translateX(56px) scale(1.1);-ms-transform:translateY(calc(-100% - 8px)) translateX(56px) scale(1.1);transform:translateY(calc(-100% - 8px)) translateX(56px) scale(1.1);}"]})]}),y.map((function(e){return"string"!==typeof e.path||e.isResolved?null:(0,Ie.tZ)(vd,{anchor:e,children:(0,Ie.tZ)(_d,{thread:e})},e.id)}))]})}var Sd=n(77854),Pd=n(82730);n(19409);function Nd(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Id(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Id(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Id(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Td(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Td(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Td(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rd(e){var t=e.hint;return t?(0,Ie.BX)("div",{className:"jsx-3282618086 hint-card-container",children:[(0,Ie.BX)("div",{className:"jsx-3282618086 hint-header-container",children:[(0,Ie.BX)(Ee.Ug,{align:"center",children:[(0,Ie.tZ)("div",{className:"jsx-3282618086 header",children:"Hint"}),(0,Ie.tZ)(Xe.Z,{level:5,children:t.title})]}),(0,Ie.tZ)("button",{onClick:function(){t.onDismiss()},className:"jsx-3282618086 dismiss-button",children:(0,Ie.tZ)(cn.Z,{size:16})})]}),(0,Ie.BX)("div",{className:"jsx-3282618086 hint-content",children:[" ",(0,Ie.BX)(Oe.Z,{children:[t.text," ",(0,Ie.tZ)("a",{target:"_blank",href:t.link,className:"jsx-3282618086",children:"Learn more"}),"."]}),(0,Ie.tZ)("div",{className:"jsx-3282618086 hint-button",children:(0,Ie.tZ)(je.Z,{onClick:function(){t.onClick()},filled:!0,color:"purple",children:"Try it!"})})]}),(0,Ie.tZ)(se(),{id:"3282618086",children:[".hint-card-container.jsx-3282618086{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:var(--space-8);width:100%;}",".hint-header-container.jsx-3282618086{margin:0px var(--space-4) var(--space-8) 0px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}",".header.jsx-3282618086{margin-right:var(--space-8);display:inline-block;color:var(--white);background:var(--accent-purple-default);border-radius:var(--border-radius-4);font-size:var(--font-size-subhead-default);font-weight:var(--font-weight-medium);padding:calc(var(--space-4) / 2) var(--space-4);text-align:center;}",".hint-content.jsx-3282618086{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}",".hint-button.jsx-3282618086{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;}",".dismiss-button.jsx-3282618086{width:20px;height:20px;border-radius:50%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;color:var(--foreground-default);background-color:var(--background-root);border:1px solid var(--accent-purple-default);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;box-shadow:var(--shadow-2);}"]})]}):null}function Ad(e){var t=e.direction,n=e.onClick;return(0,Ie.BX)("div",{onClick:n,className:"jsx-3299353145 arrow-container",children:[(0,Ie.tZ)("div",{className:"jsx-3299353145 "+"arrow-".concat(t)}),(0,Ie.tZ)(se(),{id:"3299353145",children:[".arrow-right.jsx-3299353145{border-top:var(--space-8) solid transparent;border-bottom:var(--space-8) solid transparent;border-left:var(--space-8) solid var(--accent-purple-default);}",".arrow-left.jsx-3299353145{border-top:var(--space-8) solid transparent;border-bottom:var(--space-8) solid transparent;border-right:var(--space-8) solid var(--accent-purple-default);}",".arrow-container.jsx-3299353145{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;min-width:var(--space-16);max-width:var(--space-16);opacity:0.8;cursor:pointer;background:transparent;}",".arrow-container.jsx-3299353145:hover{opacity:1;background:var(--accent-purple-dimmest);}"]})]})}function Ld(e){var t=e.hintCards,n=e.dimensions,r=pe.useState(0),i=(0,J.Z)(r,2),a=i[0],o=i[1],s=pe.useState(!1),c=(0,J.Z)(s,2),l=c[0],u=c[1],d=(0,Pd.useKeenSlider)({initial:0,created:function(){u(!0)},slideChanged:function(e){o(e.details().relativeSlide)}}),p=(0,J.Z)(d,2),f=p[0],h=p[1];pe.useEffect((function(){null===h||void 0===h||h.refresh()}),[t.length,h]),pe.useEffect((function(){h&&null!==n&&void 0!==n&&n.w.pc&&h.resize()}),[n,h]);var m=(0,vi.Fg)();return t.length?(0,Ie.BX)("div",{className:"jsx-4075901004 "+(Xt()(vi.RJ,m===vi.V2.replitSpooky?"spooky":"dark","hint-carousel-container",{created:l})||""),children:[h&&!!a&&(0,Ie.tZ)(Ad,{direction:"left",onClick:function(){return h.prev()}}),(0,Ie.tZ)("div",{ref:f,className:"jsx-4075901004 keen-slider",children:t.map((function(e,t){return(0,Ie.tZ)("div",{className:"jsx-4075901004 keen-slider__slide hint",children:(0,Ie.tZ)(Rd,{hint:e})},t)}))}),h&&a!==h.details().size-1&&(0,Ie.tZ)(Ad,{direction:"right",onClick:function(){return h.next()}}),(0,Ie.tZ)(se(),{id:"4075901004",children:[".hint-carousel-container.jsx-4075901004{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;margin:var(--space-8) var(--space-8) 0px var(--space-8);background-color:var(--background-root);border-radius:var(--border-radius-4);border:1px solid var(--accent-purple-default);opacity:0;}",".created.jsx-4075901004{opacity:1;}",".keen-slider.jsx-4075901004{width:100%;}",".hint.jsx-4075901004{width:100%;}"]})]}):null}function Bd(e){return!!e&&!(0===e.h.px&&0===e.h.pc||0===e.w.px&&0===e.w.pc)}function Ud(e){var t=e.dimensions,n=e.wid,r=pe.useRef(!1);return pe.useEffect((function(){!r.current&&Bd(t)&&(r.current=!0)}),[t]),r.current||Bd(t)?(0,Ie.tZ)(zd,{dimensions:t,wid:n}):(0,Ie.tZ)("div",{})}var Md=Ma(["OPEN_SHELL"]),Fd=Md.receiver,Xd=Md.useReceiver,zd=function(e){var t,n=e.dimensions,r=e.wid,i=(0,Fe.Z)(),a=i.container,o=i.fs,s=function(e){var t=e.wid,n=(0,ft.I0)(),r=(0,Ce.Z)(),i=(0,Se.bdn)({variables:{replId:r}}),a=i.data,o=i.updateQuery,s=pe.useState([]),c=(0,J.Z)(s,2),l=c[0],u=c[1],d=pe.useState(null),p=(0,J.Z)(d,2),f=p[0],h=p[1],m=pe.useState([]),g=(0,J.Z)(m,2),v=g[0],b=g[1],y=pe.useState(""),x=(0,J.Z)(y,2),w=x[0],k=x[1],Z=(0,Se.$y9)({update:function(e,t){var n,r={"packager-shell-hint":"packagerShellHintSeen","version-control-shell-hint":"versionControlShellHintSeen"},i=null===(n=t.data)||void 0===n?void 0:n.toursSeen.name;i&&r[i]&&o((function(e){return e.currentUser?Dd(Dd({},e),{},{currentUser:Dd(Dd({},e.currentUser),{},(0,ee.Z)({},r[i],!0))}):e}))}}),j=(0,J.Z)(Z,1)[0];return pe.useEffect((function(){if(a&&"Repl"===a.repl.__typename){var e,r,i=a.repl,o=i.isOwner,s=i.lang,c=[],l=[];s.supportsGit&&o&&(null===(e=a.currentUser)||void 0===e||e.versionControlShellHintSeen,l.push({commands:["git"],hint:{text:"If you're looking to use git, try our version control plugin.",link:"https://docs.replit.com/tutorials/06-github-and-run-button#looking-at-the-version-control-panel-in-repl-it"}})),(s.supportsPackager3||"html"===s.id||"html_beta"===s.id)&&(null!==(r=a.currentUser)&&void 0!==r&&r.packagerShellHintSeen?l.push({commands:["npm","install","get","pip"],hint:{text:"If you're looking to install packages, try our packager.",link:"https://docs.replit.com/repls/quick-start#adding-packages"}}):c.push({title:"Try our packager!",text:"Use our packager plugin to install packages.",link:"https://docs.replit.com/repls/quick-start#adding-packages",onDismiss:function(){return j({variables:{name:"packager-shell-hint"}})},onClick:function(){(0,Zt.track)(Zt.events.SHELL_HINT_CTA_CLICKED,{hint:"packager"}),j({variables:{name:"packager-shell-hint"}}).then((function(){return n({type:"OPEN_SIDEPANE_BY_TYPE",paneType:"packager",wid:t})}))}})),u(c),b(l)}}),[a,n,t,j]),pe.useEffect((function(){if(w&&" "===w.slice(-1)){var e,t=Nd(v);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.commands.includes(w.trim())){var r;h(null!==(r=n.hint)&&void 0!==r?r:null);break}}}catch(i){t.e(i)}finally{t.f()}}}),[v,w]),{hintCards:l,contextualHint:f,onShellKey:pe.useCallback((function(e){k((function(t){return"Backspace"===e.key?t.slice(0,-1):1!==e.key.length?"":" "===t.slice(-1)?e.key.toLowerCase():t+e.key.toLowerCase()}))}),[])}}({wid:r}),c=s.hintCards,l=s.contextualHint,u=s.onShellKey,d=(0,ft.I0)(),p=(0,Gi.Z)("flag-xterm-file-parser"),f=(0,Sd.Z)({container:a,autoFocus:!0,onShellKey:u,createXtermProps:{loadFileParserAddon:p,onFileLinkClick:function(e,t,n){return d({wid:r,type:"OPEN_DEEP_LINK",path:e,line:t,col:n})},listFiles:o.listFiles,replSlug:null===(t=a.getContext())||void 0===t?void 0:t.repl.slug}}),h=(0,J.Z)(f,2),m=h[0],g=h[1],v=pe.useState(!1),b=(0,J.Z)(v,2),y=b[0],x=b[1],w=Bd(n),k=(0,Gi.Z)("flag-shellhints");Xd((function(e){return"OPEN_SHELL"===e.action.type&&w&&m?(m.focus(),null):null})),pe.useEffect((function(){w&&m&&m.focus()}),[w,m]);var Z=y&&m?(0,Ie.tZ)(Di.Rh,{findPrevious:m.findPrevious,findNext:m.findNext,exit:function(){return x(!1)}}):(0,Ie.tZ)(Di.lD,{onClick:function(){return x(!0)}}),j=(0,vi.Fg)();return(0,Ie.BX)("div",{className:"jsx-191072018 "+"".concat(vi.RJ," ").concat(j===vi.V2.replitSpooky?"spooky":"dark"," container"),children:[k&&!!c.length&&(0,Ie.tZ)(Ld,{hintCards:c,dimensions:n}),k&&!!l&&(0,Ie.BX)("code",{className:"jsx-191072018 contextual-hint",children:[l.text," ",(0,Ie.tZ)("a",{target:"_blank",href:l.link,className:"jsx-191072018",children:"Learn more"}),"."]}),(0,Ie.BX)("div",{onKeyDown:function(e){"f"===e.key&&(0,Ri.jh)(e)&&(x(!0),e.preventDefault())},className:"jsx-191072018 root",children:[m?(0,Ie.tZ)(Ie.HY,{children:(0,Ie.BX)("div",{className:"jsx-191072018 controls",children:[Z,(0,Ie.tZ)(Di.Zr,{onClick:m.clear})]})}):(0,Ie.tZ)("code",{className:"jsx-191072018",children:"Loading..."}),(0,Ie.tZ)("div",{ref:g,className:"jsx-191072018 xterm-container"})]}),(0,Ie.tZ)(se(),{id:"3182893046",children:[".xterm{height:100%;}",".xterm .xterm-viewport{overflow-y:auto !important;height:100%;}"]}),(0,Ie.tZ)(se(),{id:"3998868397",children:[".container.jsx-191072018{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;background-color:var(--background-default);border-radius:var(--border-radius-4);}",".root.jsx-191072018{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative;height:100%;padding-left:1em;padding-top:var(--space-8);overflow:hidden;border-radius:var(--border-radius-4);z-index:1;}",".xterm-container.jsx-191072018{min-height:1px;height:100%;}","code.jsx-191072018{color:var(--foreground-dimmest);}",".container.jsx-191072018:focus-within .controls.jsx-191072018{opacity:1;}",".controls.jsx-191072018{opacity:0;position:absolute;top:var(--space-8);right:var(--space-16);z-index:5;height:30px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".contextual-hint.jsx-191072018{margin:var(--space-8) 0 0 var(--space-16);}"]})]})};function Vd(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Gd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gd(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Gd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Hd=function(){function e(t){(0,te.Z)(this,e),this.code=void 0,this.currentIndent=void 0,this.lib=void 0,this.code="",this.currentIndent=0,this.lib=t}return(0,ne.Z)(e,[{key:"indent",value:function(){this.currentIndent+=1}},{key:"dedent",value:function(){if(0===this.currentIndent)throw new Error("indent at zero");this.currentIndent-=1}},{key:"addIndents",value:function(){for(var e=0;e<this.currentIndent;e++)this.code+="  "}},{key:"push",value:function(e){var t,n=Vd(e.split("\n"));try{for(n.s();!(t=n.n()).done;){var r=t.value;this.addIndents(),this.code+=r,this.newLine()}}catch(i){n.e(i)}finally{n.f()}}},{key:"newLine",value:function(){this.code+="\n"}},{key:"closeCurly",value:function(){this.addIndents(),this.code+=this.lib.getClosingBrackets()}},{key:"toString",value:function(){return this.code}}]),e}(),Wd="_test_runner";function Kd(e){return Wd+e}function qd(e){return Yd.apply(this,arguments)}function Yd(){return Yd=(0,$.Z)(le().mark((function e(t){var n,r,i,a,o;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fs,r=t.code,i=t.filename,a=Kd(i),o=jr.Z.from(r,"utf8"),e.abrupt("return",n.writeFile(a,o));case 4:case"end":return e.stop()}}),e)}))),Yd.apply(this,arguments)}function Qd(e){return Jd.apply(this,arguments)}function Jd(){return(Jd=(0,$.Z)(le().mark((function e(t){var n;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.readDir(wi.Q);case 3:if(!(n=e.sent).error){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,Promise.all(n.children.map((function(e){return e.filename.startsWith(Wd)?e.type===In.Tv.File?t.deleteFile(e.filename):t.deleteDir(e.filename):Promise.resolve(null)})));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),xt.$e((function(t){t.setTag("unitTestLib","true"),xt.Tb(e.t0)}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function $d(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return ep(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ep(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function ep(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var tp={testRunnerName:function(){return"TestRunner"},testSuiteName:function(){return"TestSuite"},defaultImports:function(){return"import org.junit.Before;\nimport org.junit.After;\nimport org.junit.Test;\nimport static org.junit.Assert.*;"},classIntro:function(){return"public class ".concat(Kd(tp.testSuiteName())," {")},classConstructorName:function(){return Kd(tp.testSuiteName())},setupIntro:function(){return"@Before\npublic void setUp() {"},tearDownIntro:function(){return"@After\npublic void tearDown() {"},testIntro:function(e){return"".concat(tp.testIntroPreName()).concat(e).concat(tp.testIntroPostName())},testIntroPreName:function(){return"@Test\npublic void "},testIntroPostName:function(){return"() {"},getProperTestName:function(e){return e},parseTestResultName:function(e){return e.replace("(".concat(Kd(tp.testSuiteName()),")"),"")},buildSuite:function(e){var t=e.tests,n=e.meta,r=new Hd(tp);r.push(tp.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(tp.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&(r.push(tp.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),n.tearDown&&(r.push(tp.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i,a=$d(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.code&&(r.push(tp.testIntro(o.name)),r.indent(),r.push(o.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(s){a.e(s)}finally{a.f()}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return ap.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,a=e.tests,o=e.meta,s=tp.buildSuite({tests:a,meta:o});return tp.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:s})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"}"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react in this bitch either"},captureSetupError:function(e){var t=e.tag,n=e.raw;xt.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","java10"),xt.Tb(t)}))},exampleTest:{id:-1,failureMessage:"An Adder class should have an add method that adds two ints and returns the result",name:"add",code:"Adder adder = new Adder();\nint result = adder.add(1, 2);\nassertEquals(3, result);\n"}},np="__UNIT_TEST_RESULT_START__",rp="__UNIT_TEST_RESULT_END__",ip="import org.json.simple.JSONArray;\nimport org.json.simple.JSONObject;\nimport org.junit.runner.JUnitCore;\nimport org.junit.runner.Result;\nimport org.junit.runner.notification.Failure;\n\npublic class ".concat(Kd(tp.testRunnerName())," {\n    public static void main(String[] args) {\n      Result result = JUnitCore.runClasses(").concat(Kd(tp.testSuiteName()),'.class);\n      JSONArray failures = new JSONArray();\n\n        for (Failure failure : result.getFailures()) {\n            JSONObject obj = new JSONObject();\n            obj.put("name", failure.getTestHeader());\n            obj.put("stack", failure.getTrace());\n            failures.add(obj);\n        }\n        JSONObject out = new JSONObject();\n        out.put("passed", result.wasSuccessful());\n        out.put("failures", failures);\n        System.out.println();\n        System.out.println("').concat(np,'");\n        System.out.println(out);\n        System.out.println("').concat(rp,'");\n    }\n}');function ap(){return ap=(0,$.Z)(le().mark((function e(t){var n,r,i,a,o,s,c,l,u,d,p,f,h,m,g,v,b,y,x,w,k,Z,j,O;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.container,r=t.fs,i=t.packager,a=t.logger,o=t.suiteCode,s=a.startLogSpinner("Setting up the environment"),e.next=4,Qd(r);case 4:return s("Creating your test files 1/2"),e.next=7,qd({fs:r,code:o,filename:"".concat(tp.testSuiteName(),".java")});case 7:if(c=e.sent,!(l=c.error)){e.next=13;break}return"Failed to create suite code file",tp.captureSetupError({tag:"Failed to create suite code file",raw:l}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 13:return s("Creating your test files 2/2"),e.next=16,qd({fs:r,code:ip,filename:"".concat(tp.testRunnerName(),".java")});case 16:if(u=e.sent,!(d=u.error)){e.next=22;break}return"Failed to create test runner file",tp.captureSetupError({tag:"Failed to create test runner file",raw:d}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 22:return a.stopLogSpinner(),a.clearLine(),a.logMessage("Installing imported packages\r\n"),e.next=27,i.addPackages([{name:"junit:junit",version:"4.12"},{name:"com.googlecode.json-simple:json-simple",version:"1.1.1"},{name:"org.hamcrest:hamcrest-core",version:"1.3"}]);case 27:return e.next=29,i.installPackages();case 29:if(e.sent){e.next=32;break}return e.abrupt("return",{error:"Failed to install packages\r\n"});case 32:return a.clearLogs(),s=a.startLogSpinner("Compiling your files"),e.next=36,n.exec("find",".","-type","f","-name","*.java","-print0");case 36:if(p=e.sent,f=p.output,!(h=p.error)){e.next=43;break}return m="Failed to fetch working directory java files",tp.captureSetupError({tag:m,raw:h}),e.abrupt("return",{error:"".concat(m,"\r\n\r\n")+(null===f||void 0===f?void 0:f.replace(/\n/g,"\n\r"))+"\r\n\r\n"+h});case 43:if("string"===typeof f){e.next=45;break}throw new Error("expected working directory files to be a string");case 45:return g=f.slice(0,-1).split("\0"),v=".:./target/dependency/*",e.next=49,n.exec.apply(n,["javac","-classpath",v,"-d","."].concat((0,nn.Z)(g)));case 49:if(b=e.sent,y=b.output,!(x=b.error)){e.next=56;break}return w="Failed to compile test runner file",tp.captureSetupError({tag:w,raw:x}),e.abrupt("return",{error:"".concat(w,"\r\n\r\n")+(null===y||void 0===y?void 0:y.replace(/\n/g,"\n\r"))+"\r\n\r\n"+x});case 56:return s("Running your tests"),e.next=59,n.exec("java","-classpath",v,Kd(tp.testRunnerName()));case 59:if(k=e.sent,Z=k.output,!(j=k.error)){e.next=65;break}return(0,Zt.track)(Zt.events.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),e.abrupt("return",{error:"Running tests failed\r\n\r\n"+(null===Z||void 0===Z?void 0:Z.replace(/\n/g,"\n\r"))+"\r\n\r\n"+j});case 65:if("string"===typeof Z){e.next=67;break}throw new Error("expected runoutput to be a string");case 67:return O=JSON.parse(Z.slice(Z.indexOf(np)+np.length,Z.lastIndexOf(rp))),e.abrupt("return",{result:O,error:null});case 69:case"end":return e.stop()}}),e)}))),ap.apply(this,arguments)}var op=tp;function sp(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return cp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cp(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function cp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lp=function(e){return!!e&&e.trim().length>0&&e.split("\n").some((function(e){return!(e.trim().startsWith("#")||""===e.trim())}))},up={testRunnerName:function(){return"test_runner"},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"import unittest\nfrom main import *\n"},classIntro:function(){return"class UnitTests(unittest.TestCase):"},classConstructorName:function(){return"__init__"},setupIntro:function(){return"def setUp(self):"},tearDownIntro:function(){return"def tearDown(self):"},testIntro:function(e){return up.testIntroPreName()+e+up.testIntroPostName()},testIntroPreName:function(){return"def test_"},testIntroPostName:function(){return"(self):"},getProperTestName:function(e){return"test_".concat(e)},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,n=e.meta,r=new Hd(up);r.push(up.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(up.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),lp(n.setup)&&(r.push(up.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.newLine()),lp(n.tearDown)&&(r.push(up.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.newLine()));var i,a=sp(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;r.push(up.testIntro(o.name)),r.indent(),r.push(o.code||"pass"),r.dedent(),r.newLine()}}catch(s){a.e(s)}finally{a.f()}return r.toString()},runSuite:function(e){return hp.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,a=e.tests,o=e.meta,s=up.buildSuite({tests:a,meta:o});return up.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:s})},hasClosingBrackets:function(){return!1},getClosingBrackets:function(){throw new Error("This language does not have closing brackets, check `hasClosingBrackets` first")},hasSemicolon:function(){return!1},getCommentChar:function(){return"#"},getHelpText:function(){return"no react in this bitch"},captureSetupError:function(e){var t=e.tag,n=e.raw;xt.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","python3"),xt.Tb(t)}))},exampleTest:{id:-1,failureMessage:"In main.py you should have an add functions that adds two numbers and returns the result",name:"add",code:"self.assertEquals(add(1, 2), 3)"}},dp="__UNIT_TEST_RESULT_START__",pp="__UNIT_TEST_RESULT_END__",fp="import unittest\nimport ".concat(Kd(up.testSuiteName()),"\nimport os\nimport json\nfrom time import sleep\n\nsuite = unittest.TestLoader().loadTestsFromTestCase(\n  ").concat(Kd(up.testSuiteName()),'.UnitTests)\nf = open(os.devnull,"w")\ntest_res = unittest.TextTestRunner(stream=f).run(suite)\n\n# Merge errors and failures and normalize to {name, stack}\nfailures = [\n    {\n        "name": r[0]._testMethodName,\n        "stack": r[1],\n    } for r in test_res.errors + test_res.failures\n]\nprint()\nprint(\'').concat(dp,'\')\nsleep(1)\nprint(json.dumps({\n    "passed": test_res.wasSuccessful(),\n    "failures": failures,\n}))\nprint()\nprint(\'').concat(pp,"');");function hp(){return hp=(0,$.Z)(le().mark((function e(t){var n,r,i,a,o,s,c,l,u,d,p,f,h,m;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.container,r=t.fs,i=t.packager,a=t.logger,o=t.suiteCode,s=a.startLogSpinner("Setting up the environment"),e.next=4,Qd(r);case 4:return s("Creating your test files 1/2"),e.next=7,qd({fs:r,code:o,filename:"".concat(up.testSuiteName(),".py")});case 7:if(c=e.sent,!(l=c.error)){e.next=13;break}return"Failed to create suite code file",up.captureSetupError({tag:"Failed to create suite code file",raw:l}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 13:return s("Creating your test files 2/2"),e.next=16,qd({fs:r,code:fp,filename:"".concat(up.testRunnerName(),".py")});case 16:if(u=e.sent,!(d=u.error)){e.next=22;break}return"Failed to create test runner file",up.captureSetupError({tag:"Failed to create test runner file",raw:d}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 22:return a.stopLogSpinner(),a.clearLine(),a.logMessage("Installing imported packages\r\n"),e.next=27,i.installPackages();case 27:if(e.sent){e.next=30;break}return e.abrupt("return",{error:"Failed to install packages\r\n"});case 30:return a.clearLogs(),a.startLogSpinner("Running your tests"),e.next=34,n.exec("python","-B",Kd("".concat(up.testRunnerName(),".py")));case 34:if(p=e.sent,f=p.output,!(h=p.error)){e.next=40;break}return(0,Zt.track)(Zt.events.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),e.abrupt("return",{error:"Running tests failed\r\n\r\n"+(null===f||void 0===f?void 0:f.replace(/\n/g,"\n\r"))+"\r\n"+h});case 40:if("string"===typeof f){e.next=42;break}throw new Error("expected runoutput to be a string");case 42:return m=JSON.parse(f.slice(f.indexOf(dp)+dp.length,f.lastIndexOf(pp))),e.abrupt("return",{result:m,error:null});case 44:case"end":return e.stop()}}),e)}))),hp.apply(this,arguments)}function mp(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return gp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gp(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function gp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vp={testRunnerName:function(){throw new Error("Node test runner uses jest directly")},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"const index = require('./index.js');"},classIntro:function(){return'describe("UnitTests", function() {'},classConstructorName:function(){return null},setupIntro:function(){return"beforeAll(async function() {"},tearDownIntro:function(){return"afterAll(async function() {"},testIntro:function(e){return vp.testIntroPreName()+e+vp.testIntroPostName()},testIntroPreName:function(){return'test("'},testIntroPostName:function(){return'", async function() {'},getProperTestName:function(e){return e},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,n=e.meta,r=new Hd(vp);r.push(vp.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(vp.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&(r.push(vp.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),n.tearDown&&(r.push(vp.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i,a=mp(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.code&&(r.push(vp.testIntro(o.name)),r.indent(),r.push(o.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(s){a.e(s)}finally{a.f()}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return bp.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,a=e.tests,o=e.meta,s=vp.buildSuite({tests:a,meta:o});return vp.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:s})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"});"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react yet"},captureSetupError:function(e){var t=e.tag,n=e.raw;xt.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","nodejs"),xt.Tb(t)}))},exampleTest:{id:-1,failureMessage:"",name:"add",code:"expect(add(1, 2)).toBe(3);"}};function bp(){return bp=(0,$.Z)(le().mark((function e(t){var n,r,i,a,o,s,c,l,u,d,p,f,h,m,g,v,b,y,x,w,k,Z;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.container,r=t.fs,i=t.packager,a=t.logger,o=t.suiteCode,s=a.startLogSpinner("Setting up the environment"),e.next=4,Qd(r);case 4:return s("Creating your test files 1/2"),e.next=7,qd({fs:r,code:o,filename:"".concat(vp.testSuiteName(),".js")});case 7:if(c=e.sent,!(l=c.error)){e.next=13;break}return"Failed to create suite code file",vp.captureSetupError({tag:"Failed to create suite code file",raw:l}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 13:return s("Creating your test files 2/2"),u=69,d="jest.config.json",p={testRegex:Kd("".concat(vp.testSuiteName(),".js")),testEnvironment:"node",testFailureExitCode:u},e.next=19,qd({fs:r,code:JSON.stringify(p),filename:d});case 19:if(f=e.sent,!(h=f.error)){e.next=25;break}return"Failed to create config file",vp.captureSetupError({tag:"Failed to create config file",raw:h}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 25:return a.stopLogSpinner(),a.clearLine(),a.logMessage("Installing imported packages\r\n"),e.next=30,i.installPackages();case 30:if(e.sent){e.next=33;break}return e.abrupt("return",{error:"Failed to install packages\r\n"});case 33:return a.clearLogs(),s=a.startLogSpinner("Running your tests"),m=Kd("output.json"),e.next=38,n.exec("jest","--json","--outputFile",m,"--config",Kd(d),"--forceExit","--passWithNoTests");case 38:if(g=e.sent,v=g.output,!(b=g.error)||b.endsWith(u.toString())){e.next=44;break}return(0,Zt.track)(Zt.events.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),e.abrupt("return",{error:"Running tests failed\r\n\r\n"+(null===v||void 0===v?void 0:v.replace(/\n/g,"\n\r"))+"\r\n"+b});case 44:return s("Parsing your test results"),e.next=47,r.readFile(m);case 47:if(!(y=e.sent).error){e.next=52;break}return"Error reading test results",vp.captureSetupError({tag:"Error reading test results",raw:y.error}),e.abrupt("return",{error:"There was an error getting test results, if this happens please contact support."});case 52:if(x=y.content.toString(),!(w=JSON.parse(x)).success){e.next=56;break}return e.abrupt("return",{error:null,result:{passed:!0,failures:[]}});case 56:if(k=w.testResults[0],(Z=k.assertionResults.filter((function(e){return"passed"!==e.status})).map((function(e){return{name:e.title,stack:e.failureMessages[0]}}))).length){e.next=60;break}return e.abrupt("return",{error:k.message.replace(/\n/g,"\r\n")});case 60:return e.abrupt("return",{error:null,result:{passed:!1,failures:Z}});case 61:case"end":return e.stop()}}),e)}))),bp.apply(this,arguments)}var yp={java10:op,java10_beta:op,java:op,python3:up,python3_beta:up,python:up,nodejs:vp,javascript:vp,nodejs_beta:vp};function xp(e){return e in yp}function wp(e){if(!xp(e))throw new Error("".concat(e," is not a supported unit testing language, it has to be one of ").concat(Object.keys(yp)));return yp[e]}var kp=n(38888),Zp=n(47421),jp=n(78120),Op=jp.q6.define();function Ep(e){var t=e.editorRef,n=e.onChange,r=e.placeholder,i=e.skeleton,a=e.language,o=e.skeletonClosingBracket,s=e.indentSize,c=void 0===s?2:s,l=(0,kp.Z)({language:a,indentIsSpaces:!0,indentSize:2,fontSize:14}),u=l.view,d=l.ref,p=pe.useRef(i?"".concat(i,"\n"):""),f=o?"\n".concat(o):"",h=" ".repeat(c);return pe.useEffect((function(){if(u&&u.state.doc.length){var e=p.current;p.current=i?"".concat(i,"\n"):"",u.dispatch({changes:{from:0,to:e.length-1,insert:i},annotations:[jp.YW.addToHistory.of(!1),Op.of(!0)]})}}),[u,i]),pe.useEffect((function(){if(u){var e=jp.yy.changeFilter.of((function(e){return!!e.annotation(Op)||[-1,p.current.length,e.startState.doc.length-f.length,e.startState.doc.length+1]})),i=Zp.tk.updateListener.of((function(e){var t=e.state.doc.slice(p.current.length,e.state.doc.toString().length-f.length).toString();if(t!=="".concat(h).concat(r,"\n").concat(h)?n(t):n(""),e.docChanged&&e.state.doc.length===p.current.length+f.length){var i="\n"+h;u.dispatch({changes:{from:p.current.length-1,insert:"\n"+h},selection:{anchor:p.current.length+i.length-1},annotations:[Op.of(!0)]})}})),a="".concat(p.current).concat(h).concat(r,"\n").concat(f);u.dispatch({changes:{from:0,to:u.state.doc.length,insert:a},effects:jp.Py.appendConfig.of([e,i]),selection:{anchor:a.length},annotations:jp.YW.addToHistory.of(!1)}),t({setValue:function(e){if(e){var t=u.state.doc.toString().length;u.dispatch({changes:{from:p.current.length,to:t-f.length,insert:e},annotations:jp.YW.addToHistory.of(!1)})}},focus:function(){return u.focus()}})}}),[n,a,u,f,t,r,h]),(0,Ie.BX)("div",{className:"jsx-2563325987 editor",children:[(0,Ie.tZ)("div",{ref:d,className:"jsx-2563325987"}),(0,Ie.tZ)(se(),{id:"2563325987",children:[".editor.jsx-2563325987{overflow:auto;position:absolute;width:100%;height:100%;}",".loader.jsx-2563325987{height:100%;width:100%;z-index:5;}"]})]})}function _p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_p(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sp(e){var t,n,r,i,a=e.isOpen,o=e.meta,s=e.language,c=e.hasMetadata,l=e.onClose,u=(0,Ce.Z)(),d=(0,sn.Z)().showConfirm,p=pe.useState(null),f=(0,J.Z)(p,2),h=f[0],m=f[1],g=pe.useState(!0),v=(0,J.Z)(g,2),b=v[0],y=v[1],x=pe.useState((null===o||void 0===o?void 0:o.initialization)||""),w=(0,J.Z)(x,2),k=w[0],Z=w[1],j=pe.useState((null===o||void 0===o?void 0:o.imports)||""),O=(0,J.Z)(j,2),E=O[0],_=O[1],C=pe.useState((null===o||void 0===o?void 0:o.setup)||""),S=(0,J.Z)(C,2),P=S[0],N=S[1],I=pe.useState((null===o||void 0===o?void 0:o.tearDown)||""),T=(0,J.Z)(I,2),D=T[0],R=T[1],A=(0,Se.rUq)({onError:function(e){return m(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTestMeta;r&&("UserError"===r.__typename?m(r.message):"ReplUnitTestMeta"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:u}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:Se.aAi});return t?Cp(Cp({},t),{},{meta:Cp({},n)}):{__typename:"ReplUnitTestsWithMeta",meta:n,tests:[]}}}}),d("Setup saved!"),l()))}}),L=(0,J.Z)(A,2),B=L[0],U=L[1],M=(0,Se.AFf)({onError:function(e){return m(e.message)},onCompleted:function(e){var t=e.updateReplUnitTestMeta;t&&("UserError"===t.__typename?m(t.message):"ReplUnitTestMeta"===t.__typename&&(d("Imports updated!"),l()))}}),F=(0,J.Z)(M,2),X=F[0],z=F[1],V=wp(s),G=E!==(null===o||void 0===o?void 0:o.imports)||k!==(null===o||void 0===o?void 0:o.initialization)||P!==(null===o||void 0===o?void 0:o.setup)||D!==(null===o||void 0===o?void 0:o.tearDown),H=U.loading||z.loading;return(0,Ie.tZ)(zt.Z,{isOpen:a,preventClose:!0,onRequestClose:l,children:(0,Ie.BX)("div",{className:"jsx-1252880397 content",children:[(0,Ie.BX)(Ee.gC,{spacing:2,align:"stretch",children:[(0,Ie.tZ)(Np,{unitTestsLib:V,onChange:_,language:s,initialValue:null!==(t=null===o||void 0===o?void 0:o.imports)&&void 0!==t?t:""}),(0,Ie.tZ)("div",{onClick:function(){return y(!b)},className:"jsx-1252880397 collapse",children:(0,Ie.BX)(Ee.Ug,{spacing:2,align:"baseline",children:[(0,Ie.tZ)(Xe.Z,{level:3,children:" Advanced"}),(0,Ie.tZ)(Pu.Z,{color:"var(--foreground-default)",size:20,rotate:b?270:0})]})}),b?null:(0,Ie.BX)(Ee.gC,{align:"stretch",spacing:1,children:[(0,Ie.tZ)(Ip,{unitTestsLib:V,onChange:Z,language:s,initialValue:null!==(n=null===o||void 0===o?void 0:o.initialization)&&void 0!==n?n:""}),(0,Ie.tZ)(Tp,{unitTestsLib:V,onChange:N,language:s,initialValue:null!==(r=null===o||void 0===o?void 0:o.setup)&&void 0!==r?r:""}),(0,Ie.tZ)(Dp,{unitTestsLib:V,onChange:R,language:s,initialValue:null!==(i=null===o||void 0===o?void 0:o.tearDown)&&void 0!==i?i:""})]}),(0,Ie.BX)(Ee.Ug,{justify:"space-between",children:[(0,Ie.tZ)(Oe.Z,{style:{color:"var(--accent-negative-default"},children:h}),(0,Ie.BX)(Ee.Ug,{spacing:2,justify:"end",children:[(0,Ie.tZ)(je.Z,{loading:H,onClick:l,children:"Close"}),(0,Ie.tZ)(je.Z,{color:"primary",disabled:!G,loading:H,onClick:function(){c?X({variables:{input:{initialization:k,imports:E,setup:P,tearDown:D,replId:u}}}):B({variables:{input:{initialization:k,imports:E,setup:P,tearDown:D,replId:u}}})},children:"Save"})]})]})]}),(0,Ie.tZ)(se(),{id:"1252880397",children:[".content.jsx-1252880397{height:100%;width:100%;padding:var(--space-24);}",".editable-area.jsx-1252880397{width:100%;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;border:1px solid var(--background-higher);border-radius:var(--border-radius-4);padding:var(--space-8) 0;}",".editor.jsx-1252880397{height:150px;padding-bottom:var(--space-8);-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".collapse.jsx-1252880397{cursor:pointer;}"]})]})})}var Pp=[".content.jsx-1195244676{height:100%;width:100%;padding:var(--space-24);}",".editable-area.jsx-1195244676{width:100%;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;border:1px solid var(--background-higher);border-radius:var(--border-radius-4);padding:var(--space-8) 0;}",".editor.jsx-1195244676{height:150px;padding-bottom:var(--space-8);-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;position:relative;}"];function Np(e){var t=e.unitTestsLib,n=e.onChange,r=e.language,i=e.initialValue,a=pe.useState(null),o=(0,J.Z)(a,2),s=o[0],c=o[1];pe.useEffect((function(){s&&(s.setValue(i),s.focus())}),[s,i]);var l=t.defaultImports().trim();return(0,Ie.BX)(Ee.gC,{spacing:1,align:"stretch",children:[(0,Ie.BX)(Ee.Ug,{justify:"space-between",children:[(0,Ie.tZ)(Xe.Z,{level:3,children:"Imports"}),(0,Ie.tZ)("a",{href:"https://docs.replit.com/repls/UnitTesting",target:"_blank",className:"jsx-".concat(Pp.__hash),children:(0,Ie.tZ)(je.Z,{Icon:lt.Z,children:"Docs"})})]}),(0,Ie.tZ)("div",{className:"jsx-".concat(Pp.__hash)+" editable-area",children:(0,Ie.tZ)("div",{className:"jsx-".concat(Pp.__hash)+" editor",children:(0,Ie.tZ)(Ep,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add imports here!"),editorRef:c,language:r,skeleton:l,skeletonClosingBracket:"",indentSize:0})})}),(0,Ie.tZ)(se(),{id:Pp.__hash,children:Pp})]})}function Ip(e){var t=e.unitTestsLib,n=e.onChange,r=e.language,i=e.initialValue,a=pe.useState(null),o=(0,J.Z)(a,2),s=o[0],c=o[1];pe.useEffect((function(){s&&s.setValue(i)}),[s,i]);var l=t.classConstructorName();return(0,Ie.BX)(Ee.gC,{spacing:1,align:"stretch",children:[(0,Ie.BX)(Ee.Ug,{justify:"space-between",children:[(0,Ie.tZ)(Xe.Z,{level:4,children:"Initialization"}),(0,Ie.tZ)("a",{href:"https://docs.replit.com/repls/UnitTesting",target:"_blank",className:"jsx-".concat(Pp.__hash),children:(0,Ie.tZ)(je.Z,{Icon:lt.Z,children:"Docs"})})]}),l&&(0,Ie.tZ)(Ee.Ug,{children:(0,Ie.BX)(Oe.Z,{children:["Hint: constructor name is ",(0,Ie.tZ)("code",{className:"jsx-".concat(Pp.__hash),children:l}),"."]})}),(0,Ie.tZ)("div",{className:"jsx-".concat(Pp.__hash)+" editable-area",children:(0,Ie.tZ)("div",{className:"jsx-".concat(Pp.__hash)+" editor",children:(0,Ie.tZ)(Ep,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add initialization code here!"),editorRef:c,language:r,skeleton:"",skeletonClosingBracket:"",indentSize:0})})}),(0,Ie.tZ)(se(),{id:Pp.__hash,children:Pp})]})}function Tp(e){var t=e.unitTestsLib,n=e.onChange,r=e.language,i=e.initialValue,a=pe.useState(null),o=(0,J.Z)(a,2),s=o[0],c=o[1];pe.useEffect((function(){s&&s.setValue(i)}),[s,i]);var l=t.setupIntro().trim();return(0,Ie.BX)(Ee.gC,{spacing:1,align:"stretch",children:[(0,Ie.BX)(Ee.Ug,{justify:"space-between",children:[(0,Ie.tZ)(Xe.Z,{level:4,children:"Setup"}),(0,Ie.tZ)("a",{href:"https://docs.replit.com/repls/UnitTesting",target:"_blank",className:"jsx-".concat(Pp.__hash),children:(0,Ie.tZ)(je.Z,{Icon:lt.Z,children:"Docs"})})]}),(0,Ie.tZ)("div",{className:"jsx-".concat(Pp.__hash)+" editable-area",children:(0,Ie.tZ)("div",{className:"jsx-".concat(Pp.__hash)+" editor",children:(0,Ie.tZ)(Ep,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add setup code here!"),editorRef:c,language:r,skeleton:l,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})}),(0,Ie.tZ)(se(),{id:Pp.__hash,children:Pp})]})}function Dp(e){var t=e.unitTestsLib,n=e.onChange,r=e.language,i=e.initialValue,a=pe.useState(null),o=(0,J.Z)(a,2),s=o[0],c=o[1];pe.useEffect((function(){s&&s.setValue(i)}),[s,i]);var l=t.tearDownIntro().trim();return(0,Ie.BX)(Ee.gC,{spacing:1,align:"stretch",children:[(0,Ie.BX)(Ee.Ug,{justify:"space-between",children:[(0,Ie.tZ)(Xe.Z,{level:4,children:"Teardown"}),(0,Ie.tZ)("a",{href:"https://docs.replit.com/repls/UnitTesting",target:"_blank",className:"jsx-".concat(Pp.__hash),children:(0,Ie.tZ)(je.Z,{Icon:lt.Z,children:"Docs"})})]}),(0,Ie.tZ)("div",{className:"jsx-".concat(Pp.__hash)+" editable-area",children:(0,Ie.tZ)("div",{className:"jsx-".concat(Pp.__hash)+" editor",children:(0,Ie.tZ)(Ep,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add teardown code here!"),editorRef:c,language:r,skeleton:l,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})}),(0,Ie.tZ)(se(),{id:Pp.__hash,children:Pp})]})}Pp.__hash="1195244676";var Rp=function(e){var t=e.language,n=e.meta,r=pe.useState(!1),i=(0,J.Z)(r,2),a=i[0],o=i[1];return(0,Ie.BX)(Ie.HY,{children:[(0,Ie.tZ)(je.Z,{Icon:ot.Z,filled:!0,fullWidth:!0,onClick:function(){return o(!0)},children:"Setup"}),(0,Ie.tZ)(Sp,{language:t,isOpen:a,onClose:function(){return o(!1)},hasMetadata:Boolean(null===n||void 0===n?void 0:n.id),meta:n}),(0,Ie.tZ)(se(),{id:"4031649501",children:[".collapse.jsx-4031649501{cursor:pointer;}"]})]})},Ap=n(56276),Lp=n(77114);function Bp(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Up(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Up(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Up(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mp(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xp="\x1b[0;31m",zp="\x1b[0m",Vp=["\u28fe","\u28fd","\u28fb","\u28bf","\u287f","\u28df","\u28ef","\u28f7","\u2801","\u2802","\u2804","\u2840","\u2880","\u2820","\u2810","\u2808"];function Gp(e){var t=e.name,n=e.failureMessage,r=e.stack;return"\u274c\t".concat(Xp).concat(t).concat(zp,"\r").concat(n?"\nMessage: ".concat(n,"\r"):"","\nStack Trace:\r\n").concat(r.replace(/\n/g,"\r\n"),"\n\r\n\r\n")}var Hp=function(e){var t=e.language,n=e.unitTests,r=e.onResult,i=e.trackingContext,a=pe.useState(!1),o=(0,J.Z)(a,2),s=o[0],c=o[1],l=(0,Fe.Z)(),u=l.container,d=l.packager,p=l.fs,f=window.store.dispatch,h=null,m=function(){c(!1),Qd(p),h&&(h.stopLogSpinner(),h=null)},g=function(){var e=(0,$.Z)(le().mark((function e(){var a,o,l,g,v,b,y,x,w,k,Z,j,O,E,_,C,S,P;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return");case 2:if(a=null,h={startLogSpinner:function(e){if(a)throw new Error("A spinner is already active! call stopSpinner first or use the update callback to update the active spinner's message.");var t=e,n=0;return a=setInterval((function(){n++;var e=Vp[n%Vp.length];if(!h)throw new Error("Expected logger");h.clearLine(),h.logMessage(e+" "+t)}),100),function(e){t=e}},stopLogSpinner:function(){a&&clearInterval(a),a=null},logMessage:function(e){f((0,_t.yY)({wid:"",type:"",raw:!0,message:e}))},clearLine:function(){if(!h)throw new Error("Expected logger");h.logMessage("\x1b[1K\r")},clearLogs:function(){if(f({type:"CLEAR_CONSOLE"}),!h)throw new Error("Expected logger");h.logMessage("\r\n")}},n){e.next=6;break}throw new Error("Run button should not be active if there are no tests");case 6:return c(!0),(0,Zt.track)(Zt.events.REPL_UNIT_TEST_RUN,{trackingData:{context:i}}),h.clearLogs(),o=wp(t),e.next=12,o.buildAndRunTests(Fp({container:u,fs:p,packager:d,logger:h},n));case 12:if(l=e.sent,h.stopLogSpinner(),h.clearLine(),h.clearLogs(),null===l.error){e.next=21;break}return h.logMessage("".concat(Xp).concat(l.error).concat(zp,"\r\n")),m(),n.tests.map((function(e){return{testId:e.id,didPass:!1}})),e.abrupt("return");case 21:if(g=l.result.passed?[]:l.result.failures.map((function(e){return o.parseTestResultName(e.name)})),v=[],b=n.tests.map((function(e){return o.getProperTestName(e.name)})),y=g.filter((function(e){return!b.includes(e)})),!y.length){e.next=32;break}x=y[0],w=l.result.failures[0].stack,h.logMessage(Gp({name:x,failureMessage:"The following error occurred but was not related to a single unit test",stack:w})),v.push.apply(v,(0,nn.Z)(n.tests.map((function(e){return{testId:e.id,didPass:!1}})))),e.next=56;break;case 32:k=Bp(n.tests),e.prev=33,k.s();case 35:if((Z=k.n()).done){e.next=48;break}if(j=Z.value,O=o.getProperTestName(j.name),E=g.indexOf(O),_=-1===E,v.push({testId:j.id,didPass:_}),!_){e.next=44;break}return h.logMessage((N=O,"\u2705\t".concat("\x1b[0;32m").concat(N).concat(zp,"\r\n\r\n"))),e.abrupt("continue",46);case 44:C=l.result.failures[E].stack,h.logMessage(Gp({name:O,failureMessage:j.failureMessage,stack:C}));case 46:e.next=35;break;case 48:e.next=53;break;case 50:e.prev=50,e.t0=e.catch(33),k.e(e.t0);case 53:return e.prev=53,k.f(),e.finish(53);case 56:if(r(v),S=n.tests.length,!l.result.passed){e.next=62;break}return h.logMessage("".concat("\x1b[48;5;22m","  All tests have passed ").concat(S,"/").concat(S,"  ").concat(zp,"\r\n")),m(),e.abrupt("return");case 62:P=S-l.result.failures.length,h.logMessage("".concat("\x1b[48;5;88m","  ").concat(P,"/").concat(S," passed, see errors above  ").concat(zp)),m();case 65:case"end":return e.stop()}var N}),e,null,[[33,50,53,56]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,$.Z)(le().mark((function e(){return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{g()}catch(t){xt.$e((function(e){e.setTag("unittestsrun","true"),xt.Tb(t)})),h&&h.logMessage("\r\n".concat(Xp," Sorry, we have failed to run your tests. Please try again or contact support. ").concat(zp,"\r\n")),m()}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Boolean(n&&n.tests.length>0)?(0,Ie.tZ)("div",{className:"run-button",children:(0,Ie.tZ)(je.Z,{loading:s,fullWidth:!0,color:"blue",filled:!0,Icon:Yc.Z,onClick:v,children:s?"Running":"Run tests"})}):null};function Wp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wp(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qp(e){var t=e.isOpen,n=e.test,r=e.language,i=e.onClose,a=e.trackingContext,o=(0,Ce.Z)(),s=(0,sn.Z)().showConfirm,c=pe.useState(null),l=(0,J.Z)(c,2),u=l[0],d=l[1],p=pe.useState(""),f=(0,J.Z)(p,2),h=f[0],m=f[1],g=pe.useState(""),v=(0,J.Z)(g,2),b=v[0],y=v[1],x=pe.useState(""),w=(0,J.Z)(x,2),k=w[0],Z=w[1],j=(0,Se.Hd4)({onError:function(e){return Z(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTest;r&&("UserError"===r.__typename?Z(r.message):"ReplUnitTest"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:o}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:Se.Rbd});return t?Kp(Kp({},t),{},{tests:[].concat((0,nn.Z)(t.tests),[n])}):{__typename:"ReplUnitTestsWithMeta",meta:null,tests:[n]}}}}),s("Test created!"),i()))}}),O=(0,J.Z)(j,2),E=O[0],_=O[1],C=(0,Se.kOV)({onError:function(e){return Z(e.message)},onCompleted:function(e){var t=e.updateReplUnitTest;t&&("UserError"===t.__typename?Z(t.message):"ReplUnitTest"===t.__typename&&(s("Test updated!"),i()))}}),S=(0,J.Z)(C,2),P=S[0],N=S[1],I=(0,Or.Y)("",(function(e){return e.length<=0?{message:"Must include test name"}:e.trim().split(" ").length>1?{message:"Test name must only be one word"}:void 0})),T=pe.useState(!1),D=(0,J.Z)(T,2),R=D[0],A=D[1];pe.useEffect((function(){t||A(!1)}),[t]),pe.useEffect((function(){I.setValue((null===n||void 0===n?void 0:n.name)||""),y((null===n||void 0===n?void 0:n.failureMessage)||""),m((null===n||void 0===n?void 0:n.code)||""),u&&u.setValue((null===n||void 0===n?void 0:n.code)||"")}),[n,u]),pe.useEffect((function(){Z("")}),[h,Z]);var L=wp(r),B=!n||n.name!==I.value||n.code!==h||n.failureMessage!==b,U=_.loading||N.loading,M=L.testIntro(I.value||""),F=L.hasClosingBrackets()?L.getClosingBrackets():"";return(0,Ie.tZ)(zt.Z,{isOpen:t,preventClose:!0,onRequestClose:i,children:(0,Ie.BX)("div",{className:"jsx-459724546 content",children:[(0,Ie.BX)(Ee.gC,{spacing:2,align:"stretch",children:[(0,Ie.BX)(Ee.Ug,{spacing:2,wrap:"nowrap",children:[(0,Ie.tZ)(Xe.Z,{style:{flexShrink:0},level:3,children:"Name"}),(0,Ie.tZ)(un.ZP,{autoFocus:!0,large:!0,required:!0,onChange:function(e){I.setValue(e.target.value),A(!0)},value:I.value,validationResults:R&&I.error?[{message:I.error.message,state:"error"}]:void 0,placeholder:"Enter test name here!"})]}),(0,Ie.BX)(Ee.Ug,{align:"baseline",justify:"space-between",children:[(0,Ie.tZ)(Xe.Z,{level:3,children:"Code"}),(0,Ie.tZ)(je.Z,{Icon:Nu.Z,size:"small",onClick:function(){u&&u.setValue("  "+L.exampleTest.code),m(L.exampleTest.code)},children:"Show me an example"})]}),(0,Ie.tZ)("section",{className:"jsx-459724546",children:(0,Ie.tZ)("div",{className:"jsx-459724546 editable-area",children:(0,Ie.tZ)("div",{className:"jsx-459724546 editor",children:(0,Ie.tZ)(Ep,{skeleton:M,skeletonClosingBracket:F,language:r,editorRef:d,onChange:m,placeholder:"".concat(L.getCommentChar()," Enter code here")})})})}),(0,Ie.tZ)("div",{className:"jsx-459724546 test-heading",children:(0,Ie.tZ)(Xe.Z,{level:3,children:"Failure message"})}),(0,Ie.tZ)("section",{className:"jsx-459724546",children:(0,Ie.tZ)(un.ZP,{value:b,onChange:function(e){return y(e.target.value)},placeholder:"This will be displayed on test failure"})}),(0,Ie.BX)(Ee.Ug,{justify:"space-between",align:"center",children:[(0,Ie.tZ)(Oe.Z,{style:{color:"var(--accent-negative-default"},children:k}),(0,Ie.BX)(Ee.Ug,{spacing:2,justify:"end",children:[(0,Ie.tZ)(je.Z,{loading:!1,onClick:i,children:"Close"}),(0,Ie.tZ)(je.Z,{color:"primary",loading:U,disabled:!B,onClick:function(){I.validate()?A(!0):h.length<=0?Z("Test cannot be empty"):n?(P({variables:{input:{name:I.value,code:h,failureMessage:b,testId:n.id}}}),(0,Zt.track)(Zt.events.REPL_UNIT_TEST_EDITED,{trackingData:{context:a}})):(E({variables:{input:{name:I.value,code:h,failureMessage:b,replId:o}}}),(0,Zt.track)(Zt.events.REPL_UNIT_TEST_CREATED,{trackingData:{context:a}}))},children:"Save"})]})]})]}),(0,Ie.tZ)(se(),{id:"459724546",children:[".content.jsx-459724546{padding:var(--space-24);}",".editable-area.jsx-459724546{border:1px solid var(--background-higher);border-radius:var(--border-radius-4);padding:var(--space-8) 0;}",".editor.jsx-459724546{height:200px;padding-bottom:var(--space-8);position:relative;}"]})]})})}function Yp(e){var t=e.testId,n=e.onClose,r=(0,sn.Z)().showConfirm,i=(0,Ce.Z)(),a=(0,Se.IVR)({onError:function(e){return p(e.message)},update:function(e,a){var o,s=null===(o=a.data)||void 0===o?void 0:o.deleteReplUnitTest;s&&("UserError"===s.__typename?p(s.message):"ReplUnitTest"===s.__typename&&t&&(e.modify({id:e.identify({__typename:"Repl",id:i}),fields:{unitTests:function(e,n){var r=n.readField,i=e.tests.filter((function(e){return r("id",e)!==t}));return Kp(Kp({},e),{},{tests:(0,nn.Z)(i)})}}}),r("Test deleted!"),n()))}}),o=(0,J.Z)(a,2),s=o[0],c=o[1],l=pe.useState(""),u=(0,J.Z)(l,2),d=u[0],p=u[1];return(0,Ie.tZ)(zt.Z,{isOpen:Boolean(t),onRequestClose:n,children:(0,Ie.BX)("div",{className:"jsx-1541601772 content",children:[(0,Ie.BX)(Ee.gC,{spacing:2,align:"stretch",children:[(0,Ie.tZ)(Xe.Z,{level:2,children:" Delete test "}),(0,Ie.tZ)(Oe.Z,{children:"Are you sure you want to delete this test? This cannot be undone."}),(0,Ie.BX)(Ee.Ug,{justify:"space-between",align:"center",children:[(0,Ie.tZ)(Oe.Z,{style:{color:"var(--accent-negative-default"},children:d}),(0,Ie.BX)(Ee.Ug,{spacing:2,justify:"end",children:[(0,Ie.tZ)(je.Z,{loading:c.loading,onClick:n,children:"Cancel"}),(0,Ie.tZ)(je.Z,{color:"negative",loading:c.loading,onClick:function(){if(!t)throw new Error("Expected a testId");s({variables:{testId:t}})},children:"Yes, delete this test"})]})]})]}),(0,Ie.tZ)(se(),{id:"1541601772",children:[".content.jsx-1541601772{padding:var(--space-24);}"]})]})})}var Qp=function(e){var t=e.unitTests,n=e.isAddingTest,r=e.onClose,i=e.language,a=e.canWrite,o=e.trackingContext,s=void 0===o?"default":o,c=pe.useState(n),l=(0,J.Z)(c,2),u=l[0],d=l[1],p=pe.useState(null),f=(0,J.Z)(p,2),h=f[0],m=f[1],g=pe.useState(null),v=(0,J.Z)(g,2),b=v[0],y=v[1],x=(0,Ce.Z)(),w=(0,Se.lQq)(),k=(0,J.Z)(w,1)[0],Z=(null===t||void 0===t?void 0:t.tests)||[];return(0,Ie.BX)(Ee.gC,{spacing:2,align:"stretch",children:[(0,Ie.tZ)("div",{className:"jsx-2109177251 run-wrapper",children:(0,Ie.tZ)(Hp,{language:i,unitTests:t,onResult:function(e){k({variables:{input:{replId:x,results:e},replId:x}})},trackingContext:s})}),(0,Ie.tZ)("div",{className:"jsx-2109177251 tests-wrapper",children:Z.length>0?(0,Ie.tZ)(Ee.gC,{spacing:1,align:"stretch",children:Z.map((function(e){var t,n;return"ReplUnitTestLastRun"===(null===(t=e.lastRun)||void 0===t?void 0:t.__typename)&&(e.lastRun.status===Se.$I7.Passed?n="passed-test":e.lastRun.status===Se.$I7.Failed&&(n="failed-test")),(0,Ie.tZ)("div",{className:"jsx-2109177251 "+"test ".concat(n),children:(0,Ie.BX)(Ee.Ug,{wrap:"nowrap",justify:"space-between",align:"center",children:[(0,Ie.tZ)(Oe.Z,{truncate:!0,children:e.name}),a?(0,Ie.tZ)("div",{className:"jsx-2109177251 test-ctas",children:(0,Ie.BX)(Ee.Ug,{children:[(0,Ie.tZ)(je.Z,{border:!1,filled:!1,onClick:function(){m(e)},Icon:Ap.Z}),(0,Ie.tZ)(je.Z,{border:!1,filled:!1,onClick:function(){y(e.id)},Icon:Lp.Z})]})}):null]})},e.id)}))}):(0,Ie.tZ)("div",{className:"jsx-2109177251",children:(0,Ie.BX)(Ee.gC,{align:"center",spacing:2,children:[(0,Ie.tZ)(Oe.Z,{align:"center",children:"Looks like you don't have any tests yet!"}),a&&(0,Ie.tZ)(je.Z,{onClick:function(){return d(!0)},Icon:ln.Z,children:"Add test"})]})})}),(0,Ie.tZ)(qp,{isOpen:u||Boolean(h)||n,test:h,language:i,onClose:function(){m(null),d(!1),r&&r()},trackingContext:s}),(0,Ie.tZ)(Yp,{testId:b,onClose:function(){return y(null)}}),(0,Ie.tZ)(se(),{id:"2109177251",children:[".tests-wrapper.jsx-2109177251{border-radius:var(--border-radius-4);padding:var(--space-16) 0;width:100%;}",".test.jsx-2109177251{padding:var(--space-8) var(--space-8);border:1px solid var(--outline-dimmest);border-radius:var(--border-radius-4);}",".passed-test.jsx-2109177251{border-color:var(--accent-positive-default);background:var(--accent-positive-dimmer);}",".failed-test.jsx-2109177251{border-color:var(--accent-negative-default);background:var(--accent-negative-dimmer);}",".test-ctas.jsx-2109177251{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}"]})]})};function Jp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jp(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ef(){return(0,Ie.BX)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ie.tZ)("path",{d:"M23 4v6h-6M1 20v-6h6",stroke:"var(--foreground-default)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ie.tZ)("path",{d:"M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15",stroke:"var(--foreground-default)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}var tf=function(e){var t=e.onClick,n=e.hasTests,r=n?{"aria-label":"Delete all tests to switch test type","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip"}:{};return(0,Ie.BX)("div",$p($p({},r),{},{className:"jsx-3302736802 "+(r&&null!=r.className&&r.className||"back-button"),children:[(0,Ie.tZ)(je.Z,{filled:!1,border:!1,size:"small",Icon:ef,onClick:t,disabled:n,children:"Switch test type"}),(0,Ie.tZ)(se(),{id:"3302736802",children:[".back-button.jsx-3302736802{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]}))},nf=n(9595);function rf(){var e=(0,xa.Z)(),t=(0,Fe.Z)().dotReplit,n=null===e||void 0===e?void 0:e.language,r=(0,pe.useState)(null),i=r[0],a=r[1],o=(0,pe.useState)(!0),s=o[0],c=o[1];return(0,pe.useEffect)((function(){if(n){if(xp(n))return a(n),void c(!1);var e=!1,r=t.watch((function(t){var n,r;if(e||(e=!0,c(!1)),t.error)t.error===nf.Y.NotFound&&a(null);else{var i=null===(n=t.config.unitTest)||void 0===n||null===(r=n.language)||void 0===r?void 0:r.toLowerCase();i&&xp(i)?a(i):a(null)}}));return function(){r()}}}),[n,t]),{language:i,isLoading:s}}var af=function(e){var t,n,r,i,a=e.onBack,o=(0,Ce.Z)(),s=pe.useState(!1),c=(0,J.Z)(s,2),l=c[0],u=c[1],d=rf(),p=d.language,f=d.isLoading,h=(0,Se.CHr)({variables:{replId:o}}),m=null===(t=h.data)||void 0===t?void 0:t.repl;if(h.loading||f)return(0,Ie.BX)("div",{className:"jsx-707544915",children:[(0,Ie.tZ)(Vt.Z,{}),(0,Ie.tZ)(se(),{id:"707544915",children:["div.jsx-707544915{height:100%;width:100%;background-color:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]});if(!m||"Repl"!==m.__typename)return(0,Ie.BX)("div",{className:"jsx-932640293",children:[(0,Ie.tZ)(Oe.Z,{children:"Unable to fetch tests, please try again"}),(0,Ie.tZ)(se(),{id:"932640293",children:["div.jsx-932640293{height:100%;width:100%;background-color:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-16);}"]})]});if(!p)return(0,Ie.BX)("div",{className:"jsx-932640293",children:[(0,Ie.tZ)(Oe.Z,{align:"center",children:"Unit tests are currently only supported in Java, Python, and Node.js repls."}),(0,Ie.tZ)(se(),{id:"932640293",children:["div.jsx-932640293{height:100%;width:100%;background-color:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-16);}"]})]});var g="default";null!==m&&void 0!==m&&m.isProject?g="project_repl":null!==m&&void 0!==m&&m.isProjectFork&&(g="submission_repl");var v=Boolean((null===(n=m.unitTests)||void 0===n?void 0:n.tests)&&m.unitTests.tests.length>0);return null!==m&&void 0!==m&&null!==(r=m.currentUserPermissions)&&void 0!==r&&r.writeTests?(0,Ie.BX)(Ee.gC,{align:"center",spacing:2,children:[(0,Ie.tZ)("header",{className:"jsx-1572442350",children:(0,Ie.BX)(Ee.Ug,{wrap:"nowrap",justify:"space-between",align:"baseline",children:[(0,Ie.tZ)(Xe.Z,{truncate:!0,level:4,children:"Unit tests"}),(0,Ie.tZ)(je.Z,{role:"tooltip","data-microtip-position":"left","aria-label":"Add test",filled:!1,border:!1,Icon:ln.Z,onClick:function(){return u(!0)}})]})}),(0,Ie.tZ)("section",{className:"jsx-1572442350",children:(0,Ie.BX)(Ee.gC,{spacing:1,align:"stretch",children:[(0,Ie.tZ)(Rp,{language:p,meta:(null===(i=m.unitTests)||void 0===i?void 0:i.meta)||null}),(0,Ie.tZ)(Qp,{isAddingTest:l,unitTests:(null===m||void 0===m?void 0:m.unitTests)||null,onClose:function(){return u(!1)},language:p,canWrite:!0,trackingContext:g}),a?(0,Ie.tZ)(tf,{hasTests:v,onClick:a}):null]})}),(0,Ie.tZ)(se(),{id:"1572442350",children:["header.jsx-1572442350{width:100%;}","section.jsx-1572442350{max-width:275px;width:100%;overflow-y:auto;}"]})]}):(0,Ie.BX)(Ee.gC,{spacing:2,align:"center",children:[(0,Ie.tZ)("header",{className:"jsx-4196683469",children:(0,Ie.tZ)(Xe.Z,{truncate:!0,level:4,children:"Unit tests"})}),(0,Ie.tZ)("section",{className:"jsx-4196683469",children:(0,Ie.tZ)(Qp,{unitTests:(null===m||void 0===m?void 0:m.unitTests)||null,language:p,isAddingTest:!1,canWrite:!1,trackingContext:g})}),(0,Ie.tZ)(se(),{id:"4196683469",children:["header.jsx-4196683469{width:100%;}","section.jsx-4196683469{width:100%;max-width:275px;overflow-y:auto;}"]})]})},of=n(70114);function sf(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,ae.Z)(e);if(t){var i=(0,ae.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,ie.Z)(this,n)}}function cf(e){switch(e){case Se.Flv.Match:return"The test passes if the expected output is in the actual output.";case Se.Flv.Exact:return"The test passes if the expected output is equal to the actual output.";case Se.Flv.Regex:return"The test passes if the actual output matches the regex expression for the expected output.";case Se.Flv.Compatibility:return"The test passes if the expected output is in the actual output; some characters are removed for backwards compatibility."}}var lf=function(e){(0,re.Z)(n,e);var t=sf(n);function n(){var e;(0,te.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).name=e.constructor.name,e}return n}((0,n(46576).Z)(Error));function uf(e){var t={id:e.id},n={id:-e.id,input:{input:e.input?e.input+"\n":""}};switch(e.type){case"compatibility":t.output={compatibility:{expected:e.output}};break;case"match":t.output={match:{expected:e.output,ignoreTrailingWhitespace:!0}};break;case"exact":t.output={exact:{expected:e.output,allowTrailingNewline:!0}};break;case"regex":t.output={regex:{expression:e.output}}}return{id:e.id,instructions:[n,t]}}function df(e){var t=e.args,n=e.env,r=t.indexOf("--ps1"),i=t.indexOf("--ps2"),a=t.indexOf("-i");return-1!==r&&null!=t[r+1]&&(t[r+1]=""),-1!==i&&null!=t[i+1]&&(t[i+1]=""),-1!==a&&t.splice(a,1),t.includes("-q")||t.unshift(t.shift(),"-q"),n.PS1="",n.PS2="",{args:t,env:n}}function pf(e){return ff.apply(this,arguments)}function ff(){return ff=(0,$.Z)(le().mark((function e(t){var n,r,i,a,o,s,c,l,u,d;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getRunConfig();case 2:if(r=e.sent){e.next=5;break}throw new lf("unable to fetch dotreplit run config");case 5:if(!r.interp){e.next=15;break}if("stderred"===(null===(a=null===(i=r.interp)||void 0===i?void 0:i.command)||void 0===a?void 0:a.args[0])&&("--"===a.args[1]?a.args.splice(0,2):a.args.shift()),a&&!(a.args.length<1)){e.next=12;break}throw o=new lf("received interp without command"),xt.Tb(o,(function(e){return e.setExtra("runInfo",d)})),o;case 12:if(!a.args[0].match(/(^|\/)prybar/i)){e.next=14;break}return e.abrupt("return",{execCommand:df(a)});case 14:return e.abrupt("return",{execCommand:{args:a.args,env:a.env}});case 15:if(null!==(n=r.run)&&void 0!==n&&n.run){e.next=19;break}throw s=new lf("Bad repl run config received"),xt.Tb(s,(function(e){return e.setExtra("runConfig",r)})),s;case 19:return c=r.run,l=c.run,u=c.compile,l.env.PS1="",l.env.PS2="",d={execCommand:{args:l.args,env:l.env}},u&&(u.env.PS1="",u.env.PS2="",d.buildCommand={args:u.args,env:u.env}),e.abrupt("return",d);case 25:case"end":return e.stop()}}),e)}))),ff.apply(this,arguments)}var hf=["innerRef"];function mf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mf(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vf=function(e){var t=e.test,n=e.onSubmit,r=e.onCancel,i=e.isOpen,a=e.onRequestClose,o=pe.useState({}),s=(0,J.Z)(o,2),c=s[0],l=s[1],u=function(e){return{name:(null===e||void 0===e?void 0:e.name)||"",type:(null===e||void 0===e?void 0:e.type)||Se.Flv.Match,input:(null===e||void 0===e?void 0:e.input)||"",output:(null===e||void 0===e?void 0:e.output)||""}},d=(0,sn.Z)().showError,p=pe.useState(u(t)),f=(0,J.Z)(p,2),h=f[0],m=f[1];pe.useEffect((function(){m(u(t)),l({})}),[t,m]);var g=function(e,t){l((function(n){return gf(gf({},n),{},(0,ee.Z)({},e,t?void 0:[{message:e+" expected but not provided.",state:"error"}]))}))};return(0,Ie.tZ)(zt.Z,{isOpen:i,onRequestClose:a,children:(0,Ie.BX)("div",{className:se().dynamic([["2086048227",[""===h.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-tests-view",children:[(0,Ie.tZ)("div",{className:se().dynamic([["2086048227",[""===h.type?"--foreground-dimmer":"--foreground-default"]]])+" header-row",children:(0,Ie.tZ)(Xe.Z,{level:4,align:"center",children:t?"Edit test: ":"Create test"})}),(0,Ie.tZ)("div",{className:se().dynamic([["2086048227",[""===h.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,Ie.tZ)(un.ZP,{label:"Test name",placeholder:"The name of the test",value:(null===h||void 0===h?void 0:h.name)||"",validationResults:c.name,onChange:function(e){var t;e.persist(),m((function(t){var n;return gf(gf({},t),{},{name:(null===(n=e.target)||void 0===n?void 0:n.value)||""})})),g("name",null===(t=e.target)||void 0===t?void 0:t.value)},maxLength:20})}),(0,Ie.tZ)("div",{className:se().dynamic([["2086048227",[""===h.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,Ie.tZ)(of.Z,{style:{height:"150px"},label:"Input (standard in)",placeholder:"The input for the test",value:h.input,fontFamily:"monospace",translate:"no",onChange:function(e){e.persist(),m((function(t){return gf(gf({},t),{},{input:e.target.value})}))}})}),(0,Ie.tZ)("div",{className:se().dynamic([["2086048227",[""===h.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,Ie.tZ)(of.Z,{style:{height:"150px"},label:"Expected output",validationResults:c.output,placeholder:"The expected output for the test",value:h.output,fontFamily:"monospace",translate:"no",onChange:function(e){var t;e.persist(),m((function(t){return gf(gf({},t),{},{output:e.target.value})})),g("output",null===(t=e.target)||void 0===t?void 0:t.value)}})}),(0,Ie.tZ)("div",{className:se().dynamic([["2086048227",[""===h.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,Ie.tZ)("div",{className:se().dynamic([["2086048227",[""===h.type?"--foreground-dimmer":"--foreground-default"]]])+" dropdown-container",children:(0,Ie.tZ)(Tu.Z,{items:[Se.Flv.Match,Se.Flv.Exact,Se.Flv.Regex,Se.Flv.Compatibility],renderItemChildComponent:function(e){return(0,Ie.BX)("a",{className:se().dynamic([["2086048227",[""===h.type?"--foreground-dimmer":"--foreground-default"]]]),children:[e,(0,Ie.tZ)("br",{className:se().dynamic([["2086048227",[""===h.type?"--foreground-dimmer":"--foreground-default"]]])}),(0,Ie.tZ)(Oe.Z,{size:"xsmall",children:cf(e)})]})},renderAnchorComponent:function(e){var t=e.innerRef,n=(0,Vo.Z)(e,hf);return(0,Ie.BX)("a",gf(gf({ref:t},n),{},{className:se().dynamic([["2086048227",[""===h.type?"--foreground-dimmer":"--foreground-default"]]])+" dropdown-view dropdown-anchor",children:[(0,Ie.tZ)(Oe.Z,{children:h.type}),(0,Ie.tZ)(Oe.Z,{children:(0,Ie.tZ)(Pu.Z,{})})]}))},onClick:function(e){m((function(t){return gf(gf({},t),{},{type:e})}))}})})}),(0,Ie.BX)("div",{className:se().dynamic([["2086048227",[""===h.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row align-end",children:[(0,Ie.tZ)(je.Z,{onClick:r,children:"Cancel"}),(0,Ie.tZ)(je.Z,{color:"primary",filled:!0,onClick:function(){if(!h.name||!h.output)return d("Test name and expected output must be provided."),h.name||g("name"),void(h.output||g("output"));h.type?(n({testId:null===t||void 0===t?void 0:t.id,name:h.name,input:h.input||"",type:h.type,output:h.output}),m(u(void 0))):d("A test type must be provided")},children:"Save"})]}),(0,Ie.tZ)(se(),{id:"2086048227",dynamic:[""===h.type?"--foreground-dimmer":"--foreground-default"],children:[".dropdown-container.__jsx-style-dynamic-selector{border:1px solid var(--outline-dimmest);width:100%;box-sizing:border-box;border-radius:var(--border-radius-4);}",".dropdown-anchor.__jsx-style-dynamic-selector{padding:var(--space-8);}",".dropdown-container.__jsx-style-dynamic-selector .anchor{z-index:1;}",".dropdown-container.__jsx-style-dynamic-selector .dropdown-view{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;text-align:right;}",".dropdown-container.__jsx-style-dynamic-selector .dropdown-view .text{color:var( ".concat(""===h.type?"--foreground-dimmer":"--foreground-default"," );}"),".manage-tests-view.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:var(--space-16);}",".manage-test-row.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;padding-top:var(--space-16);}",".align-end.__jsx-style-dynamic-selector{-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}",".manage-test-row.__jsx-style-dynamic-selector>button{margin-left:var(--space-8);}",".manage-test-row-section.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:0 var(--space-16);width:100%;}"]})]})})},bf=function(e){var t=e.test,n=e.onEdit,r=e.onDelete,i=e.onView,a=e.isTeacherView,o=e.status,s=e.isRunning,c=e.onShowFailed,l=e.disableButtons,u="";return o?u=o:s&&(u="Running"),(0,Ie.BX)("div",{onClick:function(){return i()},className:"jsx-69869520 test",children:[(0,Ie.BX)("div",{className:"jsx-69869520 test-row",children:[(0,Ie.tZ)("div",{className:"jsx-69869520 test-text",children:(0,Ie.tZ)(Oe.Z,{size:"large",children:t.name})}),a&&(0,Ie.tZ)("div",{onClick:function(e){return e.stopPropagation()},className:"jsx-69869520 test-row",children:(0,Ie.BX)(Ie.HY,{children:[(0,Ie.tZ)(je.Z,{color:"primary",onClick:n,Icon:Ap.Z,disabled:l}),(0,Ie.tZ)(Dc.Z,{width:"var(--space-4)"}),(0,Ie.tZ)(je.Z,{onClick:r,color:"negative",Icon:Lp.Z,disabled:l})]})})]}),(o||s)&&(0,Ie.BX)(Ie.HY,{children:[(0,Ie.tZ)(Dc.Z,{height:2}),(0,Ie.BX)("div",{className:"jsx-69869520 test-row",children:[(0,Ie.tZ)("div",{className:"jsx-69869520 test-text",children:(0,Ie.tZ)(Oe.Z,{className:Xt()([{"status-passed":"Passed"===o},{"status-failed":"Failed"===o}]),children:u})}),(0,Ie.tZ)(je.Z,{onClick:function(e){return e.stopPropagation(),c(e)},disabled:s,children:"Results"})]})]}),(0,Ie.tZ)(se(),{id:"69869520",children:[".test.jsx-69869520{background-color:var(--background-higher);margin-top:var(--space-8);padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;border-radius:var(--border-radius-8);cursor:pointer;}",".test-row.jsx-69869520 .status-passed{color:var(--accent-positive-default);}",".test-row.jsx-69869520 .status-failed{color:var(--accent-negative-default);}",".test-text.jsx-69869520{width:100%;padding:var(--space-4) 0;padding-right:var(--space-8);word-break:break-all;}",".test.jsx-69869520:hover{background-color:var(--background-higher);}",".test-row.jsx-69869520{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;}"]})]})},yf=function(e){var t=e.text;if(!t)return null;var n=t.split("\n").map((function(e,t){return[e,"".concat(t+1)]}));return""===n[n.length-1][0]&&n.pop(),(0,Ie.BX)(Ee.Ug,{children:[(0,Ie.tZ)("code",{className:"jsx-3220288616 gutter",children:(0,Ie.tZ)("pre",{className:"jsx-3220288616",children:n.map((function(e){var t=(0,J.Z)(e,2);t[0];return t[1]})).join("\n")})}),(0,Ie.tZ)("code",{className:"jsx-3220288616 text",children:(0,Ie.tZ)("pre",{className:"jsx-3220288616",children:t})}),(0,Ie.tZ)(se(),{id:"3220288616",children:[".gutter.jsx-3220288616,.text.jsx-3220288616{color:var(--foreground-default);}",".gutter.jsx-3220288616{min-width:1.5em;}",".text.jsx-3220288616{max-width:80%;}"]})]})},xf=n(37529),wf=n.n(xf),kf=function(e){var t=e.expected,n=e.actual;if(!t||!n)return null;var r=n.split("\n"),i=t.split("\n"),a=i.length>r.length?i:r,o=a.map((function(e,t){return[e,"".concat(t+1)]})),s=a.map((function(e,t){var n=t<r.length?r[t]:"",a=t<i.length?i[t]:"";return(0,Ie.BX)(Ie.HY,{children:[wf()(n,a).map((function(e,t){var n;return-1===e[0]&&(n={backgroundColor:"var(--accent-negative-dimmer)",textDecoration:"line-through"}),1===e[0]&&(n={backgroundColor:"var(--accent-positive-dimmer)",textDecoration:"underline"}),(0,Ie.tZ)("span",{style:n,children:e[1]},t)})),(0,Ie.tZ)("br",{})]})}));return(0,Ie.BX)(Ee.Ug,{children:[(0,Ie.tZ)("code",{className:"jsx-3220288616 gutter",children:(0,Ie.tZ)("pre",{className:"jsx-3220288616",children:o.map((function(e){var t=(0,J.Z)(e,2);t[0];return t[1]})).join("\n")})}),(0,Ie.tZ)("code",{className:"jsx-3220288616 text",children:(0,Ie.tZ)("pre",{className:"jsx-3220288616",children:s})}),(0,Ie.tZ)(se(),{id:"3220288616",children:[".gutter.jsx-3220288616,.text.jsx-3220288616{color:var(--foreground-default);}",".gutter.jsx-3220288616{min-width:1.5em;}",".text.jsx-3220288616{max-width:80%;}"]})]})},Zf=function(e){var t,n=e.test,r=e.actualOutput,i=e.isOpen,a=e.isResults,o=e.onRequestClose,s=e.didFail,c=e.error,l=n?cf(n.type):"",u=null===r||void 0===r?void 0:r.split("\n"),d=null===n||void 0===n?void 0:n.output.split("\n"),p=null===n||void 0===n?void 0:n.output;return s=null!==(t=s)&&void 0!==t?t:"Failed"===(null===n||void 0===n?void 0:n.status),(0,Ie.BX)(zt.Z,{onRequestClose:o,isOpen:i&&void 0!==n,children:[(0,Ie.BX)("div",{className:"jsx-565168207 test-info",children:[(0,Ie.BX)(Ee.gC,{align:"center",spacing:1,children:[(0,Ie.BX)(Xe.Z,{level:4,children:[a&&"Test results: ",null===n||void 0===n?void 0:n.name]}),(0,Ie.BX)(Ee.Ug,{spacing:1,children:[(0,Ie.tZ)("div",{role:"tooltip","data-microtip-position":"top","aria-label":l,className:"jsx-565168207 test-type",children:(0,Ie.tZ)(Oe.Z,{align:"center",size:"small",children:null===n||void 0===n?void 0:n.type})}),a&&(null===n||void 0===n?void 0:n.status)&&(0,Ie.tZ)("div",{className:"jsx-565168207 "+"test-status ".concat(null===n||void 0===n?void 0:n.status),children:(0,Ie.tZ)(Oe.Z,{align:"center",size:"small",children:null===n||void 0===n?void 0:n.status})})]})]}),(0,Ie.tZ)(Dc.Z,{height:6}),(0,Ie.tZ)("div",{className:"jsx-565168207 test-io-row",children:(0,Ie.BX)("div",{className:"jsx-565168207 test-io-section",children:[(0,Ie.tZ)("div",{className:"jsx-565168207 test-io-label",children:a?(0,Ie.BX)(Ee.Ug,{spacing:1,align:"center",children:[(0,Ie.tZ)(Oe.Z,{size:"medium",children:"Expected output"}),(0,Ie.tZ)(Oe.Z,{size:"xsmall",children:(0,Ie.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Your program is expected to print this output.",className:"jsx-565168207 help",children:"?"})})]}):(0,Ie.tZ)(Oe.Z,{size:"medium",children:"Output"})}),(0,Ie.tZ)(Dc.Z,{height:"var(--space-8)"}),(0,Ie.tZ)("div",{className:"jsx-565168207 test-io-box",children:(0,Ie.tZ)(yf,{text:null===n||void 0===n?void 0:n.output})})]})}),(0,Ie.tZ)(Dc.Z,{height:2}),(0,Ie.tZ)("div",{className:"jsx-565168207 test-io-row",children:(0,Ie.BX)("div",{className:"jsx-565168207 test-io-section",children:[(0,Ie.tZ)("div",{className:"jsx-565168207 test-io-label",children:a?(0,Ie.BX)(Ee.Ug,{spacing:1,align:"center",children:[(0,Ie.tZ)(Oe.Z,{size:"medium",children:"Actual output"}),(0,Ie.tZ)(Oe.Z,{size:"xsmall",children:(0,Ie.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Your program actually printed this output.",className:"jsx-565168207 help",children:"?"})})]}):(0,Ie.tZ)(Oe.Z,{size:"medium",children:"Input"})}),(0,Ie.tZ)(Dc.Z,{height:"var(--space-8)"}),(0,Ie.tZ)("div",{className:"jsx-565168207 test-io-box",children:(0,Ie.tZ)(yf,{text:a?r:null===n||void 0===n?void 0:n.input})})]})}),a&&s&&(0,Ie.tZ)(Ie.HY,{children:c?(0,Ie.BX)(Ie.HY,{children:[(0,Ie.tZ)(Dc.Z,{height:2}),(0,Ie.tZ)("div",{className:"jsx-565168207 test-io-row",children:(0,Ie.BX)("div",{className:"jsx-565168207 test-io-section",children:[(0,Ie.tZ)("div",{className:"jsx-565168207 test-io-label",children:(0,Ie.tZ)(Oe.Z,{size:"medium",children:"Error(s)"})}),(0,Ie.tZ)(Dc.Z,{height:"var(--space-8)"}),(0,Ie.tZ)("div",{className:"jsx-565168207 test-io-box",children:(0,Ie.tZ)(yf,{text:c.stderr||c.message})})]})})]}):(null===n||void 0===n?void 0:n.type)!==Se.Flv.Regex&&d&&u&&(0,Ie.BX)(Ie.HY,{children:[(0,Ie.tZ)(Dc.Z,{height:2}),(0,Ie.tZ)("div",{className:"jsx-565168207 test-io-row",children:(0,Ie.BX)("div",{className:"jsx-565168207 test-io-section",children:[(0,Ie.tZ)("div",{className:"jsx-565168207 test-io-label",children:(0,Ie.BX)(Ee.Ug,{spacing:1,align:"center",children:[(0,Ie.tZ)(Oe.Z,{size:"medium",children:"Difference"}),(0,Ie.tZ)(Oe.Z,{size:"xsmall",children:(0,Ie.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Modify your output to match the expected output.",className:"jsx-565168207 help",children:"?"})})]})}),(0,Ie.tZ)(Dc.Z,{height:"var(--space-8)"}),(0,Ie.tZ)("div",{className:"jsx-565168207 test-io-box",children:(0,Ie.tZ)(kf,{expected:p,actual:r})})]})})]})})]}),(0,Ie.tZ)(se(),{id:"565168207",children:[".test-info.jsx-565168207{padding:var(--space-24);display:relative;}",".test-io-line-spacing.jsx-565168207{width:var(--space-8);-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}",".test-io-row.jsx-565168207{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}",".test-io-line-number.jsx-565168207{display:inline-block;min-width:1.5em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}",".test-io-line.jsx-565168207{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;font-family:var(--font-family-code);}",".test-io-line-content.jsx-565168207{display:inline-block;}",".test-io-label.jsx-565168207{padding-bottom:var(--space-8);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}",".test-io-label.jsx-565168207 .text{color:var(--foreground-dimmer);}",".test-io-section.jsx-565168207{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;width:100%;}",".test-io-box.jsx-565168207{height:100%;border:1px solid var(--outline-dimmest);box-sizing:border-box;border-radius:var(--border-radius-4);padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow-x:auto;}",".test-io-box.jsx-565168207 .text{white-space:nowrap;}",".test-type.jsx-565168207,.test-status.jsx-565168207{background-color:var(--background-highest);border-radius:var(--border-radius-4);padding:var(--space-8);display:inline-block;spacing:1;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}",".test-status.jsx-565168207 .text{color:var(--white);}",".test-status.Passed.jsx-565168207{background-color:var(--accent-positive-default);}",".test-status.Failed.jsx-565168207{background-color:var(--accent-negative-default);}",".help.jsx-565168207{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border:1px solid var(--background-higher);border-radius:100%;width:var(--space-16);height:var(--space-16);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;}"]})]})},jf=n(24662),Of=n(46829),Ef=n(67966);function _f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_f(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Sf,Pf=function(){var e,t,n,r,i,a,o,s,c=(0,Fe.Z)(),l=c.iotester,u=c.dotReplit,d=c.container,p=(0,sn.Z)(),f=p.showError,h=p.showConfirm,m=pe.useState([]),g=(0,J.Z)(m,2),v=g[0],b=g[1],y=pe.useState(),x=(0,J.Z)(y,2),w=x[0],k=x[1],Z=pe.useState(d.getConnectionState()),j=(0,J.Z)(Z,2),O=j[0],E=j[1],_=pe.useState(l.state),C=(0,J.Z)(_,2),S=C[0],P=C[1],N=pe.useState(),I=(0,J.Z)(N,2),T=I[0],D=I[1],R=(0,Of.useApolloClient)();pe.useEffect((function(){return d.onConnectionStateChanged(E)}),[E,d]);var A=(0,Ce.Z)(),L=(0,Se.CHr)({variables:{replId:A}}),B="Repl"===(null===(e=L.data)||void 0===e||null===(t=e.repl)||void 0===t?void 0:t.__typename)?L.data.repl:null,U="Team"===(null===B||void 0===B||null===(n=B.owner)||void 0===n?void 0:n.__typename)&&B.owner.id||null,M=(0,Se.vkX)({onCompleted:function(e){e&&e.saveIOTestResults&&f(e.saveIOTestResults.message)}}),F=(0,J.Z)(M,1)[0];pe.useEffect((function(){var e=[l.onStateChanged((function(e){P(e),U&&e===jf.Z.Idle&&b((function(e){return F({variables:{replId:A,results:Object.values(e).map((function(e){var t,n;return Cf(Cf({},e),{},{output:null!==(t=e.error)&&void 0!==t&&t.stderr?(null!==(n=e.output)&&void 0!==n?n:"")+e.error:e.output})})),teamId:U}}).catch((function(t){xt.Tb(t,(function(t){return t.setExtras({results:e,payload:T})}))})),e}))})),l.onError((function(e){f(e.message)})),l.onTestResult((function(e){b((function(t){var n=Cf(Cf({},t[e.testId]),{},{testId:e.testId,status:"passed"===e.body?Se.kQ0.Passed:Se.kQ0.Failed});return"error"===e.body&&(n.error=e.error),Cf(Cf({},t),{},(0,ee.Z)({},e.testId,n))}))})),l.onInstructionResult((function(e){b((function(t){var n,r,i,a,o,s=Math.abs(e.instructionId),c="";switch(e.body){case"passed":c+=null!==(n=e.passed.output)&&void 0!==n?n:"";break;case"failed":c+=null!==(r=e.failed.output)&&void 0!==r?r:"";break;case"timeout":c+=null!==(i=e.timeout.output)&&void 0!==i?i:"";break;case"error":c+=e.error.message}return Cf(Cf({},t),{},(0,ee.Z)({},s,Cf(Cf({},t[s]),{},{testId:s,output:(null!==(a=null===(o=v[s])||void 0===o?void 0:o.output)&&void 0!==a?a:"")+c})))}))}))];return function(){return e.forEach((function(e){return e()}))}}),[v,f,P,l,A,U,T,F]),pe.useEffect((function(){var e=function(e){e instanceof Error&&f(e.message),xt.Tb(e)};return pf(u).then(k).catch(e),u.watch((function(){return pf(u).then(k).catch(e)}))}),[u,k,f]);var X=null===B||void 0===B?void 0:B.ioTests,z=(0,Se.Nej)({onError:function(e){return f(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.deleteTemplateTest)||void 0===t?void 0:t.__typename)?f(e.deleteTemplateTest.message):(h("Test deleted!"),L.refetch())}}),V=(0,J.Z)(z,2),G=V[0],H=V[1],W=(0,Se.AAz)({onError:function(e){return f(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.updateTemplateTest)||void 0===t?void 0:t.__typename)?f(e.updateTemplateTest.message):"ReplTemplateTest"===e.updateTemplateTest.__typename&&(h("Test updated!"),R.writeFragment({fragment:Se.GgA,data:e.updateTemplateTest}))}}),K=(0,J.Z)(W,2),q=K[0],Y=K[1],Q=(0,Se.pVf)({onError:function(e){return f(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.createTemplateTest)||void 0===t?void 0:t.__typename)?f(e.createTemplateTest.message):(h("Test created!"),L.refetch())}}),$=(0,J.Z)(Q,2),te=$[0],ne=$[1],re=L.loading||H.called&&H.loading||Y.called&&Y.loading||ne.called&&ne.loading;pe.useEffect((function(){re||D(w&&X&&X.length>0?{runInfo:w,tests:X.map(uf)}:void 0)}),[X,w,D,re]);var ie=pe.useState(!1),ae=(0,J.Z)(ie,2),oe=ae[0],ce=ae[1],le=pe.useState(!1),ue=(0,J.Z)(le,2),de=ue[0],fe=ue[1],he=pe.useState(!1),me=(0,J.Z)(he,2),ge=me[0],ve=me[1],be=pe.useState(),ye=(0,J.Z)(be,2),xe=ye[0],we=ye[1],ke="undefined"!==typeof xe&&"Repl"===(null===(r=L.data)||void 0===r?void 0:r.repl.__typename)&&L.data.repl.ioTests[xe]||void 0,Ze="Repl"===(null===(i=L.data)||void 0===i?void 0:i.repl.__typename)&&L.data.repl.isProject;if(L.error)return(0,Ie.BX)("div",{className:"jsx-707768097 wrapper",children:[(0,Ie.tZ)(Oe.Z,{align:"center",children:"Unable to fetch tests"}),(0,Ie.tZ)(se(),{id:"707768097",children:[".wrapper.jsx-707768097{padding:var(--deprecated-spacing-2);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]});var Ee=function(e){var t;if(void 0!==(null===(t=v[e])||void 0===t?void 0:t.status))return v[e].status===Se.kQ0.Passed?"Passed":"Failed"};return(0,Ie.BX)("div",{className:"jsx-2848896096 tests-panel",children:[(0,Ie.tZ)("div",{className:"jsx-2848896096 tests-header",children:(0,Ie.tZ)(Xe.Z,{level:4,children:"Input/Output Tests"})}),L.loading?(0,Ie.tZ)("div",{className:"jsx-2848896096 spinner",children:(0,Ie.tZ)(Vt.Z,{})}):(0,Ie.BX)("div",{className:"jsx-2848896096 tests",children:[(0,Ie.BX)("div",{className:"jsx-2848896096 button-bar",children:[Ze&&(0,Ie.tZ)(je.Z,{color:"green",Icon:ln.Z,className:"create-test-button",disabled:re||S!==jf.Z.Idle,onClick:function(){we(void 0),ce(!0)},children:"Create test"}),!Ze&&X&&0===X.length?(0,Ie.tZ)(Oe.Z,{children:"This project has no tests "}):(0,Ie.tZ)(je.Z,{color:"positive",Icon:Yc.Z,onClick:function(){var e;if(!T||"Repl"!==(null===B||void 0===B?void 0:B.__typename)||"Team"!==(null===(e=B.owner)||void 0===e?void 0:e.__typename)||l.state!==jf.Z.Idle){var t=new Error("no tests or run info");throw xt.Tb(t,(function(e){return e.setExtra("payload",T)})),t}b({}),(0,Zt.track)(Zt.events.AUTOGRADER_STARTED),l.run(T).catch((function(e){xt.Tb(e,(function(e){return e.setExtra("payload",T)})),f(e.message)}))},disabled:re||S!==jf.Z.Idle||!T||O!==Ef.e.CONNECTED,children:"Run tests"})]}),null===X||void 0===X?void 0:X.map((function(e,t){return(0,Ie.tZ)(bf,{test:e,onEdit:function(){we(t),ce(!0)},onDelete:function(){G({variables:{testId:e.id}})},onView:function(){we(t),fe(!0),ve(!1)},onShowFailed:function(){we(t),fe(!0),ve(!0)},isRunning:S!==jf.Z.Idle&&void 0!==v[e.id]&&void 0===v[e.id].status,isTeacherView:Ze,status:Ee(e.id),disableButtons:re||S!==jf.Z.Idle},e.id)})),(0,Ie.tZ)(vf,{test:ke,isOpen:oe,readOnly:!Ze,onRequestClose:function(){ce(!1),we(void 0)},onCancel:function(){ce(!1),we(void 0)},onSubmit:function(e){var t,n,r,i;void 0!==e.testId?(q({variables:{input:e}}),we(void 0)):"Repl"===(null===(t=L.data)||void 0===t||null===(n=t.repl)||void 0===n?void 0:n.__typename)&&null!==(r=L.data)&&void 0!==r&&null!==(i=r.repl)&&void 0!==i&&i.template&&te({variables:{input:Cf(Cf({},e),{},{templateId:L.data.repl.template.id})}}),ce(!1)}}),(0,Ie.tZ)(Zf,{test:ke,isOpen:de,actualOutput:"undefined"!==typeof ke?null===(a=v[ke.id])||void 0===a?void 0:a.output:void 0,error:ke&&(null===(o=v[ke.id])||void 0===o?void 0:o.error),didFail:ke&&(null===(s=v[ke.id])||void 0===s?void 0:s.status)===Se.kQ0.Failed,isResults:ge,onRequestClose:function(){fe(!1),we(void 0)}})]}),(0,Ie.tZ)(se(),{id:"2848896096",children:[".flex-grow.jsx-2848896096{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".spacer-1.jsx-2848896096{padding:var(--space-4);}",".tests-header.jsx-2848896096{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;position:relative;padding:var(--space-4) 0 var(--space-8) 0;margin-bottom:var(--space-8);color:var(--foreground-default);width:100%;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}",".button-bar.jsx-2848896096{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-bottom:var(--space-8);}",".button-bar.jsx-2848896096>button{margin-right:var(--space-8);margin-bottom:var(--space-8);}",".spinner.jsx-2848896096{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);}",".tests-panel.jsx-2848896096{min-width:200px;background-color:var(--background-default);color:var(--foreground-default);overflow:hidden auto;}",".section.jsx-2848896096{height:calc(100% - 50px);}"]})]})};!function(e){e[e.None=0]="None",e[e.Choose=1]="Choose",e[e.Unit=2]="Unit",e[e.IO=3]="IO"}(Sf||(Sf={}));var Nf=function(e){var t=e.wid,n=e.pud,r=pe.useState(null),i=(0,J.Z)(r,2),a=i[0],o=i[1],s=pe.useRef(Sf.None),c=(0,Ce.Z)(),l=rf(),u=l.language,d=l.isLoading,p=(0,Se.CHr)({variables:{replId:c}}),f=p.loading;return pe.useEffect((function(){var e,t,n=null===(e=p.data)||void 0===e?void 0:e.repl;if("Repl"===(null===n||void 0===n?void 0:n.__typename)){var r=n.unitTests,i=n.ioTests,a=Sf.Choose;a=i.length>0?Sf.IO:null!==r&&void 0!==r&&r.tests&&(null===(t=r.tests)||void 0===t?void 0:t.length)>0||null!==r&&void 0!==r&&r.meta?Sf.Unit:n.currentUserPermissions.writeTests?s.current!==Sf.None?s.current:Sf.Choose:Sf.None,o(a)}}),[p.data,t,n]),f||d?(0,Ie.BX)("div",{className:"jsx-707544915",children:[(0,Ie.tZ)(Vt.Z,{}),(0,Ie.tZ)(se(),{id:"707544915",children:["div.jsx-707544915{height:100%;width:100%;background-color:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]}):(0,Ie.BX)("div",{className:"jsx-3272328548 testing-controller",children:[a===Sf.None&&(0,Ie.tZ)("div",{className:"jsx-3272328548 empty",children:(0,Ie.tZ)(Oe.Z,{children:"No tests found"})}),a===Sf.Choose&&(0,Ie.BX)(Ee.gC,{align:"center",spacing:2,children:[(0,Ie.tZ)(Xe.Z,{align:"center",level:3,children:"Choose a testing method"}),(0,Ie.BX)("div",{onClick:function(){o(Sf.Unit),s.current=Sf.Unit},className:"jsx-3272328548 "+(Xt()("panel",{"is-disabled":!u})||""),children:[(0,Ie.tZ)(Xe.Z,{level:4,children:"Unit tests"}),(0,Ie.tZ)(Oe.Z,{align:"center",children:u?"A language specific framework that tests individual functions":"Unit tests are not currently supported for this language"})]}),(0,Ie.tZ)("div",{onClick:function(){o(Sf.IO),s.current=Sf.IO},className:"jsx-3272328548 panel",children:(0,Ie.BX)(Ee.gC,{spacing:1,align:"center",children:[(0,Ie.tZ)(Xe.Z,{level:4,children:"Input output tests"}),(0,Ie.tZ)(Oe.Z,{align:"center",children:"Test your program via standard in, and assert based on the result of standard out"})]})})]}),a===Sf.IO&&(0,Ie.tZ)(Pf,{}),a===Sf.Unit&&(0,Ie.tZ)(af,{onBack:function(){return o(Sf.Choose)}}),(0,Ie.tZ)(se(),{id:"3272328548",children:[".empty.jsx-3272328548{padding:var(--space-16);border-radius:var(--border-radius-4);box-shadow:var(--shadow-2);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".testing-controller.jsx-3272328548{overflow-y:auto;padding:var(--space-8);height:100%;width:100%;background-color:var(--background-default);box-shadow:var(--shadow-1);}",".panel.jsx-3272328548{width:100%;border-radius:var(--border-radius-4);border:1px solid var(--background-higher);max-width:200px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;padding:var(--space-8);}",".panel.jsx-3272328548:hover{background-color:var(--background-root);}",".panel.is-disabled.jsx-3272328548{opacity:0.5;pointer-events:none;}"]})]})},If=function(){return(0,Ie.BX)("div",{className:"jsx-2087355348 unit-tests",children:[(0,Ie.tZ)(af,{}),(0,Ie.tZ)(se(),{id:"2087355348",children:[".unit-tests.jsx-2087355348{background-color:var(--background-default);width:100%;height:100%;overflow-y:auto;padding:var(--space-8);}"]})]})},Tf=n(81758),Df=n(17228),Rf=n(92120);function Af(e){var t=e.direction,n=e.url,r=(0,Ie.BX)("span",{className:se().dynamic([["2863519783",["left"===t?"rotate(90deg)":"rotate(-90deg)"]]])+" "+(Xt()("chevron",{hoverable:void 0!==n})||""),children:[(0,Ie.tZ)(Pu.Z,{size:20,color:n?"var(--foreground-dimmest)":"var(--background-root)"}),(0,Ie.tZ)(se(),{id:"2863519783",dynamic:["left"===t?"rotate(90deg)":"rotate(-90deg)"],children:[".chevron.__jsx-style-dynamic-selector{display:inline-block;border-radius:var(--border-radius-4);-webkit-transition:0.2s all;transition:0.2s all;}",".chevron.__jsx-style-dynamic-selector svg{width:24px;height:24px;-webkit-transform:".concat("left"===t?"rotate(90deg)":"rotate(-90deg)",";-ms-transform:").concat("left"===t?"rotate(90deg)":"rotate(-90deg)",";transform:").concat("left"===t?"rotate(90deg)":"rotate(-90deg)",";}"),".hoverable.__jsx-style-dynamic-selector{cursor:pointer;}",".hoverable.chevron.__jsx-style-dynamic-selector svg:hover{stroke:var(--accent-primary-default);}",".hoverable.__jsx-style-dynamic-selector:hover{background:var(--accent-primary-default);}"]})]});return n?(0,Ie.tZ)(Dt.default,{href:n,children:(0,Ie.tZ)("a",{children:r})}):r}var Lf,Bf=function(){return(0,Ie.BX)("span",{title:"late",className:"jsx-525860581",children:["late",(0,Ie.tZ)(se(),{id:"525860581",children:["span.jsx-525860581{display:inline-block;color:var(--accent-negative-default);border:1px solid var(--accent-negative-default);border-radius:var(--border-radius-4);padding:1px var(--space-4);font-size:var(--font-size-small);}"]})]})},Uf=["result","selected","current","isLate"];function Mf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ff(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mf(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xf(e){var t=Lf.NotStarted,n=Lf.Started,r=Lf.Submitted,i=Lf.Reviewed;switch(e){case t:return"Not Started";case n:return"Not submitted yet";case r:return"Submitted";case i:return"Reviewed";default:return""}}function zf(e){return e?e.timeSubmitted||e.timeLastReviewed?e.timeSubmitted&&!e.timeLastReviewed?Lf.Submitted:!e.timeSubmitted&&e.timeLastReviewed?Lf.Reviewed:e.timeSubmitted&&e.timeLastReviewed?new Date(e.timeSubmitted)>new Date(e.timeLastReviewed)?Lf.Submitted:Lf.Reviewed:void 0:Lf.Started:Lf.NotStarted}!function(e){e.NotStarted="not-started",e.Started="started",e.Submitted="submitted",e.Reviewed="reviewed"}(Lf||(Lf={}));var Vf=function(e,t){if(e)return t?"".concat(e,"#").concat(t):e};function Gf(e){var t=e.result,n=e.selected,r=e.current,i=e.isLate,a=(0,Vo.Z)(e,Uf),o=(0,Nn.Z)(),s=r?"":Vf(t.url,o),c=(0,Ie.BX)(Ee.Ug,{spacing:1,align:"center",children:[(0,Ie.tZ)("div",{"data-microtip-position":"right","aria-label":Xf(t.status),role:"tooltip",className:"jsx-2023294099 indicator-container",children:(0,Ie.tZ)("div",{className:"jsx-2023294099 "+(Xt()("indicator",t.status)||"")})}),(0,Ie.tZ)(on.Z,{url:t.image}),(0,Ie.tZ)("div",{className:"jsx-2023294099 name",children:t.name}),i&&(0,Ie.tZ)(Bf,{}),(0,Ie.tZ)(se(),{id:"2023294099",children:[".indicator-container.jsx-2023294099{width:10px;height:10px;box-sizing:content-box;padding:var(--space-4);}",".name.jsx-2023294099{color:var(--foreground-dimmer);font-size:var(--font-size-default);max-width:230px;text-overflow:ellipsis;overflow:hidden;}",".indicator.jsx-2023294099{width:8px;height:8px;border-radius:16px;}",".indicator.submitted.jsx-2023294099{background:var(--accent-yellow-dimmer);}",".indicator.reviewed.jsx-2023294099{background:var(--accent-positive-default);}",".indicator.started.jsx-2023294099{border:2px solid var(--foreground-dimmest);}"]})]});return(0,Ie.BX)("div",Ff(Ff({},a),{},{className:"jsx-870481965 "+(Xt()("result",t.status,{selected:n,current:r})||""),children:[s?(0,Ie.BX)(Ie.HY,{children:[(0,Ie.tZ)(Dt.default,{href:s,children:(0,Ie.tZ)("a",{className:"jsx-870481965 result-link",children:c})},t.submissionId),(0,Ie.tZ)("a",{href:s,target:"_blank",role:"tooltip","data-microtip-position":"left","aria-label":"Open in a new tab",className:"jsx-870481965 result-external-link",children:(0,Ie.tZ)(Rf.Z,{color:"var(--foreground-default)"})})]}):(0,Ie.tZ)("div",{className:"jsx-870481965 result-link",children:c}),(0,Ie.tZ)(se(),{id:"870481965",children:[".result.jsx-870481965{cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;background-color:var(--background-default);}",".result.not-started.jsx-870481965{opacity:0.4;}",".result.current.jsx-870481965{background-color:var(--background-root);}",".selected.jsx-870481965{background-color:var(--background-root);opacity:1 !important;}",".result-link.jsx-870481965{-webkit-text-decoration:none;text-decoration:none;padding:var(--space-8);}",".result-external-link.jsx-870481965{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:var(--space-8);opacity:0;margin-left:auto;}",".result.jsx-870481965:hover .result-external-link.jsx-870481965{opacity:1;}",".result-external-link.jsx-870481965 svg{-webkit-transition:0.3s stroke;transition:0.3s stroke;}",".result-external-link.jsx-870481965:hover svg{stroke:var(--accent-primary-default);}"]})]}))}var Hf=function(e){var t,n,r,i=e.team,a=e.submission,o=e.submissionList,s=e.template,c=(0,ve.useRouter)(),l=(0,Nn.Z)(),u=pe.useState([]),d=(0,J.Z)(u,2),p=d[0],f=d[1],h=pe.useState(""),m=(0,J.Z)(h,2),g=m[0],v=m[1],b=(0,fn.Kb)({items:p,defaultHighlightedIndex:0,onSelectedItemChange:function(e){var t=e.selectedItem;p.length&&t&&-1!==e.highlightedIndex&&t.url&&c.push(t.url)}}),y=b.isOpen,x=b.getInputProps,w=b.getMenuProps,k=b.getItemProps,Z=b.openMenu,j=b.highlightedIndex,O=pe.useRef(null);pe.useEffect((function(){y&&O.current&&O.current.focus()}),[y]);var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(a.isGroupSubmission){var t=o;0!==e.length&&(t=t.filter((function(t){var n;return null===(n=t.submissionGroup)||void 0===n?void 0:n.users.some((function(t){var n;return null===(n=(null===t||void 0===t?void 0:t.fullName)||(null===t||void 0===t?void 0:t.username))||void 0===n?void 0:n.toLocaleLowerCase().includes(e.toLocaleLowerCase())}))})));var n=t.map((function(e){var t,n=e.submissionGroup.users.map((function(e){return e.fullName||e.username})).join(", ");return{image:e.submissionGroup.users[0].image,name:n,url:null===(t=e.repl)||void 0===t?void 0:t.url,status:zf(e),submissionId:e.id,timeSubmitted:null===e||void 0===e?void 0:e.timeSubmitted}}));f((0,nn.Z)(n))}else{var r=i.students;r=0===e.length?r.filter((function(e){return e.user})).sort((function(e,t){return(e.nickname||e.user.fullName||e.user.username).localeCompare(t.nickname||t.user.fullName||t.user.username)})):r.filter((function(t){var n,r,i;return null===(n=t.nickname||(null===(r=t.user)||void 0===r?void 0:r.fullName)||(null===(i=t.user)||void 0===i?void 0:i.username))||void 0===n?void 0:n.toLocaleLowerCase().includes(e.toLocaleLowerCase())}));var s=r.map((function(e){var t,n=o.find((function(t){var n;return(null===(n=t.author)||void 0===n?void 0:n.id)===e.user.id}));return{image:e.user.image,name:e.nickname||e.user.fullName||e.user.username,url:null===n||void 0===n||null===(t=n.repl)||void 0===t?void 0:t.url,status:zf(n),submissionId:null===n||void 0===n?void 0:n.id,timeSubmitted:null===n||void 0===n?void 0:n.timeSubmitted}}));f((0,nn.Z)(s))}},_=o.findIndex((function(e){return e.id===a.id})),C=o[_-1],S=o[_+1],P=o.filter((function(e){return e.timeLastReviewed})).length,N=function(e){var t=i.students.find((function(t){var n;return(null===(n=t.user)||void 0===n?void 0:n.id)===(null===e||void 0===e?void 0:e.id)}));return(null===t||void 0===t?void 0:t.nickname)||(null===e||void 0===e?void 0:e.fullName)||"@".concat(null===e||void 0===e?void 0:e.username)};return(0,Ie.BX)("div",Ff(Ff({},w()),{},{className:"jsx-3541875685 submission-search",children:[y&&(0,Ie.BX)("div",{className:"jsx-3541875685 dropdown",children:[(0,Ie.BX)("div",{className:"jsx-3541875685 search-box-container",children:[(0,Ie.tZ)("div",{className:"jsx-3541875685 search-icon",children:(0,Ie.tZ)(qn.Z,{})}),(0,Ie.tZ)("input",Ff(Ff({},x({value:g,placeholder:"Navigate",onKeyDown:function(e){"Escape"===e.key&&f([])},onChange:function(e){var t=e.target.value;E(t),v(t)},ref:O})),{},{className:"jsx-3541875685 search-box"}))]}),(0,Ie.tZ)("div",{className:"jsx-3541875685",children:p.map((function(e,t){return(0,Ie.tZ)(Gf,Ff(Ff({result:e,selected:j===t,current:e.submissionId===a.id},k({index:t,item:e,onClick:function(e){e.nativeEvent.preventDownshiftDefault=!0}})),{},{isLate:s.dueDate&&e.timeSubmitted&&s.dueDate<e.timeSubmitted}))}))})]}),(0,Ie.BX)("div",{className:"jsx-3541875685 navigation-element",children:[(0,Ie.BX)("div",{onClick:function(){Z(),E()},className:"jsx-3541875685 pseudo-search-input",children:[(0,Ie.tZ)("div",{className:"jsx-3541875685 search-icon",children:(0,Ie.tZ)(qn.Z,{})}),(0,Ie.tZ)("div",{className:"jsx-3541875685",children:"Navigate"})]}),(0,Ie.BX)("div",{className:"jsx-3541875685 arrow-navigation",children:[(0,Ie.tZ)(Af,{direction:"left",url:Vf(null===C||void 0===C||null===(t=C.repl)||void 0===t?void 0:t.url,l)}),(0,Ie.BX)("div",{className:"jsx-3541875685",children:[P,"/",o.length]}),(0,Ie.tZ)(Af,{direction:"right",url:Vf(null===S||void 0===S||null===(n=S.repl)||void 0===n?void 0:n.url,l)})]})]}),(0,Ie.tZ)("div",{className:"jsx-3541875685 submission-info",children:a.isGroupSubmission?a.submissionGroup.users.map((function(e){return(0,Ie.tZ)("div",{className:"jsx-3541875685 submitter-row",children:(0,Ie.BX)(Ee.Ug,{spacing:1,align:"center",children:[(0,Ie.tZ)(on.Z,{url:null===e||void 0===e?void 0:e.image}),(0,Ie.tZ)("span",{className:"jsx-3541875685 submission-name",children:N(e)})]})},null===e||void 0===e?void 0:e.id)})):(0,Ie.tZ)("div",{className:"jsx-3541875685 submission-identity",children:(0,Ie.tZ)("div",{className:"jsx-3541875685 submitter-row",children:(0,Ie.BX)(Ee.Ug,{spacing:1,align:"center",children:[(0,Ie.tZ)(on.Z,{url:null===(r=a.author)||void 0===r?void 0:r.image}),(0,Ie.tZ)("span",{className:"jsx-3541875685 submission-name",children:N(a.author)})]})})})}),(0,Ie.tZ)(se(),{id:"3541875685",children:[".submission-search.jsx-3541875685{width:100%;position:relative;border:1px solid;border-radius:var(--border-radius-8);border-color:var(--foreground-dimmest);}",".navigation-element.jsx-3541875685{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".pseudo-search-input.jsx-3541875685{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;color:var(--foreground-dimmer);font-size:var(--font-size-default);}",".arrow-navigation.jsx-3541875685{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;color:var(--foreground-dimmest);font-size:var(--font-size-small);-webkit-align-items:baseline;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;padding:0 var(--space-8);}",".submitter-row.jsx-3541875685{-webkit-text-decoration:none;text-decoration:none;color:var(--foreground-default);}",".submission-info.jsx-3541875685{display:grid;grid-gap:var(--space-8);padding:var(--space-16);}",".submission-name.jsx-3541875685{color:var(--foreground-dimmer);font-size:var(--font-size-default);}",".search-box.jsx-3541875685{border:none;outline:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;font-size:var(--font-size-default);background-color:inherit;color:var(--foreground-default);}",".search-icon.jsx-3541875685{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:var(--space-16);background-color:inherit;}",".search-box-container.jsx-3541875685{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;background-color:var(--background-default);}",".dropdown.jsx-3541875685{position:absolute;background:var(--background-default);z-index:10;width:350px;max-height:426px;overflow-y:scroll;overflow-y:overlay;white-space:nowrap;border:1px solid;border-radius:var(--border-radius-8);border-color:var(--foreground-dimmest);margin:-1px;}"]})]}))};function Wf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wf(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qf=function(e){return{short:(0,yu.Z)(e,"do MMM"),long:(0,yu.Z)(e,"do MMM, hh:mm a")}};function Yf(e){var t=e.submission,n=e.dueDate;return(0,Ie.BX)("div",{className:"jsx-3108116229 submission-info",children:[t.timeSubmitted?(0,Ie.BX)(Ie.HY,{children:[(0,Ie.tZ)("div",{className:"jsx-3108116229 submitted-header",children:(0,Ie.BX)(Ee.Ug,{spacing:1,align:"center",children:[(0,Ie.tZ)(st.Z,{}),(0,Ie.tZ)("span",{className:"jsx-3108116229 submitted-text",children:"Submitted"}),n&&n<t.timeSubmitted&&(0,Ie.tZ)(Bf,{})]})}),(0,Ie.tZ)("div",{className:"jsx-3108116229 submitted-time",children:(0,Ie.BX)(Ee.Ug,{spacing:1,align:"center",children:[(0,Ie.tZ)(Tf.Z,{}),(0,Ie.tZ)("span",{className:"jsx-3108116229",children:qf(new Date(t.timeSubmitted)).long})]})})]}):(0,Ie.BX)(Ie.HY,{children:[(0,Ie.tZ)("div",{className:"jsx-3108116229 submitted-header",children:(0,Ie.BX)(Ee.Ug,{spacing:1,align:"center",children:[(0,Ie.tZ)(cn.Z,{}),(0,Ie.tZ)("span",{className:"jsx-3108116229 submitted-text",children:"Not submitted"})]})}),(0,Ie.tZ)("div",{className:"jsx-3108116229 submitted-time",children:(0,Ie.BX)(Ee.Ug,{spacing:1,align:"center",children:[(0,Ie.tZ)(el.Z,{}),(0,Ie.BX)("span",{className:"jsx-3108116229",children:["Forked"," ",qf(new Date(t.repl.timeCreated)).short]})]})})]}),(0,Ie.tZ)(se(),{id:"3108116229",children:[".submission-info.jsx-3108116229{padding:var(--space-8);background-color:var(--background-root);border-radius:var(--border-radius-8);}",".submitted-header.jsx-3108116229{color:var(--foreground-default);font-weight:var(--font-weight-medium);white-space:nowrap;}",".submitted-header.jsx-3108116229 svg{width:2em;height:2em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}",".submitted-time.jsx-3108116229{color:var(--foreground-dimmer);padding:var(--space-8) var(--space-16);white-space:nowrap;font-size:var(--font-size-default);}",".submitted-time.jsx-3108116229 svg{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}"]})]})}function Qf(e){var t=e.repl,n=e.submission,r=e.onFeedbackCTA,i=void 0===r?function(){}:r,a=(0,Dn.H)(),o=(0,sn.Z)().showError,s=(0,Se.SyV)({onError:function(e){return o(e.message)},onCompleted:function(e){"UserError"===e.reviewRepl.__typename&&o(e.reviewRepl.message)}}),c=(0,J.Z)(s,2),l=c[0],u=c[1].loading,d=(0,Se.F_9)(),p=(0,J.Z)(d,1)[0],f=Boolean(n.timeLastReviewed);return(0,Ie.BX)(or.Z,{css:[Ne.l0.p(8),Ne.l0.borderRadius(8),"",""],children:[(0,Ie.BX)("div",{className:"jsx-2177615436 feedback-header",children:[(0,Ie.tZ)(Gl.Z,{}),(0,Ie.tZ)("span",{className:"jsx-2177615436",children:"Feedback"})]}),(0,Ie.BX)("div",{className:"jsx-2177615436 mark-reviewed",children:[(0,Ie.tZ)(Ln.Z,{id:a("reviewed-status"),disabled:u,checked:f,onChange:function(){return e=!f,void l({variables:{replId:t.id,status:e},optimisticResponse:{reviewRepl:Kf(Kf({},t),{},{submission:Kf(Kf({},n),{},{timeLastReviewed:e?(new Date).toJSON():null})})}});var e}}),(0,Ie.tZ)("label",{htmlFor:a("reviewed-status"),className:"jsx-2177615436",children:f?"Reviewed":"Mark as reviewed"})]}),(0,Ie.BX)("div",{className:"jsx-2177615436 feedback-info",children:[(0,Ie.tZ)(yn.Z,{}),(0,Ie.tZ)("div",{onClick:i,className:"jsx-2177615436",children:"Code feedback"})]}),n.timeSubmitted&&(0,Ie.tZ)("div",{className:"jsx-2177615436 unsubmit",children:(0,Ie.tZ)(je.Z,{onClick:function(){p({variables:{replId:t.id},optimisticResponse:{unsubmitRepl:Kf(Kf({},t),{},{submission:Kf(Kf({},n),{},{timeLastReviewed:null})})}})},fullWidth:!0,children:"Unsubmit"})}),(0,Ie.tZ)(se(),{id:"2177615436",children:[".feedback-header.jsx-2177615436{display:grid;grid-auto-flow:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:var(--space-8);color:var(--foreground-default);font-weight:var(--font-weight-medium);white-space:nowrap;}",".feedback-header.jsx-2177615436 svg{width:1.4em;height:1.4em;padding:0.3em;box-sizing:content-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}",".mark-reviewed.jsx-2177615436,.feedback-info.jsx-2177615436,.unsubmit.jsx-2177615436{display:grid;grid-auto-flow:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:var(--space-8);padding:var(--space-8) var(--space-16);font-size:var(--font-size-default);cursor:pointer;color:var(--foreground-dimmer);}",".feedback-info.jsx-2177615436 svg{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}"]})]})}function Jf(e){var t=e.replUrl;return(0,Ie.tZ)(Dt.default,{href:"".concat(t,"/history"),children:(0,Ie.BX)("a",{target:"_blank",className:"jsx-1397023969",children:[(0,Ie.tZ)(je.Z,{Icon:Ur.HistoryIcon,fullWidth:!1,className:"history-button",children:"See Repl History"}),(0,Ie.tZ)(se(),{id:"1397023969",children:["a.jsx-1397023969{-webkit-text-decoration:none;text-decoration:none;}",".history-button svg{width:1em;}"]})]})})}function $f(e){var t,n,r,i=e.data,a=pe.useState(!1),o=(0,J.Z)(a,2),s=o[0],c=o[1];if(!i||"Repl"!==i.repl.__typename||"Team"!==(null===(t=i.repl.owner)||void 0===t?void 0:t.__typename)||"ReplSubmission"!==(null===(n=i.repl.submission)||void 0===n?void 0:n.__typename)||"ReplTemplate"!==(null===(r=i.repl.template)||void 0===r?void 0:r.__typename))return null;var l=i.repl.submission,u=i.repl.template.submissions;return(0,Ie.BX)("div",{className:"jsx-4141385795 education-pane-container",children:[(0,Ie.BX)("div",{className:"jsx-4141385795 contents",children:[(0,Ie.tZ)("div",{className:"jsx-4141385795 template-selector-container",children:(0,Ie.tZ)(Hf,{team:i.repl.owner,template:i.repl.template,submission:l,submissionList:u})}),(0,Ie.tZ)(Yf,{submission:l,dueDate:i.repl.template.dueDate}),(0,Ie.tZ)(Qf,{repl:i.repl,submission:l,onFeedbackCTA:function(){return c(!0)}}),(0,Ie.tZ)("div",{className:"jsx-4141385795 buffer"})]}),(0,Ie.BX)("div",{className:"jsx-4141385795 bottom-dock",children:["Repl"===i.repl.__typename&&(0,Ie.tZ)(Jf,{replUrl:i.repl.url}),(0,Ie.tZ)("div",{className:"jsx-4141385795",children:(0,Ie.tZ)(Dt.default,{href:"/team/".concat(i.repl.owner.username,"/templates/").concat(i.repl.template.repl.slug),children:(0,Ie.tZ)(je.Z,{Icon:Df.Z,children:"Return to submissions"})})})]}),(0,Ie.tZ)(Pn,{isOpen:s,onRequestClose:function(){return c(!1)}}),(0,Ie.tZ)(se(),{id:"4141385795",children:[".education-pane-container.jsx-4141385795{padding:var(--space-8);max-width:400px;width:inherit;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow:hidden;}",".contents.jsx-4141385795{display:grid;grid-gap:var(--space-16);}",".bottom-dock.jsx-4141385795{display:grid;grid-gap:var(--space-8);margin-top:auto;}",".template-selector-container.jsx-4141385795{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]})}var eh,th=n(70693),nh=function(e){var t=e.fileName,n=e.docRef,r=e.initialContents,i=(0,kp.Z)({filePath:t,fontSize:14,indentSize:4,indentIsSpaces:!0}),a=i.view,o=i.ref;return pe.useEffect((function(){if(a){var e=Zp.tk.updateListener.of((function(e){n.current=e.state.doc}));a.dispatch({effects:jp.Py.appendConfig.of(e)}),a.focus()}}),[a,n]),pe.useEffect((function(){a&&(a.state.doc.length||a.dispatch({changes:{from:0,insert:r}}))}),[a,r]),(0,Ie.BX)("div",{className:"jsx-3673349710 editable-area",children:[(0,Ie.tZ)("div",{className:"jsx-3673349710 editor-wrapper",children:(0,Ie.tZ)("div",{className:"jsx-3673349710 editor",children:(0,Ie.tZ)("div",{ref:o,className:"jsx-3673349710"})})}),(0,Ie.tZ)(se(),{id:"3673349710",children:[".editable-area.jsx-3673349710{width:100%;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;border:1px solid var(--background-higher);border-radius:var(--border-radius-4);padding:var(--space-8) 0;}",".editor-wrapper.jsx-3673349710{height:450px;padding-bottom:var(--space-8);-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;position:relative;}",".editor.jsx-3673349710{overflow:auto;position:absolute;width:100%;height:100%;}",".loader.jsx-3673349710{height:100%;width:100%;z-index:5;}"]})]})},rh=function(e){var t=e.title,n=e.fileName,r=e.initialContents,i=e.isOpen,a=e.onSave,o=e.onCancel,s=pe.useRef(null);return(0,Ie.BX)(zt.Z,{width:"large",isOpen:i,onRequestClose:function(){},preventClose:!0,children:[(0,Ie.tZ)("div",{className:"jsx-2888062367 editor-modal",children:(0,Ie.BX)(Ee.gC,{align:"stretch",spacing:2,children:[(0,Ie.BX)(Xe.Z,{level:3,children:["Edit ",t.toLowerCase()]}),(0,Ie.tZ)(nh,{docRef:s,fileName:n,initialContents:r}),(0,Ie.tZ)(Ee.Ug,{justify:"end",align:"end",children:(0,Ie.BX)(Ee.Ug,{justify:"end",align:"end",spacing:1,children:[(0,Ie.tZ)(je.Z,{onClick:function(){return o()},children:"Cancel"}),(0,Ie.tZ)(je.Z,{color:"primary",onClick:function(){var e;return s.current&&a(null===(e=s.current)||void 0===e?void 0:e.toString())},children:"Save"})]})})]})}),(0,Ie.tZ)(se(),{id:"2888062367",children:[".editor-modal.jsx-2888062367{padding:var(--space-16);}"]})]})};function ih(e){var t="For example, here is a code block in ".concat(e);switch(e){case"python3":return"".concat(t,'\n```python\ndef hello_world():\n  print("hello world!")\n```\n');case"java10":return"".concat(t,'\n```java\npublic class Main {\n  public static void main(String[] args) {\n    System.out.println("hello world");\n  }\n}\n```\n');case"html":return"".concat(t,"\n```python\n<html>\n<body>\n  <h1>hello world</h1>\n</body>\n</html>\n``")}return""}!function(e){e.LessonPlan="lessonplan.md",e.Instructions="instructions.md"}(eh||(eh={}));var ah=n(8309),oh=n(25108);function sh(e){var t=e.attachments;return(0,Ie.tZ)("div",{className:"manage-attachments",children:(0,Ie.BX)(Ee.gC,{spacing:2,children:[(0,Ie.tZ)(ch,{attachment:t.find((function(e){return e.fileName===eh.LessonPlan})),fileName:eh.LessonPlan,label:"Lesson plan",helpText:"Upload teacher facing materials"}),(0,Ie.tZ)(ch,{attachment:t.find((function(e){return e.fileName===eh.Instructions})),fileName:eh.Instructions,label:"Instructions",helpText:"Upload student facing materials"})]})})}function ch(e){var t,n=e.attachment,r=e.fileName,i=e.label,a=e.helpText,o=(0,xa.Z)(),s=(0,sn.Z)(),c=s.showConfirm,l=s.showError,u=(0,ft.I0)(),d=Mu(),p=(0,Se.RG9)({onCompleted:function(){return c("Updated "+r)},onError:function(e){oh.log(e),l("Error")}}),f=(0,J.Z)(p,2),h=f[0],m=f[1],g=pe.useCallback(function(){var e=(0,$.Z)(le().mark((function e(t){return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o&&(h({variables:{input:{replId:o.id,fileName:r,contents:t,lastModified:(new Date).toISOString()}}}),r===eh.Instructions&&u({type:"INSTRUCTIONS_UPLOADED",wid:d,contents:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o,r,h,d,u]);return o&&(t=r===eh.LessonPlan?function(e){var t=e.language;return"# Lesson plan\n  \n  ** this file should contain teacher lesson plan details ** \n\n  __ students will never see this __\n\n  ## Learning Objectives\n  1. \n  2. \n  3. \n\n  Use [Markdown](https://gist.github.com/cuonggt/9b7d08a597b167299f0d) to format your lesson plan.\n\n  ".concat(ih(t),"\n  ")}({language:o.language}):function(e){var t=e.language;return"# Instructions  \n\n  ** this file should contain student lesson instructions **\n\n  _ students will see these instructions in a read-only workspace tab _\n\n  ## Steps\n  1. \n  2. \n  3. \n\n  Use [Markdown](https://gist.github.com/cuonggt/9b7d08a597b167299f0d) to format your instructions.\n\n  ".concat(ih(t),"\n  ")}({language:o.language})),(0,Ie.tZ)(lh,{loading:!o||m.loading,fileName:r,contents:null===n||void 0===n?void 0:n.contents,defaultContents:t,label:i,helpText:a,attachmentLastUploadedAgo:n?(0,ah.Sy)(new Date(n.timeUpdated)):void 0,onUploadFile:g})}function lh(e){var t=e.loading,n=e.fileName,r=e.contents,i=e.defaultContents,a=e.label,o=e.helpText,s=e.attachmentLastUploadedAgo,c=e.onUploadFile,l=pe.useState(!1),u=(0,J.Z)(l,2),d=u[0],p=u[1];return(0,Ie.BX)("div",{className:"jsx-3069383162 attachment",children:[(0,Ie.tZ)(rh,{title:a,fileName:n,isOpen:d,initialContents:r||i,onCancel:function(){return p(!1)},onSave:function(e){p(!1),c(e)}}),(0,Ie.BX)(Ee.Ug,{justify:"space-between",align:"center",wrap:"nowrap",children:[(0,Ie.BX)(Ee.gC,{spacing:1,children:[(0,Ie.BX)(Ee.Ug,{align:"center",spacing:1,wrap:"nowrap",children:[(0,Ie.tZ)(Oe.Z,{fontWeight:"medium",children:a}),(0,Ie.tZ)(th.Z,{label:o})]}),s&&(0,Ie.BX)(Oe.Z,{size:"xsmall",children:["Uploaded ",s]})]}),t?(0,Ie.tZ)(Vt.Z,{style:{width:"16px",height:"16px"}}):(0,Ie.tZ)(je.Z,{border:!1,filled:!1,Icon:Ap.Z,onClick:(0,$.Z)(le().mark((function e(){return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(!0);case 1:case"end":return e.stop()}}),e)})))})]}),(0,Ie.tZ)(se(),{id:"3069383162",children:[".attachment.jsx-3069383162{padding:var(--space-8);background-color:var(--background-root);border-radius:var(--border-radius-8);width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}"]})]})}function uh(e){var t,n,r=e.data;return!r||"Repl"!==r.repl.__typename||"Team"!==(null===(t=r.repl.owner)||void 0===t?void 0:t.__typename)||"ReplTemplate"!==(null===(n=r.repl.template)||void 0===n?void 0:n.__typename)||r.repl.submission?null:(0,Ie.BX)("div",{className:"jsx-2648649354 project-view-container",children:[(0,Ie.tZ)("div",{className:"jsx-2648649354 project-view-contents",children:(0,Ie.tZ)(sh,{attachments:r.repl.attachments})}),(0,Ie.tZ)("div",{className:"jsx-2648649354 bottom-dock",children:(0,Ie.tZ)(Oe.Z,{size:"small",children:(0,Ie.tZ)("a",{href:"/curriculum",target:"_blank",className:"jsx-2648649354",children:"Find more curriculum on Curriculum Hub"})})}),(0,Ie.tZ)(se(),{id:"2648649354",children:[".project-view-container.jsx-2648649354{padding-top:var(--space-32);max-width:400px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".bottom-dock.jsx-2648649354{display:grid;grid-gap:var(--space-8);margin-top:auto;}"]})]})}var dh=n(25108);function ph(e){var t,n,r,i,a,o,s,c=e.style,l=(0,Ce.Z)(),u=(0,Se.SAU)({variables:{replId:l}}),d=u.data,p=u.loading,f=u.error;return p&&(o=(0,Ie.tZ)("div",{children:"Loading..."})),f&&(dh.error(f),o=(0,Ie.tZ)("div",{children:"Something went wrong"})),d&&"Repl"===d.repl.__typename&&"Team"===(null===(t=d.repl.owner)||void 0===t?void 0:t.__typename)&&"ReplTemplate"===(null===(n=d.repl.template)||void 0===n?void 0:n.__typename)&&"ReplSubmission"===(null===(r=d.repl.submission)||void 0===r?void 0:r.__typename)&&(o=(0,Ie.tZ)($f,{data:d}),s="Submissions"),d&&"Repl"===d.repl.__typename&&"Team"===(null===(i=d.repl.owner)||void 0===i?void 0:i.__typename)&&"ReplTemplate"===(null===(a=d.repl.template)||void 0===a?void 0:a.__typename)&&!d.repl.submission&&(o=(0,Ie.tZ)(uh,{data:d}),s="Curriculum"),(0,Ie.BX)("div",{style:c,className:"jsx-1108958607 education-pane",children:[(0,Ie.tZ)("div",{className:"jsx-1108958607 education-pane-header",children:(0,Ie.tZ)(Xe.Z,{level:4,children:s})}),o,(0,Ie.tZ)(se(),{id:"1108958607",children:[".education-pane.jsx-1108958607{background-color:var(--background-default);color:var(--foreground-dimmer);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:var(--space-8);}",".education-pane-header.jsx-1108958607{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;position:relative;color:var(--foreground-default);width:100%;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;}"]})]})}var fh=n(3996),hh=n(86656),mh=n(23990),gh=n(57483);function vh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vh(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yh(e){var t=e.root,n=e.initialValue,r=void 0===n?"":n,i=e.isOpen,a=pe.useRef(null),o=pe.useState(Boolean(r)),s=(0,J.Z)(o,2),c=s[0],l=s[1],u=pe.useState(r),d=(0,J.Z)(u,2),p=d[0],f=d[1],h=pe.useRef(r),m=pe.useRef(""),g=pe.useState(null),v=(0,J.Z)(g,2),b=v[0],y=v[1],x=pe.useState((function(){var e={command:t,token:{value:"",start:0,end:0},parent:null,meta:{match:!0,searchValue:""}};return{options:[],value:r,index:r.length,searchValue:"",matchedAncestors:[e],rootNode:e}})),w=(0,J.Z)(x,2),k=w[0],Z=w[1],j=pe.useState(k.matchedAncestors.slice(1)),O=(0,J.Z)(j,2),E=O[0],_=O[1],C=pe.useRef(null);pe.useEffect((function(){C.current=(0,gh.Z)({root:t,onUpdate:function(e){h.current&&(h.current=""),Z(e),l(!1)}})}),[t,r]);var S=pe.useMemo((function(){return[].concat((0,nn.Z)(E.map((function(e){return e.token.value}))),[p]).join(" ")}),[E,p]);pe.useEffect((function(){if(!C.current)throw new Error("Expected completerRef. Did you pass in a root command?");l(!0),C.current({value:S,index:S.length})}),[t,S]);var P=(0,fn.Kb)({isOpen:i,inputValue:p,initialHighlightedIndex:0,defaultHighlightedIndex:0,itemToString:function(e){return e?e.value:""},items:k.options,stateReducer:function(e,t){var n=t.type,r=t.changes;switch(n){case fn.Kb.stateChangeTypes.MenuMouseLeave:return bh(bh({},r),{},{highlightedIndex:-1===e.highlightedIndex?0:e.highlightedIndex});case fn.Kb.stateChangeTypes.InputKeyDownEscape:case fn.Kb.stateChangeTypes.InputBlur:return bh(bh({},r),{},{highlightedIndex:0,selectedItem:null});default:return r}},onSelectedItemChange:function(e){e.selectedItem&&(_(e.selectedItem.path.slice(1)),f(""),P.reset(),a.current&&a.current.focus())}});pe.useEffect((function(){m.current&&E.length&&(f(m.current),m.current="")}),[k,E]);return{getMenuProps:P.getMenuProps,getToggleButtonProps:P.getToggleButtonProps,getComboboxProps:P.getComboboxProps,getItemProps:P.getItemProps,highlightedIndex:P.highlightedIndex,selectItem:P.selectItem,getInputProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return P.getInputProps(bh(bh({},e),{},{spellCheck:!1,autoComplete:"off",ref:function(t){"function"===typeof e.ref&&e.ref(t),a.current=t},onChange:function(t){h.current||(e.onChange&&e.onChange(t),b&&y(null),f(t.currentTarget.value))},onKeyDown:function(e){if(h.current&&1===e.key.length)m.current+=e.key;else{if(!C.current)throw new Error("Expected completerRef. Did you pass in a root command?");if("Escape"!==e.key)if("a"===e.key&&E.length&&e.metaKey)y({start:0,end:E.length});else{if("Backspace"===e.key&&b&&b.start<E.length){y(null),_(E.slice(0,b.start));var t=e.currentTarget,n=t.selectionStart,r=t.selectionEnd;if("number"!==typeof n||"number"!==typeof r)return;return f(e.currentTarget.value.slice(r)),void setTimeout((function(){a.current&&a.current.setSelectionRange(n,n)}))}if("Backspace"===e.key&&0===e.currentTarget.selectionStart&&E.length)_(E.slice(0,E.length-1));else if("ArrowLeft"===e.key&&e.shiftKey&&e.metaKey)y({start:0,end:E.length});else if("ArrowLeft"===e.key&&e.shiftKey&&0===e.currentTarget.selectionStart&&E.length){var i=b?Math.max(b.start-1,0):E.length-1;y({start:i,end:E.length})}else if("ArrowLeft"!==e.key||b||0!==e.currentTarget.selectionStart||!E.length){if("ArrowRight"!==e.key||!e.shiftKey||!b){var o="number"===typeof P.highlightedIndex&&P.highlightedIndex<k.options.length?k.options[P.highlightedIndex]:null;return" "===e.key&&o&&1===k.options.length&&o.token.value===p?(P.selectItem(o),void e.preventDefault()):"ArrowRight"===e.key?(b&&y(null),void(o&&P.selectItem(o))):"Tab"===e.key&&o?(e.preventDefault(),void P.selectItem(o)):void("Enter"===e.key&&o&&P.selectItem(o))}var s=b.start+1;y(s===b.end?null:{start:s,end:b.end})}else _(E.slice(0,E.length-1))}else e.currentTarget.blur()}}}))},isLoading:c,virtualSelection:b,completer:k,matchedBlocks:E,setMatchedBlocks:_,inputValue:p,clear:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.focus;_([]),f(""),P.reset(),t&&setTimeout((function(){a.current&&a.current.focus()}))}}}function xh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xh(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kh(e){var t=e.root,n=e.indentOptions,r=e.onIsOpenChange,i=e.initialValue,a=e.renderOutput,o=e.disableKeyboardShortcut,s=e.autoFocus,c=pe.useState(!1),l=(0,J.Z)(c,2),u=l[0],d=l[1];pe.useEffect((function(){d(!0)}),[]);var p=pe.useState(!1),f=(0,J.Z)(p,2),h=f[0],m=f[1],g=yh({root:t,isOpen:h,initialValue:i}),v=g.getMenuProps,b=g.getInputProps,y=g.getComboboxProps,x=g.highlightedIndex,w=g.completer,k=g.getItemProps,Z=g.matchedBlocks,j=g.setMatchedBlocks,O=g.virtualSelection,E=g.inputValue,_=g.selectItem,C=g.clear,S=pe.useRef(C);pe.useEffect((function(){S.current=C}),[C]);var P=pe.useRef(Boolean(i)),N=pe.useRef(r),I=pe.useRef(null),T=pe.useRef(null),D=(0,ve.useRouter)();pe.useEffect((function(){N.current=r}),[r]),pe.useEffect((function(){N.current&&N.current(h)}),[h]),pe.useEffect((function(){if(!o){var e=function(e){(0,nl.b)(e),"Escape"!==e.key?I.current&&!e.altKey&&!e.shiftKey&&(0,Ri.jh)(e)&&(Ri.V5?"k"===e.key.toLowerCase():"."===e.key.toLowerCase())&&(e.preventDefault(),document.activeElement===I.current?(I.current.blur(),m(!1),T.current&&T.current.focus()):(T.current=document.activeElement&&document.activeElement!==I.current&&"function"===typeof document.activeElement.focus?document.activeElement:null,I.current.focus())):m(!1)};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}}),[o]);var R=(0,Yl.Z)((function(){m(!1)}),[]);pe.useEffect((function(){w.errors&&w.errors.forEach((function(e){xt.$e((function(t){t.setTag("completer","true"),xt.Tb(e)}))}))}),[w.errors]),pe.useEffect((function(){if(i&&P.current&&w.options.length&&i===w.options[0].value){var e;P.current=!1;var t=(0,J.Z)(w.options,1)[0];if(!("basic"===(null===(e=t.command.data)||void 0===e?void 0:e.type)))return;_(t)}}),[i,w.options,_]);var A=Boolean(E||Z.length),L=Z.length?Z[Z.length-1]:w.rootNode,B=L.command&&"data"in L.command&&L.command.data&&"description"in L.command.data?L.command.data.description:void 0,U=pe.useRef(a);return pe.useEffect((function(){U.current=a}),[a]),pe.useEffect((function(){var e,t,n,r=L.command;if("link"===(null===(e=r.data)||void 0===e?void 0:e.type)){var i=r.data.link;D.push(i.href,i.as)}else"action"===(null===(t=r.data)||void 0===t?void 0:t.type)?(r.data.run(),S.current(),m(!1),I.current&&I.current.blur()):"output"===(null===(n=r.data)||void 0===n?void 0:n.type)&&U.current&&(m(!1),U.current(r.data.output()),I.current&&I.current.blur())}),[L,D]),(0,Ie.BX)("div",{ref:R,className:se().dynamic([["2157069700",[Ze.j.tabletMin]]]),children:[(0,Ie.BX)("div",wh(wh({},y()),{},{className:se().dynamic([["2157069700",[Ze.j.tabletMin]]])+" root-wrap",children:[(0,Ie.BX)("div",{className:se().dynamic([["2157069700",[Ze.j.tabletMin]]])+" input-row",children:[Z.length?Z.map((function(e,t){var n=Boolean(O&&t>=O.start&&t<O.end);return(0,Ie.tZ)("div",{className:se().dynamic([["2157069700",[Ze.j.tabletMin]]])+" block-wrap",children:(0,Ie.tZ)(fh.Z,{node:e,isSelected:n,onClick:function(){j(Z.slice(0,t+1))}})},e.token.value+t)})):(0,Ie.tZ)("div",{className:se().dynamic([["2157069700",[Ze.j.tabletMin]]])+" prompt-icon",children:(0,Ie.tZ)(mh.Z,{size:16,filled:!0,color:"var(--foreground-dimmest)"})}),(0,Ie.tZ)("input",wh(wh({},b({autoFocus:s,placeholder:B,ref:function(e){I.current=e},onFocus:function(){m(!0)}})),{},{className:se().dynamic([["2157069700",[Ze.j.tabletMin]]])})),!u||A||o?null:(0,Ie.tZ)("div",{className:se().dynamic([["2157069700",[Ze.j.tabletMin]]])+" keyboard-shortcut-container",children:(0,Ie.tZ)(Kn.Z,{shortcut:{cmdOrCtrlKey:!0,key:Ri.V5?"k":"."}})}),A?(0,Ie.tZ)(je.Z,{Icon:cn.Z,border:!1,filled:!1,onClick:function(){C({focus:!0})}}):null]}),(0,Ie.tZ)("div",wh(wh({},v()),{},{className:se().dynamic([["2157069700",[Ze.j.tabletMin]]]),children:h&&w.options.length?(0,Ie.tZ)("div",{className:se().dynamic([["2157069700",[Ze.j.tabletMin]]])+" menu",children:(0,Ie.tZ)("ul",{className:se().dynamic([["2157069700",[Ze.j.tabletMin]]]),children:w.options.map((function(e,t){var r=x===t;return(0,Ie.tZ)("li",wh(wh({},k({key:e.value,item:e,index:t})),{},{className:se().dynamic([["2157069700",[Ze.j.tabletMin]]]),children:(0,Ie.tZ)(hh.Z,{indentOptions:n,isActive:r,option:e,matchedBlocks:Z})}))}))})}):null}))]})),(0,Ie.tZ)(se(),{id:"2157069700",dynamic:[Ze.j.tabletMin],children:[".root-wrap.__jsx-style-dynamic-selector{font-size:var(--font-size-default);position:relative;}",".input-row.__jsx-style-dynamic-selector{border:1px solid transparent;border-radius:var(--border-radius-8) var(--border-radius-8) 0 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:42px;padding-left:var(--space-8);padding-right:var(--space-4);z-index:1;position:relative;color:var(--foreground-default);}","input.__jsx-style-dynamic-selector{font-size:var(--font-size-default);background-color:transparent;border:0 none;outline:0 none;padding:var(--space-8);padding-left:0;display:block;width:100%;color:var(--foreground-default);}","input.__jsx-style-dynamic-selector::-webkit-input-placeholder{color:var(--foreground-dimmest);}","input.__jsx-style-dynamic-selector::-moz-placeholder{color:var(--foreground-dimmest);}","input.__jsx-style-dynamic-selector:-ms-input-placeholder{color:var(--foreground-dimmest);}","input.__jsx-style-dynamic-selector::placeholder{color:var(--foreground-dimmest);}","input.__jsx-style-dynamic-selector:focus.__jsx-style-dynamic-selector::-webkit-input-placeholder{color:var(--foreground-dimmer);}","input.__jsx-style-dynamic-selector:focus.__jsx-style-dynamic-selector::-moz-placeholder{color:var(--foreground-dimmer);}","input.__jsx-style-dynamic-selector:focus.__jsx-style-dynamic-selector:-ms-input-placeholder{color:var(--foreground-dimmer);}","input.__jsx-style-dynamic-selector:focus.__jsx-style-dynamic-selector::placeholder{color:var(--foreground-dimmer);}","input.__jsx-style-dynamic-selector::selection{background-color:var(--accent-primary-dimmest);}",".prompt-icon.__jsx-style-dynamic-selector{margin-right:var(--space-8);height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".block-wrap.__jsx-style-dynamic-selector{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;padding-right:var(--space-8);}",".menu.__jsx-style-dynamic-selector{padding-top:40px;position:absolute;left:0;top:0;width:100%;background-color:var(--background-higher);border-radius:var(--border-radius-8);max-height:500px;overflow-y:auto;}","li.__jsx-style-dynamic-selector:last-child>div{border-bottom-right-radius:var(--border-radius-8);border-bottom-left-radius:var(--border-radius-8);}",".keyboard-shortcut-container.__jsx-style-dynamic-selector{display:none;}","@media screen and (min-width:".concat(Ze.j.tabletMin,"px){.keyboard-shortcut-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;}}")]})]})}var Zh=n(10847),jh=n(54943),Oh=n(11655),Eh=n(72378),_h=n.n(Eh),Ch=["GET","POST","PUT","DELETE","HEAD","PATCH","OPTIONS"];function Sh(e){var t=e.url,n=e.method,r=void 0===n?"GET":n,i=e.headers,a=void 0===i?{}:i;if(!t)throw new Error("No URL provided");if(!(0,Oh.Z)(t))throw new Error("URL is invalid: ".concat(t));if(r=r.toUpperCase(),!Ch.find((function(e){return e===r})))throw new Error("Method is invalid: ".concat(r));var o=[];for(var s in a)o.push("-H","".concat(s,": ").concat(a[s]));return["curl","-i","-s","-X",r].concat(o,[t])}function Ph(e){if(null!==e&&void 0!==e&&e.matchedAncestors){var t=Nh(e.matchedAncestors.map((function(e){var t,n;return null===(t=e.command)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.curl})).filter((function(e){return void 0!==e})));return t.method||(t.method="get"),t}}function Nh(e){return e.reduce((function(e,t){return _h()(e,t)}),{})}function Ih(){return(0,Ie.BX)("div",{className:"jsx-3039985225 loader-container",children:[(0,Ie.BX)(fo.ZP,{primaryColor:"var(--background-highest)",secondaryColor:"var(--background-higher)",uniquekey:"editorLoader",children:[(0,Ie.tZ)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"70",height:"10",className:"jsx-3039985225"}),(0,Ie.tZ)("rect",{x:"80",y:"0",rx:"3",ry:"3",width:"100",height:"10",className:"jsx-3039985225"}),(0,Ie.tZ)("rect",{x:"190",y:"0",rx:"3",ry:"3",width:"10",height:"10",className:"jsx-3039985225"}),(0,Ie.tZ)("rect",{x:"15",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:"jsx-3039985225"}),(0,Ie.tZ)("rect",{x:"155",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:"jsx-3039985225"}),(0,Ie.tZ)("rect",{x:"15",y:"40",rx:"3",ry:"3",width:"90",height:"10",className:"jsx-3039985225"}),(0,Ie.tZ)("rect",{x:"115",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:"jsx-3039985225"}),(0,Ie.tZ)("rect",{x:"185",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:"jsx-3039985225"}),(0,Ie.tZ)("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"30",height:"10",className:"jsx-3039985225"}),(0,Ie.tZ)("rect",{x:"15",y:"80",rx:"3",ry:"3",width:"70",height:"10",className:"jsx-3039985225"}),(0,Ie.tZ)("rect",{x:"95",y:"80",rx:"3",ry:"3",width:"60",height:"10",className:"jsx-3039985225"}),(0,Ie.tZ)("rect",{x:"165",y:"80",rx:"3",ry:"3",width:"30",height:"10",className:"jsx-3039985225"}),(0,Ie.tZ)("rect",{x:"15",y:"100",rx:"3",ry:"3",width:"110",height:"10",className:"jsx-3039985225"}),(0,Ie.tZ)("rect",{x:"135",y:"100",rx:"3",ry:"3",width:"100",height:"10",className:"jsx-3039985225"}),(0,Ie.tZ)("rect",{x:"0",y:"120",rx:"3",ry:"3",width:"70",height:"10",className:"jsx-3039985225"})]}),(0,Ie.tZ)(se(),{id:"3039985225",children:[".loader-container.jsx-3039985225{padding:var(--space-24);}"]})]})}function Th(e){var t=e.html,n=(0,Gi.Z)("flag-curlclui-html-preview"),r=pe.useMemo((function(){return t?function(e){var t=e.html,n=void 0===t?"":t,r=new window.Blob([n],{type:"text/html"});return URL.createObjectURL(r)}({html:t}):null}),[t]);return r?(0,Ie.BX)("div",{className:"jsx-888912108 html-viewer",children:[n?(0,Ie.tZ)("a",{target:"_blank",href:r,className:"jsx-888912108",children:"See response"}):(0,Ie.tZ)("div",{className:"jsx-888912108 response-text",children:t}),(0,Ie.tZ)(se(),{id:"888912108",children:[".html-viewer.jsx-888912108{display:block;padding:var(--space-16);background:var(--background-root);}",".response-text.jsx-888912108{overflow-x:hidden;white-space:break-spaces;color:var(--foreground-default);font-family:var(--font-family-code);font-size:var(--font-size-small);}"]})]}):null}function Dh(e){var t=e.output,n=e.error;return(0,Ie.BX)("div",{className:"jsx-1719131076",children:[n&&(0,Ie.tZ)("div",{className:"jsx-1719131076 error",children:n}),t&&(0,Ie.tZ)("div",{className:"jsx-1719131076",children:t}),(0,Ie.tZ)(se(),{id:"1719131076",children:[".error.jsx-1719131076{color:var(--accent-negative-default);}"]})]})}var Rh=(0,ls.default)((function(){return n.e(367).then(n.t.bind(n,55171,23))}),{loadableGenerated:{webpack:function(){return[55171]}}});function Ah(e){var t,n=e.jsonString,r=pe.useMemo((function(){try{return[JSON.parse(n),null]}catch(e){return[null,e]}}),[n]),i=(0,J.Z)(r,2),a=i[0],o=i[1];return o?t=(0,Ie.BX)("div",{className:"jsx-3269560366 json-error",children:[(0,Ie.BX)("div",{className:"jsx-3269560366 error-message",children:["Error: Failed to parse JSON. ",o.message]}),(0,Ie.tZ)("div",{className:"jsx-3269560366 raw-json-string",children:n}),(0,Ie.tZ)(se(),{id:"3269560366",children:[".json-error.jsx-3269560366{display:grid;grid-gap:var(--space-16);}",".error-message.jsx-3269560366{font-size:var(--font-size-small);}"]})]}):a&&(t=(0,Ie.tZ)(Rh,{src:a,name:!1,displayDataTypes:!1})),(0,Ie.BX)("div",{className:"jsx-1327275652 json-viewer",children:[t,(0,Ie.tZ)(se(),{id:"1327275652",children:[".json-viewer.jsx-1327275652{padding:var(--space-16);background:var(--background-root);}"]})]})}var Lh=n(80983),Bh=n(95493),Uh=n.n(Bh);function Mh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fh(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Xh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xh(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Xh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zh=["text/plain","application/json","application/octet-stream"],Vh="gold",Gh=function(e,t){if(e===t)return 1;var n=Uh().get(e.toLowerCase(),t.toLowerCase()),r=Math.max(e.length,t.length);return(r-n)/r},Hh=function(e){return Object.keys(Lh.extensions).filter((function(t){return t.includes(e)})).sort((function(t,n){return Gh(e,n)-Gh(e,t)}))},Wh=function(e){var t=e.name,n=e.value,r=e.commands;return{data:{description:e.description||"".concat(t,": ").concat(n),color:Vh,curl:{headers:(0,ee.Z)({},t,n)}},commands:r}},Kh=function(e){var t=e.commands;return{data:{color:Vh},commands:function(e){if(e.relativeSearchDepth>0)return{};var n=e.searchValue,r={googlebot:Wh({name:"user-agent",value:"Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)",description:"How Google sees your page",commands:t}),"this-browser":Wh({name:"user-agent",value:window.navigator.userAgent,description:"Your browser's user-agent",commands:t})};return n.length?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mh(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}((0,ee.Z)({},n,Wh({name:"user-agent",value:n,commands:t})),r):r}}};function qh(e){var t=e.commands,n=e.rootArgs;return 1===(null===n||void 0===n?void 0:n.matchedAncestors.length)&&0===(null===n||void 0===n?void 0:n.searchValue.length)?{}:{header:{data:{description:"Add a request header",color:Vh},commands:function(e){var r={},i=e.searchValue.toLowerCase(),a={commands:t,rootArgs:n};return r["content-type"]=function(e){var t=e.commands;return{data:{color:Vh},commands:function(e){if(e.relativeSearchDepth>0)return{};var n,r=e.searchValue.toLowerCase(),i={},a=Fh((0===r.length?zh:Hh(r)).slice(0,5));try{for(a.s();!(n=a.n()).done;){var o=n.value;i[o]=Wh({name:"content-type",value:o,commands:t})}}catch(s){a.e(s)}finally{a.f()}return i}}}(a),r.authorization=function(e){var t=e.commands;return{data:{color:Vh},commands:function(e){if(e.relativeSearchDepth>0)return{};var n=e.searchValue;return n.length?(0,ee.Z)({},n,Wh({name:"authorization",value:n,commands:t})):{}}}}(a),r["user-agent"]=Kh(a),r.accept=function(e){var t=e.commands;return{data:{color:Vh},commands:function(e){if(e.relativeSearchDepth>0)return{};var n,r=e.searchValue.toLowerCase(),i={},a=Fh((0===r.length?zh:Hh(r)).slice(0,5));try{for(a.s();!(n=a.n()).done;){var o=n.value;i[o]=Wh({name:"accept",value:o,commands:t})}}catch(s){a.e(s)}finally{a.f()}return i}}}(a),i.length>0&&!r[i]&&function(e){return/^[a-zA-Z0-9-]+$/.test(e)}(i)&&0===e.relativeSearchDepth&&(r[i]={data:{description:"Add a custom header",color:Vh},commands:function(e){if(e.relativeSearchDepth>0)return{};var n=e.searchValue;return n.length?(0,ee.Z)({},n,Wh({name:i,value:n,commands:t})):{}}}),r}}}}function Yh(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Qh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qh(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Qh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jh(e){return{data:{curlType:"body",curl:{headers:{"content-type":"application/json"}},color:"gold",description:"Add a JSON body to your request"},commands:e.commands}}function $h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function em(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$h(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tm(e){var t=e.onSelect,n=e.onSetContext,r=e.onGetCurl,i=e.recentUrls,a=void 0===i?[]:i,o=e.replRoot,s=e.parsedPaths;return function e(i){if(i.relativeSearchDepth>0)return{};var c=i.matchedAncestors.find((function(e){var t,n;return"url"===(null===(t=e.command)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.curlType)})),l=i.matchedAncestors.find((function(e){var t,n;return"method"===(null===(t=e.command)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.curlType)})),u=i.matchedAncestors.find((function(e){var t,n;return"body"===(null===(t=e.command)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.curlType)})),d=em(em(em(em(em(em({},c?{}:function(e){var t=e.commands,n=e.parsedPaths,r=e.recentUrls,i=e.replRoot,a={},o=e.rootArgs.searchValue,s=function(e,n){return{data:{curlType:"url",commandName:e,description:n,color:"blue",curl:{url:n}},commands:t}};o.startsWith("/")?a[o]=s(o,"".concat(i.replace(/\/+$/,"")).concat(o)):(0,Oh.Z)(o)&&(a[o]=s(o,o));var c,l=Yh(n);try{for(l.s();!(c=l.n()).done;){var u=c.value;a[u]||(a[u]=s(u,"".concat(null===i||void 0===i?void 0:i.replace(/\/+$/,"")).concat(u)))}}catch(h){l.e(h)}finally{l.f()}var d,p=Yh(r);try{for(p.s();!(d=p.n()).done;){var f=d.value;i&&f.startsWith(i)&&a[new URL(f).pathname]||(a[f]||(a[f]=s(f,f)))}}catch(h){p.e(h)}finally{p.f()}return a}({commands:e,parsedPaths:s,recentUrls:a,replRoot:o,rootArgs:i})),l?{}:function(e){var t=e.commands,n=e.rootArgs,r={};if(0===n.searchValue.length)return r;for(var i=0,a=["get","post","put","delete","head","patch","options"];i<a.length;i++){var o=a[i];if(o.startsWith(n.searchValue)){var s="Create a ".concat(o.toUpperCase()," request");r[o]={data:{curlType:"method",description:s,curl:{method:o},color:"green"},commands:t}}}return r}({commands:e,rootArgs:i})),function(e){var t=e.rootArgs,n=e.onSelect,r=e.onGetCurl;if(t.relativeSearchDepth>0)return{};var i=Ph(t);return i&&i.url?{go:{data:{type:"action",description:"Run the request!",color:"red",run:function(){n(i)}}},"get-curl":{data:{type:"action",description:"Returns the equivalent cURL request",color:"red",run:function(){r(i)}}}}:{}}({onSelect:t,rootArgs:i,onGetCurl:r})),u?{}:function(e){var t=e.rootArgs,n=e.commands;return 1===t.matchedAncestors.length?{}:{json:Jh({commands:n,rootArgs:t})}}({commands:e,rootArgs:i})),qh({rootArgs:i,commands:e})),function(e){var t=e.onSetContext;if(e.rootArgs.ancestors.length>1)return{};var n=function(e){return{confirm:{data:{type:"action",description:"Click to confirm",color:"teal",run:function(){var n=Ph(e);if(!n||!n.headers)return{};t({headers:n.headers})}}}}};return{set:{data:{description:"Set a value to context",color:"teal"},commands:function(e){return qh({rootArgs:e,commands:n})}}}}({onSetContext:n,rootArgs:i}));return d}}var nm=function(e){return{data:{type:"root"},commands:tm({onSelect:e.onSelect,onSetContext:e.onSetContext,onGetCurl:e.onGetCurl,recentUrls:e.recentUrls,replRoot:e.replRoot,parsedPaths:e.parsedPaths})}};function rm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function im(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rm(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function am(e){var t,n=(0,Fe.Z)().container,r=(0,Ce.Z)(),i=(0,Se.Jfm)({variables:{id:r}}).data,a=function(){var e=(0,$.Z)(le().mark((function e(t){var r,i,a,o;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sh(t),e.next=3,n.exec.apply(n,(0,nn.Z)(r));case 3:return i=e.sent,a=i.output,o=i.error,e.abrupt("return",{output:a,error:o});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=pe.useState([]),s=(0,J.Z)(o,2),c=s[0],l=s[1],u=pe.useState(null),d=(0,J.Z)(u,2),p=d[0],f=d[1],h=pe.useState(null),m=(0,J.Z)(h,2),g=m[0],v=m[1],b=pe.useState(null),y=(0,J.Z)(b,2),x=y[0],w=y[1],k=pe.useState({}),Z=(0,J.Z)(k,2),j=Z[0],O=Z[1],E=pe.useState(null),_=(0,J.Z)(E,2),C=_[0],S=_[1],P=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];l((function(e){return(0,nn.Z)(new Set([].concat((0,nn.Z)(e),(0,nn.Z)(t.filter(Oh.Z)))))}))},N=function(){var e=(0,$.Z)(le().mark((function e(t){var n,r,i,o,s,c,l,u;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(null),v(null),S(null),B(!0),e.next=6,a(Nh([j,t]));case 6:if(!(n=e.sent).error&&n.output){e.next=11;break}return f(n),B(!1),e.abrupt("return");case 11:for(u in P(t.url),r=(0,Zh.LZ)(n.output),i=r.body,o=r.headers,s=r.statusCode,c=r.statusMessage,l={},o)l[u.toLowerCase()]=o[u];v({body:i,headers:l,statusCode:s,statusMessage:c}),B(!1);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=pe.useCallback((function(e){var t={headers:im(im({},j.headers),e.headers)};O(t)}),[j]);pe.useEffect((function(){var e;i&&"Repl"===(null===(e=i.repl)||void 0===e?void 0:e.__typename)&&w(i.repl.prodUrl)}),[i]);var T=pe.useState([]),D=(0,J.Z)(T,1)[0],R=pe.useState(!1),A=(0,J.Z)(R,2),L=A[0],B=A[1],U=nm({onSelect:N,onSetContext:I,onGetCurl:function(e){var t=Nh([j,e]);S(Sh(t).map((function(e){return e.includes(" ")?'"'.concat(e,'"'):e})).join(" ")),v(null),f(null)},recentUrls:c,replRoot:x||"",parsedPaths:D}),M=(null===g||void 0===g||null===(t=g.headers)||void 0===t?void 0:t["content-type"])||"",F=pe.useState(!1),X=(0,J.Z)(F,2),z=X[0],V=X[1];return(0,Ie.BX)("div",im(im({},e),{},{className:"jsx-3199020068 "+"jsx-".concat(Ql.Q.__hash)+" cluicurl",children:[(0,Ie.tZ)(kh,{root:U,disableKeyboardShortcut:!0}),L&&(0,Ie.tZ)(Ih,{}),C&&(0,Ie.tZ)("div",{className:"jsx-3199020068 "+"jsx-".concat(Ql.Q.__hash)+" curl-req-container",children:(0,Ie.tZ)("pre",{className:"jsx-3199020068 "+"jsx-".concat(Ql.Q.__hash),children:(0,Ie.tZ)("code",{className:"jsx-3199020068 "+"jsx-".concat(Ql.Q.__hash),children:C})})}),(null===g||void 0===g?void 0:g.statusCode)&&(0,Ie.BX)("div",{className:"jsx-3199020068 "+"jsx-".concat(Ql.Q.__hash),children:[(0,Ie.BX)("div",{className:"jsx-3199020068 "+"jsx-".concat(Ql.Q.__hash)+" response-info",children:[(0,Ie.BX)("div",{className:"jsx-3199020068 "+"jsx-".concat(Ql.Q.__hash)+" response-status",children:[(0,Ie.tZ)("span",{className:"jsx-3199020068 "+"jsx-".concat(Ql.Q.__hash),children:g.statusCode})," ",(0,Ie.tZ)("span",{className:"jsx-3199020068 "+"jsx-".concat(Ql.Q.__hash),children:function(){if(null===g||void 0===g||!g.statusCode)return"";if(g.statusMessage)return g.statusMessage;try{return(0,jh.BV)(g.statusCode)}catch(e){return""}}()})]}),(0,Ie.BX)("div",{onClick:function(){return V((function(e){return!e}))},className:"jsx-3199020068 "+"jsx-".concat(Ql.Q.__hash)+" response-headers-button",children:[Object.keys(g.headers).length," headers"]})]}),z&&(0,Ie.tZ)("div",{className:"jsx-3199020068 "+"jsx-".concat(Ql.Q.__hash)+" response-headers",children:Object.entries(g.headers).map((function(e){var t=(0,J.Z)(e,2),n=t[0],r=t[1];return(0,Ie.BX)("div",{className:"jsx-3199020068 "+"jsx-".concat(Ql.Q.__hash),children:[(0,Ie.tZ)("span",{className:"jsx-3199020068 "+"jsx-".concat(Ql.Q.__hash)+" header-name",children:n}),":"," ",(0,Ie.tZ)("span",{className:"jsx-3199020068 "+"jsx-".concat(Ql.Q.__hash)+" header-value",children:r})]})}))})]}),p&&(0,Ie.tZ)(Dh,im({},p)),M.includes("text/html")&&(0,Ie.tZ)(Th,{html:g.body}),M.includes("application/json")&&(0,Ie.tZ)(Ah,{jsonString:g.body}),(0,Ie.tZ)(se(),{id:Ql.Q.__hash,children:Ql.Q}),(0,Ie.tZ)(se(),{id:"3199020068",children:[".cluicurl.jsx-3199020068{overflow:scroll;}",".cluicurl.jsx-3199020068 .input-row{z-index:2 !important;}",".cluicurl.jsx-3199020068 .menu{z-index:1 !important;}",".curl-req-container.jsx-3199020068{padding:var(--space-16);background:var(--background-higher);}",".response-info.jsx-3199020068{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding:var(--space-16) var(--space-24);background-color:var(--background-root);font-family:var(--font-family-code);color:var(--foreground-default);border-bottom:1px solid var(--outline-dimmest);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".response-status.jsx-3199020068{font-weight:800;}",".response-headers.jsx-3199020068{font-family:var(--font-family-code);font-size:var(--font-size-small);padding:var(--space-24);color:var(--foreground-default);}",".response-headers-button.jsx-3199020068{font-weight:100;background:var(--background-higher);padding:var(--space-4);border-radius:var(--border-radius-4);cursor:pointer;}",".header-name.jsx-3199020068{font-weight:var(--font-weight-bold);}",".header-value.jsx-3199020068{font-weight:var(--font-weight-regular);}"]})]}))}var om=n(34837),sm=n.n(om),cm=n(4715),lm=n(28146);function um(e){var t=pe.useRef(null),n=pe.useRef(null),r=(0,Fe.Z)().fs,i=(0,Nn.Z)(),a=(0,sn.Z)(),o=a.showError,s=a.showConfirm,c=(0,ki.Z)(),l=pe.useState(!1),u=(0,J.Z)(l,2),d=u[0],p=u[1],f=(0,Gi.Z)("flag-pedit-multiplayer"),h=(0,go.Z)((function(){var e=t.current;if(!e)return null;e.width=e.offsetWidth,e.height=e.offsetHeight;var n=e.getContext("2d");n&&(n.imageSmoothingEnabled=!1)}),{type:"debounce",wait:100});return pe.useEffect((function(){var e=!1;if(i&&t.current){var a=t.current,c=i,l=null,u=c.endsWith(".kbmsprite"),d=function(){};return f&&(d=r.watchFile(c,{onChange:function(t){var n=t.toString(),r=n&&JSON.parse(n);r&&l&&!e&&l.load(u?(0,lm.C)(r):r)}})),function(){p.apply(this,arguments)}(),function(){e=!0,l&&(l.cleanUp(),l=null),n.current&&(n.current=null),d()}}function p(){return(p=(0,$.Z)(le().mark((function t(){var i,s,d;return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.readFile(c);case 2:if(i=t.sent,!e){t.next=5;break}return t.abrupt("return");case 5:if(!i.error){t.next=8;break}return o("failed to read ".concat(c)),t.abrupt("return");case 8:s=i.content.toString(),d=s&&JSON.parse(s),a.width=a.offsetWidth,a.height=a.offsetHeight,(l=sm()(d?d.fromKaboom?{canvas:a,width:d.width,height:d.height}:{canvas:a,data:u?(0,lm.C)(d):d}:{canvas:a,width:64,height:64})).on("change",h),l.on("save",h),l.on("export",g),n.current=l.save,a.focus();case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(){return m.apply(this,arguments)}function m(){return(m=(0,$.Z)(le().mark((function t(){var n;return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=2;break}return t.abrupt("return");case 2:if(l){t.next=4;break}throw new Error("Expected peditCtx");case 4:if(n=l.save(),!u){t.next=9;break}return t.next=8,(0,lm.u)(n);case 8:n=t.sent;case 9:return t.next=11,r.writeFile(c,jr.Z.from(JSON.stringify(n)));case 11:t.sent.error&&e&&o("Failed to save ".concat(c,", please try again"));case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(){if(!l)throw new Error("Tried to export png but peditCtxRef was null");var e=window.prompt("Export as:");if(e){var t="".concat(e,".png"),n=l.curFrame().toPNG();r.writeFile(t,jr.Z.from(n)).then((function(){s("Successfully exported to ".concat(t))}))}}}),[r,i,t]),(0,Ie.BX)("div",{style:e.style,className:se().dynamic([["4157310935",[c?"0 3px 0 3px ".concat(c):"0"]]])+" pedit",children:[(0,Ie.tZ)(se(),{id:"4157310935",dynamic:[c?"0 3px 0 3px ".concat(c):"0"],children:[".pedit.__jsx-style-dynamic-selector{width:100%;height:100%;position:relative;z-index:3;box-shadow:".concat(c?"0 3px 0 3px ".concat(c):"0",";}"),"canvas.__jsx-style-dynamic-selector{width:100%;height:100%;outline:none;position:absolute;top:0;left:0;}",".upgrade-button.__jsx-style-dynamic-selector{position:absolute;bottom:0;left:0;z-index:100;padding:var(--space-4);border:solid 2px var(--foreground-default);background:var(--background-default);font-weight:700;outline:none;}",".upgrade-button.__jsx-style-dynamic-selector:hover{cursor:pointer;background:var(--background-higher);}",".upgrade-modal.__jsx-style-dynamic-selector{background:var(--background-default);padding:var(--space-32);}"]}),(0,Ie.tZ)("canvas",{ref:function(e){t.current=e,h(e)},tabIndex:0,className:se().dynamic([["4157310935",[c?"0 3px 0 3px ".concat(c):"0"]]])},i),i&&i.endsWith(".kbmsprite")&&(0,Ie.tZ)("button",{onClick:function(){return p(!0)},className:se().dynamic([["4157310935",[c?"0 3px 0 3px ".concat(c):"0"]]])+" upgrade-button",children:"Upgrade"}),(0,Ie.tZ)(zt.Z,{isOpen:d,onRequestClose:function(){return p(!1)},children:(0,Ie.tZ)(cm.Z,{prompt:"Upgrade to '.pedit'?",desc:"You're using '.kbmsprite' which is recently deprecated. Do you want to upgrade to the new '.pedit' format? (It'll create a new '.pedit' file with the same content. If you're using it with Kaboom, the new '.pedit' format won't work with kaboom before v0.4.0)",onCancel:function(){return p(!1)},onConfirm:function(){if(n.current)if(i){var e=i.replace(/\.kbmsprite$/,".pedit"),t=jr.Z.from(JSON.stringify(n.current()));r.writeFile(e,t).then((function(t){t.error?o("Failed to write to ".concat(e)):s("Successfully written to ".concat(e))})),p(!1)}else o("failed to get active file");else o("Please try again after the file loads")}})})]})}function dm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dm(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fm(e){var t=pe.useState(e),n=(0,J.Z)(t,2),r=n[0],i=n[1];return[r,i,function(e){var t=null;switch(e.currentTarget.type){case"checkbox":t=e.currentTarget.checked;break;case"number":case"range":t=Number(e.currentTarget.value);break;default:t=e.currentTarget.value}i(pm(pm({},r),{},(0,ee.Z)({},e.currentTarget.name,t)))}]}var hm=n(30959);var mm=function(e){var t=e.title,n=e.sub,r=void 0!==n&&n,i=e.actions,a=void 0===i?[]:i;return(0,Ie.BX)(Ee.Ug,{justify:"space-between",children:[(0,Ie.tZ)(se(),{id:"348115206",children:[".section-header-action.jsx-348115206{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:var(--space-24);height:var(--space-24);border-radius:var(--border-radius-4);color:var(--foreground-dimmer);}",".section-header-action.jsx-348115206:hover{background:var(--background-higher);cursor:pointer;}"]}),(0,Ie.tZ)(Xe.Z,{level:r?5:4,children:t}),(0,Ie.tZ)(Ee.Ug,{spacing:"4px",align:"center",children:a&&a.map((function(e,t){return(0,Ie.tZ)("div",{onClick:e.action,className:"jsx-348115206 section-header-action",children:e.icon},t)}))})]})};var gm,vm=function(e){var t=e.fileDrag,n=e.children,r=pe.useState(!1),i=(0,J.Z)(r,2),a=i[0],o=i[1],s=pe.useRef(0);return(0,Ie.BX)("div",{onDragEnter:function(e){if(t){e.preventDefault(),e.stopPropagation();var n=!0;if(e.dataTransfer.items&&e.dataTransfer.items.length>0){if(t.accept)for(var r=e.dataTransfer.items,i=0;i<r.length;i++){var a=r[i];t.accept.includes(a.type)||(n=!1)}n&&(o(!0),s.current++)}}},onDragLeave:function(e){t&&(e.preventDefault(),e.stopPropagation(),s.current--,0===s.current&&o(!1))},onDrop:function(e){t&&(e.preventDefault(),e.stopPropagation(),s.current=0,o(!1),(0,nn.Z)(e.dataTransfer.files).filter((function(e){return t.accept.includes(e.type)})).forEach(t.onDrop))},className:"jsx-26096692 section",children:[(0,Ie.tZ)(se(),{id:"26096692",children:[".section.jsx-26096692{position:relative;width:100%;}",".dragfilter.jsx-26096692{position:absolute;width:100%;height:100%;top:0;left:0;background:var(--accent-primary-default);border-radius:var(--border-radius-4);opacity:0.2;}",".dragfilter.hidden.jsx-26096692{display:none !important;}"]}),n,(0,Ie.tZ)("div",{className:"jsx-26096692 "+(Xt()("dragfilter",{hidden:!a})||"")})]})},bm=["0.5.0","0.4.1","0.3.0","0.2.0","0.1.0","0.0.0","dev"];function ym(e){return function(t){for(var n in e)t.key===n&&e[n](t)}}function xm(e,t){gm||(gm=document.createElement("input")).setAttribute("type","file"),gm.setAttribute("accept",t.join(","));gm.addEventListener("change",(function t(){gm.files&&((0,nn.Z)(gm.files).forEach(e),gm.removeEventListener("change",t))})),gm.click()}function wm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function km(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wm(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zm(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return jm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jm(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function jm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Om=function(e){var t,n=e.gameConf,r=e.setGameConf,i=(0,Fe.Z)().fs,a=pe.useState(!1),o=(0,J.Z)(a,2),s=o[0],c=o[1],l=(0,hi.Z)({path:"scenes",initialExpanded:!0,fs:i}),u=[];if(l.children){var d,p=Zm(l.children);try{for(p.s();!(d=p.n()).done;){var f=d.value;f.type===In.Tv.File&&u.push((0,Tn.eb)(f.filename))}}catch(h){p.e(h)}finally{p.f()}}return(0,Ie.BX)(vm,{children:[(0,Ie.tZ)(mm,{title:"Kaboom",actions:[{icon:(0,Ie.tZ)(Pu.Z,{rotate:s?0:-90}),action:function(){return c(!s)}}]}),s&&(0,Ie.tZ)("div",{className:"box",children:(0,Ie.BX)(Ee.gC,{spacing:1,children:[(0,Ie.BX)(Ee.Ug,{spacing:1,align:"center",children:[(0,Ie.tZ)(Oe.Z,{size:"small",foreground:"2",children:"Start Scene"}),(0,Ie.tZ)("select",{name:"startScene",value:n.startScene,onChange:function(e){r(km(km({},n),{},{startScene:e.currentTarget.value}))},children:u.map((function(e){return(0,Ie.tZ)("option",{value:e,children:e},e)}))})]}),(0,Ie.BX)(Ee.Ug,{spacing:1,align:"center",children:[(0,Ie.tZ)(Oe.Z,{size:"small",foreground:"2",children:"Full Screen"}),(0,Ie.tZ)(hm.Z,{isOn:n.fullscreen,onChange:function(e){r(km(km({},n),{},{fullscreen:e.target.checked}))}})]}),!n.fullscreen&&(0,Ie.BX)(Ee.Ug,{spacing:1,wrap:"nowrap",children:[(0,Ie.tZ)(un.ZP,{label:"Width",name:"width",value:n.width,onChange:function(e){r(km(km({},n),{},{width:Number(e.target.value)}))}}),(0,Ie.tZ)(un.ZP,{label:"Height",name:"height",value:n.height,onChange:function(e){r(km(km({},n),{},{height:Number(e.target.value)}))}})]}),(0,Ie.BX)(Ee.Ug,{spacing:1,align:"center",children:[(0,Ie.tZ)(Oe.Z,{size:"small",foreground:"2",children:"Scale"}),(0,Ie.tZ)(je.Z,{size:"medium",onClick:function(){r(km(km({},n),{},{scale:Math.max(1,n.scale-1)}))},children:"-"}),(0,Ie.tZ)(Oe.Z,{size:"medium",foreground:"1",fontWeight:"medium",children:n.scale}),(0,Ie.tZ)(je.Z,{size:"medium",onClick:function(){r(km(km({},n),{},{scale:Math.min(4,n.scale+1)}))},children:"+"})]}),(0,Ie.BX)(Ee.Ug,{spacing:1,align:"center",children:[(0,Ie.tZ)(Oe.Z,{size:"small",foreground:"2",children:"Clear Color"}),(0,Ie.tZ)(hm.Z,{isOn:null!==n.clearColor,onChange:function(e){r(km(km({},n),{},{clearColor:e.target.checked?[0,0,0,1]:null}))}}),(0,Ie.tZ)("input",{type:"color",value:n.clearColor?(t=n.clearColor,"#"+((1<<24)+(~~(255*t[0])<<16)+(~~(255*t[1])<<8)+~~(255*t[2])).toString(16).slice(1)):void 0,onChange:function(e){var t=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?t.slice(1).map((function(e){return parseInt(e,16)/255})):null}(e.target.value);t&&r(km(km({},n),{},{clearColor:[].concat((0,nn.Z)(t),[1])}))}})]}),(0,Ie.BX)(Ee.Ug,{spacing:1,align:"center",children:[(0,Ie.tZ)(Oe.Z,{size:"small",foreground:"2",children:"Debug"}),(0,Ie.tZ)(hm.Z,{isOn:n.debug,onChange:function(e){r(km(km({},n),{},{debug:e.target.checked}))}})]}),(0,Ie.BX)(Ee.Ug,{spacing:1,align:"center",children:[(0,Ie.tZ)(Oe.Z,{size:"small",foreground:"2",children:"Version"}),(0,Ie.tZ)("select",{name:"version",value:n.version,onChange:function(e){r(km(km({},n),{},{version:e.currentTarget.value}))},children:bm.map((function(e){return(0,Ie.tZ)("option",{value:e,children:e},e)}))})]})]})})]})},Em=n(10872);var _m=function(e){var t=e.isActive,n=e.name,r=e.icon,i=e.options,a=e.onClick,o=e.onRename,s=pe.useState(!1),c=(0,J.Z)(s,2),l=c[0],u=c[1],d=pe.useState(null),p=(0,J.Z)(d,2),f=p[0],h=p[1],m=(0,Yl.Z)((function(){u(!1)}),[]),g=(0,Yl.Z)((function(){h(null)}),[]);return pe.useEffect((function(){g.current&&null!==f&&g.current.focus()}),[g,f]),(0,Ie.BX)("div",{onClick:a,className:"jsx-3068685327 "+(Xt()("entry",{active:t&&null===f})||""),children:[(0,Ie.tZ)(se(),{id:"3068685327",children:[".entry.jsx-3068685327{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;border-radius:var(--border-radius-4);padding:var(--space-8);color:var(--foreground-dimmer);position:relative;}",".entry.active.jsx-3068685327{background:var(--accent-primary-default) !important;color:var(--white) !important;font-weight:var(--font-weight-medium) !important;}",".entry.jsx-3068685327:hover{color:var(--foreground-default);background:var(--background-higher);cursor:pointer;}",".options-icon.jsx-3068685327{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:var(--space-16);height:var(--space-16);opacity:0;color:var(--foreground-dimmest);}",".options-icon.jsx-3068685327:hover{color:var(--foreground-dimmest);}",".options-icon.active.jsx-3068685327{opacity:1 !important;color:var(--white) !important;}",".entry.jsx-3068685327:hover .options-icon.jsx-3068685327{opacity:1;}",".options-box.jsx-3068685327{position:absolute;top:var(--space-32);right:var(--space-16);padding:var(--space-4);background:var(--background-default);border:1px solid var(--outline-dimmest);border-radius:var(--border-radius-4);font-size:var(--font-size-subhead-default);font-weight:var(--font-weight-regular) !important;z-index:500;}",".option.jsx-3068685327{padding:var(--space-8);border-radius:var(--border-radius-4);color:var(--foreground-default);}",".option.danger.jsx-3068685327{color:var(--accent-negative-default);}",".option.jsx-3068685327:hover{background:var(--background-higher);}",".option.danger.jsx-3068685327:hover{background:var(--accent-negative-default);color:var(--white);}"]}),(0,Ie.BX)(Ee.Ug,{spacing:1,align:"center",children:[r,null===f?(0,Ie.tZ)("p",{className:"jsx-3068685327",children:n}):(0,Ie.tZ)(un.ZP,{ref:g,value:f,onChange:function(e){h(e.currentTarget.value)},onKeyDown:ym({Escape:function(){h(null)},Enter:function(){o&&f&&o(f),h(null)}})})]}),i&&i.length>0&&(0,Ie.tZ)("div",{onClick:function(e){e.stopPropagation(),u(!l)},className:"jsx-3068685327 "+(Xt()("options-icon",{active:t})||""),children:(0,Ie.tZ)(Em.Z,{})}),i&&i.length>0&&l&&(0,Ie.tZ)("div",{ref:m,onKeyDown:ym({Escape:function(){u(!1)}}),className:"jsx-3068685327 options-box",children:i.map((function(e){return e?(0,Ie.tZ)("div",{onClick:function(t){t.stopPropagation(),u(!1),e.action(),"rename"===e.name&&h(n)},className:"jsx-3068685327 "+(Xt()("option",{danger:e.danger})||""),children:e.name},e.name):null}))})]})};function Cm(e){var t=e.close,n=e.entries,r=(0,Fe.Z)(),i=r.fs,a=r.session,o=(0,Yl.Z)(t,[]),s=(0,sn.Z)().showError,c=fm({name:""}),l=(0,J.Z)(c,3),u=l[0],d=l[2];return pe.useEffect((function(){o.current&&o.current.focus()}),[o]),(0,Ie.tZ)(un.ZP,{ref:o,name:"name",onChange:d,onKeyDown:ym({Escape:t,Enter:function(){var e="".concat(u.name,".js"),r="scenes/".concat(e);n.includes(e)?s("scene '".concat(u.name,"' already exists")):(i.writeFile(r,jr.Z.from("")).then((function(){a.openFile(r)})),t())}})})}var Sm=function(e){var t=e.gameConf,n=(0,Fe.Z)(),r=n.fs,i=n.session,a=(0,Nn.Z)(),o=pe.useState(!1),s=(0,J.Z)(o,2),c=s[0],l=s[1],u=(0,sn.Z)().showError,d=pe.useState(null),p=(0,J.Z)(d,2),f=p[0],h=p[1],m=((0,hi.Z)({path:"scenes",initialExpanded:!0,fs:r}).children||[]).filter((function(e){return e.type===In.Tv.File})).map((function(e){return e.filename})).sort();return(0,Ie.BX)(vm,{fileDrag:{accept:["text/javascript"],onDrop:function(e){var t="scenes/".concat(e.name);m.includes(t)?u("scene '".concat((0,Tn.eb)(e.name),"' already exists")):e.text().then((function(e){r.writeFile(t,jr.Z.from(e))}))}},children:[(0,Ie.tZ)(mm,{sub:!0,title:"Scenes",actions:[{icon:(0,Ie.tZ)(ln.Z,{}),action:function(){return l(!0)}}]}),(0,Ie.tZ)("div",{children:m.map((function(e){var n="scenes/".concat(e),o=(0,Tn.eb)(e),s=[{name:"rename",action:function(){}}];return m.length>1&&s.push({name:"delete",action:function(){return h(n)},danger:!0}),(0,Ie.tZ)(_m,{isActive:n===a,onClick:function(){return i.openFile(n)},onRename:function(e){r.moveFile(n,"scenes/".concat(e,".js")).then((function(e){e.error&&u("failed to rename")}))},name:o,icon:t.startScene===o&&(0,Ie.tZ)(Yc.Z,{}),options:s},o)}))}),c&&(0,Ie.tZ)(Cm,{entries:m,close:function(){return l(!1)}}),f&&(0,Ie.tZ)(zt.Z,{isOpen:Boolean(f),onRequestClose:function(){return h(null)},children:(0,Ie.tZ)(cm.Z,{danger:!0,prompt:"Delete scene '".concat((0,Tn.eb)(f),"' ?"),desc:"Are you sure? This cannot be undone.",onCancel:function(){return h(null)},onConfirm:function(){r.deleteFile(f),h(null)}})})]})},Pm=n(98297),Nm=n(80291),Im=n(54098),Tm=n.n(Im);var Dm=function(e){var t=e.kind,n=e.renderItem,r=e.onRequestClose,i=e.onAdd,a=(0,Fe.Z)(),o=a.fs,s=a.session,c=pe.useState([]),l=(0,J.Z)(c,2),u=l[0],d=l[1],p=pe.useState(""),f=(0,J.Z)(p,2),h=f[0],m=f[1],g="https://kaboomjs.com/assets/".concat(t),v=(0,sn.Z)().showError;function b(e){var n="".concat(g,"/").concat(e);Tm()(n).then((function(e){return e.arrayBuffer()})).then((function(a){var c="".concat(t,"/").concat(e);o.writeFile(c,jr.Z.from(a)).then((function(t){if(t.error)throw new Error(t.error);s.openFile(c),i&&i(e,n)})),r()})).catch(v)}return pe.useEffect((function(){Tm()("".concat(g,"?fmt=json")).then((function(e){return e.json()})).then((function(e){return d(e)})).catch(v)}),[d,v,g]),(0,Ie.BX)("div",{className:"jsx-309452596 assets",children:[(0,Ie.BX)(Ee.gC,{spacing:2,children:[(0,Ie.tZ)(Xe.Z,{level:3,children:"Assets Lib (beta)"}),0===u.length?(0,Ie.tZ)(Oe.Z,{foreground:2,children:"Loading..."}):(0,Ie.BX)(Ie.HY,{children:[(0,Ie.tZ)(un.ZP,{large:!0,label:"Search",onChange:function(e){m(e.target.value)}}),(0,Ie.tZ)("div",{className:"jsx-309452596 box",children:u.filter((function(e){return!h||e.includes(h)})).map((function(e){return n({name:e,url:"".concat(g,"/").concat(e),add:function(){return b(e)}})}))}),(0,Ie.tZ)(je.Z,{size:"small",onClick:function(){u.length>0&&b(u[Math.floor(Math.random()*u.length)])},children:"I'm Feeling Lucky"})]})]}),(0,Ie.tZ)(se(),{id:"309452596",children:[".assets.jsx-309452596{padding:var(--space-24);}",".box.jsx-309452596{width:100%;height:320px;overflow-x:hidden;overflow-y:scroll;}"]})]})};function Rm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Am(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rm(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lm(e){var t=e.url,n=e.add;return(0,Ie.BX)(Ie.HY,{children:[(0,Ie.tZ)("img",{src:t,loading:"lazy",onClick:n,className:"jsx-2838917446 entry"}),(0,Ie.tZ)(se(),{id:"2838917446",children:[".entry.jsx-2838917446{padding:var(--space-16);height:120px;image-rendering:pixelated;border-radius:var(--border-radius-4);}",".entry.jsx-2838917446:hover{cursor:pointer;background:var(--background-root);}"]})]})}function Bm(e){var t=e.close,n=e.entries,r=(0,Fe.Z)(),i=r.fs,a=r.session,o=(0,Yl.Z)(t,[]),s=pe.useRef(null),c=(0,sn.Z)().showError,l=fm({name:"",width:0,height:0}),u=(0,J.Z)(l,3),d=u[0],p=u[2];pe.useEffect((function(){s.current&&s.current.focus()}),[s]);var f=function(){var e=d.width,r=d.height;if(0!==d.name.length)if(isNaN(e)||e<=0||e>256)c("only supports sprites smaller than 256x256 yet");else if(isNaN(r)||r<=0||r>256)c("only supports sprites smaller than 256x256 yet");else{var o="".concat(d.name,".kbmsprite"),s="sprites/".concat(o);n.includes(o)?c("sprite '".concat(d.name,"' already exists")):(i.writeFile(s,jr.Z.from(JSON.stringify({frames:[{pixels:Array(d.width*d.height*4).fill(0),width:d.width,height:d.height}],width:d.width,height:d.height}))).then((function(){a.openFile(s)})),t())}else c("invalid 'name'")};return(0,Ie.BX)("div",{ref:o,onKeyDown:ym({Escape:t,Enter:f}),className:"jsx-2487777647 root",children:[(0,Ie.tZ)(se(),{id:"2487777647",children:[".root.jsx-2487777647{background:var(--background-root);border-radius:var(--border-radius-4);margin:var(--space-8) auto;width:calc(100%);padding:var(--space-16);}"]}),(0,Ie.BX)(Ee.gC,{spacing:1,children:[(0,Ie.tZ)(un.ZP,{label:"Name",name:"name",large:!0,ref:s,onChange:p}),(0,Ie.BX)(Ee.Ug,{spacing:1,wrap:"nowrap",children:[(0,Ie.tZ)(un.ZP,{label:"Width",name:"width",large:!0,onChange:p}),(0,Ie.tZ)(un.ZP,{label:"Height",name:"height",large:!0,onChange:p})]}),(0,Ie.BX)(Ee.Ug,{spacing:1,children:[(0,Ie.tZ)(je.Z,{size:"medium",onClick:t,children:"Cancel"}),(0,Ie.tZ)(je.Z,{size:"medium",color:"primary",onClick:f,children:"Create"})]})]})]})}var Um=function(){var e=(0,Fe.Z)(),t=e.fs,n=e.session,r=(0,sn.Z)().showError,i=(0,Nn.Z)(),a=pe.useState(!1),o=(0,J.Z)(a,2),s=o[0],c=o[1],l=pe.useState(!1),u=(0,J.Z)(l,2),d=u[0],p=u[1],f=pe.useState(null),h=(0,J.Z)(f,2),m=h[0],g=h[1],v=pe.useState({}),b=(0,J.Z)(v,2),y=b[0],x=b[1],w=pe.useCallback((function(e){var n=function(){var n=(0,$.Z)(le().mark((function n(){var r,i,a,o,s,c,l,u,d;return le().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r="sprites/".concat(e),n.next=3,t.stat(r);case 3:if((i=n.sent).exists){n.next=7;break}return y[e]&&x((function(t){var n=Am({},t);return delete n[e],n})),n.abrupt("return");case 7:if(a=i.lastModified.getTime(),!y[e]||y[e].lastMod!==a){n.next=10;break}return n.abrupt("return");case 10:return n.next=12,t.readFile(r);case 12:if(!(o=n.sent).error){n.next=15;break}return n.abrupt("return");case 15:e.endsWith(".kbmsprite")?(s=o.content.toString(),c=JSON.parse(s),x((function(t){return Am(Am({},t),{},(0,ee.Z)({},e,{lastMod:a,img:c.preview}))}))):e.endsWith("pedit")?(l=o.content.toString(),u=JSON.parse(l),x((function(t){return Am(Am({},t),{},(0,ee.Z)({},e,{lastMod:a,img:u.frames[0]}))}))):(d=(0,Tn.yC)(r))&&x((function(t){return Am(Am({},t),{},(0,ee.Z)({},e,{lastMod:a,img:"data:".concat(d,";base64,").concat(o.content.toString("base64"))}))}));case 16:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return n(),y[e]?y[e].img:null}),[y,t]),k=((0,hi.Z)({path:"sprites",initialExpanded:!0,fs:t}).children||[]).filter((function(e){return e.type===In.Tv.File})).map((function(e){return e.filename})).sort(),Z=["image/png","image/jpeg",".pedit",".kbmsprite"],j=function(e){var n="sprites/".concat(e.name);k.includes(n)?r("sprite '".concat((0,Tn.eb)(e.name),"' already exists")):e.arrayBuffer().then((function(e){t.writeFile(n,jr.Z.from(e))}))},O=[{icon:(0,Ie.tZ)(Pm.Z,{}),action:function(){return p(!0)}},{icon:(0,Ie.tZ)(Nm.Z,{}),action:function(){return xm(j,Z)}},{icon:(0,Ie.tZ)(ln.Z,{}),action:function(){return c(!0)}}];return(0,Ie.BX)(vm,{fileDrag:{accept:Z,onDrop:j},children:[(0,Ie.tZ)(mm,{sub:!0,title:"Sprites",actions:O}),(0,Ie.tZ)("div",{className:"jsx-3831399815",children:k.map((function(e){var a="sprites/".concat(e),o=(0,Tn.eb)(e),s=w(e);return(0,Ie.tZ)(_m,{isActive:a===i,onClick:function(){return n.openFile(a)},onRename:function(n){t.moveFile(a,"sprites/".concat(n,".").concat((0,Tn.r6)(e))).then((function(e){e.error&&r("failed to rename")}))},icon:(0,Ie.tZ)("div",{className:"jsx-3831399815 preview-img",children:s&&(0,Ie.tZ)("img",{src:s,className:"jsx-3831399815"})}),name:o,options:[{name:"rename",action:function(){}},{name:"delete",action:function(){return g(a)},danger:!0}]},o)}))}),s&&(0,Ie.tZ)(Bm,{entries:k,close:function(){return c(!1)}}),m&&(0,Ie.tZ)(zt.Z,{isOpen:Boolean(m),onRequestClose:function(){return g(null)},children:(0,Ie.tZ)(cm.Z,{danger:!0,prompt:"Delete sprite '".concat((0,Tn.eb)(m),"' ?"),desc:"Are you sure? This cannot be undone.",onCancel:function(){return g(null)},onConfirm:function(){t.deleteFile(m),g(null)}})}),(0,Ie.tZ)(zt.Z,{isOpen:d,onRequestClose:function(){return p(!1)},children:(0,Ie.tZ)(Dm,{kind:"sprites",renderItem:Lm,onRequestClose:function(){return p(!1)}})}),(0,Ie.tZ)(se(),{id:"3831399815",children:[".preview-img.jsx-3831399815{width:var(--space-32);height:var(--space-32);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow:hidden;}",".preview-img.jsx-3831399815 img.jsx-3831399815{width:100%;image-rendering:pixelated;image-rendering:crisp-edges;}"]})]})};function Mm(e){var t=e.name,n=e.url,r=e.add;return(0,Ie.BX)(Ee.Ug,{justify:"space-between",align:"center",children:[(0,Ie.BX)(Ee.gC,{spacing:1,children:[(0,Ie.tZ)(Oe.Z,{children:t}),(0,Ie.tZ)("audio",{src:n,controls:!0})]}),(0,Ie.tZ)(je.Z,{onClick:r,children:"Import"})]})}var Fm=function(){var e=(0,Fe.Z)(),t=e.fs,n=e.session,r=(0,Nn.Z)(),i=(0,sn.Z)().showError,a=pe.useState(null),o=(0,J.Z)(a,2),s=o[0],c=o[1],l=pe.useState(!1),u=(0,J.Z)(l,2),d=u[0],p=u[1],f=((0,hi.Z)({path:"sounds",initialExpanded:!0,fs:t}).children||[]).filter((function(e){return e.type===In.Tv.File})).map((function(e){return e.filename})).sort(),h=["audio/ogg","audio/mpeg","audio/wav"],m=function(e){var n="sounds/".concat(e.name);f.includes(n)?i("sound '".concat((0,Tn.eb)(e.name),"' already exists")):e.arrayBuffer().then((function(e){t.writeFile(n,jr.Z.from(e))}))},g=[{icon:(0,Ie.tZ)(Pm.Z,{}),action:function(){return p(!0)}},{icon:(0,Ie.tZ)(Nm.Z,{}),action:function(){return xm(m,h)}}];return(0,Ie.BX)(vm,{fileDrag:{accept:h,onDrop:m},children:[(0,Ie.tZ)(mm,{sub:!0,title:"Sounds",actions:g}),(0,Ie.tZ)("div",{children:f.map((function(e){var a=(0,Tn.eb)(e),o="sounds/".concat(e);return(0,Ie.tZ)(_m,{isActive:o===r,onClick:function(){return n.openFile(o)},onRename:function(n){t.moveFile(o,"sounds/".concat(n,".").concat((0,Tn.r6)(e))).then((function(e){e.error&&i("failed to rename")}))},name:a,options:[{name:"rename",action:function(){}},{name:"delete",action:function(){return c(o)},danger:!0}]},a)}))}),s&&(0,Ie.tZ)(zt.Z,{isOpen:Boolean(s),onRequestClose:function(){return c(null)},children:(0,Ie.tZ)(cm.Z,{danger:!0,prompt:"Delete sound '".concat((0,Tn.eb)(s),"' ?"),desc:"Are you sure? This cannot be undone.",onCancel:function(){return c(null)},onConfirm:function(){t.deleteFile(s),c(null)}})}),(0,Ie.tZ)(zt.Z,{isOpen:d,onRequestClose:function(){return p(!1)},children:(0,Ie.tZ)(Dm,{kind:"sounds",renderItem:Mm,onRequestClose:function(){return p(!1)},onAdd:function(e,t){return new window.Audio(t).play()}})})]})},Xm=n(99846);function zm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zm(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gm=function(e){var t=e.wid,n=e.debugState,r=e.version,i=e.setDebugState,a=e.handleDebugStateInput,o=(0,ft.I0)(),s=pe.useState(!1),c=(0,J.Z)(s,2),l=c[0],u=c[1],d=pe.useState(!1),p=(0,J.Z)(d,2),f=p[0],h=p[1],m=(0,Co.Z)(),g=pe.useCallback((function(e){m.current&&o({type:"EVAL_CODE",wid:t,clean:!1,silent:!0,code:e})}),[o,t,m]),v=(0,Xm.H)(r,"0.3.0"),b=(0,Xm.H)(r,"0.4.0"),y=(0,Xm.H)(r,"0.5.0"),x=y?"debug":b?"dbg()":"kaboom.debug";return pe.useEffect((function(){v||g("pause(".concat(l,")"))}),[r,g,l]),pe.useEffect((function(){v&&g("".concat(x,".paused = ").concat(n.paused?"true":"false"))}),[r,g,n.paused]),pe.useEffect((function(){g("".concat(x,".showArea = ").concat(n.showArea?"true":"false"))}),[g,n.showArea]),pe.useEffect((function(){g("".concat(x,".hoverInfo = ").concat(n.hoverInfo?"true":"false"))}),[g,n.hoverInfo]),pe.useEffect((function(){g("".concat(x,".timeScale = ").concat(n.timeScale))}),[g,n.timeScale]),(0,Ie.BX)(vm,{children:[(0,Ie.tZ)(mm,{sub:!0,title:"Debug",actions:[{icon:(0,Ie.tZ)(Pu.Z,{rotate:f?0:-90}),action:function(){return h(!f)}}]}),f&&(0,Ie.tZ)("div",{className:"box",children:(0,Ie.BX)(Ee.gC,{spacing:1,children:[(0,Ie.tZ)(je.Z,{size:"medium",onClick:function(){v?i(Vm(Vm({},n),{},{paused:!n.paused})):u(!l)},children:(v?n.paused:l)?"Unpause":"Pause"}),(0,Ie.tZ)(je.Z,{size:"medium",onClick:function(){o({type:"EVAL_CODE",wid:t,clean:!1,silent:!0,code:y?"debug.stepFrame()":"stepFrame()"})},children:"Step Frame"}),(0,Ie.BX)(Ee.Ug,{spacing:1,align:"center",children:[(0,Ie.tZ)(Oe.Z,{size:"small",foreground:"2",children:"Show Area"}),(0,Ie.tZ)(hm.Z,{isOn:n.showArea,onChange:function(e){i(Vm(Vm({},n),{},{showArea:e.currentTarget.checked}))}})]}),(0,Ie.BX)(Ee.Ug,{spacing:1,align:"center",children:[(0,Ie.tZ)(Oe.Z,{size:"small",foreground:"2",children:"Hover Info"}),(0,Ie.tZ)(hm.Z,{isOn:n.hoverInfo,onChange:function(e){i(Vm(Vm({},n),{},{hoverInfo:e.currentTarget.checked}))}})]}),(0,Ie.tZ)(Oe.Z,{size:"small",foreground:"2",children:"Time Scale"}),(0,Ie.BX)(Ee.Ug,{spacing:1,wrap:"nowrap",children:[(0,Ie.tZ)("input",{type:"range",name:"timeScale",min:"0",max:"2",value:n.timeScale,step:"0.25",onChange:a}),(0,Ie.tZ)(Oe.Z,{size:"small",foreground:"1",children:n.timeScale})]})]})})]})},Hm=[{title:"Building Asteroids in Kaboom.js",url:"https://docs.replit.com/tutorials/23-build-asteroids-with-kaboom",img:"https://docs.replit.com/images/tutorials/23-asteroids-kaboom/asteroids-game.gif"},{title:"Building Snake in Kaboom.js",url:"https://docs.replit.com/tutorials/21-build-snake-with-kaboom",img:"https://docs.replit.com/images/tutorials/21-snake-kaboom/updated-graphic.gif"},{title:"Build a Space Shooter with Kaboom.js",url:"https://docs.replit.com/tutorials/24-build-space-shooter-with-kaboom",img:"https://docs.replit.com/images/tutorials/24-space-shooter-kaboom/gameplay.gif"}];function Wm(e){return(0,Ie.BX)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"jsx-1860337860 entry",children:[(0,Ie.tZ)("img",{src:e.img,className:"jsx-1860337860 img"}),(0,Ie.tZ)(Oe.Z,{children:e.title}),(0,Ie.tZ)(se(),{id:"1860337860",children:[".entry.jsx-1860337860{width:100%;border-radius:var(--border-radius-4);padding:var(--space-16);display:block;}",".entry.jsx-1860337860:hover{-webkit-text-decoration:none;text-decoration:none;background:var(--background-root);}",".entry.jsx-1860337860:focus{-webkit-text-decoration:none;text-decoration:none;}",".img.jsx-1860337860{width:100%;height:120px;border-radius:var(--border-radius-4);}"]})]})}var Km=function(){return(0,Ie.BX)("div",{className:"jsx-2193845616 tutorials",children:[(0,Ie.tZ)(Xe.Z,{level:4,children:"Kaboom Tutorials"}),(0,Ie.tZ)("div",{className:"jsx-2193845616 entries",children:Hm.map(Wm)}),(0,Ie.tZ)(se(),{id:"2193845616",children:[".tutorials.jsx-2193845616{padding:var(--space-32);box-sizing:border-box;}",".entries.jsx-2193845616{margin-top:var(--space-16);display:grid;grid-template-columns:repeat(2,auto);}"]})]})};function qm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ym(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qm(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qm=Ma(["KABOOM_RUN_COMPLETE"]),Jm=Qm.receiver,$m=Qm.useReceiver;function eg(e){var t=e.wid,n=(0,ft.I0)(),r=(0,Fe.Z)().fs,i=(0,sn.Z)().showError,a=(0,Co.Z)(),o=pe.useState(!1),s=(0,J.Z)(o,2),c=s[0],l=s[1];n({type:"LOAD_FILE",wid:t,path:"scenes/main.js"});var u=bm[0],d=pe.useState({fullscreen:!0,width:240,height:240,scale:2,startScene:"main",debug:!0,clearColor:null,version:u}),p=(0,J.Z)(d,2),f=p[0],h=p[1],m=fm({showArea:!1,hoverInfo:!1,timeScale:1,paused:!1}),g=(0,J.Z)(m,3),v=g[0],b=g[1],y=g[2];return pe.useEffect((function(){var e=function(){var e=(0,$.Z)(le().mark((function e(){var t,n;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.readFile("conf.json");case 2:if((t=e.sent)&&!t.error){e.next=6;break}return i("failed to read conf.json"),e.abrupt("return");case 6:(n=JSON.parse(t.content.toString())).version||(n.version=u),"master"===n.version&&(n.version="0.0.0"),h(n);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),pe.useEffect((function(){a.current&&r.writeFile("conf.json",jr.Z.from(JSON.stringify(f))).then((function(e){e.error&&i("failed to write config")}))}),[f]),$m((function(e){if("KABOOM_RUN_COMPLETE"===e.action.type){var r="\nkaboom.debug.showArea = ".concat(v.showArea,";\nkaboom.debug.hoverInfo = ").concat(v.hoverInfo,";\nkaboom.debug.timeScale = ").concat(v.timeScale,";\n");n({type:"EVAL_CODE",wid:t,clean:!1,code:r,silent:!0})}})),(0,Ie.BX)("div",Ym(Ym({},e),{},{className:"jsx-743611975 kaboom",children:[(0,Ie.BX)(Ee.gC,{spacing:1,children:[(0,Ie.tZ)(Om,{gameConf:f,setGameConf:h}),(0,Ie.tZ)(Sm,{gameConf:f}),(0,Ie.tZ)(Um,{}),(0,Ie.tZ)(Fm,{}),(0,Ie.tZ)(Gm,{wid:t,version:f.version,debugState:v,setDebugState:b,handleDebugStateInput:y}),(0,Ie.tZ)(je.Z,{fullWidth:!1,onClick:function(){return l(!0)},children:"Tutorials"}),(0,Ie.tZ)(zt.Z,{isOpen:c,onRequestClose:function(){return l(!1)},children:(0,Ie.tZ)(Km,{})})]}),(0,Ie.tZ)(se(),{id:"743611975",children:[".kaboom.jsx-743611975{color:var(--foreground-default);background:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:var(--space-8);border-top-right-radius:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;overflow-y:scroll;width:100%;}",".kaboom.jsx-743611975>*.jsx-743611975{margin-bottom:var(--space-8);}",".kaboom.jsx-743611975:last-child{margin-bottom:0;}",".kaboom.jsx-743611975 .box{padding:var(--space-8);}",".kaboom.jsx-743611975 select{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:var(--background-higher);border:1px solid var(--outline-dimmest);padding:var(--space-8);color:var(--foreground-default);font-size:var(--font-size-subhead-default);font-weight:var(--font-weight-medium);border-radius:var(--border-radius-4);}",".kaboom.jsx-743611975 select:hover{background-color:var(--background-higher);cursor:pointer;}",".kaboom.jsx-743611975 select:focus{outline:none;}",".kaboom.jsx-743611975 input[type='range']{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:var(--background-higher);border-radius:var(--border-radius-4);height:var(--space-8);}",".kaboom.jsx-743611975 input[type='range']:focus{outline:none;}",".kaboom.jsx-743611975 input[type='range']::-webkit-slider-thumb{-webkit-appearance:none;background:var(--foreground-dimmest);width:var(--space-16);height:var(--space-16);border-radius:var(--space-8);}",".tut-btn.jsx-743611975{margin-top:var(--space-8);padding:0 var(--space-8);}"]})]}))}var tg=n(99200);var ng=function(e){var t=e.title,n=e.sub,r=void 0!==n&&n,i=e.actions,a=void 0===i?[]:i;return(0,Ie.BX)(Ee.Ug,{justify:"space-between",align:"center",children:[(0,Ie.tZ)(se(),{id:"2650311974",children:[".header-action.jsx-2650311974{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:var(--space-24);height:var(--space-24);border-radius:var(--border-radius-4);color:var(--foreground-dimmer);}",".header-action.jsx-2650311974:hover{background:var(--background-higher);cursor:pointer;}"]}),(0,Ie.tZ)(Xe.Z,{level:r?5:4,children:t}),(0,Ie.tZ)(Ee.Ug,{spacing:"4px",align:"center",children:a&&a.map((function(e,t){return(0,Ie.tZ)("div",{onClick:e.action,className:"jsx-2650311974 header-action",children:e.icon},t)}))})]})};var rg=function(e){var t=e.fileDrag,n=e.children,r=pe.useState(!1),i=(0,J.Z)(r,2),a=i[0],o=i[1],s=pe.useRef(0);return(0,Ie.BX)("div",{onDragEnter:function(e){if(t){e.preventDefault(),e.stopPropagation();var n=!0;if(e.dataTransfer.items&&e.dataTransfer.items.length>0){if(t.accept)for(var r=e.dataTransfer.items,i=0;i<r.length;i++){var a=r[i];t.accept.includes(a.type)||(n=!1)}n&&(o(!0),s.current++)}}},onDragLeave:function(e){t&&(e.preventDefault(),e.stopPropagation(),s.current--,0===s.current&&o(!1))},onDrop:function(e){t&&(e.preventDefault(),e.stopPropagation(),s.current=0,o(!1),(0,nn.Z)(e.dataTransfer.files).filter((function(e){return t.accept.includes(e.type)})).forEach(t.onDrop))},className:"jsx-26096692 section",children:[(0,Ie.tZ)(se(),{id:"26096692",children:[".section.jsx-26096692{position:relative;width:100%;}",".dragfilter.jsx-26096692{position:absolute;width:100%;height:100%;top:0;left:0;background:var(--accent-primary-default);border-radius:var(--border-radius-4);opacity:0.2;}",".dragfilter.hidden.jsx-26096692{display:none !important;}"]}),n,(0,Ie.tZ)("div",{className:"jsx-26096692 "+(Xt()("dragfilter",{hidden:!a})||"")})]})};var ig,ag=function(){var e=(0,Fe.Z)().session,t=pe.useState(!1),n=(0,J.Z)(t,2),r=n[0],i=n[1];return(0,Ie.BX)(rg,{children:[(0,Ie.tZ)(ng,{title:"Kaboom",actions:[{icon:(0,Ie.tZ)(Pu.Z,{rotate:r?0:-90}),action:function(){return i(!r)}}]}),r&&(0,Ie.BX)(Ee.gC,{spacing:1,children:[(0,Ie.tZ)("div",{}),(0,Ie.tZ)(je.Z,{Icon:Ap.Z,size:"small",onClick:function(){return e.openFile("template.html")},children:"Edit HTML Template"})]})]})};function og(e){return function(t){for(var n in e)t.key===n&&e[n](t)}}function sg(e,t){ig||(ig=document.createElement("input")).setAttribute("type","file"),ig.setAttribute("accept",t.join(","));ig.addEventListener("change",(function t(){ig.files&&((0,nn.Z)(ig.files).forEach(e),ig.removeEventListener("change",t))})),ig.click()}var cg=function(e){var t=e.isActive,n=e.name,r=e.icon,i=e.options,a=e.onClick,o=e.onRename,s=pe.useState(!1),c=(0,J.Z)(s,2),l=c[0],u=c[1],d=pe.useState(null),p=(0,J.Z)(d,2),f=p[0],h=p[1],m=(0,Yl.Z)((function(){u(!1)}),[]),g=(0,Yl.Z)((function(){h(null)}),[]);return pe.useEffect((function(){g.current&&null!==f&&g.current.focus()}),[g,f]),(0,Ie.BX)("div",{onClick:a,className:"jsx-2923745127 "+(Xt()("entry",{active:t&&null===f})||""),children:[(0,Ie.BX)(Ee.Ug,{spacing:1,align:"center",children:[r,null===f?(0,Ie.tZ)("p",{className:"jsx-2923745127",children:n}):(0,Ie.tZ)(un.ZP,{ref:g,value:f,onChange:function(e){h(e.currentTarget.value)},onKeyDown:og({Escape:function(){h(null)},Enter:function(){o&&f&&o(f),h(null)}})})]}),i&&i.length>0&&(0,Ie.tZ)("div",{onClick:function(e){e.stopPropagation(),u(!l)},className:"jsx-2923745127 "+(Xt()("options-icon",{active:t})||""),children:(0,Ie.tZ)(Em.Z,{})}),i&&i.length>0&&l&&(0,Ie.tZ)("div",{ref:m,onKeyDown:og({Escape:function(){u(!1)}}),className:"jsx-2923745127 options-box",children:i.map((function(e){return e?(0,Ie.tZ)("div",{onClick:function(t){t.stopPropagation(),u(!1),e.action(),"Rename"===e.name&&h(n)},className:"jsx-2923745127 "+(Xt()("option",{danger:e.danger})||""),children:e.name},e.name):null}))}),(0,Ie.tZ)(se(),{id:"2923745127",children:[".entry.jsx-2923745127{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;border-radius:var(--border-radius-4);padding:var(--space-8);color:var(--foreground-dimmer);position:relative;}",".entry.active.jsx-2923745127{background:var(--accent-primary-default) !important;color:var(--white) !important;font-weight:var(--font-weight-medium) !important;}",".entry.jsx-2923745127:hover{color:var(--foreground-default);background:var(--background-higher);cursor:pointer;}",".options-icon.jsx-2923745127{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:var(--space-16);height:var(--space-16);opacity:0;color:var(--foreground-dimmest);}",".options-icon.jsx-2923745127:hover{color:var(--foreground-dimmest);}",".options-icon.active.jsx-2923745127{opacity:1 !important;color:var(--white) !important;}",".entry.jsx-2923745127:hover .options-icon.jsx-2923745127{opacity:1;}",".options-box.jsx-2923745127{position:absolute;top:var(--space-32);right:var(--space-16);padding:var(--space-4);background:var(--background-default);border:1px solid var(--outline-dimmest);border-radius:var(--border-radius-4);font-size:var(--font-size-subhead-default);font-weight:var(--font-weight-regular) !important;z-index:500;}",".option.jsx-2923745127{padding:var(--space-8);border-radius:var(--border-radius-4);color:var(--foreground-default);}",".option.danger.jsx-2923745127{color:var(--accent-negative-default);}",".option.jsx-2923745127:hover{background:var(--background-higher);}",".option.danger.jsx-2923745127:hover{background:var(--accent-negative-default);color:var(--white);}"]})]})};function lg(e){var t=e.close,n=e.entries,r=(0,Fe.Z)(),i=r.fs,a=r.session,o=(0,Yl.Z)(t,[]),s=(0,sn.Z)().showError,c=fm({name:""}),l=(0,J.Z)(c,3),u=l[0],d=l[2];return pe.useEffect((function(){o.current&&o.current.focus()}),[o]),(0,Ie.tZ)(un.ZP,{ref:o,name:"name",onChange:d,onKeyDown:og({Escape:t,Enter:function(){var e="".concat(u.name,".js"),r="code/".concat(e);n.includes(e)?s("file '".concat(u.name,"' already exists")):(i.writeFile(r,jr.Z.from("")).then((function(){a.openFile(r)})),t())}})})}var ug=function(){var e=(0,Fe.Z)(),t=e.fs,n=e.session,r=(0,Nn.Z)(),i=pe.useState(!1),a=(0,J.Z)(i,2),o=a[0],s=a[1],c=(0,sn.Z)().showError,l=pe.useState(null),u=(0,J.Z)(l,2),d=u[0],p=u[1],f=((0,hi.Z)({path:"code",initialExpanded:!0,fs:t}).children||[]).filter((function(e){return e.type===In.Tv.File})).map((function(e){return e.filename})).sort();return(0,Ie.BX)(rg,{fileDrag:{accept:["text/javascript"],onDrop:function(e){var n="code/".concat(e.name);f.includes(n)?c("scene '".concat((0,Tn.eb)(e.name),"' already exists")):e.text().then((function(e){t.writeFile(n,jr.Z.from(e))}))}},children:[(0,Ie.tZ)(ng,{sub:!0,title:"Code",actions:[{icon:(0,Ie.tZ)(ln.Z,{}),action:function(){return s(!0)}}]}),(0,Ie.tZ)(Dc.Z,{height:"4px"}),(0,Ie.tZ)("div",{children:f.map((function(e){var i="code/".concat(e),a=(0,Tn.eb)(e),o=[{name:"Rename",action:function(){}}];return"main"!==a&&o.push({name:"Delete",action:function(){return p(i)},danger:!0}),(0,Ie.tZ)(cg,{isActive:i===r,onClick:function(){return n.openFile(i)},onRename:function(e){t.moveFile(i,"code/".concat(e,".js")).then((function(e){e.error&&c("failed to rename")}))},name:a,options:o},a)}))}),o&&(0,Ie.tZ)(lg,{entries:f,close:function(){return s(!1)}}),d&&(0,Ie.tZ)(zt.Z,{isOpen:Boolean(d),onRequestClose:function(){return p(null)},children:(0,Ie.tZ)(cm.Z,{danger:!0,prompt:"Delete scene '".concat((0,Tn.eb)(d),"' ?"),desc:"Are you sure? This cannot be undone.",onCancel:function(){return p(null)},onConfirm:function(){t.deleteFile(d),p(null)}})})]})};var dg=function(e){var t=e.kind,n=e.renderItem,r=e.onRequestClose,i=e.onAdd,a=(0,Fe.Z)(),o=a.fs,s=a.session,c=pe.useState([]),l=(0,J.Z)(c,2),u=l[0],d=l[1],p=pe.useState(""),f=(0,J.Z)(p,2),h=f[0],m=f[1],g="https://kaboomjs.com/".concat(t),v=(0,sn.Z)().showError;function b(e){var n="".concat(g,"/").concat(e);Tm()(n).then((function(e){return e.arrayBuffer()})).then((function(a){var c="".concat(t,"/").concat(e);o.writeFile(c,jr.Z.from(a)).then((function(t){if(t.error)throw new Error(t.error);s.openFile(c),i&&i(e,n)})),r()})).catch((function(){return v("Failed to fetch ".concat(e))}))}return pe.useEffect((function(){Tm()("https://kaboomjs.com/api/assets/".concat(t)).then((function(e){return e.json()})).then((function(e){return d(e)})).catch((function(){return v("Failed to fetch assets lib listing")}))}),[d,v,g]),(0,Ie.BX)("div",{className:"jsx-309452596 assets",children:[(0,Ie.BX)(Ee.gC,{spacing:2,children:[(0,Ie.tZ)(Xe.Z,{level:3,children:"Assets Lib (beta)"}),0===u.length?(0,Ie.tZ)(Oe.Z,{foreground:2,children:"Loading..."}):(0,Ie.BX)(Ie.HY,{children:[(0,Ie.tZ)(un.ZP,{large:!0,label:"Search",onChange:function(e){m(e.target.value)}}),(0,Ie.tZ)("div",{className:"jsx-309452596 box",children:u.filter((function(e){return!h||e.includes(h)})).map((function(e){return(0,Ie.tZ)(pe.Fragment,{children:n({name:e,url:"".concat(g,"/").concat(e),add:function(){return b(e)}})},e)}))}),(0,Ie.tZ)(je.Z,{size:"small",onClick:function(){u.length>0&&b(u[Math.floor(Math.random()*u.length)])},children:"I'm Feeling Lucky"})]})]}),(0,Ie.tZ)(se(),{id:"309452596",children:[".assets.jsx-309452596{padding:var(--space-24);}",".box.jsx-309452596{width:100%;height:320px;overflow-x:hidden;overflow-y:scroll;}"]})]})};function pg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pg(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hg(e){var t=e.url,n=e.add;return(0,Ie.BX)(Ie.HY,{children:[(0,Ie.tZ)("img",{src:t,loading:"lazy",onClick:n,className:"jsx-2838917446 entry"}),(0,Ie.tZ)(se(),{id:"2838917446",children:[".entry.jsx-2838917446{padding:var(--space-16);height:120px;image-rendering:pixelated;border-radius:var(--border-radius-4);}",".entry.jsx-2838917446:hover{cursor:pointer;background:var(--background-root);}"]})]})}function mg(e){var t=e.close,n=e.entries,r=(0,Fe.Z)(),i=r.fs,a=r.session,o=(0,Yl.Z)(t,[]),s=pe.useRef(null),c=(0,sn.Z)().showError,l=pe.useState({name:"",width:32,height:32}),u=(0,J.Z)(l,2),d=u[0],p=u[1];pe.useEffect((function(){s.current&&s.current.focus()}),[s]);var f=function(){if(0!==d.name.length){var e=d.width,r=d.height;if(isNaN(e)||isNaN(r)||e<=0||r<=0)c("invalid width / height!");else if(e>256||r>256)c("only supports sprites smaller than 256x256 yet");else{var o="".concat(d.name,".pedit"),s="sprites/".concat(o);n.includes(o)?c("sprite '".concat(d.name,"' already exists")):(i.writeFile(s,jr.Z.from(JSON.stringify({fromKaboom:!0,width:d.width,height:d.height}))).then((function(){a.openFile(s)})),t())}}else c("invalid 'name'")};return(0,Ie.BX)("div",{ref:o,onKeyDown:og({Escape:t,Enter:f}),className:"jsx-3766385775 dialog",children:[(0,Ie.BX)(Ee.gC,{spacing:1,children:[(0,Ie.tZ)(un.ZP,{label:"Name",name:"name",large:!0,ref:s,value:d.name,onChange:function(e){p(fg(fg({},d),{},{name:e.target.value}))}}),(0,Ie.BX)(Ee.Ug,{spacing:1,wrap:"nowrap",children:[(0,Ie.tZ)(un.ZP,{label:"Width",name:"width",large:!0,value:d.width,onChange:function(e){return p(fg(fg({},d),{},{width:parseInt(e.target.value,10)||0}))}}),(0,Ie.tZ)(un.ZP,{label:"Height",name:"height",large:!0,value:d.height,onChange:function(e){return p(fg(fg({},d),{},{height:parseInt(e.target.value,10)||0}))}})]}),(0,Ie.BX)(Ee.Ug,{spacing:1,children:[(0,Ie.tZ)(je.Z,{size:"medium",onClick:t,children:"Cancel"}),(0,Ie.tZ)(je.Z,{size:"medium",color:"primary",onClick:f,children:"Create"})]})]}),(0,Ie.tZ)(se(),{id:"3766385775",children:[".dialog.jsx-3766385775{background:var(--background-root);border-radius:var(--border-radius-4);margin:var(--space-8) auto;width:calc(100%);padding:var(--space-16);}"]})]})}var gg=function(){var e=(0,Fe.Z)(),t=e.fs,n=e.session,r=(0,sn.Z)().showError,i=(0,Nn.Z)(),a=pe.useState(!1),o=(0,J.Z)(a,2),s=o[0],c=o[1],l=pe.useState(!1),u=(0,J.Z)(l,2),d=u[0],p=u[1],f=pe.useState(null),h=(0,J.Z)(f,2),m=h[0],g=h[1],v=pe.useState({}),b=(0,J.Z)(v,2),y=b[0],x=b[1],w=(0,Rc.Z)(),k=pe.useCallback((function(e){var n=function(){var n=(0,$.Z)(le().mark((function n(){var r,i,a,o,s,c,l;return le().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r="sprites/".concat(e),n.next=3,t.stat(r);case 3:if((i=n.sent).exists){n.next=7;break}return y[e]&&x((function(t){var n=fg({},t);return delete n[e],n})),n.abrupt("return");case 7:if(a=i.lastModified.getTime(),!y[e]||y[e].lastMod!==a){n.next=10;break}return n.abrupt("return");case 10:return n.next=12,t.readFile(r);case 12:if(!(o=n.sent).error){n.next=15;break}return n.abrupt("return");case 15:e.endsWith("pedit")?(s=o.content.toString(),(c=JSON.parse(s)).fromKaboom||x((function(t){return fg(fg({},t),{},(0,ee.Z)({},e,{lastMod:a,img:c.frames[0]}))}))):(l=(0,Tn.yC)(r))&&x((function(t){return fg(fg({},t),{},(0,ee.Z)({},e,{lastMod:a,img:"data:".concat(l,";base64,").concat(o.content.toString("base64"))}))}));case 16:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return n(),y[e]?y[e].img:null}),[y,t]),Z=((0,hi.Z)({path:"sprites",initialExpanded:!0,fs:t}).children||[]).filter((function(e){return e.type===In.Tv.File})).map((function(e){return e.filename})).sort(),j=["image/png","image/jpeg",".pedit"],O=function(e){var n="sprites/".concat(e.name);if(Z.includes(n))return r("sprite '".concat((0,Tn.eb)(e.name),"' already exists"));e.arrayBuffer().then((function(e){t.writeFile(n,jr.Z.from(e))}))},E=[{icon:(0,Ie.tZ)(Pm.Z,{}),action:function(){return p(!0)}},{icon:(0,Ie.tZ)(Nm.Z,{}),action:function(){return sg(O,j)}},{icon:(0,Ie.tZ)(ln.Z,{}),action:function(){return c(!0)}}];return(0,Ie.BX)(rg,{fileDrag:{accept:j,onDrop:O},children:[(0,Ie.tZ)(ng,{sub:!0,title:"Sprites",actions:E}),(0,Ie.tZ)(Dc.Z,{height:"4px"}),(0,Ie.tZ)("div",{className:"jsx-3831399815",children:Z.map((function(e){var a="sprites/".concat(e),o=(0,Tn.r6)(e),s=(0,Tn.eb)(e),c=k(e),l=w?[{name:"Insert load code",action:function(){var e="".concat("pedit"===o?"loadPedit":"loadSprite","(").concat(JSON.stringify(s),", ").concat(JSON.stringify(a),");");w({code:e})}}]:[];return(0,Ie.tZ)(cg,{isActive:a===i,onClick:function(){return n.openFile(a)},onRename:function(e){t.moveFile(a,"sprites/".concat(e,".").concat(o)).then((function(e){e.error&&r("failed to rename")}))},icon:(0,Ie.tZ)("div",{className:"jsx-3831399815 preview-img",children:c&&(0,Ie.tZ)("img",{src:c,className:"jsx-3831399815"})}),name:s,options:[].concat(l,[{name:"Rename",action:function(){}},{name:"Delete",action:function(){return g(a)},danger:!0}])},s)}))}),s&&(0,Ie.tZ)(mg,{entries:Z,close:function(){return c(!1)}}),m&&(0,Ie.tZ)(zt.Z,{isOpen:Boolean(m),onRequestClose:function(){return g(null)},children:(0,Ie.tZ)(cm.Z,{danger:!0,prompt:"Delete sprite '".concat((0,Tn.eb)(m),"' ?"),desc:"Are you sure? This cannot be undone.",onCancel:function(){return g(null)},onConfirm:function(){t.deleteFile(m),g(null)}})}),(0,Ie.tZ)(zt.Z,{isOpen:d,onRequestClose:function(){return p(!1)},children:(0,Ie.tZ)(dg,{kind:"sprites",renderItem:hg,onRequestClose:function(){return p(!1)}})}),(0,Ie.tZ)(se(),{id:"3831399815",children:[".preview-img.jsx-3831399815{width:var(--space-32);height:var(--space-32);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow:hidden;}",".preview-img.jsx-3831399815 img.jsx-3831399815{width:100%;image-rendering:pixelated;image-rendering:crisp-edges;}"]})]})};function vg(e){var t=e.name,n=e.url,r=e.add;return(0,Ie.BX)(Ee.Ug,{justify:"space-between",align:"center",children:[(0,Ie.BX)(Ee.gC,{spacing:1,children:[(0,Ie.tZ)(Oe.Z,{children:t}),(0,Ie.tZ)("audio",{src:n,controls:!0})]}),(0,Ie.tZ)(je.Z,{onClick:r,children:"Import"})]})}var bg=function(){var e=(0,Fe.Z)(),t=e.fs,n=e.session,r=(0,Nn.Z)(),i=(0,sn.Z)().showError,a=pe.useState(null),o=(0,J.Z)(a,2),s=o[0],c=o[1],l=pe.useState(!1),u=(0,J.Z)(l,2),d=u[0],p=u[1],f=(0,Rc.Z)(),h=((0,hi.Z)({path:"sounds",initialExpanded:!0,fs:t}).children||[]).filter((function(e){return e.type===In.Tv.File})).map((function(e){return e.filename})).sort(),m=["audio/ogg","audio/mpeg","audio/wav"],g=function(e){var n="sounds/".concat(e.name);if(h.includes(n))return i("sound '".concat((0,Tn.eb)(e.name),"' already exists"));e.arrayBuffer().then((function(e){t.writeFile(n,jr.Z.from(e))}))},v=[{icon:(0,Ie.tZ)(Pm.Z,{}),action:function(){return p(!0)}},{icon:(0,Ie.tZ)(Nm.Z,{}),action:function(){return sg(g,m)}}];return(0,Ie.BX)(rg,{fileDrag:{accept:m,onDrop:g},children:[(0,Ie.tZ)(ng,{sub:!0,title:"Sounds",actions:v}),(0,Ie.tZ)(Dc.Z,{height:"4px"}),(0,Ie.tZ)("div",{children:h.map((function(e){var a=(0,Tn.eb)(e),o="sounds/".concat(e),s=f?[{name:"Insert load code",action:function(){return f({code:"loadSound(".concat(JSON.stringify(a),", ").concat(JSON.stringify(o),");")})}}]:[];return(0,Ie.tZ)(cg,{isActive:o===r,onClick:function(){return n.openFile(o)},onRename:function(n){t.moveFile(o,"sounds/".concat(n,".").concat((0,Tn.r6)(e))).then((function(e){e.error&&i("failed to rename")}))},name:a,options:[].concat(s,[{name:"Rename",action:function(){}},{name:"Delete",action:function(){return c(o)},danger:!0}])},a)}))}),s&&(0,Ie.tZ)(zt.Z,{isOpen:Boolean(s),onRequestClose:function(){return c(null)},children:(0,Ie.tZ)(cm.Z,{danger:!0,prompt:"Delete sound '".concat((0,Tn.eb)(s),"' ?"),desc:"Are you sure? This cannot be undone.",onCancel:function(){return c(null)},onConfirm:function(){t.deleteFile(s),c(null)}})}),(0,Ie.tZ)(zt.Z,{isOpen:d,onRequestClose:function(){return p(!1)},children:(0,Ie.tZ)(dg,{kind:"sounds",renderItem:vg,onRequestClose:function(){return p(!1)},onAdd:function(e,t){return new window.Audio(t).play()}})})]})},yg=n(83806);function xg(e){var t=e.file,n=e.name,r=(0,Fe.Z)().session,i=xi()===t;return(0,Ie.BX)("div",{onClick:function(){r.setPreviewedFile(null),r.setPreviewedFile(t)},className:"jsx-4087658189 entry",children:[(0,Ie.BX)(Ee.Ug,{spacing:1,align:"center",children:[i?(0,Ie.tZ)(lt.Z,{}):(0,Ie.tZ)(yg.Z,{}),(0,Ie.tZ)(Oe.Z,{foreground:i?1:2,fontWeight:i?"medium":"regular",children:null!==n&&void 0!==n?n:(0,Tn.eb)(t)})]}),(0,Ie.tZ)(se(),{id:"4087658189",children:[".entry.jsx-4087658189{cursor:pointer;}"]})]})}var wg=function(){var e=pe.useState(!0),t=(0,J.Z)(e,2),n=t[0],r=t[1],i=pe.useState(!1),a=(0,J.Z)(i,2),o=a[0],s=a[1],c=(0,Fe.Z)().fs,l=(0,ft.I0)(),u=Mu(),d=(0,hi.Z)({path:"learn",initialExpanded:!0,fs:c});pe.useEffect((function(){var e=!1;return c.stat("README.md").then((function(t){e||t.exists&&(s(!0),l({wid:u,type:"LOAD_FILE",path:"README.md"}))})),function(){e=!0}}),[]);var p=(d.children||[]).filter((function(e){return e.type===In.Tv.File&&e.filename.endsWith(".md")})).map((function(e){return e.filename})).sort();return pe.useEffect((function(){p.forEach((function(e){l({wid:u,type:"LOAD_FILE",path:"learn/".concat(e)})}))}),[p]),(0,Ie.BX)(rg,{children:[(0,Ie.tZ)(ng,{sub:!0,title:"Learn",actions:[{icon:(0,Ie.tZ)(Pu.Z,{rotate:n?0:-90}),action:function(){return r(!n)}}]}),n&&(0,Ie.BX)(Ee.gC,{spacing:1,children:[(0,Ie.tZ)("div",{}),o&&(0,Ie.tZ)(xg,{name:"Intro",file:"README.md"}),p.map((function(e){return(0,Ie.tZ)(xg,{file:"learn/".concat(e)},e)}))]})]})};function kg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kg(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jg(e){var t=pe.useState(!1),n=(0,J.Z)(t,2),r=n[0],i=n[1];return(0,Ie.BX)("div",Zg(Zg({},e),{},{className:"jsx-3983311616 kaboom",children:[(0,Ie.BX)(Ee.gC,{spacing:1,children:[(0,Ie.tZ)(ag,{}),(0,Ie.tZ)(ug,{}),(0,Ie.tZ)(gg,{}),(0,Ie.tZ)(bg,{}),(0,Ie.tZ)(wg,{}),(0,Ie.tZ)("div",{className:"jsx-3983311616"}),(0,Ie.tZ)(je.Z,{Icon:Rf.Z,size:"small",onClick:function(){return window.open("https://kaboomjs.com")},children:"Docs"}),(0,Ie.tZ)(je.Z,{Icon:Rf.Z,size:"small",onClick:function(){return window.open("https://kaboomjs.com/play")},children:"Examples"}),(0,Ie.tZ)(je.Z,{Icon:tg.Z,size:"small",onClick:function(){return i(!0)},children:"What's new"})]}),(0,Ie.tZ)(zt.Z,{isOpen:r,onRequestClose:function(){return i(!1)},children:(0,Ie.tZ)(Lt.Z,{css:[Ne.l0.colWithGap(16),Ne.l0.p(32),"",""],children:(0,Ie.tZ)(Oo.Z,{components:{code:_o.Z,a:Eo._},children:'\n# New Kaboom Workspace\n\n- **No weird delay when run after editing.** Just press Cmd + S to refresh webview and quickly iterate!\n- **Helpful error reporting.** No need to go into browser console every time. The kaboom console displays your errors nicely.\n- **Support NPM packages and typescript by default.** Kaboom dev server builds your code with esbuild on the fly.\n- **Replit DB and Auth integration.** Make a score board even multiplayer with DB and Auth!\n- **In editor tutorial.** The template comes with a nice intro tutorial which you can learn and code along.\n- **Autocomplete.** Updated kaboom lib comes with detailed jsdoc for every function. No need to pull your hair out to figure out how certain functions work!\n- **HTML template.** Easily customize the html for your game.\n- **Total control over which version of Kaboom you use.** it\'s managed by NPM.\n- **Assets Library** Grab some quick assets to test out a game idea.\n- **Transparent dev server.** The dev server scripts are just in the repl, customize them or toss them out if you want to. Or turn it into a multiplayer game server!\n- **New library version** The template comes with kaboom2000 (beta), with bunch of [new stuff and improvements](https://github.com/replit/kaboom/blob/master/CHANGELOG.md)\n\n## Migration Guide\n\n- The kaboom template now will not generate the initializing and assets loading code (`kaboom()`, `loadSprite()` etc.) for you, allowing more customized setup, and making it more portable with using kaboom outside replit.\n\n```js\nimport kaboom from "kaboom";\n\n// initialize context\nkaboom();\n\n// load assets\nloadSprite("bean", "sprites/bean.png");\nloadSound("coin", "sounds/coin.mp3");\n\n// the rest is the same\nconst player = add([\n\tsprite("bean"),\n\tarea(),\n]);\n```\n\nFor easier assets loading, use the "Insert load code" option in the asset entry option menu.\n\n- The template by default is running `kaboom@next`, which is currently the beta version of kaboom2000. It contains breaking changes, all listed in [CHANGELOG.md](https://github.com/replit/kaboom/blob/master/CHANGELOG.md). If you don\'t feel like migrating now, you can always `npm install kaboom@5.1`\n'})})}),(0,Ie.tZ)(se(),{id:"3983311616",children:[".kaboom.jsx-3983311616{background:var(--background-default);padding:var(--space-8);border-top-right-radius:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);overflow-y:scroll;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}"]})]}))}var Og=n(40476),Eg={styles:(0,Ie.tZ)(se(),{id:"2980229614",children:["*.jsx-2980229614{max-width:100%;}"]}),className:"jsx-2980229614"};function _g(e){var t=e.children;return(0,Ie.BX)("div",{className:"jsx-75754313 enveditor",children:[(0,Ie.BX)(Ee.gC,{spacing:2,align:"stretch",justify:"center",className:Eg.className,children:[(0,Ie.BX)(Ee.gC,{spacing:1,align:"stretch",justify:"center",className:Eg.className,children:[(0,Ie.tZ)(Xe.Z,{truncate:!0,level:4,children:"Secrets"}),(0,Ie.tZ)(Oe.Z,{truncate:!0,size:"small",foreground:"2",children:"System environment variables"})]}),t]}),Eg.styles,(0,Ie.tZ)(se(),{id:"75754313",children:[".enveditor.jsx-75754313{height:100%;width:100%;border-top-right-radius:var(--border-radius-4);background-color:var(--background-default);padding:var(--space-8);overflow:auto;}"]})]})}function Cg(){var e=(0,Fe.Z)().fs;return(0,Ie.tZ)(_g,{children:(0,Ie.tZ)(Og.Z,{fs:e})})}var Sg=n(6170);function Pg(e){return(0,Ie.BX)(Ie.HY,{children:[(0,Ie.tZ)(Xe.Z,{truncate:!0,level:5,children:"Call stack"}),(0,Ie.tZ)(Ee.gC,{align:"stretch",constrainWidth:!0,children:e.frames.map((function(t){return(0,Ie.tZ)(Ng,{frame:t,onClick:e.onFrameClick},t.id)}))})]})}function Ng(e){var t,n,r=e.frame,i=e.onClick,a=null===(t=r.source)||void 0===t?void 0:t.name,o=null===(n=r.source)||void 0===n?void 0:n.path,s=a&&(0,Sg.om)(a),c=o&&(0,Sg.om)(o),l=o&&(0,Sg.IT)(o);return(0,Ie.BX)(Ie.HY,{children:[(0,Ie.BX)("div",{onClick:function(){return l&&i(l,r.line)},className:"jsx-1840827836 frame",children:[(0,Ie.tZ)("div",{className:"jsx-1840827836 label name",children:r.name}),(0,Ie.BX)("div",{className:"jsx-1840827836 label path",children:[(0,Ie.tZ)("span",{className:"jsx-1840827836 line",children:r.line}),s||c||a||o]})]}),(0,Ie.tZ)(se(),{id:"1840827836",children:[".frame.jsx-1840827836{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;max-width:100%;height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);border-radius:var(--border-radius-4);font-size:var(--font-size-small);font-family:var(--font-family-code);}",".frame.jsx-1840827836:hover{background-color:var(--background-higher);color:var(--foreground-default);}",".label.jsx-1840827836{font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}",".name.jsx-1840827836{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;background-color:var(--background-higher);padding:1px 2px;border-radius:2px;}",".path.jsx-1840827836{-webkit-flex:0 1 auto;-ms-flex:0 1 auto;flex:0 1 auto;}",".line.jsx-1840827836{display:inline-block;margin-right:var(--space-8);background-color:var(--background-higher);padding:1px 2px;border-radius:2px;}"]})]})}function Ig(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Tg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tg(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Tg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dg(e){var t,n=[],r=(0,Gi.Z)("flag-debugger-v2"),i=Ig(e.breakpoints);try{for(i.s();!(t=i.n()).done;){var a,o=(0,J.Z)(t.value,2),s=o[0],c=Ig(o[1]);try{for(c.s();!(a=c.n()).done;){var l=a.value;n.push((0,Ie.tZ)(Rg,{breakpoint:l,file:s,line:l.line,verified:l.verified,supportsLogPoints:r,logMessage:l.logMessage,onClick:e.onBreakpointClick,onUpdate:e.onUpdate},"".concat(s,":").concat(l.line,":").concat(l.pid1Id,":").concat(l.dapId)))}}catch(u){c.e(u)}finally{c.f()}}}catch(u){i.e(u)}finally{i.f()}return(0,Ie.BX)(Ie.HY,{children:[(0,Ie.tZ)(Xe.Z,{truncate:!0,level:5,children:"Breakpoints"}),n.length>0?(0,Ie.tZ)(Ee.gC,{align:"stretch",constrainWidth:!0,children:n}):(0,Ie.BX)(Oe.Z,{size:"xsmall",foreground:2,children:["To start, add a breakpoint ",(0,Ie.tZ)("span",{className:"jsx-1723460320 breakpoint"})," by clicking on the line number.",(0,Ie.tZ)(se(),{id:"1723460320",children:[".breakpoint.jsx-1723460320{display:inline-block;background-color:var(--accent-primary-default);border-radius:50%;width:8px;height:8px;}"]})]})]})}function Rg(e){var t=e.breakpoint,n=e.file,r=e.line,i=e.verified,a=e.supportsLogPoints,o=e.logMessage,s=e.onClick,c=e.onUpdate,l=(0,Sg.om)(n),u=pe.useState(Boolean(o)),d=(0,J.Z)(u,2),p=d[0],f=d[1],h=pe.useState(null!==o&&void 0!==o?o:""),m=(0,J.Z)(h,2),g=m[0],v=m[1];return(0,Ie.BX)(Ie.HY,{children:[(0,Ie.BX)(Ee.gC,{spacing:1,align:"stretch",children:[(0,Ie.BX)("div",{className:"jsx-3045418693 breakpoint",children:[(0,Ie.BX)("div",{onClick:function(){s(n,r)},className:"jsx-3045418693 frame",children:[(0,Ie.tZ)("div",{className:"jsx-3045418693 "+(Xt()("circle",{verified:i})||"")}),(0,Ie.tZ)("div",{className:"jsx-3045418693 line",children:r}),(0,Ie.tZ)("div",{className:"jsx-3045418693 location",children:(0,Ie.tZ)("span",{className:"jsx-3045418693 path",children:l||n})})]}),a&&(0,Ie.tZ)(Pu.Z,{size:16,className:"chevron",rotate:p?180:0,onClick:function(){return f(!p)}})]}),p&&(0,Ie.BX)(Ee.gC,{spacing:1,align:"stretch",children:[(0,Ie.tZ)(un.ZP,{label:"log message",name:"logMessage",value:g,onChange:function(e){return v(e.currentTarget.value)},spellCheck:!1}),(0,Ie.tZ)(je.Z,{onClick:function(){return c({breakpoint:t,logMessage:g})},children:"Save"})]})]}),(0,Ie.tZ)(se(),{id:"3045418693",children:[".breakpoint.jsx-3045418693{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;max-width:100%;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".frame.jsx-3045418693{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);border-radius:var(--border-radius-4);font-size:var(--font-size-default);}",".frame.jsx-3045418693:hover{background-color:var(--background-higher);color:var(--foreground-default);}",".circle.jsx-3045418693{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;background-color:var(--accent-primary-default);border-radius:50%;width:11px;height:11px;margin-left:var(--space-8);margin-right:var(--space-8);opacity:0.5;}",".verified.jsx-3045418693{opacity:1;}",".line.jsx-3045418693{font-family:var(--font-family-code);background-color:var(--background-higher);padding:1px 2px;border-radius:2px;}",".location.jsx-3045418693{font-family:var(--font-family-code);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0;font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8);}",".path.jsx-3045418693{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}",".chevron.jsx-3045418693{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;padding:var(--space-16);}"]})]})}function Ag(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Lg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lg(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Lg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bg(e){var t=pe.useState(!1),n=(0,J.Z)(t,2),r=n[0],i=n[1],a=[],o=[];if(e.variables.length>0){var s,c=e.variables[0].parentVariableReference,l=Ag(e.variables);try{for(l.s();!(s=l.n()).done;){var u=s.value;u.parentVariableReference===c?a.push(u):o.push(u)}}catch(d){l.e(d)}finally{l.f()}}return(0,Ie.BX)(Ie.HY,{children:[(0,Ie.tZ)(Xe.Z,{truncate:!0,level:5,children:"Variables"}),(0,Ie.BX)(Ee.gC,{align:"stretch",constrainWidth:!0,children:[a.map((function(t){return(0,Ie.tZ)(Ug,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)})),o.length>0&&(0,Ie.BX)(Ie.HY,{children:[(0,Ie.BX)(je.Z,{filled:!1,border:!1,onClick:function(){return i((function(e){return!e}))},children:["See ",r?"Less":"More"]}),r&&o.map((function(t){return(0,Ie.tZ)(Ug,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)}))]})]})]})}function Ug(e){var t=e.depth,n=e.variable,r=e.client,i=pe.useState(!1),a=(0,J.Z)(i,2),o=a[0],s=a[1],c=pe.useState([]),l=(0,J.Z)(c,2),u=l[0],d=l[1];return pe.useEffect((function(){o&&r.fetchVariables(n.variablesReference).then((function(e){return d(e)}),(function(){return s(!1)}))}),[o,r,n.variablesReference]),(0,Ie.BX)(Ie.HY,{children:[(0,Ie.BX)("div",{onClick:function(){n.variablesReference>0&&s((function(e){return!e}))},className:se().dynamic([["1639821173",[o?0:-90,t]]])+" variable",children:[(0,Ie.tZ)("div",{className:se().dynamic([["1639821173",[o?0:-90,t]]])+" gutter",children:n.variablesReference>0?(0,Ie.tZ)("div",{className:se().dynamic([["1639821173",[o?0:-90,t]]])+" chevron",children:(0,Ie.tZ)(Pu.Z,{})}):null}),(0,Ie.BX)("div",{className:se().dynamic([["1639821173",[o?0:-90,t]]])+" label",children:[n.name,n.type&&(0,Ie.BX)("span",{className:se().dynamic([["1639821173",[o?0:-90,t]]])+" type",children:[" ",n.type]}),""!==n.value&&": "]}),(0,Ie.tZ)("div",{className:se().dynamic([["1639821173",[o?0:-90,t]]])+" label value",children:n.value})]}),o?(0,Ie.tZ)(Ee.gC,{align:"stretch",constrainWidth:!0,children:u.map((function(e){return(0,Ie.tZ)(Ug,{depth:t+1,variable:e,client:r},e.parentVariableReference+"/"+e.name)}))}):null,(0,Ie.tZ)(se(),{id:"1639821173",dynamic:[o?0:-90,t],children:[".chevron.__jsx-style-dynamic-selector{-webkit-transform:rotate(".concat(o?0:-90,"deg);-ms-transform:rotate(").concat(o?0:-90,"deg);transform:rotate(").concat(o?0:-90,"deg);-webkit-transition:0.1s -webkit-transform;-webkit-transition:0.1s transform;transition:0.1s transform;}"),".gutter.__jsx-style-dynamic-selector{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;width:var(--space-16);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}",".variable.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;max-width:100%;height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);border-radius:var(--border-radius-4);font-size:var(--font-size-default);padding-left:calc(".concat(t," * var(--space-16));font-family:var(--font-family-code);}"),".variable.__jsx-style-dynamic-selector:hover{background-color:var(--background-higher);color:var(--foreground-default);}",".label.__jsx-style-dynamic-selector{font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;}",".type.__jsx-style-dynamic-selector{opacity:0.5;}",".value.__jsx-style-dynamic-selector{text-align:right;-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1;}"]})]})}function Mg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mg(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xg(e){return(0,Ie.tZ)(Ae.Z,Fg(Fg({},e),{},{children:(0,Ie.tZ)("path",{d:"M11 7L6 12L11 17M18 7L13 12L18 17",strokeLinecap:"round",strokeLinejoin:"round"})}))}var zg=n(36686),Vg=n(53777);function Gg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gg(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wg(e){return(0,Ie.tZ)(Ae.Z,Hg(Hg({},e),{},{children:(0,Ie.tZ)("path",{d:"M14 9L9 4M9 4L4 9M9 4L9 16C9 17.0609 9.42143 18.0783 10.1716 18.8284C10.9217 19.5786 11.9391 20 13 20L20 20",strokeLinecap:"round",strokeLinejoin:"round"})}))}var Kg=n(39109),qg=n(51490),Yg=n(5699);function Qg(e){var t=e.client,n=(0,ar.Z)(null===t||void 0===t?void 0:t.state),r=(0,ar.Z)(null===t||void 0===t?void 0:t.supportsStepBack);return(0,Ie.BX)(Lt.Z,{css:Ne.l0.rowWithGap(2),children:[r&&(0,Ie.BX)(Ie.HY,{children:[(0,Ie.tZ)(Yn.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){return null===t||void 0===t?void 0:t.reverseContinue()},alt:"Last Breakpoint",tooltipText:"Last Breakpoint",tooltipPlacement:"bottom",children:(0,Ie.tZ)(Xg,{})}),(0,Ie.tZ)(Yn.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){return null===t||void 0===t?void 0:t.back()},alt:"Step Back",tooltipText:"Step Back",tooltipPlacement:"bottom",children:(0,Ie.tZ)(zg.Z,{})})]}),(0,Ie.tZ)($g,{stop:function(){return null===t||void 0===t?void 0:t.stop()},start:function(){return null===t||void 0===t?void 0:t.start()},state:n}),(0,Ie.tZ)(Yn.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){return null===t||void 0===t?void 0:t.next()},alt:"Next Step",tooltipText:"Next Step",tooltipPlacement:"bottom",children:(0,Ie.tZ)(Kg.Z,{})}),(0,Ie.tZ)(Yn.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){return null===t||void 0===t?void 0:t.skip()},alt:"Skip Step",tooltipText:"Skip Step",tooltipPlacement:"bottom",children:(0,Ie.tZ)(Wg,{rotate:90})}),(0,Ie.tZ)(Yn.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){return null===t||void 0===t?void 0:t.continue()},alt:"Next Breakpoint",tooltipText:"Next Breakpoint",tooltipPlacement:"bottom",children:(0,Ie.tZ)(qg.Z,{})})]})}var Jg=(0,xr.F4)({"0%":{opacity:.2},"50%":{opacity:1},"100%":{opacity:.2}});function $g(e){var t=e.state,n=e.start,r=e.stop;return"terminated"===t?(0,Ie.tZ)(Yn.Z,{css:Ne.l0.color.accentPrimaryDefault,size:40,onClick:n,alt:"Run",tooltipText:"Run",tooltipPlacement:"bottom",children:(0,Ie.tZ)(Yc.Z,{filled:!0})}):"stopping"===t||null===t?(0,Ie.tZ)(Yn.Z,{size:40,disabled:!0,alt:"Loading",tooltipText:"Loading",tooltipPlacement:"bottom",children:(0,Ie.tZ)(Yg.Z,{})}):(0,Ie.tZ)(Yn.Z,{css:"initializing"===t||"preinitializing"===t?[Ne.l0.color.foregroundDimmer,{animationName:Jg.toString(),animationDuration:"2s",animationIterationCount:"infinite"}]:Ne.l0.color.accentPrimaryDefault,size:40,onClick:r,alt:"Stop",tooltipText:"Stop",tooltipPlacement:"bottom",children:(0,Ie.tZ)(Vg.Z,{filled:!0})})}function ev(e){var t=e.children;return(0,Ie.BX)(or.Z,{background:"default",css:[Ne.l0.height("100%"),Ne.l0.width("100%"),Ne.l0.p(8),Ne.l0.overflow("auto"),{borderTopRightRadius:Ne.TV.borderRadius4},"",""],children:[(0,Ie.BX)(Ee.gC,{spacing:2,align:"stretch",justify:"center",constrainWidth:!0,children:[(0,Ie.BX)(Ee.Ug,{spacing:1,align:"center",justify:"space-between",constrainWidth:!0,children:[(0,Ie.tZ)(Xe.Z,{truncate:!0,level:4,children:"Debugger"}),(0,Ie.tZ)(dd.Z,{link:"https://replit.com/support"})]}),(0,Ie.tZ)("a",{href:"https://replit.com/support",target:"_blank",rel:"noopener noreferrer",className:"jsx-2159824700",children:"Send feedback"}),t]}),(0,Ie.tZ)(se(),{id:"2159824700",children:["a.jsx-2159824700{font-size:var(--font-size-default);color:var(--accent-primary-default);font-weight:var(--font-weight-medium);}"]})]})}function tv(e){var t=e.wid,n=(0,Fe.Z)().debuggest,r=(0,ar.Z)(n.mainClient),i=(0,ar.Z)(r?r.state:null),a=(0,ar.Z)(r?r.stackFrames:null),o=(0,ar.Z)(r?r.variables:null),s=(0,ar.Z)(r?r.breakpoints:null),c=(0,ft.I0)(),l=pe.useCallback((function(e,n){var r=(0,Sg.om)(e);r&&c({type:"OPEN_DEEP_LINK",path:r,line:n,wid:t})}),[c,t]);return(0,Ie.BX)(ev,{children:[(0,Ie.tZ)(Qg,{client:r}),s&&(0,Ie.tZ)(Dg,{breakpoints:s,onBreakpointClick:l,onUpdate:function(e){var t=e.breakpoint,n=e.logMessage;r&&t.pid1Id&&r.updateBreakpoint(t.pid1Id,{logMessage:n})}}),o&&r&&"paused"===i&&(0,Ie.tZ)(Bg,{client:r,variables:o}),a&&"paused"===i&&(0,Ie.tZ)(Pg,{frames:a,onFrameClick:l}),r&&(0,Ie.tZ)("div",{className:"jsx-3516069037 logs-button",children:(0,Ie.tZ)(je.Z,{size:"small",onClick:function(){return function(e){if("undefined"===typeof Blob)return;var t=new Blob([e],{type:"text/plain"}),n=document.createElement("a");n.download="debugger-logs.txt",n.href=URL.createObjectURL(t),n.dataset.downloadurl=["text/plain",n.download,n.href].join(":"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),setTimeout((function(){URL.revokeObjectURL(n.href)}),1500)}(r.getDebugLogs())},children:"Download Logs"})}),(0,Ie.tZ)(se(),{id:"3516069037",children:[".instructions.jsx-3516069037{height:var(--space-16);}",".logs-button.jsx-3516069037{position:absolute;bottom:var(--space-8);right:var(--space-8);}"]})]})}var nv=n(28100);function rv(){var e=(0,Fe.Z)().session,t=pe.useState(e.getPreviewedYoutubeVideo()),n=(0,J.Z)(t,2),r=n[0],i=n[1];return pe.useEffect((function(){return i(e.getPreviewedYoutubeVideo()),e.onPreviewedYoutubeVideoChanged(i)}),[e]),r}function iv(e){var t=e.video,n=e.onClick,r=rv(),i=t.videoId===r;return(0,Ie.BX)("div",{onClick:function(){return n(t.videoId)},className:"jsx-1680913095 "+(Xt()("youtube-video",{"is-selected":i})||""),children:[(0,Ie.BX)("div",{className:"jsx-1680913095 thumbnail-container",children:[(0,Ie.tZ)(nv.Z,{width:"320px",height:"180px",src:t.thumbnail,alt:t.title}),(0,Ie.tZ)("span",{className:"jsx-1680913095 duration",children:t.duration})]}),(0,Ie.BX)(Ee.gC,{children:[(0,Ie.tZ)(Xe.Z,{level:3,className:"yt-video-title",children:t.title}),(0,Ie.BX)(Ee.Ug,{children:[(0,Ie.BX)(Oe.Z,{className:"yt-video-views",children:[t.viewCount," views"]}),(0,Ie.tZ)(Oe.Z,{className:"yt-video-published-at",children:t.publishedAt})]})]}),(0,Ie.tZ)(se(),{id:"1680913095",children:[".youtube-video.jsx-1680913095{font-family:Roboto,Arial,sans-serif;margin:0 8px 20px 8px;position:relative;max-width:320px;min-width:260px;width:100%;cursor:pointer;}",".is-selected.jsx-1680913095,.youtube-video.jsx-1680913095:hover{background-color:var(--background-root);}",".thumbnail-container.jsx-1680913095{position:relative;}",".duration.jsx-1680913095{position:absolute;bottom:3px;right:0;font-family:Roboto,Arial,sans-serif;font-weight:500;font-size:12px;line-height:12px;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:4px;background-color:rgba(0,0,0,0.8);color:#fff;padding:3px 4px;height:12px;border-radius:2px;-webkit-letter-spacing:0.35px;-moz-letter-spacing:0.35px;-ms-letter-spacing:0.35px;letter-spacing:0.35px;box-sizing:content-box;}",".youtube-video.jsx-1680913095 .yt-video-title{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;max-height:40px;font-family:Roboto,Arial,sans-serif;color:#030303;font-weight:500;font-size:14px;white-space:normal;text-overflow:ellipsis;line-height:20px;-webkit-letter-spacing:0.25px;-moz-letter-spacing:0.25px;-ms-letter-spacing:0.25px;letter-spacing:0.25px;margin:6px 0;overflow:hidden;}",".youtube-video.jsx-1680913095 .yt-video-views::after{content:'\u2022';margin:0 4px;}",".youtube-video.jsx-1680913095 .yt-video-views,.youtube-video.jsx-1680913095 .yt-video-published-at{color:#606060;font-family:Roboto,Arial,sans-serif;font-size:14px;font-weight:400;line-height:18px;}",".replit-ui-theme-root.dark .yt-video-views,.replit-ui-theme-root.dark .yt-video-published-at{color:#aaa;}",".replit-ui-theme-root.dark .yt-video-title{color:#fff;}"]})]})}function av(){var e,t=(0,Fe.Z)().session,n=(0,Ce.Z)(),r=(0,Se.Jge)({variables:{replId:n}}),i=r.data,a=r.error,o=r.loading,s=(null===i||void 0===i?void 0:i.sampleYoutubeVideos)||[];return(0,Ie.BX)("div",{className:"jsx-3650882523 youtube-plugin",children:[a?null:(0,Ie.tZ)(Ee.gC,{className:"heading-container",align:"center",justify:"center",children:(0,Ie.tZ)(Xe.Z,{level:3,children:"Recommended Tutorials"})}),s.map((function(e){return(0,Ie.tZ)(iv,{video:e,onClick:function(r){var a;if(r!==t.getPreviewedYoutubeVideo()){if("Repl"!==(null===i||void 0===i||null===(a=i.repl)||void 0===a?void 0:a.__typename))throw new Error("Expected repl from graph");var o=i.repl,s=o.language,c=o.title;(0,Zt.track)(Zt.events.YOUTUBE_VIDEO_SELECTED,{video:e.title,replId:n,language:s,replTitle:c}),t.setPreviewedYoutubeVideo(r)}else t.setPreviewedYoutubeVideo(null)}},e.videoId)})),o||"Repl"!==(null===i||void 0===i||null===(e=i.repl)||void 0===e?void 0:e.__typename)?(0,Ie.tZ)("div",{className:"jsx-3650882523 spinner-container",children:(0,Ie.tZ)(Vt.Z,{style:{margin:"10px auto",width:"35px",height:"35px"}})}):null,a?(0,Ie.tZ)(Ee.gC,{className:"error-container",align:"center",justify:"center",children:(0,Ie.tZ)(Oe.Z,{className:"error-text",children:"Something went wrong trying to load videos. Please refresh and try again."})}):null,(0,Ie.tZ)(se(),{id:"3650882523",children:[".youtube-plugin.jsx-3650882523{background-color:var(--background-default);overflow-y:auto;height:100%;width:100%;}",".youtube-plugin.jsx-3650882523 .heading-container{width:100%;max-width:320px;margin:var(--space-8);}",".youtube-plugin.jsx-3650882523 .spinner-container.jsx-3650882523{width:100%;max-width:320px;}",".youtube-plugin.jsx-3650882523 .error-container{margin:var(--space-8);}",".youtube-plugin.jsx-3650882523 .error-text{color:var(--accent-negative-default);}"]})]})}function ov(e){var t=e.id,n="".concat("https://www.youtube.com/embed/").concat(t,"?rel=0");return(0,Ie.BX)("div",{className:"jsx-2201796602 embed",children:[(0,Ie.tZ)("iframe",{src:n,frameBorder:"0",className:"jsx-2201796602 iframe"}),(0,Ie.tZ)(se(),{id:"2201796602",children:[".embed.jsx-2201796602{position:relative;padding:var(--space-8);width:100%;height:100%;overflow:hidden;}",".iframe.jsx-2201796602{width:100%;height:100%;}"]})]})}function sv(){var e=rv(),t=(0,Fe.Z)().session;return(0,Ie.BX)("div",{className:"jsx-1571942811 youtube-preview-plugin",children:[e?(0,Ie.BX)(Ie.HY,{children:[(0,Ie.tZ)(ov,{id:e}),(0,Ie.tZ)("div",{"aria-label":"Close","data-microtip-position":"left",role:"tooltip",className:"jsx-1571942811 close-button",children:(0,Ie.tZ)(je.Z,{Icon:cn.Z,border:!0,filled:!0,onClick:function(){return t.setPreviewedYoutubeVideo(null)}})})]}):(0,Ie.tZ)("div",{className:"jsx-1571942811 loading",children:(0,Ie.tZ)(Vt.Z,{style:{margin:"10px auto",width:"35px",height:"35px"}})}),(0,Ie.tZ)(se(),{id:"1571942811",children:[".youtube-preview-plugin.jsx-1571942811{background-color:var(--background-default);height:100%;width:100%;}",".youtube-preview-plugin.jsx-1571942811:hover .close-button.jsx-1571942811{opacity:1;}",".loading.jsx-1571942811{width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".close-button.jsx-1571942811{position:absolute;top:var(--space-8);right:var(--space-8);cursor:pointer;-webkit-transition:0.2s;transition:0.2s;opacity:0;}"]})]})}var cv=n(56021),lv=n(75218),uv=n(4363);function dv(e){var t=e.wid,n=(0,ft.I0)(),r=(0,Fe.Z)().lsp,i=(0,xa.Z)(),a=(0,Nn.Z)();pe.useEffect((function(){r.start()}),[r]);var o=pe.useMemo((function(){if(null!==i&&void 0!==i&&i.language){var e=i.language;return zi()((function(n){(0,Zt.track)(Zt.events.WS_TYPED,{wid:t,fileExt:n,language:e,isMobile:(0,fe.isMobile)({tablet:!1})})}),6e4)}}),[i,t]);return a?(0,cv.V)(a)!==cv.D.Code&&(0,cv.V)(a)!==cv.D.Markdown?null:(0,Ie.tZ)(uv.Z,{filePath:a,autoFocus:!(0,lv.Z)(),onType:o,onRun:function(){n({type:_t.OF,wid:t})}}):(0,Ie.BX)("div",{className:"jsx-3455551276 empty",children:[(0,Ie.tZ)("div",{className:"jsx-3455551276",children:"no file opened"}),(0,Ie.tZ)(se(),{id:"3455551276",children:[".empty.jsx-3455551276{height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]})}var pv=n(57171);function fv(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return hv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hv(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function hv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mv(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vv={};function bv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vv,t=arguments.length>1?arguments[1]:void 0;return"REPL_UPDATED"===t.type?gv(gv(gv({},e),t.updates),{},{config:gv(gv({},e.config),t.updates.config)}):e}var yv=n(15052),xv=n(50573),wv=n(8857);function kv(e,t){return Zv.apply(this,arguments)}function Zv(){return(Zv=(0,$.Z)(le().mark((function e(t,n){return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t.on("command",(function r(i){n(i)&&(t.off("command",r),e(i))}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jv(e){var t=e.wid,n=e.pud;return function(){var e=(0,$.Z)(le().mark((function e(r,i){var a,o,s;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(0,Tt.Z)(i(),t,n,"goval"),o=a.govalRunState,s=r(Xv({wid:t,pud:n,name:"shellrunner",service:"shellrun2"})),!o.shellrunner){e.next=6;break}return s.send({clear:{}}),e.next=6,kv(s,(function(e){return"state"===e.body}));case 6:return s.send({runMain:{}}),e.next=9,kv(s,(function(e){return"state"===e.body}));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}function Ov(e){var t=e.wid,n=e.pud,r=e.input;return function(e){e(Xv({wid:t,pud:n,name:"shellrunner",service:"shellrun2"})).send({input:r})}}function Ev(e){var t=e.wid,n=e.pud,r=e.cmd;return function(e){switch(r.body){case"input":return void e((0,_t.yY)({wid:t,message:r.input,type:"output",raw:!0}));case"output":return void e((0,_t.yY)({wid:t,message:r.output,type:"output",raw:!0}));case"state":return void(r.state===Ii.api.State.Stopped?e({type:Tv,wid:t,pud:n}):(e({type:"CLEAR_CONSOLE",wid:t,pud:n}),e({type:Iv,wid:t})));default:xt.Tb(new Error("Unknown run command ".concat(r.body,". Expected output or state")))}}}var _v=n(54220);function Cv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cv(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pv="REGISTER_GOVAL_CHANNEL_HANDLE",Nv="REGISTER_CLEAR_NETWORK_LISTENERS_HANDLE",Iv="SHELLRUNNER_STARTED",Tv="SHELLRUNNER_ENDED",Dv="PACKAGER_STARTED",Rv="PACKAGER_ENDED",Av="OPTIMISTIC_RUN_STARTED",Lv="OPTIMISTIC_RUN_ENDED";function Bv(e){var t=e.wid,n=e.pud,r=e.prefetchedConnectionMetadata;return function(){var e=(0,$.Z)(le().mark((function e(i,a){var o,s,c,l,u,d,p,f,h,m,g,v,b,y;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(0,Tt.Z)(a(),t,n,"goval"),s=o.clientHandle,c=o.repl,l=o.workspaceMounted,o.didDispatchLoadingStarted||i({type:"LOADING_GOVAL_STARTED",wid:t}),l){e.next=4;break}return e.abrupt("return");case 4:return i(Fv({wid:t,pud:n})),u=Ni.Z.safeGet(s),d=null,p=function(e){1===e&&(d=i((0,xe.P)({content:"Failed to connect, retrying",type:"error",time:null})))},u.getChannel(0).on("command",(function(e){switch(e.body){case"bootStatus":if(!e.bootStatus)return;return e.bootStatus.stage||(e.bootStatus.stage=Ii.api.BootStatus.Stage.HANDSHAKE),void i(Sv({type:"UPDATE_ENGINE_LOAD_STATUS",wid:t},e.bootStatus));case"portOpen":if(!e.portOpen)throw new Error("portOpen only handles portOpen commands");var r=e.portOpen,a=r.forwarded,o=r.port;if(!a)return;if(5901===o)return;return void i({type:"PORT_OPEN",wid:t,port:o});case"protocolError":var s,c=(null===(s=e.protocolError)||void 0===s?void 0:s.text)||"protocol error";i({type:"BSOD",wid:t,crasherPud:n,originalError:c});var l=new Error("protocol error"),u={pluginType:"goval"},d={message:c};xt.Tb(l,{tags:u,extra:d}),(0,xv.Q)(l,{tags:u,extras:d});break;case"toast":if(!e.toast)return;var p,f=e.toast.text;if(f&&f.startsWith("PANIC:"))return p=/tried to attach(.*)multiple times/.test(f)?new Error("tried to attach to ot multiple times"):new Error(f?"goval panic":"goval panic with no message"),xt.$e((function(e){e.setTag("source","goval"),f&&e.setExtra("message",f),xt.Tb(p)})),void i((0,xe.P)({content:"We ran into an internal error, reloading your connection.",type:"error",time:5e3}));i((0,xe.P)({content:f||"The server tried to say something but had no words",type:"error",time:1e4}))}})),f=(0,Tt.Z)(a(),t,n,"goval"),h=f.gurl,m=(0,yv.t)(h),g=Boolean(a().user.userInfo.isLoggedIn),v=function(){var e=(0,Tt.Z)(a(),t,n,"goval").clientHandle;return Ni.Z.safeGet(e)!==u},e.next=16,(0,_v.u)();case 16:return e.next=18,(0,yv.Z)({client:u,repl:c,shouldAbort:v,onRetry:p,overrideClusterMetadata:m,prefetchedConnectionMetadata:r,isLoggedIn:g});case 18:if(d&&i((0,xe.S)(d)),!v()){e.next=21;break}return e.abrupt("return");case 21:i((0,xe.P)({content:"Connected!",time:1500,type:"confirm"})),Math.random()>.99&&u.startPing(),"goval"===ke().get(c.language).engine&&i(Xv({wid:t,pud:n,name:"shellrunner",service:"shellrun2"})),i(Mv({wid:t,pud:n})),i({type:"LOADING_GOVAL_COMPLETE",wid:t}),b=u.getToken(),y=(0,Ho.d)(b),i({type:"SET_VNC_URL",wid:t,vncUrl:y}),window.lastGovalTokenMeta=(0,Ho.h)(b),i({wid:t,type:"GOVAL_TOKEN",token:b}),u.on("close",(function(e){var r=e.closeReason;window.disconnectedTaint=!0,r===pv.KU.ClientCloseReason.Disconnected&&(window.unexpecteddisconnectTaint=!0,i(Uv({wid:t,pud:n})),i(Bv({wid:t,pud:n})))}));case 32:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}function Uv(e){var t=e.wid,n=e.pud,r=e.keepNetworkHandler,i=void 0!==r&&r;return function(e,r){var a=(0,Tt.Z)(r(),t,n,"goval"),o=a.clientHandle,s=a.clearNetworkListenersHandle,c=a.didDispatchLoadingStarted;if(e({type:"RESET_GOVAL",wid:t,pud:n}),e(Vv({wid:t,pud:n})),c||e({type:"LOADING_GOVAL_STARTED",wid:t}),null!=o){var l=Ni.Z.get(o);null!=l&&(l.close(),!i&&s&&Ni.Z.safeGet(s)())}}}function Mv(e){var t=e.wid,n=e.pud;return function(e){var r=null,i=function(){o(),xt.n_({category:"redux",message:"onlineHandler fired. starting connection"}),e(Bv({wid:t,pud:n})),null!=r&&(e((0,xe.S)(r)),r=null)},a=function(){r=e((0,xe.P)({content:"Offline: trying to connect",type:"error",time:null})),xt.n_({category:"redux",message:"offlineHandler fired. closing connection"}),e(Uv({wid:t,pud:n,keepNetworkHandler:!0}))};window.addEventListener("online",i),window.addEventListener("offline",a);var o=function(){window.removeEventListener("online",i),window.removeEventListener("offline",a)};e({type:Nv,wid:t,clearNetworkListenersHandle:Ni.Z.getHandle(o)})}}function Fv(e){var t=e.wid,n=e.pud;return function(e,r){var i=(0,Tt.Z)(r(),t,n,"goval").clientHandle;if(i){var a=Ni.Z.get(i);if(a){var o=!0;if(a.setDebugFunc((function(i){switch(i.type){case"breadcrumb":return void xt.n_({category:"crosis",message:i.message,data:i.data});case"ping":var a=Zt.events.GOVAL2_PING;return o&&(a=Zt.events.GOVAL2_FIRST_PING,o=!1),void bt.kg.info(a,{latency:i.latency});case"log":if(!(0,Tt.Z)(r(),t,n,"goval").adminLogs)return;e({type:"CROSIS_ADMIN_LOG",wid:t,dir:i.log.direction,cmd:i.log.cmd,timestamp:window.performance.now()})}})),(0,Tt.Z)(r(),t,n,"goval").adminLogs&&(window.crosisclient=a),ve.default.query.vcr){var s,c=a.getChannel(0);c.on("command",(function(e){"VCRLog"===e.body&&s&&e.VCRLog&&s(e.VCRLog)})),c.send({startVCR:{}});var l=function(){var e=(0,$.Z)(le().mark((function e(){return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.send({readVCR:{}}),e.abrupt("return",new Promise((function(e){return s=e})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=(0,$.Z)(le().mark((function e(){var t,n,r,i;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:if(t=e.sent,(n=t.logfile)&&n.content&&n.path){e.next=6;break}return e.abrupt("return");case 6:r=JSON.stringify({timestamp:"0",direction:"IN",command:{auth:{token:a.getToken()}}}),(i=document.createElement("a")).setAttribute("href","data:text/plain;charset=utf-8,"+encodeURI(r+"\n"+new TextDecoder("utf-8").decode(n.content))),i.setAttribute("download",n.path),document.body.appendChild(i),i.click(),document.body.removeChild(i);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();window.vcr={read:l,download:u}}}}}}function Xv(e){var t=e.wid,n=e.pud,r=e.name,i=e.service;return function(e,a){var o=(0,Tt.Z)(a(),t,n,"goval").channels[i];return null==o?e(function(e){var t=e.wid,n=e.pud,r=e.name,i=e.service;return function(e,a){var o=(0,Tt.Z)(a(),t,n,"goval").clientHandle,s=Ni.Z.safeGet(o).openChannel({name:r,service:i});void 0!==r&&e({type:Pv,wid:t,channelHandle:Ni.Z.getHandle(s),service:i});var c=zv(i);return s.on("command",(function(r){"toast"===r.body&&r.toast?e((0,xe.P)({content:r.toast.text||"The server tried to say something but had no words",type:"error",time:1e4})):e(c({wid:t,pud:n,cmd:r}))})),s}}({wid:t,pud:n,name:r,service:i})):Ni.Z.safeGet(o)}}var zv=function(e){if("shellrun2"===e)return Ev;throw new Error("Can't handle command. Unknown service: ".concat(e))};function Vv(e){var t=e.wid,n=e.pud;return function(e,r){var i=(0,Tt.Z)(r(),t,n,"goval"),a=i.govalRunState,o=i.runstate,s=Object.values(a).includes(!0);"idle"===o&&s?e({type:"EVAL_STARTED",wid:t}):"idle"===o||s||e({type:"EVAL_ENDED",wid:t})}}function Gv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gv(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wv(e,t,n){switch(n.type){case _t.zT:return Uv({wid:e,pud:t});case"GOVAL_CONNECT":case"USE_CUSTOM_TOKEN":case"SET_CUSTOM_GURL":return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){var r,i=fv(t);try{for(i.s();!(r=i.n()).done;)(0,r.value)(e,n)}catch(a){i.e(a)}finally{i.f()}}}(Uv({wid:e,pud:t}),Bv({wid:e,pud:t,prefetchedConnectionMetadata:n.customConnectionMetadata}));case"REPL_UPDATED":return function(r){n.updates&&0!==Object.keys(n.updates).length&&(n.updates.id||n.updates.title||n.updates.isOwner||n.updates.slug||n.updates.userId||n.updates.language)&&(r(Uv({wid:e,pud:t})),r(Bv({wid:e,pud:t})))};case _t.eJ:return function(e){var t=e.wid,n=e.pud,r=e.rows,i=e.cols;return function(e){e(Xv({wid:t,pud:n,name:"shellrunner",service:"shellrun2"})).send({resizeTerm:{cols:i,rows:r}})}}({wid:e,pud:t,rows:n.rows,cols:n.cols});case"RUN_REPL":return function(e){var t=e.wid,n=e.pud;return function(){var e=(0,$.Z)(le().mark((function e(r,i){var a,o,s,c,l,u,d;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i(),o=a.services,s=(0,Tt.Z)(i(),t,n,"goval"),c=s.repl,l=bt.kg.timeStart({language:c.language}),"goval"===ke().get(c.language).engine){e.next=5;break}return e.abrupt("return");case 5:return r({type:"CLEAR_CONSOLE",wid:t,pud:n}),r({type:"EVAL_SETUP",wid:t}),r({type:Av,wid:t}),u=function(){return!(0,Tt.Z)(i(),t,n,"goval").govalRunState.optimisticState},e.next=11,o.fs.flush();case 11:if(l("prerun flush finished"),!u()){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,(0,wv.Z)(o.container,o.dotReplit);case 16:if(!e.sent){e.next=25;break}return e.next=19,o.packager.installPackages();case 19:if((d=e.sent)&&o.fs.persist(),l("prerun packager install finished",{success:d}),d){e.next=25;break}return r({type:Lv,wid:t}),e.abrupt("return");case 25:if(!u()){e.next=27;break}return e.abrupt("return");case 27:return e.next=29,r(jv({wid:t,pud:n}));case 29:r({type:Lv,wid:t}),l("run finished");case 31:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}({wid:e,pud:t});case _t.aq:return function(e){var t=e.wid,n=e.pud;return function(){var e=(0,$.Z)(le().mark((function e(r,i){var a,o,s;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(0,Tt.Z)(i(),t,n,"goval"),o=a.repl,s=a.govalRunState,"goval"===ke().get(o.language).engine){e.next=3;break}return e.abrupt("return");case 3:if(s.packager&&r((0,_t.yY)({wid:t,message:"\n\nReplit: Packaging cannot be stopped, please wait...\n\n",type:"error",raw:!1})),r({type:Lv,wid:t}),s.shellrunner){e.next=7;break}return e.abrupt("return");case 7:r(Xv({wid:t,pud:n,name:"shellrunner",service:"shellrun2"})).send({clear:{}});case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}({wid:e,pud:t});case"CONSOLE_INPUT":return function(){var r=(0,$.Z)(le().mark((function r(i,a){var o,s;return le().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=(0,Tt.Z)(a(),e,t,"goval"),s=o.repl,"goval"===ke().get(s.language).engine){r.next=3;break}return r.abrupt("return");case 3:i(Ov({wid:e,pud:t,input:n.input}));case 4:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}();case Iv:case Tv:case Dv:case Rv:case Av:case Lv:return Vv({wid:e,pud:t});default:return null}}function Kv(){return{clientHandle:Ni.Z.getHandle(new pv.KU),didDispatchLoadingStarted:!1,workspaceMounted:!1,channels:{},clearNetworkListenersHandle:null,govalRunState:{shellrunner:!1,packager:!1,optimisticState:!1},adminLogs:!1,gurl:"wss://eval.replit.com"}}var qv=(0,Ct.$)({primary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kv(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _t.qg:return Hv(Hv({},e),t.initialState);case"GOVAL_CONNECT":return Hv(Hv({},Kv()),{},{workspaceMounted:!0,gurl:e.gurl,adminLogs:e.adminLogs});case"RESET_GOVAL":return Hv(Hv({},Kv()),{},{workspaceMounted:e.workspaceMounted,gurl:e.gurl,adminLogs:e.adminLogs});case"LOADING_GOVAL_STARTED":return Hv(Hv({},e),{},{didDispatchLoadingStarted:!0});case"LOADING_GOVAL_COMPLETED":return Hv(Hv({},e),{},{didDispatchLoadingStarted:!1});case _t.zT:return Hv(Hv({},e),{},{workspaceMounted:!1});case Nv:return Hv(Hv({},e),{},{clearNetworkListenersHandle:t.clearNetworkListenersHandle});case Pv:return Hv(Hv({},e),{},{channels:Hv(Hv({},e.channels),{},(0,ee.Z)({},t.service,t.channelHandle))});case"SET_CUSTOM_GURL":return Hv(Hv({},e),{},{gurl:t.gurl});case Iv:return Hv(Hv({},e),{},{govalRunState:Hv(Hv({},e.govalRunState),{},{shellrunner:!0})});case Tv:return Hv(Hv({},e),{},{govalRunState:Hv(Hv({},e.govalRunState),{},{shellrunner:!1})});case Dv:return Hv(Hv({},e),{},{govalRunState:Hv(Hv({},e.govalRunState),{},{packager:!0})});case Rv:return Hv(Hv({},e),{},{govalRunState:Hv(Hv({},e.govalRunState),{},{packager:!1})});case Av:return Hv(Hv({},e),{},{govalRunState:Hv(Hv({},e.govalRunState),{},{optimisticState:!0})});case Lv:return Hv(Hv({},e),{},{govalRunState:Hv(Hv({},e.govalRunState),{},{optimisticState:!1})});case"START_CROSIS_ADMIN_LOGS":return Hv(Hv({},e),{},{adminLogs:!0});default:return e}},repl:bv,runstate:St.Z}),Yv=function(){function e(){(0,te.Z)(this,e)}return(0,ne.Z)(e,null,[{key:"get",value:function(e){var t,n;try{t=window.sessionStorage.getItem(e)}catch(r){return null}if(null==t)return null;try{n=JSON.parse(t)}catch(r){return null}return n}},{key:"set",value:function(e,t){try{window.sessionStorage.setItem(e,JSON.stringify(t))}catch(n){}}}]),e}();function Qv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Jv="session_id_achv_track";function $v(){return($v=(0,$.Z)(le().mark((function e(t){var n,r;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vi.l.query({query:Se.koB,variables:{replId:t}});case 2:return n=e.sent,r=n.data,e.abrupt("return","Repl"===r.repl.__typename?{language:r.repl.language,title:r.repl.title}:{language:"",title:""});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eb(e,t,n,r,i){var a="string"===typeof e.path?(0,Tn.r6)(e.path):null;switch(e.type){case"TRACK_WS_EVENT":var o=Zt.track;e.trackOnce&&(o=Zt.trackOnce),o(Zt.events[e.eventKey],function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qv(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({wid:t,language:n,isMobile:(0,fe.isMobile)({tablet:!1})},e.properties));break;case"RUN_REPL":(0,Zt.track)(Zt.events.PROJECT_RAN,{wid:t,language:n,replId:r,replTitle:i});break;case"CONSOLE_INPUT":"\r"===e.input&&(0,Zt.track)(Zt.events.CONSOLE_EVALED,{wid:t,language:n});break;case"STOP_EVAL":(0,Zt.track)(Zt.events.WS_EVAL_STOPPED,{wid:t,language:n});break;case"CREATE_FILE":e.isRecreation||(0,Zt.track)(Zt.events.PROJECT_MODE_FILE_CREATED,{wid:t,language:n,extension:a});break;case"OPEN_FILE":e.newTab&&(0,Zt.track)(Zt.events.FILE_HEADER_TAB_OPENED,{wid:t,language:n,newTab:e.newTab,extension:a}),e.tabIndex&&(0,Zt.track)(Zt.events.FILE_HEADER_TAB_REPLACED,{wid:t,language:n,tabIndex:e.tabIndex});break;case"MOVE_FILE":(0,Zt.track)(Zt.events.WS_FILE_RENAMED,{wid:t,language:n,extension:a});break;case"DELETE_FILE":(0,Zt.track)(Zt.events.WS_FILE_DELETED,{wid:t,language:n,extension:a});break;case"UPLOAD_FILE":if(!e.path||"readme.md"!==e.path.toLowerCase())break;(0,Zt.track)(Zt.events.README_CREATED,{wid:t,language:n});break;case"CLOSE_HEADER_TAB":(0,Zt.track)(Zt.events.FILE_HEADER_TAB_CLOSED,{wid:t,language:n});break;case"SET_SPLIT_POSITION":(0,Zt.track)(Zt.events.WS_LAYOUT_CHANGED,{wid:t,language:n});break;case"SET_GIT_SIDEBAR_VISIBILITY":e.isSidebarVisible&&(0,Zt.track)(Zt.events.GIT_CLIENT_SIDEBAR_OPENED,{language:n,wid:t})}}var tb=Ma(),nb=tb.receiver,rb=tb.useReceiver;function ib(){var e=(0,Ce.Z)(),t=(0,Gi.Z)("flag-achievements-v0"),n=(0,ft.v9)((function(e){return e.user.userInfo}));return rb((function(r){var i=r.action,a=r.wid;if("WS_TYPED"===i.eventKey&&t&&n.isLoggedIn){var o=(new Date).toJSON().substring(0,10),s="".concat(n.id,"_").concat(o);Yv.get(Jv)!==s&&(Yv.set(Jv,s),Vi.l.mutate({mutation:Se.v79,variables:{userId:n.id,event:"WS_TYPED"}}))}return i.type,function(e){return $v.apply(this,arguments)}(e).then((function(t){eb(i,a,t.language,e,t.title)})),null})),null}var ab=(0,Ct.$)({preferences:Es,repl:bv,files:eo,workingDirectory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return"UPDATE_WORKING_DIRECTORY"===t.type?t.path:e},runstate:St.Z});function ob(e,t,n){return"LOAD_PLUGIN"===n.type?function(r,i){var a=(0,Tt.Z)(i(),e,t,"infoprovider"),o=a.preferences,s=a.repl,c=a.files,l=a.workingDirectory,u=a.runstate;o!==Os&&r({type:"UPDATE_WORKSPACE_PREFERENCES",wid:e,pud:n.pluginPud,updates:o}),s!==vv&&r({type:"REPL_UPDATED",wid:e,pud:n.pluginPud,updates:s}),""!==l&&r({type:"UPDATE_WORKING_DIRECTORY",wid:e,pud:n.pluginPud,path:l}),c!==$a&&Object.keys(c).forEach((function(t){r({type:"CREATE_FILE",wid:e,pud:n.pluginPud,path:t,file:c[t]})})),u!==St.Q&&r({type:"SET_RUN_STATE",wid:e,pud:t,runstate:u})}:null}function sb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sb(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loadingReplbox:!1,loadingGoval:!1,loadingEngine:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _t.qg:return cb(cb({},e),t.initialState);case _t.FG:return cb(cb({},e),{},{loadingEngine:!1});case _t.hq:return cb(cb({},e),{},{loadingEngine:!0});case"LOADING_REPLBOX_STARTED":return cb(cb({},e),{},{loadingReplbox:!0});case"LOADING_REPLBOX_ENDED":return cb(cb({},e),{},{loadingReplbox:!1});case"LOADING_GOVAL_STARTED":return cb(cb({},e),{},{loadingGoval:!0});case"LOADING_GOVAL_COMPLETE":return cb(cb({},e),{},{loadingGoval:!1});default:return e}}function ub(e,t,n){switch(n.type){case"LOADING_REPLBOX_STARTED":case"LOADING_GOVAL_STARTED":return function(n,r){(0,Tt.Z)(r(),e,t,"loadingresolver").loadingEngine||n({type:_t.hq,wid:e})};case"LOADING_REPLBOX_ENDED":case"LOADING_GOVAL_COMPLETE":return function(n,r){var i=(0,Tt.Z)(r(),e,t,"loadingresolver"),a=i.loadingEngine,o=i.loadingGoval,s=i.loadingReplbox;a&&!1===o&&!1===s&&n({type:_t.FG,wid:e})};default:return null}}var db=n(78087);function pb(){var e=(0,Fe.Z)(),t=e.fs,n=e.broadcast,r=e.presence,i=(0,Nn.Z)();return i?(0,Ie.BX)("div",{className:"jsx-49077589 draw",children:[(0,Ie.tZ)(db.Z,{fs:t,broadcast:n,presence:r,filePath:i}),(0,Ie.tZ)(se(),{id:"49077589",children:[".draw.jsx-49077589{position:relative;height:100%;width:100%;z-index:3;}",".excalidraw canvas{border-radius:var(--border-radius-4) !important;}"]})]}):null}function fb(e){!function(e){e.register("goval",W),e.register("analytics",K),e.register("infoprovider",q),e.register("loadingresolver",Y),e.register("draw",Q)}(e),e.register("runflow",C),e.register("header",r),e.register("config",i),e.register("sidenav",a),e.register("filetree",o),e.register("fileheader",s),e.register("terminal2",c),e.register("console",na),e.register("replboxconsole",l),e.register("floatingrun",u),e.register("help",d),e.register("packager",p),e.register("mediaview",f),e.register("preferences",h),e.register("git",ka),e.register("replboxdisplay2",m),e.register("snack",g),e.register("vnc",v),e.register("webview",b),e.register("fileviewercontroller",y),e.register("markdownviewer",x),e.register("instructionsviewer2",w),e.register("adminpanel",k),e.register("blank",Z),e.register("lock",j),e.register("hackerupgradeprompt",O),e.register("desktoplayout",E),e.register("audio",_),e.register("deeplink",S),e.register("browsernotifications",P),e.register("database",N),e.register("commandbar",I),e.register("annotations",T),e.register("shell",D),e.register("autograder",R),e.register("unittests",A),e.register("educationpane",L),e.register("cluicurl",B),e.register("pedit",U),e.register("kaboombar",M),e.register("kaboombar2",F),e.register("enveditor",X),e.register("debugpanel",z),e.register("youtube",V),e.register("youtubepreview",G),e.register("codemirror",H)}var hb=n(47356),mb=n(3728),gb=n(13233),vb=n(5557);var bb=n(62731),yb=n(53106),xb=n(92343);function wb(){return(wb=(0,$.Z)(le().mark((function e(t){var n,r;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Vi.l){e.next=2;break}throw new Error("Expected Apollo client");case 2:return e.next=4,Vi.l.query({query:Se.UxF,variables:{id:t}});case 4:return n=e.sent,r=n.data,e.abrupt("return","Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl.title:null);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kb(e){var t=(0,Fe.Z)(),n=t.container,r=t.presence,i=e.wid;pe.useEffect((function(){var e=r.onUserJoin((function(t){var r,i=null===(r=n.getContext())||void 0===r?void 0:r.repl;if(i){var a=t.username;return function(e){return wb.apply(this,arguments)}(i.id).then((function(e){e&&Cc({title:"",body:"".concat(a," joined ").concat(e),tag:"".concat(i.id,"-").concat(a,"-joined"),iconByUsername:a,cacheDuration:9e5})})),function(){e()}}}))}),[i,r,n,e])}var Zb=n(12114);var jb=n(49991);function Ob(e,t){var n=".cursor-".concat(_b(e)," {\n  position: relative;\n  background-color: var(--accent-primary-strongest);\n  border-left: 2px solid ").concat(t,";\n  pointer-events: none;\n}\n.selection-").concat(_b(e)," {\n  position: relative;\n  background-color: ").concat(t,";\n  opacity: 0.2;\n  pointer-events: none;\n}\n.cursor-tag-").concat(_b(e),'::after {\n  content: "').concat(e,'";\n  position: relative;\n  bottom: calc(100% - 4px);\n  left: -2px;\n  background-color: ').concat(t,";\n  color: white;\n  z-index: 10;\n  padding: 1px;\n  border-radius: 3px;\n  pointer-events: none;\n  animation: fadeOut 2s ease-in forwards;\n}\n\n@keyframes fadeOut {\n  0% {opacity: 1;}\n  100% {opacity: 0;} \n}\n"),r=document.createElement("style");r.type="text/css",r.id=Eb(e),r.appendChild(document.createTextNode(n)),document.head&&document.head.appendChild(r)}function Eb(e){return"".concat(e,"-multiplayer-cursor-style")}function _b(e){return e.replace(/_/g,"-")}function Cb(e){var t=(0,Fe.Z)(),n=t.presence,r=t.session;pe.useEffect((function(){var e=!1,t=n.onActiveUsersChange((function(t){e?e=!1:t.forEach((function(e){Ob(e.username,e.color)}))})),r=n.onUserJoin((function(t){var n=t.username,r=t.color;e=!0,Ob(n,r)})),i=n.onUserLeave((function(t){e=!0,function(e){var t=document.getElementById(Eb(e));document.head&&t&&document.head.removeChild(t)}(t.username)}));return function(){t(),r(),i()}}),[e,n,r])}function Sb(e){var t=e.wid,n=e.store.dispatch,r=(0,Fe.Z)(),i=r.debuggest,a=r.dotReplit,o=(0,Ce.Z)(),s=(0,Se.sjq)({variables:{replId:o}}).data,c="Repl"===(null===s||void 0===s?void 0:s.repl.__typename)?s.repl:null,l=function(e){var t=e.repl,n=e.dotReplit,r=e.debuggest;return(0,pe.useEffect)((function(){if(t){if(!t.lang.hasDAP)return n.watch((function(e){var t;e.error||null!==(t=e.config.debugger)&&void 0!==t&&t.support&&r.connect()}));r.connect()}}),[t,r]),(0,ar.Z)(r.mainClient)}({debuggest:i,dotReplit:a,repl:c});!function(e){(0,pe.useEffect)((function(){if(e){var t=e.onStarted((function(e){(0,Zt.track)(Zt.events.DEBUGGER_STARTED,{joined:e})})),n=e.onPaused((function(e){(0,Zt.track)(Zt.events.DEBUGGER_PAUSED,{reason:e})})),r=e.onBreakpoint((function(t){(0,Zt.track)(Zt.events.DEBUGGER_BREAKPOINT_TOGGLED,{action:t,state:e.state.current})}));return function(){t(),n(),r()}}}),[e])}(l),function(e,t){var n,r=t.onOutput,i=t.onOpenFile,a=(0,cl.Z)(r),o=(0,cl.Z)(i);(0,pe.useEffect)((function(){if(e)return e.onOutput((function(e){a.current(e)}))}),[e]);var s=(0,ar.Z)(e?e.stackFrames:null),c=null===s||void 0===s?void 0:s[0],l=null===c||void 0===c||null===(n=c.source)||void 0===n?void 0:n.path,u=null===c||void 0===c?void 0:c.line;(0,pe.useEffect)((function(){if(l&&u&&e){var t=(0,Sg.om)(l);t?o.current({path:t,line:u}):e.stepOut()}}),[e,l,u])}(l,{onOpenFile:function(e){var r=e.path,i=e.line;n({type:"OPEN_DEEP_LINK",path:r,line:i,wid:t})},onOutput:function(e){n((0,_t.yY)({wid:t,message:e,type:"",raw:!1}))}}),(0,pe.useEffect)((function(){l&&c&&function(e){var t=e.ws,n=e.sideNavIndex,r=t.store,i=r.dispatch,a=(0,r.getState)().plugins,o="debugpanel",s="debugpanel";Object.values(a).find((function(e){return e.type===s}))||(i({type:"LOAD_PLUGIN",pluginPud:o,pluginType:s,title:"debugpanel"}),i({type:"ADD_SIDE_NAV_ITEM",index:n,navItem:{pud:o,pluginType:s,tooltip:"Debugger",svg:"Debugger"}}))}({ws:e,sideNavIndex:c.lang.hasGit?2:1})}),[l,c,e])}var Pb=n(68417),Nb=n(17078),Ib=n(25108);function Tb(e){return Db.apply(this,arguments)}function Db(){return(Db=(0,$.Z)(le().mark((function e(t){var n;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getConfig();case 2:return n=e.sent,e.abrupt("return",!n.error&&"kaboom"===n.config.language);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rb(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Ab(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ab(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Ab(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Lb=n(26607),Bb=n(56690);function Ub(e){var t=e.ws,n=e.user,r=e.isOwner;!function(e){var t=e.customConnectionMetadata,n=(0,Fe.Z)().container,r=(0,Ce.Z)(),i=pe.useState(null),a=(0,J.Z)(i,2),o=a[0],s=a[1],c=(0,Se.SPw)({variables:{id:r}}),l=c.data,u=c.loading;pe.useEffect((function(){(0,$o.Z)().then((function(e){s((0,yv.t)(e))}))}),[s]),pe.useEffect((function(){return function(){n.destroy()}}),[n]);var d=(0,xb.b)("Repl"===(null===l||void 0===l?void 0:l.repl.__typename)?{repl:l.repl,currentUser:l.currentUser||void 0}:null);pe.useEffect((function(){if(!u&&null!==o&&d){var e=n.client().addDebugFunc((function(e){if("breadcrumb"===e.type){xt.n_({category:"crosisV6",message:e.message,data:e.data});var t={data:e.data,message:e.message,replId:d.repl.id,language:d.repl.language};switch(e.message){case"connecting":(0,Zt.track)(Zt.events.CROSIS_CONNECTION_ATTEMPTED,t);break;case"error":(0,Zt.track)(Zt.events.CROSIS_ERROR,t);break;case"connect timeout":(0,Zt.track)(Zt.events.CROSIS_CONNECTION_TIMEOUT,t);break;case"retrying":(0,Zt.track)(Zt.events.CROSIS_CONNECTION_RETRYING,t);break;case"reconnecting":(0,Zt.track)(Zt.events.CROSIS_CONNECTION_RECONNECTING,t);break;case"connect failed":(0,Zt.track)(Zt.events.CROSIS_CONNECTION_FAILED,t);break;case"falling back to polling":(0,Zt.track)(Zt.events.CROSIS_CONNECTION_FALLING_BACK_TO_POLLING,t)}}}));return n.connect({overrideClusterMetadata:o,customConnectionMetadata:t,context:d}),function(){e()}}}),[n,o,u,d,t])}({customConnectionMetadata:e.customConnectionMetadata}),function(e){var t=(0,Fe.Z)().packager,n=e.wid,r=e.store.dispatch,i=function(e){r((0,_t.yY)({wid:n,message:e,type:"",raw:!1}))},a=function(){r((0,_t.yY)({wid:n,message:"\n\nReplit: Package operation failed.\n\n",type:"error",raw:!1}))},o=function(e){if(e)return r({type:"PACKAGER_STARTED",wid:n}),void r((0,_t.yY)({wid:n,message:"\n\nReplit: Updating package configuration\n\n",type:"",raw:!1}));r({type:"PACKAGER_ENDED",wid:n})};pe.useEffect((function(){var e=t.onOutput(i),n=t.onError(a),r=t.onStateChanged(o);return function(){e(),n(),r()}}),[])}(t),kb(t),function(e){var t=e.wid,n=e.store.dispatch,r=(0,Ce.Z)(),i=(0,Se.dtd)({variables:{id:r}}),a=i.data,o=i.loading;pe.useEffect((function(){!o&&a&&"Repl"===a.repl.__typename&&a.repl.permissions.length&&n({type:"REQUEST_NOTIFICATION_PERMS",wid:t})}),[a,n,t,e,o])}(t),function(){var e=(0,Fe.Z)().presence;pe.useEffect((function(){return e.onFollowingUsersChanged((function(e){var t=e.followingUsers,n=e.type,r=t.length;"follow"===n?(0,Zt.track)(Zb.events.REMOTE_USER_CURSOR_FOLLOWED,{numFollowers:r}):(0,Zt.track)(Zb.events.REMOTE_USER_CURSOR_UNFOLLOWED,{numFollowers:r})}))}),[e])}(),function(e){var t=pe.useRef(""),n=(0,Fe.Z)().container,r=e.wid,i=e.store.dispatch;pe.useEffect((function(){return n.onConnectionStateChanged(function(){var e=(0,$.Z)(le().mark((function e(a){var o,s,c,l,u;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a===jb.e.CONNECTED){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.exec("pwd");case 4:if(o=e.sent,s=o.output){e.next=8;break}return e.abrupt("return");case 8:""===t.current&&(l=null===(c=n.getContext())||void 0===c?void 0:c.repl)&&(t.current="/home/runner/".concat(l.slug)),(u=s.replace("\n",""))!==t.current&&(i({type:"UPDATE_WORKING_DIRECTORY",wid:r,path:u}),t.current=u);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[n,i,r])}(t),Cb(t.wid),function(){var e=(0,Fe.Z)().presence,t=(0,Ce.Z)(),n=(0,Se.al4)({variables:{id:t}}),r=n.data,i=n.loading,a=n.error;pe.useEffect((function(){if(!i)if(a)xt.Tb(a);else if(r&&"Repl"===r.repl.__typename){var t=r.currentUser,n=r.repl;if(n.isProjectFork&&n.owner&&"Team"===n.owner.__typename){var o=n.owner.id;if(null!==t&&void 0!==t&&t.teams.some((function(e){var t=e.id,n=e.isAdmin;return t===o&&n})))return e.onActiveUsersChange((function(e){e.length>1&&(0,Zt.trackOnce)(Zb.events.TEAMS_ADMIN_STUDENT_MULTIPLAYER,{replId:n.id,language:n.language,url:n.url,teamId:o})}))}}}),[e,r,i,t,a])}(),function(){var e,t,n=(0,Ce.Z)(),r=(0,Se.igq)({variables:{replId:n}}).data,i=(null===r||void 0===r||null===(e=r.currentUser)||void 0===e?void 0:e.hasReplConnectionSub)&&"Repl"===r.repl.__typename&&"Team"===(null===(t=r.repl.owner)||void 0===t?void 0:t.__typename),a=(0,vb.Z)();(0,Se.LSc)({variables:{replId:n},skip:!i||a!==Ef.e.CONNECTED})}(),Sb(t),function(){var e=(0,Nn.Z)(),t=(0,Fe.Z)().presence;pe.useEffect((function(){t.updateOpenFile(e)}),[e,t])}(),function(e){var t=(0,Fe.Z)(),n=t.presence,r=t.session,i=(0,Zi.Z)(),a=e.wid,o=e.store.dispatch;pe.useEffect((function(){if(i){var e=r.getActiveFile();e===n.getActiveFileForUser(i.id)&&o({type:"SCROLL_TO_FOLLOWED_USERS_CURSOR",wid:a,path:e})}}),[a,i,o,n,r])}(t),function(e){var t=(0,Fe.Z)(),n=t.container,r=t.session,i=e.wid,a=e.store.dispatch;pe.useEffect((function(){return n.onConnectionStateChanged((function(e){if(e===jb.e.CONNECTED){var t=r.getActiveFile(),n=r.getPreviewedFile();n&&t!==n&&a({type:"LOAD_FILE",path:n,wid:i})}}))}),[n,r,a,i])}(t),function(){var e=(0,Fe.Z)(),t=e.presence,n=e.session;pe.useEffect((function(){var e=function(){if("visible"===document.visibilityState){var e=n.getActiveFile()||null;t.updateSessionTimestamp(),t.updateOpenFile(e)}};return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}}),[t,n])}(),function(){var e=(0,Fe.Z)(),t=e.session,n=e.presence;pe.useEffect((function(){return n.onUserOpenedFile((function(e){var r=e.file,i=e.user,a=n.getFollowedUser();a&&i.username===a.username&&r&&t.openFile(r)}))}),[n,t])}(),function(){var e=(0,Fe.Z)().session,t=(0,Ce.Z)(),n=(0,Se.eX4)({variables:{replId:t}}).data,r="Repl"===(null===n||void 0===n?void 0:n.repl.__typename)?n.repl:null;pe.useEffect((function(){var t;r&&null!==(t=r.templateInfo)&&void 0!==t&&t.label.includes("Nix")&&e.setAreHiddenFilesVisible(!0)}),[e,r])}(),function(e){var t,n,r=(0,Ce.Z)(),i=(0,Fe.Z)().fs,a=(0,Se.t8A)({variables:{id:r}}).data,o=e.wid,s=e.store.dispatch,c="Repl"===(null===a||void 0===a?void 0:a.repl.__typename)?a.repl:null,l="CurrentUser"===(null===a||void 0===a||null===(t=a.currentUser)||void 0===t?void 0:t.__typename)?a.currentUser:null,u="Repl"===(null===a||void 0===a?void 0:a.repl.__typename)&&a.repl.isModelSolutionFork,d=u?c&&(null===(n=c.origin)||void 0===n?void 0:n.origin):c&&c.origin||null,p=(0,xb.b)("Repl"===(null===d||void 0===d?void 0:d.__typename)?{repl:d,currentUser:l||void 0}:null);pe.useEffect((function(){c&&l&&c.isProject&&i.stat(".lesson").then((function(e){e.exists||i.createDir(".lesson")}))}),[i,l,c]),pe.useEffect((function(){if(c&&(c.isProjectFork||u)&&d&&p){var e=(0,Ef.Z)({onUnrecoverableError:function(e){Ib.error(e),xt.$e((function(t){t.setTag("curriculum-authoring",!0),t.setExtra("originId",d.id),xt.Tb(e)}))}}),t=(0,Pb.Z)({container:e});e.connect({context:p,fetchConnectionMetadata:function(){return(0,Nb.Z)({url:"/data/repls/".concat(c.id,"/get_repl_origin_guest_connection_metadata")})}});var n=e.onConnectionStateChanged(function(){var r=(0,$.Z)(le().mark((function r(a){var c;return le().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a!==jb.e.CONNECTED){r.next=22;break}return n(),r.prev=2,r.next=5,i.copyDirFromRemote(".lesson",".lesson",t);case 5:if(!(c=r.sent).error){r.next=10;break}xt.$e((function(e){e.setTag("curriculum-authoring",!0),e.setExtra("originId",d.id),xt.Tb({message:"Error copying lesson: ".concat(c.error)})})),r.next=14;break;case 10:return r.next=12,i.stat(".lesson/instructions.md");case 12:r.sent.exists&&s({type:"ADD_INSTRUCTIONS2_TAB",wid:o});case 14:r.next=19;break;case 16:r.prev=16,r.t0=r.catch(2),xt.$e((function(e){e.setTag("curriculum-authoring",!0),xt.Tb(r.t0)}));case 19:return r.prev=19,e.destroy(),r.finish(19);case 22:case"end":return r.stop()}}),r,null,[[2,16,19,22]])})));return function(e){return r.apply(this,arguments)}}());return function(){return e.destroy()}}}),[o,i,p,c,s,d,u])}(t),function(e){var t=e.store.dispatch,n=rv(),r=(0,ve.useRouter)(),i=Boolean(r.query.lite)||Boolean(r.query.embed);pe.useEffect((function(){if(!i){var r=e.wid,a=e.store.getState(),o=a.layout,s=a.plugins,c="youtubepreview",l=Ot.PP(o,s,c);if(n){if(!l){var u=Ot.PP(o,s,"shell");if(!u)throw new Error("Expected shell path");var d=Ot.Il(Ot.Il(u)),p=Ot.$T(o,c,"below",d),f=p.path,h=p.to;t({type:"UPDATE_LAYOUT",wid:r,path:f,to:h})}}else{if(!l)return;var m=Ot.Od(o,c),g=m.path,v=m.to;t({type:"UPDATE_LAYOUT",wid:r,path:g,to:v})}}}),[n,t,e,i])}(t),function(e){var t=(0,pa.x)();pe.useEffect((function(){var n="packager";null!==t&&void 0!==t&&t.packageSearch?(e.store.getState().plugins.packager||e.store.dispatch({type:"LOAD_PLUGIN",pluginType:"packager",pluginPud:n,title:"packages"}),e.store.dispatch({type:"ADD_SIDE_NAV_ITEM",index:2,navItem:{pud:n,pluginType:"packager",tooltip:"Packages",svg:"Packages"}})):e.store.dispatch({type:"REMOVE_SIDE_NAV_ITEM",navItemPud:n})}),[t,e])}(t),function(e){var t=e.wid,n=e.store.dispatch,r=(0,Fe.Z)(),i=r.session,a=r.fs,o=(0,Fe.Z)().dotReplit,s=(0,Gi.Z)("flag-readme-preview");pe.useEffect((function(){var e=function(){var e=(0,$.Z)(le().mark((function e(){var r,c,l,u,d;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tb(o);case 2:return r=e.sent,e.next=5,a.readDir(wi.Q);case 5:if(c=e.sent,(r||s)&&!c.error){e.next=8;break}return e.abrupt("return");case 8:l=Rb(c.children),e.prev=9,l.s();case 11:if((u=l.n()).done){e.next=19;break}if(!(d=u.value).filename.toLowerCase().includes("readme")){e.next=17;break}return n({type:"LOAD_FILE",path:d.filename,wid:t}),i.setPreviewedFile(d.filename),e.abrupt("break",19);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),l.e(e.t0);case 24:return e.prev=24,l.f(),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[9,21,24,27]])})));return function(){return e.apply(this,arguments)}}();e()}),[t,n,i,a,o,s])}(t),function(e){var t=e.wid,n=e.store.dispatch,r=(0,Fe.Z)(),i=r.session,a=r.dotReplit;pe.useEffect((function(){var t=function(){var t=(0,$.Z)(le().mark((function t(){var n,r;return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Tb(a);case 2:if(n=t.sent,r="kaboombar2",n){t.next=6;break}return t.abrupt("return");case 6:e.store.getState().plugins[r]||e.store.dispatch({type:"LOAD_PLUGIN",pluginType:"kaboombar2",pluginPud:r,title:"kaboombar2"}),e.store.dispatch({type:"ADD_SIDE_NAV_ITEM",index:0,navItem:{pud:r,pluginType:"kaboombar2",tooltip:"Kaboom",icon:Ye}}),e.store.dispatch({type:"OPEN_SIDE_NAV_ITEM",navItem:{pud:r}});case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[t,n,i,a])}(t),(0,bb.Z)();var i=(0,yb.Z)();return pe.useEffect((function(){function e(e){"s"===e.key&&(0,Ri.jh)(e)&&e.preventDefault()}return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),function(){var e=(0,Fe.Z)().container,t=(0,Gi.Z)("flag-seccomp-port-detection");pe.useEffect((function(){if(t)return e.openChannel({service:"replnet",name:"replnet"},(function(){}))}),[e,t])}(),(0,Lb.Z)({workspaceType:"desktop"}),(0,Bb.Z)(),function(e,t,n){var r=(0,Ce.Z)(),i=!e||!e.isLoggedIn;(0,Se.Vgw)({skip:i||t,variables:{replId:r},onSubscriptionData:function(e){var t;!1===(null===(t=e.subscriptionData.data)||void 0===t?void 0:t.currentUserCanWrite)&&(n(!0),window.location.reload())}})}(n,r,i),null}function Mb(e){var t=e.stacked,n=e.lite;return(0,Ie.BX)("div",{className:se().dynamic([["1050128889",[n?0:"var(--space-8)",n?0:"var(--space-8)",n?"calc(-1*var(--space-8))":0,n?0:"var(--space-8)",n?0:"var(--space-8)"]]])+" "+(Xt()("root",{stacked:t,lite:n})||""),children:[(0,Ie.tZ)("div",{className:se().dynamic([["1050128889",[n?0:"var(--space-8)",n?0:"var(--space-8)",n?"calc(-1*var(--space-8))":0,n?0:"var(--space-8)",n?0:"var(--space-8)"]]])+" header"}),(0,Ie.tZ)("div",{className:se().dynamic([["1050128889",[n?0:"var(--space-8)",n?0:"var(--space-8)",n?"calc(-1*var(--space-8))":0,n?0:"var(--space-8)",n?0:"var(--space-8)"]]])+" sidenav"}),(0,Ie.tZ)("div",{className:se().dynamic([["1050128889",[n?0:"var(--space-8)",n?0:"var(--space-8)",n?"calc(-1*var(--space-8))":0,n?0:"var(--space-8)",n?0:"var(--space-8)"]]])+" sidebar"}),(0,Ie.BX)("div",{className:se().dynamic([["1050128889",[n?0:"var(--space-8)",n?0:"var(--space-8)",n?"calc(-1*var(--space-8))":0,n?0:"var(--space-8)",n?0:"var(--space-8)"]]])+" content",children:[(0,Ie.tZ)("div",{className:se().dynamic([["1050128889",[n?0:"var(--space-8)",n?0:"var(--space-8)",n?"calc(-1*var(--space-8))":0,n?0:"var(--space-8)",n?0:"var(--space-8)"]]])+" file"}),(0,Ie.tZ)("div",{className:se().dynamic([["1050128889",[n?0:"var(--space-8)",n?0:"var(--space-8)",n?"calc(-1*var(--space-8))":0,n?0:"var(--space-8)",n?0:"var(--space-8)"]]])+" spacer"}),(0,Ie.tZ)("div",{className:se().dynamic([["1050128889",[n?0:"var(--space-8)",n?0:"var(--space-8)",n?"calc(-1*var(--space-8))":0,n?0:"var(--space-8)",n?0:"var(--space-8)"]]])+" output"})]}),(0,Ie.tZ)(se(),{id:"1050128889",dynamic:[n?0:"var(--space-8)",n?0:"var(--space-8)",n?"calc(-1*var(--space-8))":0,n?0:"var(--space-8)",n?0:"var(--space-8)"],children:[".root.__jsx-style-dynamic-selector{position:fixed;top:0;left:0;width:100%;height:100%;display:grid;grid-template-areas: 'header header header header' 'sidenav sidebar content content';grid-template-columns: 50px calc(((100vw - 50px) * 0.15 - 3px)) ".concat(n?0:"var(--space-8)"," 1fr;grid-gap:var(--space-8);grid-template-rows:auto 1fr;background-color:var(--background-root);padding-bottom:").concat(n?0:"var(--space-8)",";}"),".header.__jsx-style-dynamic-selector{grid-area:header;height:60px;margin-bottom:".concat(n?"calc(-1*var(--space-8))":0,";background-color:var(--background-default);box-shadow:var(--shadow-1);border-bottom:0.5px solid var(--background-higher);}"),".sidenav.__jsx-style-dynamic-selector{width:50px;grid-area:sidenav;background-color:var(--background-default);margin-left:".concat(n?0:"var(--space-8)",";border-top-left-radius:var(--border-radius-4);border-bottom-left-radius:var(--border-radius-4);}"),".sidebar.__jsx-style-dynamic-selector{grid-area:sidebar;background-color:var(--background-default);border-radius:var(--border-radius-4);}",".content.__jsx-style-dynamic-selector{grid-area:content;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding-right:".concat(n?0:"var(--space-8)",";border-radius:var(--border-radius-4);}"),".file.__jsx-style-dynamic-selector,.output.__jsx-style-dynamic-selector{height:100%;border-radius:var(--border-radius-4);}",".file.__jsx-style-dynamic-selector{background-color:var(--background-default);width:calc(50% + var(--space-8));}",".output.__jsx-style-dynamic-selector{background-color:var(--background-root);width:50%;}",".spacer.__jsx-style-dynamic-selector{width:var(--space-8);height:var(--space-8);}",".lite.__jsx-style-dynamic-selector .sidebar.__jsx-style-dynamic-selector{display:none;}",".lite.__jsx-style-dynamic-selector{grid-template-areas: 'header header' 'sidenav content';grid-template-columns:50px 1fr;grid-template-rows:auto 1fr;}",".lite.__jsx-style-dynamic-selector .header.__jsx-style-dynamic-selector{height:40px;}",".stacked.__jsx-style-dynamic-selector .content.__jsx-style-dynamic-selector{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".stacked.__jsx-style-dynamic-selector .file.__jsx-style-dynamic-selector,.stacked.__jsx-style-dynamic-selector .output.__jsx-style-dynamic-selector{width:100%;height:50%;}"]})]})}var Fb={overlimit:{title:"Multiplayer Limit Reached",body:"Repl reached its multiplayer limit. Please contact the owner."},notfound:{title:"Invite Link 404",body:"Multiplayer invite link not found. Please contact the owner."}};function Xb(e){var t,n,r=e.language,i=(0,ve.useRouter)().query,a=pe.useState(!1),o=(0,J.Z)(a,2),s=o[0],c=o[1],l=null,u=ke().get(r)?null:r;i.classroom_template?l={title:"Project Template",body:"This is the template that students will be given to fork. When you are finished, close this tab, go back to the classroom, and create the project."}:u?l={title:"Unsupported Language",body:(0,Ie.BX)("div",{children:[(0,Ie.tZ)("p",{children:"We encountered an internal error while loading your repl"}),(0,Ie.tZ)("br",{}),(0,Ie.BX)("p",{children:['The language "',u,"\" doesn't exist.",(0,Ie.tZ)("br",{}),(0,Ie.tZ)("br",{}),"You can still view your repl but many features may not work.",(0,Ie.tZ)("br",{}),"Our engineers have been notified and we will have a fix for this soon."]})]})}:i.error&&(l=Fb[i.error.toString()]||{title:"Error",body:"Somethng went wrong"});var d=!s&&Boolean(l);return(0,Ie.tZ)(zt.Z,{onRequestClose:function(){return c(!0)},isOpen:d,children:(0,Ie.BX)("div",{className:se().dynamic([["2125406062",[Ze.j.mobileMax]]])+" content",children:[(0,Ie.tZ)(Xe.Z,{level:3,children:null===(t=l)||void 0===t?void 0:t.title}),null===(n=l)||void 0===n?void 0:n.body,(0,Ie.tZ)("div",{className:se().dynamic([["2125406062",[Ze.j.mobileMax]]]),children:(0,Ie.tZ)(je.Z,{children:"Continue"})}),(0,Ie.tZ)(se(),{id:"2125406062",dynamic:[Ze.j.mobileMax],children:[".content.__jsx-style-dynamic-selector{color:var(--foreground-default);padding:var(--space-16);display:grid;grid-gap:var(--space-16);}","@media screen and (min-width:".concat(Ze.j.mobileMax,"px){.content.__jsx-style-dynamic-selector{padding:var(--space-48);}}")]})]})})}function zb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zb(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gb(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Hb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hb(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Hb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wb(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qb(e,t){var n=t.session,r=e.wid,i=e.store;n.onSessionStateChanged((function(e){var t=e.openFiles[e.activeTab],a=n.getPreviewedFile(),o=Boolean(a);t!==i.getState().activeFile&&i.dispatch({type:"OPEN_FILE",wid:r,path:t,session:!0}),t?o&&a!==t&&"md"===(0,Tn.r6)(t)&&n.setPreviewedFile(t):i.dispatch(no({wid:r}))})),n.onPreviewedFileChanged((function(e){e?i.dispatch({type:"ADD_MARKDOWN_TAB",wid:r}):i.dispatch({type:"REMOVE_MARKDOWN_TAB",wid:r})})),e.register("services",{receiver:function(e,t,i){return"OPEN_FILE"===i.type?function(){if(void 0!==i.path&&!i.session){var e=i.path,t=i.tabIndex,r=i.newTab;n.openFile(e,{tabIndex:t,newTab:r})}}:"MOVE_FILE"===i.type?function(){var e=i.path,t=i.to;n.moveFile(e,t)}:"DELETE_FILE"===i.type?function(){var e=i.path;n.deleteFile(e)}:"CLOSE_HEADER_TAB"===i.type?function(){var e=n.getState().openFiles.indexOf(i.path);n.closeTab(e)}:"UPDATE_FILE_CURSORS"===i.type?function(){var e=i.selections;if(e.length<0)throw new Error("Expected cursor selections");var t=e[0],r=t.rawPosition,a=t.position;n.setCursorPosition(Kb(Kb({},r),{},{offset:a}))}:"ADD_MARKDOWN_TAB"===i.type?function(e,t){var n=t().workspace[r],i=n.layout,a=n.plugins;if(!Ot.PP(i,a,"markdownviewer")){var o=Ot.PP(i,a,"shell");if(!o)throw new Error("Expected shell path");e({type:"NEW_TAB",path:Ot.Il(Ot.Il(o)),layout:{type:"pane",pud:"markdownviewer"},setActiveTab:!0,wid:r})}}:"ADD_INSTRUCTIONS2_TAB"===i.type?function(e,t){var n=t().workspace[r],i=n.layout,a=n.plugins;if(!Ot.PP(i,a,"instructionsviewer2")){var o=Ot.PP(i,a,"shell");if(!o)throw new Error("Expected shell path");e({type:"NEW_TAB",path:Ot.Il(Ot.Il(o)),layout:{type:"pane",pud:"instructionsviewer2"},setActiveTab:!0,wid:r})}}:"REMOVE_MARKDOWN_TAB"===i.type?function(e,t){var n=t().workspace[r],i=n.layout,a=n.plugins;if(Ot.PP(i,a,"markdownviewer")){var o=Ot.PP(i,a,"shell");if(!o)throw new Error("Expected shell path");e({type:"CLOSE_TAB",path:Ot.Il(Ot.Il(o)),tabPud:"markdownviewer",wid:r})}}:"ADD_CLUI_CURL_TAB"===i.type?function(e,t){if(!(0,yt.Z)(t().user.userInfo,"flag-cluicurl"))return null;var n=t().workspace[r],i=n.layout,a=n.plugins,o=Ot.PP(i,a,"cluicurl");if(o)e({type:"SET_ACTIVE_TAB",path:Ot.Il(Ot.Il(o)),tabIndex:o[o.length-1],wid:r});else{var s=Ot.PP(i,a,"shell");if(!s)throw new Error("Expected shell path");e({type:"NEW_TAB",path:Ot.Il(Ot.Il(s)),layout:{type:"pane",pud:"cluicurl"},setActiveTab:!0,wid:r})}}:null}}),e.register("fsreduxbridge",function(e){var t=e.fs,n={};return{receiver:function(e,r,i){return"UPLOAD_FILE"===i.type?function(){var n=(0,$.Z)(le().mark((function n(r){var a,o;return le().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:"CREATE_FILE",wid:e,path:i.path}),n.next=3,t.writeFile(i.path,jr.Z.from(i.content));case 3:if(a=n.sent,!(o=a.error)){n.next=8;break}return r({wid:e,type:"FILE_ERROR",path:i.path,error:o}),n.abrupt("return");case 8:r({wid:e,type:"LOAD_FILE",path:i.path});case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}():"OPEN_FILE"===i.type?function(t){i.path&&t({wid:e,type:"LOAD_FILE",path:i.path})}:"LOAD_FILE"===i.type?function(a,o){var s=(0,Tt.Z)(o(),e,r,"fsreduxbridge"),c=s.files[i.path];if(c&&c.loaded)a({type:"FILE_CACHE_HIT",wid:e,path:i.path,file:{loaded:!0,path:i.path,content:jr.Z.from(c.content)}});else if(!n[i.path])if(s.files[i.path]||a({type:"CREATE_FILE",wid:e,path:i.path,changeSource:"containerfs"}),s.filestate[i.path]!==ei.Loading&&a({type:"FILE_LOADING",wid:e,path:i.path}),(0,Tn.Mb)(i.path)){var l=t.watchOtFile(i.path,{onReady:function(t){var r=t.initialContent,o=t.updateSelections,s=t.writeOps;n[i.path].writeOps=s,n[i.path].updateSelections=o,a({type:"FILE_LOADED",wid:e,path:i.path,file:{path:i.path,content:r,loaded:!0}})},onChange:function(t){var n=t.ops;a({wid:e,type:"OT_FILE_OP",path:i.path,changeSource:"containerfs",op:n})},onCursor:function(t){a({wid:e,type:"ADD_FILE_CURSOR",cursor:t,path:i.path})},onRemoveCursor:function(t){a({wid:e,type:"REMOVE_FILE_CURSOR",id:t,path:i.path})},onStatusChange:function(t){switch(t){case In.KF.Dirty:return void a({wid:e,type:"FILE_DIRTY",path:i.path});case In.KF.Syncing:if((0,Tt.Z)(o(),e,r,"fsreduxbridge").filestate[i.path]===ei.Syncing)return;return void a({wid:e,type:"FILE_SYNCING",path:i.path});case In.KF.Clean:a({wid:e,type:"FILE_CLEAN",path:i.path})}},onReconnectFail:function(t){n[i.path].onReconnect=t,a({type:"PROMPT_FILE_RECONNECT",wid:e,path:i.path})},onMoveOrDelete:function(t){switch(delete n[i.path],t.eventType){case In.kS.Move:return void a({wid:e,type:"MOVE_FILE",path:i.path,to:t.to,changeSource:"containerfs"});case In.kS.Delete:a({wid:e,type:"DELETE_FILE",path:i.path,changeSource:"containerfs"})}},onError:function(t,r){delete n[i.path],a({wid:e,type:"FILE_ERROR",path:i.path,error:r?oi.default.wrap(t).setExtras(r):t})}},!0);n[i.path]={dispose:l}}else{var u=!0,d=t.watchFile(i.path,{onChange:function(t){u?(u=!1,a({type:"FILE_LOADED",wid:e,path:i.path,file:{path:i.path,content:t,loaded:!0}})):a({type:"FILE_CACHE_HIT",wid:e,path:i.path,file:{loaded:!0,path:i.path,content:t}})},onMoveOrDelete:function(t){switch(delete n[i.path],t.eventType){case In.kS.Move:return void a({wid:e,type:"MOVE_FILE",path:i.path,to:t.to,changeSource:"containerfs"});case In.kS.Delete:a({wid:e,type:"DELETE_FILE",path:i.path,changeSource:"containerfs"})}},onError:function(t,r){delete n[i.path],a({wid:e,type:"FILE_ERROR",path:i.path,error:r?oi.default.wrap(t).setExtras(r):t})}});n[i.path]={dispose:d}}}:"OT_FILE_OP"===i.type?function(t){if("containerfs"!==i.changeSource){var r=n[i.path];if(!r)throw new Error("Expected file to be in watchedFiles");if(!r.writeOps)throw new Error("Expected writeOps function");r.writeOps(i.op),t({type:"FILE_OP_DONE",wid:e,path:i.path})}}:"UPDATE_FILE_CURSORS"===i.type?function(){var e=n[i.path];e&&e.updateSelections&&e.updateSelections(i.selections)}:"PERSIST_FILE"===i.type?function(){var n=(0,$.Z)(le().mark((function n(a){var o,s,c;return le().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.persist({skipDebounce:Boolean(i.flush)});case 2:if(!n.sent.success){n.next=7;break}return a({type:"FILE_PERSISTED",wid:e}),n.abrupt("return");case 7:return n.next=9,t.persist();case 9:if(!(o=n.sent).success){n.next=13;break}return a({type:"FILE_PERSISTED",wid:e}),n.abrupt("return");case 13:a({type:"BSOD",wid:e,crasherPud:r,originalError:o.error}),s=new Error("snapshot error: "+o.error),c={source:"fsreduxbridge"},xt.Tb(s,{tags:c}),(0,xv.Q)(s,{tags:c});case 18:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}():"DOWNLOAD_FILE_CONTENT_REQUEST"===i.type?function(){var n=(0,$.Z)(le().mark((function n(r){var a;return le().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.readFile(i.path);case 2:if(!(a=n.sent).error){n.next=6;break}return r({type:"DOWNLOAD_FILE_CONTENT_FAILURE",wid:e,path:i.path,error:a.error}),n.abrupt("return");case 6:r({type:"DOWNLOAD_FILE_CONTENT_SUCCESS",wid:e,path:i.path,content:a.content});case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}():"FILE_UNLOAD"===i.type?function(){n[i.path]&&(n[i.path].dispose(),delete n[i.path])}:"MOVE_FILE"===i.type||"DELETE_FILE"===i.type?function(t,n){if("containerfs"!==i.changeSource)throw new Error("Move file and delete file should only be dispatched by containerfs, use fs service instead.");if("MOVE_FILE"===i.type){var a,o=(0,Tt.Z)(n(),e,r,"fsreduxbridge").filestate,s=Gb(Object.keys(o).includes(i.to)?[i.to]:(0,ii.GA)(o,i.to));try{for(s.s();!(a=s.n()).done;){var c=a.value;t({type:"FILE_UNLOAD",wid:e,path:c})}}catch(l){s.e(l)}finally{s.f()}}}:null},reducer:(0,Ct.$)({primary:function(e,t){switch(t.type){case"FILE_RECONNECT_CHOSEN":return Vb(Vb({},e),{},{failedToReconnectFiles:e.failedToReconnectFiles.filter((function(e){return!t.paths.includes(e)}))});case"PROMPT_FILE_RECONNECT":return Vb(Vb({},e),{},{failedToReconnectFiles:(0,nn.Z)(new Set([].concat((0,nn.Z)(e.failedToReconnectFiles),[t.path])))});default:return Vb(Vb({},e),{},{failedToReconnectFiles:e&&e.failedToReconnectFiles?e.failedToReconnectFiles:[]})}},files:eo,filestate:ui}),Component:function(e){var t=e.wid,r=e.pud,i=(0,Tt.J)(t,r,"fsreduxbridge"),a=(0,J.Z)(i,1)[0].failedToReconnectFiles,o=pe.useState(!1),s=(0,J.Z)(o,2),c=s[0],l=s[1],u=(0,ft.I0)(),d=function(){var e=(0,$.Z)(le().mark((function e(i){var o;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,Zt.track)(Zt.events.FILE_RECONNECT_FALLBACK_CHOSEN,{choice:i}),l(!0),e.prev=2,e.next=5,Promise.all(a.map((function(e){var t=n[e];if(t){if(!t.onReconnect)throw new Error("Could not find onReconnect for failed to reconnect file");return t.onReconnect(i)}})));case 5:e.next=14;break;case 7:return e.prev=7,e.t0=e.catch(2),u({type:"BSOD",wid:t,crasherPud:r,originalError:e.t0}),o={source:"fsreduxbridge",bsod:"true"},xt.Tb(e.t0,{tags:o}),(0,xv.Q)(e.t0,{tags:o}),e.abrupt("return");case 14:u({wid:t,type:"FILE_RECONNECT_CHOSEN",paths:a}),l(!1);case 16:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();return(0,Ie.tZ)(zt.Z,{preventClose:!0,isOpen:Boolean(a.length),onRequestClose:function(){},children:(0,Ie.BX)("div",{className:se().dynamic([["1160596551",[Ze.j.mobileMax]]])+" modal",children:[(0,Ie.tZ)(Xe.Z,{level:3,children:"Contents diverged"}),(0,Ie.tZ)(Oe.Z,{children:"We had a hard time resolving differences between your content and server content while you were disconnected."}),c?(0,Ie.tZ)(Vt.Z,{}):(0,Ie.BX)(Ie.HY,{children:[(0,Ie.tZ)(Oe.Z,{children:"What would you like to do?"}),(0,Ie.BX)("div",{className:se().dynamic([["1160596551",[Ze.j.mobileMax]]])+" buttons",children:[(0,Ie.tZ)(je.Z,{onClick:function(){d("local")},color:"positive",children:"Choose my changes"}),(0,Ie.tZ)(je.Z,{onClick:function(){d("remote")},color:"negative",children:"Choose server changes"})]})]}),(0,Ie.tZ)(se(),{id:"1160596551",dynamic:[Ze.j.mobileMax],children:[".modal.__jsx-style-dynamic-selector{display:grid;padding:var(--space-32);grid-row-gap:var(--space-16);}",".buttons.__jsx-style-dynamic-selector{display:grid;grid-row-gap:var(--space-16);}","@media screen and (min-width:".concat(Ze.j.mobileMax,"px){.buttons.__jsx-style-dynamic-selector{grid-column-gap:var(--space-16);grid-auto-flow:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;}.buttons.__jsx-style-dynamic-selector button:first-child{-webkit-order:1;-ms-flex-order:1;order:1;}}")]})]})})}}}({fs:t.fs}))}var Yb=n(33906),Qb=n(91269),Jb=n(40090),$b=n(30535);function ey(e){var t=e.replId,n=e.isOpen,r=e.isLoggedIn,i=e.onRequestClose,a=(0,Jb.Z)(),o=(0,J.Z)(a,2),s=o[0],c=o[1].loading;return(0,Ie.tZ)(zt.Z,{isOpen:n,onRequestClose:i,preventClose:!0,children:r?(0,Ie.BX)("div",{className:"jsx-3668977194 content",children:[(0,Ie.BX)(Ee.gC,{align:"center",spacing:4,children:[(0,Ie.BX)(Ee.gC,{align:"center",spacing:1,children:[(0,Ie.tZ)(Xe.Z,{align:"center",level:1,children:"Fork & edit this repl"}),(0,Ie.tZ)(Oe.Z,{align:"center",size:"large",foreground:2,children:"You can edit this repl by creating your own copy of it"})]}),(0,Ie.tZ)(je.Z,{color:"primary",size:"large",filled:!0,Icon:$b.Z,disabled:c,onClick:function(){c||s({originId:t,trackingData:{forkSource:"forkModal"}})},children:c?"Forking...":"Fork"})]}),(0,Ie.tZ)(se(),{id:"3668977194",children:[".content.jsx-3668977194{padding:var(--space-32);}"]})]}):(0,Ie.tZ)(Ts.Z,{title:"Sign up or log in to fork this repl",onSuccess:function(e){var n=e.isLogin;s({originId:t,trackingData:{forkSource:"forkModal",isSignup:!n}})},source:"fork"})})}var ty=n(96852),ny=n(33854),ry=n(24704);var iy=n(25108);function ay(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ay(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ay(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sy(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,ae.Z)(e);if(t){var i=(0,ae.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,ie.Z)(this,n)}}var cy=function(e){return JSON.parse(JSON.stringify(e))};function ly(e){if(!Object.values(e.getState().plugins).find((function(e){return"adminpanel"===e.type}))){var t="adminpanel";e.dispatch({type:"LOAD_PLUGIN",pluginPud:t,pluginType:"adminpanel",title:"adminpanel"}),e.dispatch({type:"ADD_SIDE_NAV_ITEM",navItem:{pud:t,pluginType:"adminpanel",tooltip:"Crosis Logs",svg:"Alien"}})}}var uy=function(e){(0,re.Z)(n,e);var t=sy(n);function n(){var e;(0,te.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).ws=void 0,e.services=void 0,e.unmounted=void 0,e.WsComponent=void 0,e.state={forking:!1,isWorkspaceCrashed:!1,sentryEventId:null,isMounted:!1,showAuthOnForkPrompt:!1,serverConnectionMetadataUsed:!1,unreachable:!1},e.createNewWorkspace=function(){var t=!1,n=new jt.Z;n.injectServices(e.services),n.registerErrorHandler((function(n){var r,i=n.error,a=n.pluginType,o=n.pud,s=n.source;if(!t){t=!0,iy.error("Plugin with type ",a," and pud ",o," errored in ",s),iy.error(i);var c=null,l=null;if(i instanceof oi.default){c=i.extras;try{iy.log("CustomSentryError extra",JSON.stringify(i.extras))}catch(p){iy.log("CustomSentryError extra",i.extras)}l=i.tags,iy.log("CustomSentryError tags",i.tags)}var u=oy({pluginType:a,workspaceSource:s,workspaceError:"true"},null!==(r=l)&&void 0!==r?r:{}),d=(0,xv.Q)(i,{tags:u,extras:c||void 0});xt.Tb(i,{tags:u,extra:c||void 0}),e.setState({isWorkspaceCrashed:!0,sentryEventId:d||null})}})),fb(n),n.register("audio",_),n.register("bsoder",{receiver:function(t,r,i){"BSOD"===i.type&&(e.setState({isWorkspaceCrashed:!0,sentryEventId:i.sentryEventId||null}),n.store.dispatch({type:"WORKSPACE_WILL_UNMOUNT",wid:t}),i.crasherPud&&n.store.dispatch({type:"PLUGIN_BROKE",pud:i.crasherPud,message:"No message"}),i.originalError&&(iy.error("".concat(i.crasherPud||"plugin"," crashed}")),iy.error(i.originalError)))}}),n.register("replforker",{receiver:function(t,n,r){return"OT_FILE_OP"===r.type&&"containerfs"!==r.changeSource&&!e.props.repl.isOwner&&e.setState({showAuthOnForkPrompt:!0}),null}}),n.register("replupdater",{receiver:function(t,n,r){return"REQUEST_REPL_UPDATE"===r.type?function(){var n=(0,$.Z)(le().mark((function n(i){var a,o;return le().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=e.props.repl,o=a.id,a.isOwner||xt.$e((function(e){e.setExtra("updates",r.updates),xt.Tb(new Error("Trying to update repl without perms"))})),e.props.updateRepl(o,r.updates),i({wid:t,type:"REPL_UPDATED",updates:r.updates}),r.refresh&&window.location.replace(window.location.pathname);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}():"REPL_UPDATED"===r.type?function(){e.props.updateReplSuccess(oy(oy({},e.props.repl),r.updates))}:null}}),qb(n,e.services);var r=e.props,i=r.repl,a=r.user,o=r.router,s=r.showShareToTalkPromo,c=r.shouldShowMPInviteTour,l=r.shouldShowEducationPane,u=r.shouldShowAutograderPane,d=r.shouldShowUnitTestPane,p=r.shouldShowYoutubePane;n.yikesInjectStore(e.props.reduxStore);var f=(0,fe.isMobile)({ua:window.navigator.userAgent,tablet:!0});window.mobileTaint=f,window.anonTaint=!a.isLoggedIn;var h=function(){var t=(0,mt.Z)(a);o.query.lite&&((t=mt.L).codeIntelligence=!1);var n=(0,yt.Z)(a,"windowing")&&!o.query.lite,r=Boolean(window.AudioContext||window.webkitAudioContext),h=(0,yt.Z)(e.props.user,"flag-cluicurl"),m=a&&a.isLoggedIn&&a.roles.includes("admin"),g=(0,yt.Z)(a,"flag-yt-in-the-ws")&&i.language.includes("python")&&p,v=(0,yt.Z)(a,"flag-webview-devtools");return pt({lang:i.language,lite:o.query.lite,outputonly:Boolean(o.query.outputonly),sharing:!i.isOwner,isMobile:f,preferences:t,isServer:i.config.isServer||!1,isVnc:i.config.isVnc||!1,gitRemoteUrl:i.config.gitRemoteUrl,inspector:Boolean(o.query.inspector),showShareToTalkPromo:s,shouldShowMPInviteTour:c,shouldShowEducationPane:l,shouldShowAutograderPane:u,shouldShowUnitTestPane:d,isWindowingEnabled:n,hasAudioContext:r,shouldLoadAdminPanel:m,isCluiCurlEnabled:h,isLoggedIn:e.props.user.isLoggedIn,shouldLoadYoutubePane:g,shouldUseDevtoolsWebview:v})}();n.bootstrap(h),n.store.dispatch({type:"REPL_UPDATED",updates:i});var m=window.performance.now(),g=e.state.serverConnectionMetadataUsed?void 0:e.props.connectionMetadata;n.store.dispatch({type:"GOVAL_CONNECT",customConnectionMetadata:g}),e.setState({serverConnectionMetadataUsed:!0}),n.govalConnectionStarted=m,e.props.doRunFlow&&((0,Zt.track)(Zt.events.REPL_CREATED,{isSignup:!1,isOnboarding:!1,isForked:!1,isPrivate:i.isPrivate,replId:i.id,isRenamed:!1,language:i.language,isSelfForked:!1,isGithubImport:!0}),n.store.dispatch({type:"LOAD_PLUGIN",pluginPud:"runflow",pluginType:"runflow"}),n.store.dispatch(oy({type:"UPDATE_LAYOUT"},Ot.$T(n.store.getState().layout,"runflow","inside",Ot.cV())))),n.store.dispatch({type:"UPDATE_WORKSPACE_PREFERENCES",updates:h.preferences});var v="/home/runner/".concat(i.slug);n.store.dispatch({type:"UPDATE_WORKING_DIRECTORY",path:v}),window.debug=function(){return ly(n.store)},window.services=e.services,o.query.debug&&(ly(n.store),n.store.dispatch({type:"START_CROSIS_ADMIN_LOGS"})),e.ws=n,e.WsComponent=n.component()},e.handleBeforePopState=function(e){var t=e.as;return!e.options.shallow||(window.location.href=t,window.location.reload(),!1)},e.handleRouteChange=function(){if(e.props.router.query.replUrl!==e.props.repl.url){var t=e.props.replsByUrl[e.props.router.query.replUrl];if(!t)return;e.props.setActiveReplId({replId:t})}},e}return(0,ne.Z)(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=this;if(xt.YA("replId",this.props.repl.id),wt.YA("replId",this.props.repl.id),(0,bt.Fy)(this.props.repl),!this.props.shouldRedirectToExpired&&!this.props.shouldRedirectToDepricated){(0,yt.Z)(this.props.user,"flag-handicap-goval-conn")&&setInterval((function(){window.v1ws&&(window.v1ws.close(),window.v1ws=null),window.v6ws&&(window.v6ws.close(),window.v6ws=null)}),6e4),window["flag-windowing"]=(0,yt.Z)(this.props.user,"windowing"),window["flag-ot-high-consitency"]=(0,yt.Z)(this.props.user,"flag-ot-high-consitency"),window["open-markdown-split"]=(0,yt.Z)(this.props.user,"open-markdown-split"),this.services=(0,mb.Z)({onUnrecoverableError:function(t){if(t.message.toLowerCase().includes("repl not found"))ve.default.push("/home","~/");else{var n={replenvironmentservices:!0};iy.error(t),xt.Tb(t,{tags:n});var r=(0,xv.Q)(t,{tags:n});e.setState({isWorkspaceCrashed:!0,sentryEventId:r})}}}),this.createNewWorkspace(),this.props.router.events.on("routeChangeComplete",this.handleRouteChange),window.performance&&window.performance.navigation&&1===window.performance.navigation.type&&(0,Zt.track)(Zt.events.PAGE_RELOADED,{repl:this.props.repl});var t=this.services.presence.onActiveUsersChange((function(){var n;t(),(0,Zt.track)(Zt.events.MULTIPLAYER_REPL_OPENED,{replId:e.props.repl.id,participantsCount:e.props.multiplayers,usersOnlineCount:null===(n=e.services)||void 0===n?void 0:n.presence.getActiveUsers().length,threadsVariant:"replace-chat"})}));(0,Zt.track)(Zt.events.CLIENT_PING,{});var n=bt.kg.timeStart();(0,ht.LK)("/data/t/ping").then((function(){n("latency to node server")}))}}},{key:"componentDidMount",value:function(){var e=this;this.setState({isMounted:!0});var t=this.props,n=t.repl,r=t.router,i=t.shouldRedirectToExpired,a=t.shouldRedirectToDepricated,o=t.user;r.beforePopState(this.handleBeforePopState);var s=n.url.split("/")[1].slice(1);if(i)r.replace({pathname:"/expiredPrivateRepl",query:{isOwner:n.isOwner,ownerUsername:s,replId:n.id}},r.asPath);else if(a)r.replace({pathname:"/deprecatedLangauge",query:{replId:n.id}},r.asPath);else{if((0,yt.Z)(o,"flag-replco-probe")){var c={replId:n.id,slug:n.slug,user:s};(0,ty.dp)(c,(function(t){e.setState({unreachable:!t})}))}(0,yt.Z)(o,"flag-dd-rum")&&ry.v.init({applicationId:"70f7ac46-ee96-4ddc-91fa-db466436f768",clientToken:"pub1bf559fff8bd97cc0f38da70d80a0a17",site:"datadoghq.com",service:"repl-it-web-workspace",env:"production",version:"568e96f",sampleRate:100,trackInteractions:!1,beforeSend:function(e){var t;return!(null===(t=e.context)||void 0===t||!t.bsod)}}),o&&!n.isOwner&&(0,Zt.track)(Zt.events.REPL_GUEST_VIEW,{page:"replEnvironment"})}}},{key:"componentWillUnmount",value:function(){this.props.router.beforePopState((function(){return!0})),this.props.router.events.off("routeChangeComplete",this.handleRouteChange),window.debug=void 0,window.__SOCIAL_VIEW_FORK=void 0,this.services&&this.services.container.destroy(),(0,ty._Y)(this.props.repl.id),this.unmounted=!0,xt.YA("replId",void 0),wt.YA("replId",void 0),(0,bt.dv)()}},{key:"componentDidUpdate",value:function(e){var t=e.repl.id!==this.props.repl.id,n=e.repl.url!==this.props.repl.url;if(t||n){var r=this.props.repl,i=r.url,a=oy(oy({},this.props.router.query),{},{replUrl:r.url}),o=Et(a);ve.default.push({pathname:"/replEnvironment",query:a},{pathname:i,query:o},{shallow:!0}),this.state.forking||t&&this.services&&(window.location.href=r.url)}}},{key:"getDescription",value:function(e){return this.props.repl.description?this.props.repl.description:"A ".concat(e," repl")}},{key:"render",value:function(){var e=this,t=this.props,n=t.shouldRedirectToExpired,r=t.shouldRedirectToDepricated;if(n||r)return null;var i=this.props,a=i.lite,o=i.repl,s=i.user,c=i.stacked,l=i.connectionMetadata,u=i.userImage,d="https://replit.com"+o.url,p=ke().get(o.language).displayName,f=this.getDescription(p),h=s.isLoggedIn&&o.userId===s.id,m=this.WsComponent;return(0,Ie.tZ)(cr.E,{children:(0,Ie.tZ)("div",{className:Xt()("workspace-wrapper",{desktop:!a,lite:a}),id:Yb.b,tabIndex:1,children:(0,Ie.tZ)(vt.Z,{children:(0,Ie.BX)(be.Z,{title:o.title,oembedUrl:d,description:f||void 0,noHeader:!0,noFooter:!0,forceDrawer:!0,hideEmailVerify:!0,children:[(0,Ie.tZ)(Xb,{language:o.language}),this.state.isWorkspaceCrashed&&(0,Ie.tZ)(gb.Z,{devHide:function(){return e.setState({isWorkspaceCrashed:!1})},eventId:this.state.sentryEventId,currentUserImage:u,currentUserUsername:s.isLoggedIn?s.username:void 0}),(0,Ie.tZ)("div",{className:"jsx-1703838917 "+(Xt()("workspace-page-wrapper",{desktop:!a,lite:a})||""),children:m&&this.ws&&this.services&&this.state.isMounted?(0,Ie.tZ)(hb.Z.Provider,{value:this.services,children:(0,Ie.tZ)(Qb.Z.Provider,{value:o.id,children:(0,Ie.BX)(Bu,{children:[(0,Ie.tZ)(Sa.F.Provider,{value:this.state.unreachable,children:(0,Ie.tZ)(dy,{children:(0,Ie.tZ)(m,{className:"jsx-1703838917"})})}),(0,Ie.tZ)(Ub,{ws:this.ws,user:s,isOwner:h,customConnectionMetadata:l})]})})}):(0,Ie.tZ)(Mb,{lite:Boolean(a),stacked:c})}),this.props.repl.isOwner?null:(0,Ie.tZ)(ey,{isLoggedIn:this.props.user.isLoggedIn,isOpen:this.state.showAuthOnForkPrompt,onRequestClose:function(){return e.setState({showAuthOnForkPrompt:!1})},replId:o.id}),(0,Ie.tZ)(se(),{id:"1705417764",children:["html,body{-webkit-scrollbar-width:none;-moz-scrollbar-width:none;-ms-scrollbar-width:none;scrollbar-width:none;}"]}),(0,Ie.tZ)(se(),{id:"4238172360",children:[".workspace-page-wrapper.jsx-1703838917{height:100%;width:100%;position:fixed;left:0px;right:0px;top:0;bottom:0px;background-color:var(--background-root);}",".workspace-page-wrapper.desktop.jsx-1703838917{padding:var(--space-8);padding-top:0;}",".banner+.content>.workspace-page-wrapper.jsx-1703838917{height:calc(100% - 36px);top:36px;}"]})]})})})})}}],[{key:"getInitialProps",value:function(){var e=(0,$.Z)(le().mark((function e(t){var n,r,i,a,o,s,c,l,u,d,p,f,h,m,g,v,b,y,x,w,k,Z,j,O,E,_,C,S,P,N,I,T,D,R,A,L,B,U,M,F,X;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.req,r=t.store,i=t.query,a=t.apolloClient){e.next=3;break}throw new Error("Expected apolloClient");case 3:if(o="string"===typeof i.lite&&i.lite?i.lite:!!i.lite,c=!1,i.replUrl){e.next=7;break}throw new Error("Please add replUrl to query");case 7:return l=i.replUrl.split("/"),u=(0,J.Z)(l,3),d=u[1],p=u[2],f="/data/repls/",f+="repls"!==d?d+"/":"anon/",e.next=13,Promise.all([(0,ht.LK)("".concat(f).concat(p)),(0,kt.Z)(n,r)]);case 13:h=e.sent,m=(0,J.Z)(h,1),s=m[0],c=Boolean(s.is_mobile),e.next=29;break;case 19:if(n&&n.headers["user-agent"]){e.next=21;break}throw new Error("Invalid request");case 21:return s=cy(n.repl),c=cy(n.isMobile),e.next=25,(0,kt.Z)(n,r);case 25:if(g=e.sent,!(v=g.error)){e.next=29;break}return e.abrupt("return",{error:v});case 29:if((b=r.getState().user.userInfo).isLoggedIn||(b=null),y=(0,mt.Z)(b),i.lite&&((y=mt.L).codeIntelligence=!1),r.dispatch((0,gt.h$)(s)),x=r.getState().repls.data[s.id],xt.YA("replId",x.id),wt.YA("replId",x.id),(0,bt.Fy)(x),r.dispatch(ye({replId:x.id})),k=!1,Z=!1,j=!1,O=!1,E=!1,_=!1,C=!1,S=!0,P=!0,N=0,!b){e.next=56;break}return e.next=52,a.query({query:Se.dFe,variables:{replId:x.id}});case 52:T=e.sent,null!==(D=T.data)&&void 0!==D&&D.currentUser&&(k=!D.currentUser.shareToTalkPromoSeen,O=!D.currentUser.shouldShowMPInviteTour,I=D.currentUser.image,"Repl"===(null===D||void 0===D||null===(R=D.repl)||void 0===R?void 0:R.__typename)?(D.repl.lang.isDeprecated&&(j=!0),"Team"===(null===(L=D.repl.owner)||void 0===L?void 0:L.__typename)&&(S=!1),D.repl.isProject||D.repl.isProjectFork?_=!0:C=!0,P=!1,M="Team"===(null===(B=D.repl.owner)||void 0===B?void 0:B.__typename)&&D.repl.owner.isAdmin,D.repl.isProjectFork&&!D.repl.isModelSolution&&(E=M),w=null===D||void 0===D||null===(U=D.repl)||void 0===U?void 0:U.owner):"SubscriptionExpiredError"===(null===D||void 0===D||null===(A=D.repl)||void 0===A?void 0:A.__typename)&&(Z=!0)),"Repl"===D.repl.__typename&&(N=D.repl.multiplayers.length,"User"===(null===(F=D.repl.owner)||void 0===F?void 0:F.__typename)&&(N+=1));case 56:return i.token&&i.gurl&&i.conmanURL&&(X={token:i.token,gurl:i.gurl,conmanURL:i.conmanURL}),e.abrupt("return",{doRunFlow:Boolean(i.doRunFlow),owner:w,showShareToTalkPromo:k,shouldRedirectToExpired:Z,shouldRedirectToDepricated:j,shouldShowMPInviteTour:O,isMobile:c,shouldShowEducationPane:E,shouldShowAutograderPane:_,shouldShowUnitTestPane:C,shouldShowYoutubePane:S,shouldEnableChat:P,multiplayers:N,lite:o,connectionMetadata:X,stacked:c||Boolean(o)||y.isLayoutStacked,userImage:I});case 58:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(pe.Component);function dy(e){var t=e.children,n=pe.useRef({fileMap:new Map});return(0,Ie.tZ)(ny.Z.Provider,{value:n,children:t})}var py=function(e){var t=function(t){(0,re.Z)(r,t);var n=sy(r);function r(){return(0,te.Z)(this,r),n.apply(this,arguments)}return(0,ne.Z)(r,[{key:"render",value:function(){var t=this;return(0,Ie.tZ)(ft.ET.Consumer,{children:function(n){var r=n.store;return(0,Ie.tZ)(e,oy(oy({},t.props),{},{reduxStore:r}))}})}}]),r}(pe.Component);return t.displayName="withStore(ReplEnvironment)",me()(t,e)}(uy),fy=(0,ft.$j)((function(e){var t=e.repls.data[e.replEnvironment.activeReplId];return oy(oy({},e.replEnvironment),{},{repl:t,replsByUrl:e.replsByUrl,isAnon:!e.user.userInfo.isLoggedIn,user:e.user.userInfo})}),(function(e){return(0,ge.DE)({showMessage:xe.P,setActiveReplId:ye,updateRepl:gt.rM,updateReplSuccess:gt.G5},e)}))((0,ve.withRouter)(py))},47169:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/replEnvironment",function(){return n(8717)}])}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[5762,8350,2240,4700,6344,6351,4012,7262,9646,8966,6467,4778,9998,6354,9710,8944,3220,5332,2448,1889,6376,3129,3946,8968,2378,9428,682,7434,2929,7503,9753,3201,8220,9571,9306,2523,7558,2313,8212,3185,806,4766,9509,9774,2888,179],(function(){return t(54310),t(47169)}));var n=e.O();_N_E=n}]);
//# sourceMappingURL=replEnvironment-e42849b47d200d5f.js.map