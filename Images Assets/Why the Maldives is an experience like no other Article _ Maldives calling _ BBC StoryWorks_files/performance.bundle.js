!function(){"use strict";var e,t,n,r,o=function(e,t){return{name:e,value:void 0===t?-1:t,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},i=function(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){if("first-input"===e&&!("PerformanceEventTiming"in self))return;var n=new PerformanceObserver((function(e){return e.getEntries().map(t)}));return n.observe({type:e,buffered:!0}),n}}catch(e){}},a=function(e,t){var n=function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},c=function(e){addEventListener("pageshow",(function(t){t.persisted&&e(t)}),!0)},u=function(e,t,n){var r;return function(o){t.value>=0&&(o||n)&&(t.delta=t.value-(r||0),(t.delta||void 0===r)&&(r=t.value,e(t)))}},s=-1,p=function(){return"hidden"===document.visibilityState?0:1/0},f=function(){a((function(e){var t=e.timeStamp;s=t}),!0)},d=function(){return s<0&&(s=p(),f(),c((function(){setTimeout((function(){s=p(),f()}),0)}))),{get firstHiddenTime(){return s}}},m=function(e,t){var n,r=d(),a=o("FCP"),s=function(e){"first-contentful-paint"===e.name&&(f&&f.disconnect(),e.startTime<r.firstHiddenTime&&(a.value=e.startTime,a.entries.push(e),n(!0)))},p=performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],f=p?null:i("paint",s);(p||f)&&(n=u(e,a,t),p&&s(p),c((function(r){a=o("FCP"),n=u(e,a,t),requestAnimationFrame((function(){requestAnimationFrame((function(){a.value=performance.now()-r.timeStamp,n(!0)}))}))})))},v=!1,l=-1,b=function(e,t){v||(m((function(e){l=e.value})),v=!0);var n,r=function(t){l>-1&&e(t)},s=o("CLS",0),p=0,f=[],d=function(e){if(!e.hadRecentInput){var t=f[0],r=f[f.length-1];p&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(p+=e.value,f.push(e)):(p=e.value,f=[e]),p>s.value&&(s.value=p,s.entries=f,n())}},b=i("layout-shift",d);b&&(n=u(r,s,t),a((function(){b.takeRecords().map(d),n(!0)})),c((function(){p=0,l=-1,s=o("CLS",0),n=u(r,s,t)})))},g={passive:!0,capture:!0},w=new Date,h=function(r,o){e||(e=o,t=r,n=new Date,T(removeEventListener),y())},y=function(){if(t>=0&&t<n-w){var o={entryType:"first-input",name:e.type,target:e.target,cancelable:e.cancelable,startTime:e.timeStamp,processingStart:e.timeStamp+t};r.forEach((function(e){e(o)})),r=[]}},E=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){h(e,t),o()},r=function(){o()},o=function(){removeEventListener("pointerup",n,g),removeEventListener("pointercancel",r,g)};addEventListener("pointerup",n,g),addEventListener("pointercancel",r,g)}(t,e):h(t,e)}},T=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,E,g)}))},S=function(n,s){var p,f=d(),m=o("FID"),v=function(e){e.startTime<f.firstHiddenTime&&(m.value=e.processingStart-e.startTime,m.entries.push(e),p(!0))},l=i("first-input",v);p=u(n,m,s),l&&a((function(){l.takeRecords().map(v),l.disconnect()}),!0),l&&c((function(){var i;m=o("FID"),p=u(n,m,s),r=[],t=-1,e=null,T(addEventListener),i=v,r.push(i),y()}))},O=new Set,L=function(e,t){var n,r=d(),s=o("LCP"),p=function(e){var t=e.startTime;t<r.firstHiddenTime&&(s.value=t,s.entries.push(e)),n()},f=i("largest-contentful-paint",p);if(f){n=u(e,s,t);var m=function(){O.has(s.id)||(f.takeRecords().map(p),f.disconnect(),O.add(s.id),n(!0))};["keydown","click"].forEach((function(e){addEventListener(e,m,{once:!0,capture:!0})})),a(m,!0),c((function(r){s=o("LCP"),n=u(e,s,t),requestAnimationFrame((function(){requestAnimationFrame((function(){s.value=performance.now()-r.timeStamp,O.add(s.id),n(!0)}))}))}))}},P=function(e){var t,n=o("TTFB");t=function(){try{var t=performance.getEntriesByType("navigation")[0]||function(){var e=performance.timing,t={entryType:"navigation",startTime:0};for(var n in e)"navigationStart"!==n&&"toJSON"!==n&&(t[n]=Math.max(e[n]-e.navigationStart,0));return t}();if(n.value=n.delta=t.responseStart,n.value<0)return;n.entries=[t],e(n)}catch(e){}},"complete"===document.readyState?setTimeout(t,0):addEventListener("pageshow",t)};function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function C(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){D(i,r,o,a,c,"next",e)}function c(e){D(i,r,o,a,c,"throw",e)}a(void 0)}))}}var F,x=Date.now(),R={"www.bbc.co.uk":"https://europe-west1-bbc-otg-traf-mgr-bq-prod-4591.cloudfunctions.net/report-endpoint","www.bbc.com":"https://europe-west1-bbc-otg-traf-mgr-bq-prod-4591.cloudfunctions.net/report-endpoint","www.test.bbc.co.uk":"https://europe-west1-bbc-otg-traf-mgr-bq-dev-4105.cloudfunctions.net/report-endpoint","www.test.bbc.com":"https://europe-west1-bbc-otg-traf-mgr-bq-dev-4105.cloudfunctions.net/report-endpoint","navigation.int.api.bbc.co.uk":"https://europe-west1-bbc-otg-traf-mgr-bq-dev-4105.cloudfunctions.net/report-endpoint","navigation.test.api.bbc.co.uk":"https://europe-west1-bbc-otg-traf-mgr-bq-dev-4105.cloudfunctions.net/report-endpoint","navigation.int.api.bbc.com":"https://europe-west1-bbc-otg-traf-mgr-bq-dev-4105.cloudfunctions.net/report-endpoint","navigation.test.api.bbc.com":"https://europe-west1-bbc-otg-traf-mgr-bq-dev-4105.cloudfunctions.net/report-endpoint","local.dev.bbc.co.uk":"https://europe-west1-bbc-otg-traf-mgr-bq-dev-4105.cloudfunctions.net/report-endpoint","local.dev.bbc.com":"https://europe-west1-bbc-otg-traf-mgr-bq-dev-4105.cloudfunctions.net/report-endpoint"}[window.location.hostname],B=Math.random()<=.1,A=document.currentScript.getAttribute("data-ux"),N=document.currentScript.getAttribute("data-release");(F=C(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.bbcuser.allowsPerformanceCookies();case 2:t=e.sent,R&&navigator.sendBeacon&&B&&t&&(n={cls:null,fid:null,lcp:null,fcp:null,ttfb:null},b(r=function(e){var t=e.name,r=e.value,o=t.toLowerCase();n[o]=r},!0),S(r),L(r,!0),m(r),P(r),window.addEventListener("pagehide",C(regeneratorRuntime.mark((function e(){var t,r,o,i,a,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.bbcpage.getDestination();case 2:return t=e.sent,e.next=5,window.bbcpage.getContentType();case 5:r=e.sent,o=document.documentElement.className.includes("b-reith-sans-font")?"1":"0",i="".concat(R,"?platform=").concat(A,"-").concat(N,"&owner=").concat(t,"&pageType=").concat(r,"&reith=").concat(o),a=[{type:"web-vitals",url:window.location.href,age:Date.now()-x,body:q({},n)}],c=JSON.stringify(a),u=new Blob([c],{type:"application/reports+json"}),navigator.sendBeacon(i,u);case 13:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e)}))),function(){return F.apply(this,arguments)})()}();
//# sourceMappingURL=performance.bundle.js.map