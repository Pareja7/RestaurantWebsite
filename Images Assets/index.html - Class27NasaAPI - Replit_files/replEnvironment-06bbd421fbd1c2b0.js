(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7363,3308],{47169:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/replEnvironment",function(){return r(23418)}])},52697:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var n=r(35944),a=r(65988),i=r.n(a),o=(r(67294),r(94184)),l=r.n(o);function c(e){var t=e.unreadDot,r=e.size,a=void 0===r?12:r,o=e.count,c=void 0===o?null:o,s=c&&c>99,u=s?"99+":null===c||void 0===c?void 0:c.toString();return(0,n.BX)("span",{className:"jsx-1c7f3b9066c4c334",children:[(0,n.tZ)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},xmlns:"http://www.w3.org/2000/svg",className:"jsx-1c7f3b9066c4c334",children:(0,n.tZ)("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-1c7f3b9066c4c334"})}),t&&(0,n.tZ)("div",{className:"jsx-1c7f3b9066c4c334 unread-indicator"}),Boolean(c)&&(0,n.tZ)("div",{className:"jsx-1c7f3b9066c4c334 "+(l()("count",{overflow:s})||""),children:u}),(0,n.tZ)(i(),{id:"1c7f3b9066c4c334",children:"span.jsx-1c7f3b9066c4c334{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.unread-indicator.jsx-1c7f3b9066c4c334{width:5px;height:5px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;background-color:var(--accent-red-default);-webkit-transform:translate(8px,-1px);-moz-transform:translate(8px,-1px);-ms-transform:translate(8px,-1px);-o-transform:translate(8px,-1px);transform:translate(8px,-1px);position:absolute}.count.jsx-1c7f3b9066c4c334{-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;background-color:var(--accent-negative-default);-webkit-transform:translate(50%,-50%);-moz-transform:translate(50%,-50%);-ms-transform:translate(50%,-50%);-o-transform:translate(50%,-50%);transform:translate(50%,-50%);position:absolute;min-width:16px;padding:2px 3px;height:16px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center;color:white;font-size:var(--font-size-small)}.overflow.jsx-1c7f3b9066c4c334{-webkit-transform:translate(25%,-50%);-moz-transform:translate(25%,-50%);-ms-transform:translate(25%,-50%);-o-transform:translate(25%,-50%);transform:translate(25%,-50%)}"})]})}},68948:function(e,t,r){"use strict";var n=r(35944),a=r(65988),i=r.n(a),o=r(67294),l=r(8996),c=r(32911);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.Z=function(e){var t=e.title,r=void 0===t?"Sign up":t,a=e.description,s=void 0===a?"Code, create, and learn together on Replit":a,f=e.onSuccess,p=void 0===f?function(){}:f,b=e.onFailure,m=void 0===b?function(){}:b,h=e.onAnonSuccess,v=void 0===h?function(){}:h,g=e.showLoginFirst,y=void 0!==g&&g,x=e.isTeacher,w=void 0!==x&&x,k=e.toggleTeacher,j=void 0===k?function(){}:k,Z=e.allowAnon,S=void 0!==Z&&Z,E=e.source,O=d(o.useState(y),2),_=O[0],C=O[1];return(0,n.BX)("div",{className:"jsx-17a5f6998e0a3cdd auth-modal",children:[(0,n.BX)(l.gC,{align:"center",spacing:2,children:[(0,n.tZ)("div",{className:"jsx-17a5f6998e0a3cdd auth-modal-title",children:r}),(0,n.tZ)("div",{className:"jsx-17a5f6998e0a3cdd auth-modal-description",children:s}),(0,n.tZ)(c.Z,{onChangeAuth:function(){C(!_)},isTeacher:w,isLogin:_,onSubmit:function(e){"error"in e?m(e):"user"in e&&p(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){u(e,t,r[t])}))}return e}({},e,{isLogin:_}))},toggleTeacher:j,source:E}),S&&(0,n.tZ)("div",{className:"jsx-17a5f6998e0a3cdd auth-modal-anon",children:(0,n.tZ)("a",{onClick:v,className:"jsx-17a5f6998e0a3cdd",children:"continue as Anonymous"})})]}),(0,n.tZ)(i(),{id:"17a5f6998e0a3cdd",children:".auth-modal.jsx-17a5f6998e0a3cdd{max-width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:var(--space-32)var(--space-16)}.title-container.jsx-17a5f6998e0a3cdd{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin-bottom:var(--space-16)}.auth-modal-title.jsx-17a5f6998e0a3cdd{text-align:center;color:var(--foreground-default);font-size:var(--font-size-header-big);font-weight:var(--font-weight-medium)}.auth-modal-description.jsx-17a5f6998e0a3cdd{text-align:center;color:var(--foreground-dimmer);font-size:var(--font-size-subhead-default)}.auth-modal-anon.jsx-17a5f6998e0a3cdd{margin-top:14px;font-size:14px}.auth-modal-anon.jsx-17a5f6998e0a3cdd a.jsx-17a5f6998e0a3cdd{color:var(--accent-primary-default);text-decoration:none;cursor:pointer}"})]})}},67952:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var n=r(35944),a=r(65988),i=r.n(a),o=r(51281),l=r(40425),c=r(8996),s=r(58458);function u(e){var t=e.prompt,r=e.desc,a=e.confirmText,u=e.loading,d=void 0!==u&&u,f=e.onCancel,p=e.onConfirm,b=e.danger,m=e.padding,h=void 0===m?32:m;return(0,n.BX)("div",{className:i().dynamic([["91406e91c388a2c8",[h]]])+" content",children:[(0,n.BX)(c.gC,{spacing:4,children:[(0,n.BX)(c.gC,{spacing:1,children:[(0,n.tZ)(l.Z,{level:3,children:t}),(0,n.tZ)(s.Z,{foreground:2,children:r})]}),(0,n.BX)(c.Ug,{spacing:1,children:[f&&(0,n.tZ)(o.Z,{autoFocus:!0,loading:d,onClick:f,children:"Cancel"}),(0,n.tZ)(o.Z,{color:b?"negative":"primary",filled:!0,loading:d,onClick:p,children:a||"Ok"})]})]}),(0,n.tZ)(i(),{id:"91406e91c388a2c8",dynamic:[h],children:".content.__jsx-style-dynamic-selector{padding:var(--space-".concat(h,")}")})]})}},83308:function(e,t,r){"use strict";r.d(t,{a:function(){return P},Z:function(){return T}});var n=r(34051),a=r.n(n),i=r(35944),o=r(65988),l=r.n(o),c=r(67294),s=r(3606),u=r(48966),d=r(48010);function f(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){f(i,n,a,o,l,"next",e)}function l(e){f(i,n,a,o,l,"throw",e)}o(void 0)}))}}var b={isEmail:[[u.isEmail,"Invalid email address"]],email:[[u.isEmail,"Invalid email address"],[function(){var e=p(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.uz)("/data/user/exists",{email:t});case 2:return r=e.sent.exists,e.abrupt("return",!r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"Email already in use"]],username:[[function(e){return(0,u.isByteLength)(e,2,15)},"Your username must be between 2 and 15 characters"],[function(e){return!!e.match(/^[0-9a-zA-Z]+$/)},"Your username can only contain alphanumeric characters (letters A-Z, numbers 0-9)"],[function(){var e=p(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.uz)("/data/user/exists",{username:t});case 2:return r=e.sent.exists,e.abrupt("return",!r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"Username is taken"]],name:[[function(e){return(0,u.isByteLength)(e,1,255)},"Your name must be at least 1 character long"]],classroomName:[[function(e){return(0,u.isByteLength)(e,1,255)},"Classroom name must be at least 1 character long"]],replTitle:[[function(e){return(0,u.isByteLength)(e,1,60)},"Titles must be between 1 and 60 characters"]],replDescription:[[function(e){return(0,u.isByteLength)(e,0,255)},"Description should not be longer than 255 characters"]],notEmpty:[[function(e){return!(0,u.isEmpty)(e)},"Cannot be empty"]],postTitle:[[function(e){return(0,u.isByteLength)(e,1,100)&&!!e.match(/[0-9a-zA-Z]+/)},"Your post title must be less than 100 characters and contain at least one alphanumeric character"]],replTag:[[function(e){return(0,u.isByteLength)(e,2,15)},"Tag must be between 2 and 15 characters"],[function(e){return!!e.match(/^[0-9a-zA-Z_]+$/)},"Tag must be alphanumeric characters"]],replFolderName:[[function(e){return(0,u.isByteLength)(e.trim(),1,60)},"Folder name must be between 1 and 60 characters"],[function(e){return!e.match(/[/*?"\\]+/)},'Folder name cannot contain /, *, ", ? \\']]},m=r(66970),h=r(12596);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function k(e,t,r){return t&&w(e.prototype,t),r&&w(e,r),e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z(e){return Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Z(e)}function S(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){j(e,t,r[t])}))}return e}function O(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function _(e,t){return!t||"object"!==I(t)&&"function"!==typeof t?g(e):t}function C(e,t){return C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},C(e,t)}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var I=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function N(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Z(e);if(t){var a=Z(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _(this,r)}}var T=function(e){S(r,e);var t=N(r);function r(){return x(this,r),t.apply(this,arguments)}return k(r,[{key:"focus",value:function(){this.input&&this.input.focus()}},{key:"select",value:function(){this.input&&this.input.select()}},{key:"blur",value:function(){this.input&&this.input.blur()}},{key:"render",value:function(){var e=this,t=this.props,r=t.error,n=t.isLoading,a=O(t,["error","isLoading"]),o=r?[{message:r,state:"error"}]:void 0;return(0,i.BX)("div",{className:"jsx-ac5406405936ddf form-input-with-ui",children:[(0,i.tZ)(h.ZP,E({},a,{validationResults:o,ref:function(t){return e.input=t}})),n?(0,i.tZ)(m.Z,{style:{right:"8px",top:"12px",height:"16px",width:"16px",position:"absolute"}}):null,(0,i.tZ)(l(),{id:"ac5406405936ddf",children:".form-input-with-ui.jsx-ac5406405936ddf{position:relative;width:100%}"})]})}}]),r}(c.Component);j(T,"defaultProps",{isLoading:!1,type:"text",value:"",required:!1});var P=function(e){S(r,e);var t=N(r);function r(e){var n;x(this,r),j(g(n=t.call(this,e)),"onBlur",(function(e){n.props.onBlur&&n.props.onBlur(e),n.validateNow()})),j(g(n),"onChange",(function(e){n.props.onChange(e),n.clearErrTimeout=setTimeout((function(){return n.setState({error:null})}),200),n.validate()})),j(g(n),"validateNow",(function(){n.validate.cancel(),n._validate()}));var i,o=g(n);return j(g(n),"_validate",(i=a().mark((function e(){var t,r,n,i,l,c,s,u,d,f,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!0,r=o.props.validators||b[o.props.validator]){e.next=4;break}throw new Error("Please supply validators or a type of validator");case 4:n=!0,i=!1,l=void 0,e.prev=5,c=r[Symbol.iterator]();case 7:if(n=(s=c.next()).done){e.next=25;break}if(u=A(s.value,2),d=u[0],f=u[1],!(p=d(o.props.value)).then){e.next=16;break}return o.setState({isLoading:!0}),e.next=14,p;case 14:p=e.sent,o.setState({isLoading:!1});case 16:if(p){e.next=22;break}return o.props.onValidation(f),t=!1,o.setState({error:f}),o.clearErrTimeout&&clearTimeout(o.clearErrTimeout),e.abrupt("break",25);case 22:n=!0,e.next=7;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(5),i=!0,l=e.t0;case 31:e.prev=31,e.prev=32,n||null==c.return||c.return();case 34:if(e.prev=34,!i){e.next=37;break}throw l;case 37:return e.finish(34);case 38:return e.finish(31);case 39:t&&(o.setState({error:null}),o.props.onValidation(null));case 40:case"end":return e.stop()}}),e,null,[[5,27,31,39],[32,,34,38]])})),function(){var e=this,t=arguments;return new Promise((function(r,n){var a=i.apply(e,t);function o(e){y(a,r,n,o,l,"next",e)}function l(e){y(a,r,n,o,l,"throw",e)}o(void 0)}))})),j(g(n),"validate",(0,s.Z)((function(){return n._validate()}),n.props.debounceTime)),n.state={error:null,isLoading:!1},n}return k(r,[{key:"focus",value:function(){this.input&&this.input.focus()}},{key:"select",value:function(){this.input&&this.input.select()}},{key:"blur",value:function(){this.input&&this.input.blur()}},{key:"render",value:function(){var e=this,t=this.props,r=(t.onValidation,t.validator,t.validators,t.debounceTime,E({},O(t,["onValidation","validator","validators","debounceTime"]),{onChange:this.onChange,onBlur:this.onBlur,ref:function(t){return e.input=t},error:this.state.error,isLoading:this.state.isLoading}));return(0,i.tZ)(T,E({},r))}}]),r}(c.Component);j(P,"defaultProps",{debounceTime:1e3})},68004:function(e,t,r){"use strict";var n=r(35944),a=r(65988),i=r.n(a),o=r(67294),l=r(47121);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){u(e,t,r[t])}))}return e}function p(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function b(e,t){return!t||"object"!==h(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}var h=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var a=d(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return b(this,r)}}var g=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(u,e);var t,r,a,o=v(u);function u(){return c(this,u),o.apply(this,arguments)}return t=u,(r=[{key:"componentDidMount",value:function(){this.props.autoFocus&&this.focus()}},{key:"focus",value:function(){this.el&&this.el.focus()}},{key:"blur",value:function(){this.el&&this.el.blur()}},{key:"select",value:function(){this.el&&this.el.select()}},{key:"render",value:function(){var e=this,t=this.props,r=t.inputTriggerProps,a=t.tall,o=p(t,["inputTriggerProps","tall"]),c=r?function(e){return(0,n.tZ)(l.Z,f({},r,{children:e}))}:function(e){return e};return(0,n.BX)(n.HY,{children:[c((0,n.tZ)("textarea",f({ref:function(t){return e.el=t}},o,{className:"jsx-2a814c0442240f80 "+i().dynamic([["565cfe21335e19e3",[a?250:60]]])+" form-textarea"}))),(0,n.tZ)(i(),{id:"2a814c0442240f80",children:".form-textarea.jsx-2a814c0442240f80{resize:vertical;background-color:var(--background-default);color:var(--foreground-default)}.form-textarea.jsx-2a814c0442240f80:focus{border-color:var(--accent-primary-default)}.form-textarea[disabled].jsx-2a814c0442240f80{background-color:var(--background-root);color:var(--foreground-dimmer);opacity:.5}"}),(0,n.tZ)(i(),{id:"565cfe21335e19e3",dynamic:[a?250:60],children:".form-textarea.__jsx-style-dynamic-selector{color:var(--foreground-default);width:100%;max-width:100%;min-width:100%;min-height:".concat(a?250:60,"px;height:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:var(--space-8);outline:0px;font-size:15px;border:1px solid var(--foreground-dimmest);line-height:1.4;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.form-textarea.__jsx-style-dynamic-selector:focus{outline:0 none}.form-textarea[readonly].__jsx-style-dynamic-selector{cursor:not-allowed}")})]})}}])&&s(t.prototype,r),a&&s(t,a),u}(o.Component);u(g,"defaultProps",{autoComplete:"off",required:!1}),t.Z=g},43368:function(e,t,r){"use strict";r.d(t,{Aw:function(){return k},ck:function(){return j}});var n=r(35944),a=r(65988),i=r.n(a),o=r(67294),l=r(88942),c=r(94184),s=r.n(c),u=r(27740),d=r.n(u),f=r(88768),p=r(66754),b=r(77070),m=r(37026);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){v(e,t,r[t])}))}return e}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function k(e){var t=e.children;return(0,n.BX)("div",{className:"jsx-fc3f2d6eed31a28a",children:[t,(0,n.tZ)(i(),{id:"fc3f2d6eed31a28a",children:"div.jsx-fc3f2d6eed31a28a{padding:var(--space-4)var(--space-8);color:var(--foreground-dimmest);font-size:var(--font-size-small);text-transform:uppercase;font-weight:var(--font-weight-medium);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;letter-spacing:1px}"})]})}function j(e){var t=e.title,r=e.iconUrl,a=e.filter,o=e.isNew,l=e.active;return(0,n.BX)("div",{className:"jsx-a05d143d4aa3ff4e "+(s()("item",{active:l})||""),children:[r?(0,n.tZ)("div",{className:"jsx-a05d143d4aa3ff4e item-icon",children:(0,n.tZ)(m.Z,{iconUrl:r,size:16,alt:t})}):null,(0,n.tZ)("div",{className:"jsx-a05d143d4aa3ff4e item-text",children:a?(0,n.tZ)(p.fs,{source:t,match:a}):t}),o?(0,n.tZ)("div",{className:"jsx-a05d143d4aa3ff4e new",children:"new"}):null,(0,n.tZ)(i(),{id:"a05d143d4aa3ff4e",children:".item.jsx-a05d143d4aa3ff4e{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:start;justify-content:start;font-size:var(--font-size-subhead-default);padding:var(--space-8);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;height:40px;overflow:hidden;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.item-icon.jsx-a05d143d4aa3ff4e{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center;margin-right:var(--space-8)}.item-text.jsx-a05d143d4aa3ff4e{-webkit-flex:0 1 auto;-ms-flex:0 1 auto;flex:0 1 auto;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}.active.jsx-a05d143d4aa3ff4e{background-color:var(--background-highest)}.new.jsx-a05d143d4aa3ff4e{-webkit-align-self:flex-start;-ms-flex-item-align:flex-start;align-self:flex-start;margin-left:4px;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-small);padding:2px 6px;color:var(--white);background-color:var(--accent-primary-default)}"})]})}t.ZP=function(e){var t=y(o.useState(e.initialSelectedItem),2),r=t[0],a=t[1],c="";e.initialSelectedItem&&(c=e.initialSelectedItem.key);var u=y(o.useState(c),2),m=u[0],h=u[1],v=(0,f.STr)({variables:{includeInterestedIn:!0},skip:!e.withMostUsed}).data,w=o.useCallback((function(e){h(e)}),[h]),Z=o.useMemo((function(){return v&&v.currentUser&&v.currentUser.languages?v.currentUser.languages.slice(0,7).map((function(e){return d().get(e.key)})):[]}),[v]),S=o.useMemo((function(){if(m)return d().search(m).slice(0,5);var e=d().allSupportedByPopularity({includeAliases:!0});return x(Z).concat(x(e.filter((function(e){return!Z.find((function(t){return t.key===e.key&&t.displayName===e.displayName}))}))))}),[m,Z]),E=o.useMemo((function(){var t=x(S);return e.filterResults?t.filter(e.filterResults):t}),[S,e.filterResults]),O=o.useMemo((function(){return r?"key"in r?{src:r.icon||void 0,alt:r.displayName}:void 0:null}),[r]),_=o.useRef(null);return o.useEffect((function(){e.autoFocus&&_.current&&!r&&_.current.focus()}),[e.autoFocus]),(0,n.tZ)(l.ZP,{id:"languageSelector",initialHighlightedIndex:0,defaultHighlightedIndex:0,initialSelectedItem:r,selectedItem:r,itemToString:function(e){return e?e.displayName:""},onInputValueChange:w,onOuterClick:function(e){return(0,e.closeMenu)()},onChange:function(t){t&&(_.current&&_.current.blur(),a(t),e.onSelect(t))},children:function(t){var r=t.getInputProps,a=t.getMenuProps,l=t.getItemProps,c=t.highlightedIndex,u=t.isOpen,d=t.openMenu,f=t.closeMenu,m=t.inputValue,v=t.clearSelection;return(0,n.BX)("div",{className:"jsx-da90273089f0ed7a "+(s()("language-selector",{"is-open":u,"has-error":e.hasError})||""),children:[(0,n.BX)("div",{className:"jsx-da90273089f0ed7a input-wrap",children:[O&&(0,n.tZ)("img",g({},O,{width:18,className:"jsx-da90273089f0ed7a selected-icon"})),(0,n.tZ)("input",g({},r({ref:_,placeholder:e.placeholder||"Search for a language",disabled:e.disabled,onFocus:function(e){e.target.value&&e.target.select(),h(""),d()},onBlur:e.onBlur,onChange:function(e){""===e.target.value&&v()}}),{className:"jsx-da90273089f0ed7a"})),(0,n.tZ)("div",{onClick:function(e){(0,b.j)(b.U3.CREATION_FLOW_LANGUAGE_DROPDOWN_ARROW_CLICKED),u?f():_.current&&_.current.focus()},className:"jsx-da90273089f0ed7a arrow-icon-wrap",children:(0,n.tZ)(p.e0,{color:"var(--foreground-default)",flipped:u})})]}),(0,n.tZ)("div",g({},a(),{className:"jsx-da90273089f0ed7a menu-anchor",children:u&&(0,n.tZ)("div",{className:"jsx-da90273089f0ed7a menu",children:E?(0,n.tZ)("ul",{className:"jsx-da90273089f0ed7a",children:E.map((function(e,t){var r=c===t;return(0,n.BX)(o.Fragment,{children:[!m&&0===t&&Z.length?(0,n.tZ)(k,{children:"favorites"}):null,!m&&Z.length&&t===Z.length-1?(0,n.tZ)(k,{children:"all languages"}):null,(0,n.tZ)("li",g({},l({index:t,item:e}),{className:"jsx-da90273089f0ed7a",children:(0,n.tZ)(j,{isNew:Boolean(e.isNew),iconUrl:e.icon,title:e.displayName,active:r,filter:m||void 0})}))]},e.key+e.displayName)}))}):null})})),(0,n.tZ)(i(),{id:"da90273089f0ed7a",children:".language-selector.jsx-da90273089f0ed7a{width:100%;position:relative;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.input-wrap.jsx-da90273089f0ed7a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.selected-icon.jsx-da90273089f0ed7a{position:absolute;left:8px;top:50%;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);-o-transform:translateY(-50%);transform:translateY(-50%);pointer-events:none}.arrow-icon-wrap.jsx-da90273089f0ed7a{position:absolute;right:0;top:0;height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 10px;width:30px;cursor:pointer}.arrow-icon-wrap.jsx-da90273089f0ed7a>svg{display:block;width:100%;height:auto}input.jsx-da90273089f0ed7a{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;font-size:var(--font-size-subhead-default);display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;width:100%;outline:0 none;background-color:transparent;border:1px solid var(--background-highest);margin:0;color:inherit;padding:var(--space-8);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto}input[disabled].jsx-da90273089f0ed7a{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:.5}input.jsx-da90273089f0ed7a:focus{border-color:var(--accent-primary-default)}.selected-icon.jsx-da90273089f0ed7a+input.jsx-da90273089f0ed7a{padding-left:32px}.has-error.jsx-da90273089f0ed7a input.jsx-da90273089f0ed7a:not(:focus){border-color:var(--accent-negative-default)}.is-open.jsx-da90273089f0ed7a input.jsx-da90273089f0ed7a{-webkit-border-bottom-right-radius:0;-moz-border-radius-bottomright:0;border-bottom-right-radius:0;-webkit-border-bottom-left-radius:0;-moz-border-radius-bottomleft:0;border-bottom-left-radius:0;border-bottom-color:transparent}ul.jsx-da90273089f0ed7a{list-style:none}.menu-anchor.jsx-da90273089f0ed7a{position:absolute;width:100%;height:0;bottom:0;z-index:1000}.menu.jsx-da90273089f0ed7a{position:absolute;top:0;left:0;width:100%;background-color:var(--background-default);border:1px solid var(--accent-primary-default);border-top:0 none;max-height:320px;overflow-y:auto;-webkit-border-bottom-left-radius:var(--border-radius-4);-moz-border-radius-bottomleft:var(--border-radius-4);border-bottom-left-radius:var(--border-radius-4);-webkit-border-bottom-right-radius:var(--border-radius-4);-moz-border-radius-bottomright:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);padding:var(--space-8);z-index:9999}li.jsx-da90273089f0ed7a{cursor:pointer}"})]})}})}},98555:function(e,t,r){"use strict";r.d(t,{rM:function(){return b},G5:function(){return m},h$:function(){return h}});var n=r(56869),a=r.n(n),i=r(2466),o=r.n(i),l=r(44119),c=r.n(l),s=r(87152);function u(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function d(){var e,t,r=(e=["\n  mutation ReduxUpdateReplMutation($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        title\n        description\n        language\n        url\n        config {\n          isServer\n          isVnc\n        }\n        isPrivate\n        isStarred\n      }\n    }\n  }\n"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return d=function(){return r},r}function f(e){if(Array.isArray(e))return e.map(f);if(e&&"object"===typeof e){var t={};for(var r in e)t[o()(r)]=e[r];return t}return"string"===typeof e?o()(e):e}var p=c()(d());function b(e,t){return function(r){r({type:"UPDATE_REPL_REQUEST",id:e,updates:t});var n=f(t);if(Array.isArray(n)||"string"===typeof n)throw new Error("Repl updates should be an object");var a=t.config,i=u(t,["config"]);a&&("undefined"!==typeof a.isServer&&(i.isServer=a.isServer),"undefined"!==typeof a.isVnc&&(i.isVnc=a.isVnc)),i.id=e,s.l.mutate({mutation:p,variables:{input:i}}).then((function(t){var n=t.data,a=t.errors;a&&a.length||!n.updateRepl||!n.updateRepl.repl?r({type:"UPDATE_REPL_FAILURE",id:e}):r({type:"UPDATE_REPL_SUCCESS",repl:n.updateRepl.repl})}))}}function m(e){return function(t){return t({type:"UPDATE_REPL_SUCCESS",repl:e})}}function h(e){return{type:"FETCH_REPL_SUCCESS",repl:a()(e)}}},94185:function(e,t,r){"use strict";var n=r(81548),a=r(55982);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){o(e,t,r[t])}))}return e}function c(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.Z.register("repls",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_REPL_SUCCESS":return l({},e,{data:l({},e.data,o({},t.repl.id,t.repl))});case"UPDATE_REPL_SUCCESS":return l({},e,{data:l({},e.data,o({},t.repl.id,l({},e.data[t.repl.id],t.repl)))});case"ENSURE_FILE":var r=(0,a.Uo)(t.path),n=(0,a.Xp)(t.path),i=e.data[r];return!i||i.fileNames.includes(n)?e:l({},e,{data:l({},e.data,o({},r,l({},i,{fileNames:c(i.fileNames).concat([n])})))});case"MOVE_FILE_SUCCESS":var s=(0,a.Uo)(t.to),u=e.data[s];if(!u||s!==(0,a.Uo)(t.from))return e;var d=(0,a.Xp)(t.from),f=(0,a.Xp)(t.to);return l({},e,{data:l({},e.data,o({},s,l({},u,{fileNames:c(u.fileNames.filter((function(e){return e!==d}))).concat([f])})))});case"DELETE_FILE_SUCCESS":var p=(0,a.Uo)(t.path),b=(0,a.Xp)(t.path),m=e.data[p];return m?l({},e,{data:l({},e.data,o({},p,l({},m,{fileNames:m.fileNames.filter((function(e){return e!==b}))})))}):e}return e})),n.Z.register("replsByUrl",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_REPL_SUCCESS":case"FETCH_REPL_SUCCESS":return l({},e,o({},t.repl.url,t.repl.id))}return e})),n.Z.register("replsByUser",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"FETCH_REPL_SUCCESS"===t.type?e[t.repl.userId]&&e[t.repl.userId].includes(t.repl.id)?e:l({},e,o({},t.repl.userId,(e[t.repl.userId]||[]).concat([t.repl.id]))):e}))},45421:function(e,t,r){"use strict";r.d(t,{D:function(){return n},V:function(){return i}});var n,a=r(55982);function i(e){return e.endsWith(".md")?n.Markdown:(0,a.sL)(e)?n.Draw:(0,a.IQ)(e)?n.Pedit:(0,a.T3)(e)?n.Media:n.Code}!function(e){e.Media="Media",e.Code="Code",e.Markdown="Markdown",e.Draw="Draw",e.Pedit="Pedit"}(n||(n={}))},77847:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(35944),a=r(65988),i=r.n(a),o=(r(67294),r(58458));function l(e){var t=e.label;return(0,n.BX)(o.Z,{size:"xsmall",children:[(0,n.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":t,className:"jsx-b2b24242521d2288 help",children:"?"}),(0,n.tZ)(i(),{id:"b2b24242521d2288",children:".help.jsx-b2b24242521d2288{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center;border:1px solid var(--background-higher);-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;width:var(--space-16);height:var(--space-16);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}"})]})}},50558:function(e,t,r){"use strict";var n=r(35944),a=r(65988),i=r.n(a),o=r(67294),l=r(8286);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.Z=function(e){var t=e.id,r=e.isOn,a=e.onChange,c=s(o.useState(t),2),u=c[0],d=c[1];return o.useEffect((function(){d(t||Math.random().toString(36).split(".")[1])}),[t]),(0,n.BX)("label",{htmlFor:u,className:"jsx-61807ecf57234539 checkbox",children:[(0,n.tZ)("input",{id:u,onChange:a,type:"checkbox",checked:r,className:"jsx-61807ecf57234539"}),(0,n.tZ)("div",{className:"jsx-61807ecf57234539 overlay",children:(0,n.tZ)("div",{className:"jsx-61807ecf57234539 icon",children:(0,n.tZ)(l.Z,{})})}),(0,n.tZ)(i(),{id:"61807ecf57234539",children:".checkbox.jsx-61807ecf57234539 input.jsx-61807ecf57234539{position:absolute;opacity:0}.overlay.jsx-61807ecf57234539{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center;position:relative;height:16px;width:16px;background-color:var(--background-higher);border:1px solid var(--outline-dimmest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);-webkit-transition:background-color.2s;-moz-transition:background-color.2s;-o-transition:background-color.2s;transition:background-color.2s;color:var(--foreground-dimmer);cursor:pointer}.overlay.jsx-61807ecf57234539:hover{background-color:var(--background-higher)}.icon.jsx-61807ecf57234539{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center;opacity:0;-webkit-transition:opacity.1s;-moz-transition:opacity.1s;-o-transition:opacity.1s;transition:opacity.1s}.overlay.jsx-61807ecf57234539:hover .icon.jsx-61807ecf57234539{opacity:1}.overlay.jsx-61807ecf57234539:active{background-color:var(--background-highest)}.checkbox.jsx-61807ecf57234539 input.jsx-61807ecf57234539:checked~.overlay.jsx-61807ecf57234539{background-color:var(--accent-primary-default);opacity:1;border-color:var(--accent-primary-default);color:var(--white)}.checkbox.jsx-61807ecf57234539 input.jsx-61807ecf57234539:checked~.overlay.jsx-61807ecf57234539 .icon.jsx-61807ecf57234539{opacity:1}"})]})}},45734:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(35944),a=(r(67294),r(47240));function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){return(0,n.tZ)(a.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){i(e,t,r[t])}))}return e}({},e,{children:(0,n.tZ)("path",{d:"M19 12L5 12M5 12L12 5M5 12L12 19",strokeLinecap:"round",strokeLinejoin:"round"})}))}},92432:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(35944),a=(r(67294),r(47240));function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){return(0,n.tZ)(a.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){i(e,t,r[t])}))}return e}({},e,{children:(0,n.tZ)("path",{d:"M5 12L19 12M19 12L12 5M19 12L12 19",strokeLinecap:"round",strokeLinejoin:"round"})}))}},94485:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(35944),a=(r(67294),r(47240));function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){return(0,n.tZ)(a.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){i(e,t,r[t])}))}return e}({},e,{children:(0,n.tZ)("path",{d:"M12 7V12.3333L16 15M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z",strokeLinecap:"round",strokeLinejoin:"round"})}))}},76898:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(35944),a=(r(67294),r(47240));function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){return(0,n.BX)(a.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){i(e,t,r[t])}))}return e}({strokeWidth:2},e,{children:[(0,n.tZ)("path",{d:"M23 4v6h-6M1 20v-6h6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.tZ)("path",{d:"M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15",strokeLinecap:"round",strokeLinejoin:"round"})]}))}},10751:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(35944),a=(r(67294),r(47240));function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){return(0,n.tZ)(a.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){i(e,t,r[t])}))}return e}({},e,{children:(0,n.tZ)("path",{d:"M21.8008 7.99963C21.8008 7.99963 21.6055 6.62073 21.0039 6.01526C20.2422 5.21838 19.3906 5.21448 19 5.1676C16.2031 4.96448 12.0039 4.96448 12.0039 4.96448H11.9961C11.9961 4.96448 7.79687 4.96448 5 5.1676C4.60938 5.21448 3.75781 5.21838 2.99609 6.01526C2.39453 6.62073 2.20312 7.99963 2.20312 7.99963C2.20312 7.99963 2 9.62073 2 11.2379V12.7535C2 14.3707 2.19922 15.9918 2.19922 15.9918C2.19922 15.9918 2.39453 17.3707 2.99219 17.9762C3.75391 18.7731 4.75391 18.7457 5.19922 18.8317C6.80078 18.984 12 19.0309 12 19.0309C12 19.0309 16.2031 19.0231 19 18.8239C19.3906 18.777 20.2422 18.7731 21.0039 17.9762C21.6055 17.3707 21.8008 15.9918 21.8008 15.9918C21.8008 15.9918 22 14.3746 22 12.7535V11.2379C22 9.62073 21.8008 7.99963 21.8008 7.99963ZM9.93359 14.5934V8.97229L15.3359 11.7926L9.93359 14.5934Z",strokeLinecap:"round",strokeLinejoin:"round"})}))}},51409:function(e,t,r){"use strict";function n(e){var t=document.createElement("canvas"),r=t.getContext("2d");if(t.width=e.width,t.height=e.height,!r)throw new Error("failed to get canvas ctx");return{version:"1",width:e.width,height:e.height,palette:[[0,0,0,255],[255,255,255,255],[255,255,128,255],[255,128,255,255],[0,128,128,255],[128,0,255,255],[255,0,128,255],[0,255,255,255]],anims:{},frames:e.frames.map((function(n){var a=new window.ImageData(new Uint8ClampedArray(n.pixels),e.width,e.height);return r.putImageData(a,0,0),t.toDataURL()}))}}function a(e){return new Promise((function(t,r){var n=new window.Image;n.src=e,n.onload=function(){t(n)},n.onerror=r}))}function i(e){return new Promise((function(t,r){Promise.all(e.frames.map(a)).then((function(n){var a=document.createElement("canvas");a.width=e.width,a.height=e.height;var i=a.getContext("2d");if(i){var o=n.map((function(t){return i.drawImage(t,0,0),{pixels:Array.from(i.getImageData(0,0,e.width,e.height).data),width:e.width,height:e.height}}));t({frames:o,preview:e.frames[0],width:e.width,height:e.height})}else r(new Error("failed to get canvas ctx"))})).catch(r)}))}r.d(t,{C:function(){return n},u:function(){return i}})},88262:function(e,t,r){"use strict";var n=r(11163);t.Z=function(){return Boolean(n.default.query.embed||n.default.query.lite)}},76867:function(e,t,r){"use strict";var n=r(5152);t.Z=(0,n.default)((function(){return Promise.all([r.e(4885),r.e(8966),r.e(9710),r.e(3220),r.e(6063),r.e(3308),r.e(3485)]).then(r.bind(r,24338)).then((function(e){return e.EditReplTemplate}))}),{loadableGenerated:{webpack:function(){return[24338]}}})},13476:function(e,t,r){"use strict";r.d(t,{Z:function(){return f}});var n=r(35944),a=(r(67294),r(65988)),i=r.n(a),o=r(44054),l=function(e){var t=e.type,r=void 0===t?"default":t,a=e.onClick,l=e.label,c=e.icon,s=e.lite,u=e.cyName,d="run"===r?{backgroundColor:"var(--accent-positive-dimmest)",backgroundColorHover:"var(--accent-positive-default)",backgroundColorActive:"var(--accent-positive-dimmer)",borderColorActive:"var(--accent-positive-stronger)",textColor:"var(--accent-positive-stronger)",textColorHover:"var(--white)"}:{backgroundColor:"var(--background-higher)",backgroundColorHover:"var(--background-highest)",backgroundColorActive:"var(--outline-dimmest)",borderColorActive:"var(--outline-default)",textColor:"var(--foreground-dimmer)",textColorHover:"var(--foreground-default)"},f=d.backgroundColor,p=d.backgroundColorHover,b=d.backgroundColorActive,m=d.borderColorActive,h=d.textColor,v=d.textColorHover;return(0,n.BX)("div",{role:"button","data-cy":u,onClick:a,className:i().dynamic([["5323ec55d474f57c",[f,f,h,p,v,m,b,b,o.j.tabletMax,s?"100px":"60px",s?"100px":"60px"]]])+" ws-header-cta",children:[(0,n.tZ)("div",{className:i().dynamic([["5323ec55d474f57c",[f,f,h,p,v,m,b,b,o.j.tabletMax,s?"100px":"60px",s?"100px":"60px"]]])+" ws-header-cta-icon",children:c}),(0,n.tZ)("span",{className:i().dynamic([["5323ec55d474f57c",[f,f,h,p,v,m,b,b,o.j.tabletMax,s?"100px":"60px",s?"100px":"60px"]]])+" ws-header-cta-label",children:l}),(0,n.tZ)(i(),{id:"5323ec55d474f57c",dynamic:[f,f,h,p,v,m,b,b,o.j.tabletMax,s?"100px":"60px",s?"100px":"60px"],children:".ws-header-cta.__jsx-style-dynamic-selector{border:1px solid ".concat(f,";display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center;height:100%;width:100px;cursor:pointer;position:relative;-webkit-transition:color.2s,background-color.2s;-moz-transition:color.2s,background-color.2s;-o-transition:color.2s,background-color.2s;transition:color.2s,background-color.2s;z-index:1;-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);background-color:").concat(f,";color:").concat(h,";font-weight:var(--font-weight-medium);font-size:var(--font-size-subhead-default)}.ws-header-cta.__jsx-style-dynamic-selector:hover{background-color:").concat(p,";color:").concat(v,"}.ws-header-cta.__jsx-style-dynamic-selector:active{border:1px solid ").concat(m,";background-color:").concat(b,"}.ws-header-cta.__jsx-style-dynamic-selector:focus{-webkit-box-shadow:0 0 0 2px ").concat(b,";-moz-box-shadow:0 0 0 2px ").concat(b,";box-shadow:0 0 0 2px ").concat(b,"}.ws-header-cta-label.__jsx-style-dynamic-selector{vertical-align:middle;text-align:center;line-height:100%;text-transform:capitalize}.ws-header-cta-icon.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;margin-right:var(--space-8);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center}@media screen and (max-width:").concat(o.j.tabletMax,"px){.ws-header-cta.__jsx-style-dynamic-selector{max-width:").concat(s?"100px":"60px",";min-width:").concat(s?"100px":"60px","}.ws-header-cta-label.__jsx-style-dynamic-selector{display:none}.ws-header-cta-icon.__jsx-style-dynamic-selector{margin-right:0}}")})]})},c=r(1517),s=r(16108),u=r(6407);function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){var t=e.runState,r=e.onClick,a=e.lite,i=function(e){switch(e){case"loading":return{label:"working",icon:(0,n.tZ)(c.Z,{})};case"idle":return{label:"run",type:"run",icon:(0,n.tZ)(s.Z,{filled:!0})};case"running":return{label:"stop",icon:(0,n.tZ)(u.Z,{filled:!0})};case"stopping":return{label:"stopping",icon:(0,n.tZ)(c.Z,{})}}}(t),o="idle"===t?"language-page-run-button":void 0;return(0,n.tZ)(l,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){d(e,t,r[t])}))}return e}({lite:a,onClick:r,cyName:o},i),i.label)}},23418:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return gZ}});var n={};r.r(n),r.d(n,{Component:function(){return An},reducer:function(){return Cn}});var a={};r.r(a),r.d(a,{Component:function(){return $n},createOtOpsForEdits:function(){return Vn},parseDotReplit:function(){return Xn}});var i={};r.r(i),r.d(i,{Component:function(){return da},receiver:function(){return ba},reducer:function(){return ma}});var o={};r.r(o),r.d(o,{Component:function(){return ga.Z}});var l={};r.r(l),r.d(l,{Component:function(){return oi},reducer:function(){return li}});var c={};r.r(c),r.d(c,{Component:function(){return Pi},receiver:function(){return Di},reducer:function(){return Li}});var s={};r.r(s),r.d(s,{Component:function(){return Bi}});var u={};r.r(u),r.d(u,{Component:function(){return Fi},reducer:function(){return Gi}});var d={};r.r(d),r.d(d,{Component:function(){return Wi}});var f={};r.r(f),r.d(f,{Component:function(){return Yi}});var p={};r.r(p),r.d(p,{Component:function(){return eo}});var b={};r.r(b),r.d(b,{Component:function(){return no}});var m={};r.r(m),r.d(m,{Component:function(){return oo}});var h={};r.r(h),r.d(h,{Component:function(){return mo}});var v={};r.r(v),r.d(v,{Component:function(){return Eo},reducer:function(){return So}});var g={};r.r(g),r.d(g,{Component:function(){return Mo},receiver:function(){return zo},reducer:function(){return Do}});var y={};r.r(y),r.d(y,{Component:function(){return il},default:function(){return el},receiver:function(){return nl},reducer:function(){return ol}});var x={};r.r(x),r.d(x,{Component:function(){return wl}});var w={};r.r(w),r.d(w,{Component:function(){return Tl}});var k={};r.r(k),r.d(k,{Component:function(){return Tc},receiver:function(){return Nc},reducer:function(){return Ic}});var j={};r.r(j),r.d(j,{Component:function(){return Pc}});var Z={};r.r(Z),r.d(Z,{Component:function(){return Vc},default:function(){return Hc},receiver:function(){return Hc},reducer:function(){return Gc}});var S={};r.r(S),r.d(S,{Component:function(){return Jc},reducer:function(){return Qc}});var E={};r.r(E),r.d(E,{Component:function(){return ss},receiver:function(){return ls}});var O={};r.r(O),r.d(O,{Component:function(){return bs}});var _={};r.r(_),r.d(_,{Component:function(){return Cs},receiver:function(){return Os}});var C={};r.r(C),r.d(C,{Component:function(){return zs},receiver:function(){return Ds},reducer:function(){return Ms}});var A={};r.r(A),r.d(A,{Component:function(){return cu},receiver:function(){return ou}});var I={};r.r(I),r.d(I,{Component:function(){return mu}});var N={};r.r(N),r.d(N,{Component:function(){return Wu}});var T={};r.r(T),r.d(T,{Component:function(){return Kp},receiver:function(){return Gp}});var P={};r.r(P),r.d(P,{Component:function(){return lb},receiver:function(){return sb}});var R={};r.r(R),r.d(R,{Component:function(){return Th}});var L={};r.r(L),r.d(L,{Component:function(){return Ph}});var D={};r.r(D),r.d(D,{Component:function(){return Zv}});var U={};r.r(U),r.d(U,{Component:function(){return Og}});var z={};r.r(z),r.d(z,{Component:function(){return Lg}});var B={};r.r(B),r.d(B,{Component:function(){return Yy},receiver:function(){return Ky}});var M={};r.r(M),r.d(M,{Component:function(){return Hx}});var F={};r.r(F),r.d(F,{Component:function(){return Yx}});var X={};r.r(X),r.d(X,{Component:function(){return ww}});var V={};r.r(V),r.d(V,{Component:function(){return Ow}});var G={};r.r(G),r.d(G,{Component:function(){return Cw}});var H={};r.r(H),r.d(H,{Component:function(){return Tw}});var W={};r.r(W),r.d(W,{receiver:function(){return gk},reducer:function(){return xk}});var K={};r.r(K),r.d(K,{Component:function(){return Ik},receiver:function(){return Ck}});var q={};r.r(q),r.d(q,{receiver:function(){return Tk},reducer:function(){return Nk}});var Y={};r.r(Y),r.d(Y,{receiver:function(){return Dk},reducer:function(){return Lk}});var $={};r.r($),r.d($,{Component:function(){return zk}});var Q=r(34051),J=r.n(Q),ee=r(35944),te=r(65988),re=r.n(te);function ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ne(e,t,r[t])}))}return e}r(81548).Z.register("replEnvironment",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isForking:!1,activeReplId:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACTIVE_REPL_ID":return ae({},e,{activeReplId:t.replId});case"SET_IS_FORKING":return ae({},e,{isForking:t.isForking});default:return e}}));r(94185);var ie=r(67294),oe=r(63805),le=r(8679),ce=r.n(le),se=r(14890),ue=r(11163),de=r(92298);function fe(e){return{type:"SET_ACTIVE_REPL_ID",replId:e.replId}}var pe=r(67718),be=r(27740),me=r.n(be),he=r(44054),ve=r(51281),ge=r(58458),ye=r(8996),xe=r(88341),we=r(5560),ke=r(88768),je=r(44894),Ze=r(3204);function Se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ee=function(e){var t,r,n=e.isVisible,a=e.children,i=e.onDismiss,o=e.tooltipProps,l=(0,we.Z)(),c=(0,ke.CHr)({variables:{replId:l}}),s=c.data,u=c.loading,d="io-tests-popover-dismissed-".concat(l),f=je.Z.get(d,"boolean");if(!s||u)return null;var p="Repl"===(null===s||void 0===s||null===(t=s.repl)||void 0===t?void 0:t.__typename)?s.repl:null;if(!p)return null;var b=p.isProjectFork,m=p.ioTests,h=p.owner,v=(null===(r=p.unitTests)||void 0===r?void 0:r.tests)?p.unitTests.tests:[],g="Team"===(null===h||void 0===h?void 0:h.__typename)&&(null===h||void 0===h?void 0:h.isAdmin),y=m.length>0||v.length>0,x=!g&&b&&!f&&y&&n;return(0,ee.tZ)("div",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Se(e,t,r[t])}))}return e}({css:[Ze.l0.display.flex,Ze.l0.width("100%"),Ze.l0.height("100%"),Ze.l0.center]},x?{}:o,{children:(0,ee.BX)(xe.Z,{isOpen:x,placement:"right",showArrow:!0,borderColor:"var(--accent-purple-default)",children:[a,(0,ee.BX)(ye.gC,{spacing:1,align:"stretch",children:[m.length>0?(0,ee.BX)(ge.Z,{size:"small",children:["This project has ",(0,ee.tZ)("strong",{children:m.length})," input/output"," ",m.length>1?"tests":"test","."]}):(0,ee.BX)(ge.Z,{size:"small",children:["This project has ",(0,ee.tZ)("strong",{children:v.length})," unit"," ",v.length>1?"tests":"test","."]}),(0,ee.tZ)(ge.Z,{size:"small",children:"Run tests to check your work!"}),(0,ee.tZ)(ye.Ug,{justify:"end",children:(0,ee.tZ)(ve.Z,{onClick:function(e){e.stopPropagation(),je.Z.set(d,!0),i()},children:"dismiss"})})]})]})}))},Oe=r(47240);function _e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ce(e){return(0,ee.tZ)(Oe.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){_e(e,t,r[t])}))}return e}({},e,{children:(0,ee.tZ)("path",{d:"M3 5V19C3 20.66 7 22 12 22C17 22 21 20.66 21 19V5M3 5C3 6.65685 7.02944 8 12 8C16.9706 8 21 6.65685 21 5M3 5C3 3.34315 7.02944 2 12 2C16.9706 2 21 3.34315 21 5M21 12C21 13.66 17 15 12 15C7 15 3 13.66 3 12",strokeLinecap:"round",strokeLinejoin:"round"})}))}var Ae=r(66919),Ie=r(30617),Ne=r(40425),Te=r(43552);function Pe(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function Re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Le=function(e){var t=e.isVisible,r=e.children,n=e.onDismiss,a=e.tooltipProps,i=(0,we.Z)(),o=(0,Ie.Z)().fs,l=(0,Te.Z)("workspace","enveditorintro"),c=l.shouldDisplay,s=l.register,u=l.dismiss;return ie.useEffect((function(){var e=!1,r=function(){var r,n=(r=J().mark((function r(){var n;return J().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.readFile(".env");case 2:if(n=r.sent,!e){r.next=5;break}return r.abrupt("return");case 5:if(!n.error){r.next=7;break}return r.abrupt("return");case 7:t&&s();case 8:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,a){var i=r.apply(e,t);function o(e){Pe(i,n,a,o,l,"next",e)}function l(e){Pe(i,n,a,o,l,"throw",e)}o(void 0)}))});return function(){return n.apply(this,arguments)}}();return r(),function(){e=!0}}),[i,o,t,s]),(0,ee.tZ)("div",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Re(e,t,r[t])}))}return e}({css:[Ze.l0.display.flex,Ze.l0.width("100%"),Ze.l0.height("100%"),Ze.l0.center]},c?{}:a,{children:(0,ee.BX)(xe.Z,{isOpen:c,placement:"right",showArrow:!0,children:[r,(0,ee.BX)(ye.gC,{spacing:1,align:"stretch",children:[(0,ee.tZ)(Ne.Z,{level:4,children:"Looking for your .env file?"}),(0,ee.tZ)(ge.Z,{size:"small",children:"Your environment moved here, click on the icon to the left to check it out and edit your environment."}),(0,ee.tZ)(ye.Ug,{justify:"end",children:(0,ee.tZ)(ve.Z,{color:"primary",onClick:function(e){e.stopPropagation(),u(),n()},children:"dismiss"})})]})]})}))},De=r(18864);function Ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ze(e){return(0,ee.tZ)(Oe.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ue(e,t,r[t])}))}return e}({},e,{children:(0,ee.tZ)("path",{d:"M22.0005 12.4999V8.50012H20.001V6.49987H18V5.50012H20.001V2.50012H17.001V4.49962H15V6.49987H9V4.49962H7.0005V2.50012H4.0005V5.50012H6V6.49987H4.0005V8.50012H2.001V12.4999H0V19.4996H3V15.4999H4.0005V19.4996H6V21.4999H11.001V18.4999H7.0005V17.5001H17.001V18.4999H13.0005V21.4999H18V19.4996H20.001V15.4999H21V19.4996H24V12.4999H22.0005ZM9 11.5001H6V8.50012H9V11.5001ZM18 11.5001H15V8.50012H18V11.5001Z",fill:"currentColor",stroke:"none"})}))}var Be=r(10751),Me=r(67680);function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Fe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ge(e){var t=e.children,r=e.isVisible,n=e.onDismiss,a=e.tooltipProps,i=(0,Te.Z)("announcement","youtube-in-the-ws"),o=i.shouldDisplay,l=i.register,c=i.dismiss,s=Ve(ie.useState(!1),2),u=s[0],d=s[1];ie.useEffect((function(){l()}),[l]);var f=o&&r;return(0,ee.BX)("div",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Xe(e,t,r[t])}))}return e}({},a,{className:"jsx-28fa777e1a74a6d1 "+(a&&null!=a.className&&a.className||"wrapper"),children:[(0,ee.BX)(xe.Z,{onClickOutside:function(){return n()},placement:"right",isOpen:f,showArrow:!0,borderColor:"var(--accent-negative-default)",children:[t,(0,ee.tZ)("div",{className:"jsx-28fa777e1a74a6d1 youtube-popover",children:(0,ee.BX)(ye.gC,{spacing:2,align:"stretch",children:[(0,ee.BX)(ye.Ug,{spacing:1,children:[(0,ee.tZ)(Me.Z,{color:"var(--accent-negative-default)"}),(0,ee.tZ)(Ne.Z,{level:5,children:"Code with YouTube tutorials"})]}),(0,ee.tZ)(ge.Z,{children:"Choose from a list of recommended tutorials to code along to"}),(0,ee.tZ)(ye.Ug,{spacing:1,justify:"end",children:(0,ee.tZ)(ve.Z,{loading:u,onClick:function(){d(!0),n(),c()},children:"Got it"})})]})})]}),(0,ee.tZ)(re(),{id:"28fa777e1a74a6d1",children:".wrapper.jsx-28fa777e1a74a6d1{width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center}.youtube-popover.jsx-28fa777e1a74a6d1{border:1px solid var(--accent-negative-default);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);background:var(--background-root);padding:var(--space-16);max-width:300px;position:relative;pointer-events:auto}"})]}))}function He(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function We(e){return(0,ee.tZ)(Oe.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){He(e,t,r[t])}))}return e}({},e,{children:(0,ee.tZ)("path",{d:"M16 6C16 7.65685 17.3431 9 19 9C20.6569 9 22 7.65685 22 6C22 4.34315 20.6569 3 19 3C17.3431 3 16 4.34315 16 6ZM16 6L12 6C10.8954 6 10 6.89543 10 8L10 16C10 17.1046 10.8954 18 12 18L16 18M16 18C16 19.6569 17.3431 21 19 21C20.6569 21 22 19.6569 22 18C22 16.3431 20.6569 15 19 15C17.3431 15 16 16.3431 16 18ZM2 12L10 12",strokeLinecap:"round",strokeLinejoin:"round"})}))}var Ke=r(57731),qe=r(81970),Ye=r(8286),$e=r(94157),Qe=r(44262);function Je(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Je(e,t,r[t])}))}return e}function tt(e){var t,r=e.lang,n=e.lite,a=e.outputonly,i=e.sharing,o=e.isMobile,l=e.preferences,c=e.isServer,s=e.isVnc,u=e.inspector,d=e.gitRemoteUrl,f=e.showShareToTalkPromo,p=e.shouldShowMPInviteTour,b=e.isWindowingEnabled,m=e.hasAudioContext,h=e.preventFocusOnTerminal,v=e.isCluiCurlEnabled,g=e.shouldLoadAdminPanel,y=e.shouldShowEducationPane,x=e.shouldShowAutograderPane,w=e.shouldShowUnitTestPane,k=e.isLoggedIn,j=e.shouldLoadYoutubePane,Z=e.shouldUseDevtoolsWebview,S=me().get(r),E="webview",O=!n;if("react_native"===S.key)return{language:r,layout:{floating:[],tiling:{type:"split",fixed:!0,leftSize:n?48:68,hideHandle:!0,stacked:!0,left:{type:"pane",pud:"header"},right:{type:"pane",pud:"output"}}},files:[],plugins:{header:{type:"header",title:"header",state:{lite:n,showShareToTalkPromo:f,shouldShowMPInviteTour:p}},output:{type:"snack",title:"console"},infoprovider:{type:"infoprovider",title:"infoprovider"}},preferences:l,activeFile:void 0};var _={fileviewercontroller:{type:"fileviewercontroller"},analytics:{type:"analytics"},replupdater:{type:"replupdater"},replforker:{type:"replforker"},packager:{type:"packager",title:"packages",isClosable:b,isDraggable:b},header:{type:"header",title:"header",state:{lite:n,showShareToTalkPromo:f,shouldShowMPInviteTour:p}},fileheader:{type:"fileheader",title:"fileheader"},infoprovider:{type:"infoprovider",title:"infoprovider"},markdownviewer:{type:"markdownviewer",title:"markdown"},instructionsviewer2:{type:"instructionsviewer2",title:"instructions"},hackerupgradeprompt:{type:"hackerupgradeprompt"},browsernotifications:{type:"browsernotifications"},services:{type:"services"},commandbar:{type:"commandbar"},fsreduxbridge:{type:"fsreduxbridge"},codemirror:{type:"codemirror"},mediaview:{type:"mediaview"},pedit:{type:"pedit"},draw:{type:"draw"},blank:{type:"blank"}};a&&(delete _.fileviewercontroller,delete _.commandbar),m&&(_=et({},_,{audio:{type:"audio"}})),O&&(_=et({},_,{annotations:{type:"annotations"}})),v&&(_=et({},_,{cluicurl:{type:"cluicurl",title:"HTTP"}})),u&&(_=et({},_,{inspector:{type:"inspector",title:"inspector"}})),g&&(_=et({},_,{adminpanel:{type:"adminpanel",title:"adminpanel"}}));var C,A=[];y&&(A.push({pud:"educationpane",pluginType:"educationpane",tooltip:"Teams for Education",icon:Qe.Z}),_.educationpane={type:"educationpane",title:"Education Pane",isClosable:b,isDraggable:b}),me().supportsGit(r)&&!i&&(A.push({pud:"git",pluginType:"git",tooltip:"Version control",icon:We}),_.git={type:"git",title:"git",isClosable:b,isDraggable:b,state:{gitRemoteUrl:d}}),me().supportsDAP(r)&&(A.push({pud:"debugpanel",pluginType:"debugpanel",tooltip:"Debugger",icon:Ke.Z}),_.debugpanel={type:"debugpanel",title:"debugpanel",isClosable:b,isDraggable:b}),_.config={type:"config",title:"config",isClosable:!0,isDraggable:!1},_.lock={type:"lock",title:"lock"},(me().supportsPackager3(r)||"html"===r||"html_beta"===r)&&A.push({pud:"packager",icon:Ae.Z,pluginType:"packager",tooltip:"Packages"}),i||"replbox"===S.engine||(_.enveditor={type:"enveditor",title:"enveditor"},A.push({pud:"enveditor",pluginType:"enveditor",tooltip:"Secrets (Environment variables)",icon:De.Z,iconWrapper:Le})),n||(_=et({},_,{prefs:{type:"preferences",title:"preferences",isClosable:b,isDraggable:b},help:{type:"help",title:"help",isClosable:b,isDraggable:b},floatingrun:{type:"floatingrun",title:"floatingrun",state:{maxWidthBreakpoint:he.j.mobileMax+100}}})),C=et({},C=me().usesTerminal2(r)?{type:"terminal2",title:"console",state:{kind:me().usesInterpreter(r)?"interp":"output",lite:n,preventFocus:h}}:{type:"goval"!==S.engine?"replboxconsole":"console",title:"console"},{isDraggable:b}),_=Z&&"html"===S.key?et({},_,Je({},E,{type:"webview",title:"output",isDraggable:b,state:{canBeClosed:!1}})):me().hasReplboxWebview(S.key)&&!me().hasReplboxUrlBar(S.key)?et({},_,{output:{type:"replboxdisplay2",title:"output"},console:{type:"replboxconsole",title:"console"}}):me().hasReplboxWebview(S.key)?et({},_,{output:{type:"replboxdisplay2",title:"output",state:{canBeClosed:!1}},console:{type:"replboxconsole",title:"console"}}):et({},_,{output:C}),!n&&k&&A.push({pud:"prefs",pluginType:"preferences",tooltip:"Settings",icon:qe.Z}),"replbox"!==S.engine&&(A.push({pud:"database",icon:Ce,pluginType:"database",tooltip:"Database"}),_.database={type:"database",title:"Database",isClosable:b,isDraggable:b}),x?(A.push({pud:"autograder",icon:Ye.Z,pluginType:"autograder",tooltip:"Tests",iconWrapper:Ee}),_.autograder={type:"autograder",title:"Autograder",isClosable:b,isDraggable:b}):w&&(A.push({pud:"unittests",icon:Ye.Z,pluginType:"unittests",tooltip:"Unit tests"}),_.unittests={type:"unittests",title:"unittests",isClosable:b,isDraggable:b});var I=me().supportsFiles(S.key)||"web_project"===S.key||"kaboom"===S.key||"html"===S.key,N="filetree";_=et({},_,Je({},N,{type:N,title:"filetree",isClosable:b,isDraggable:b,state:void 0})),j&&(_.youtube={type:"youtube",title:"Youtube",isClosable:b,isDraggable:b},_.youtubepreview={type:"youtubepreview",title:"Youtube Preview",isClosable:b,isDraggable:b},A.push({pud:"youtube",pluginType:"youtube",tooltip:"Youtube",icon:Be.Z,iconWrapper:Ge})),g&&A.push({pud:"adminpanel",pluginType:"adminpanel",tooltip:"Crosis Logs",svg:"Alien"}),I&&A.unshift({pud:N,pluginType:N,tooltip:"Files",icon:$e.Z}),"kaboom"===S.key&&(A.unshift({pud:"kaboombar",pluginType:"kaboombar",tooltip:"Kaboom",icon:ze}),_.kaboombar={type:"kaboombar",title:"kaboombar",isClosable:b,isDraggable:b});var T,P={type:"pane",pud:"blank"},R=[{type:"pane",pud:"output"},{type:"pane",pud:"shell"}];if("web_project"===S.key||"python_turtle"===S.key||"html"===S.key||"kaboom"===S.key||"basic"===S.key)if(Z&&"html"===S.key)T={type:"tabs",active:0,tabs:[{type:"pane",pud:E},{type:"pane",pud:"shell"}]};else if(o)T={type:"tabs",active:0,tabs:[{type:"pane",pud:"output"},{type:"pane",pud:"console"}]};else{T={type:"split",stacked:!l.isLayoutStacked,position:65,left:{type:"pane",pud:"output"},right:{type:"tabs",active:0,tabs:[{type:"pane",pud:"console"},{type:"pane",pud:"shell"}]}}}else if(c&&i){var L={type:"tabs",active:0,tabs:R};_=et({},_,Je({},E,{type:"webview",title:"webview",isDraggable:b,state:{canBeClosed:!0}})),T={type:"split",stacked:!(o||n||l.isLayoutStacked),fixed:!1,left:{type:"pane",pud:E},right:L}}else if(s){_=et({},_,Je({},t="vnc",{type:"vnc",title:"vnc",state:{}}));var D={type:"tabs",active:0,tabs:R};T={type:"split",stacked:!(o||n||l.isLayoutStacked),fixed:!1,left:{type:"pane",pud:t},right:D}}else T={type:"tabs",active:0,tabs:R};var U,z,B=a?T:{type:"split",stacked:o||n||l.isLayoutStacked,fixed:!1,left:{type:"split",stacked:!0,leftSize:32,left:{type:"pane",pud:"fileheader"},right:P},right:T};(b&&(B=a?T:{type:"split",left:et({},P,{header:{type:"pane",pud:"fileheader",height:32}}),right:T}),!A.length||a)?U=B:(o||!I||n||(z="filetree"),"kaboom"===S.key&&(z="kaboombar"),y&&(z="educationpane"),_=et({},_,{sidenav:{type:"sidenav",title:"side navigation",state:{navItems:A,activePanePuds:z?[z]:[]}}}),U={type:"split",stacked:!1,leftSize:50,left:{type:"pane",pud:"sidenav"},right:z?{type:"split",stacked:!1,position:15,left:{type:"pane",pud:z},right:B}:B});var M={floating:n?[]:["floatingrun","help","hackerupgradeprompt","browsernotifications","commandbar"],tiling:{type:"split",leftSize:n?48:68,stacked:!0,left:{type:"pane",pud:"header"},right:u?{type:"split",left:U,right:{type:"pane",pud:"inspector"}}:U}};return M.floating.push("desktoplayout"),M.floating.push("analytics"),M.floating.push("fileviewercontroller"),M.floating.push("fsreduxbridge"),m&&!n&&M.floating.push("audio"),O&&M.floating.push("annotations"),_.bsoder={type:"bsoder",title:"bsoder"},_.desktoplayout={type:"desktoplayout"},_.shell={type:"shell",title:"shell"},_.loadingresolver={type:"loadingresolver",title:"loadingresolver"},_.goval={type:"goval",title:"goval",state:{isOwner:!i,lite:n}},_.deeplink={type:"deeplink"},M.floating.push("deeplink"),{language:r,layout:M,files:[],plugins:_,preferences:l,activeFile:void 0,editorPud:undefined,webviewPud:E,vncPud:t,sideNavItems:A}}var rt=r(78135),nt=r(48010),at=r(14844),it=r(98555),ot=r(37156),lt=r(44215),ct=r(689),st=r(40802),ut=r(54144),dt=r(36526),ft=r(77070),pt=r(23496),bt=r(85486);function mt(e){var t={};return e.lite&&(t.lite=e.lite),e.classroom_template&&(t.classroom_template=e.classroom_template),e.outputonly&&(t.outputonly=e.outputonly),e.fileName&&(t.fileName=e.fileName),e.debug&&(t.debug=e.debug),e.inspector&&(t.inspector=e.inspector),e.fallback&&(t.fallback=e.fallback),e.vcr&&(t.vcr=e.vcr),t}var ht=r(42723),vt=r(20657),gt=r(79175),yt=r(30103),xt=r(62873),wt=r(79635),kt=r(7411),jt=r(41664),Zt=r(49337),St=r(534),Et=r(54929);function Ot(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _t(e){var t=function(){e.canClick&&e.onClick&&e.onClick({username:e.username,id:e.id})};return(0,ee.tZ)(wt.ZP,{placement:"bottom",tooltip:"Observe ".concat(e.username),children:function(r,n){return(0,ee.tZ)(Et.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ot(e,t,r[t])}))}return e}({},r,{innerRef:n,onClick:t,children:(0,ee.tZ)(St.Z,{size:e.size||35,src:e.image,alt:"avatar for ".concat(e.username),css:[e.canClick&&Ze.l0.cursor.pointer,{transition:"all 0.2s ease",border:"2px solid "+e.color,"&:hover":{filter:"brightness(95%)",boxShadow:Ze.TV.shadow1}}]})}))}})}var Ct=r(94184),At=r.n(Ct),It=r(45193),Nt=r(66970);function Tt(){var e=(0,Ie.Z)(),t=e.session,r=e.presence;return ie.useCallback((function(e){var n=e.username,a=e.id,i=r.getFollowedUser();if((null===i||void 0===i?void 0:i.username)!==n){r.followUser(n);var o=r.getActiveFileForUser(a),l=t.getActiveFile();o&&o!==l&&t.openFile(o)}else r.unfollowUser()}),[t,r])}function Pt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Pt(e,t,r[t])}))}return e}function Lt(e){var t=e.hideModal,r=e.onUserClick,n=e.isOpen,a=(0,we.Z)(),i=(0,Ie.Z)().presence,o=(0,Zt.Z)({presence:i});return(0,ee.tZ)(It.Z,{isOpen:n,onRequestClose:t,children:(0,ee.tZ)(Ut,{replId:a,onUserClick:r,activeUsers:o,hideModal:t})})}function Dt(e,t){return t.some((function(t){return t.id===e}))}function Ut(e){var t=e.replId,r=e.activeUsers,n=e.onUserClick,a=e.hideModal,i=(0,ke.Flq)({variables:{replId:t}}),o=i.data,l=i.loading,c=i.error;if(l)return(0,ee.BX)("div",{className:"jsx-4b996b631177bcde user-list-loader",children:[(0,ee.tZ)(Nt.Z,{style:{width:"50px"}}),(0,ee.tZ)(re(),{id:"4b996b631177bcde",children:".user-list-loader.jsx-4b996b631177bcde{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center;min-height:200px}"})]});if(c)return(0,ee.tZ)("div",{children:c.message});if("Repl"===(null===o||void 0===o?void 0:o.repl.__typename)){var s=o.repl,u=o.currentUser,d=s.user,f=d&&r.find((function(e){return e.username===d.username})),p=s.permissions.filter((function(e){var t=e.user;return t&&Dt(t.id,r)})),b=s.permissions.filter((function(e){var t=e.user;return t&&!Dt(t.id,r)}));return(0,ee.BX)("div",{className:"jsx-1623363111be709d user-list-modal",children:[(0,ee.tZ)(Ne.Z,{level:2,children:"Multiplayers"}),(0,ee.tZ)(Ne.Z,{level:5,children:"Users can interact with this repl in real time."}),(0,ee.tZ)("div",{className:"jsx-1623363111be709d user-list",children:(0,ee.BX)("div",{className:"jsx-1623363111be709d",children:[d?(0,ee.tZ)(Bt,Rt({},d,{onClick:n,isOnline:Boolean(f),color:f?f.color:"transparent",isOwner:!0,hideModal:a,canClickAvatar:Boolean(f)&&d.id!==(null===u||void 0===u?void 0:u.id),type:ke.aQH.Rw})):null,p.map((function(e){var t=e.type,i=e.user;if(!i)throw new Error("Expected user");var o=r.find((function(e){return e.username===i.username}));if(!o)throw new Error("Expected user online");var l=i.id!==(null===u||void 0===u?void 0:u.id);return(0,ee.tZ)(Bt,Rt({onClick:n,type:t},i,{isOnline:!0,canClickAvatar:l,color:o.color,hideModal:a,isOwner:!1}),"chat-user-list-".concat(i.username))})),b.map((function(e){var t=e.type,r=e.user;if(!r)throw new Error("Expected user");return(0,ee.tZ)(Bt,Rt({onClick:n,type:t},r,{canClickAvatar:!1,isOnline:!1,color:"transparent",hideModal:a,isOwner:!1}),"chat-user-list-".concat(r.username))}))]})}),(0,ee.tZ)(re(),{id:"1623363111be709d",children:".user-list-modal.jsx-1623363111be709d{color:var(--foreground-default);padding:var(--space-32);display:grid;grid-template-rows:auto auto 1fr;grid-gap:var(--space-16)}.user-list.jsx-1623363111be709d{max-height:330px;overflow-y:auto}"})]})}return"ReplRedirect"===(null===o||void 0===o?void 0:o.repl.__typename)?(0,ee.BX)("div",{children:["This repl has moved to"," ",(0,ee.tZ)("a",{href:o.repl.replUrl,children:o.repl.replUrl})]}):"SubscriptionExpiredError"===(null===o||void 0===o?void 0:o.repl.__typename)?(0,ee.BX)("div",{children:["Your subscription has expired.",(0,ee.tZ)("a",{href:"/pricing",children:"Upgrade here"})]}):null}var zt={r:"read only",rw:"can edit"};function Bt(e){var t=e.type,r=e.id,n=e.username,a=e.image,i=e.isOnline,o=e.isOwner,l=e.color,c=e.onClick,s=e.hideModal,u=e.canClickAvatar,d=Tt();return(0,ee.BX)("div",{className:re().dynamic([["81a9a688c6047602",[u?"pointer":"auto",l]]])+" "+(At()("user-list-item-wrapper",{online:i})||""),children:[(0,ee.tZ)("div",{onClick:function(){u&&(d({username:n,id:r}),s())},className:re().dynamic([["81a9a688c6047602",[u?"pointer":"auto",l]]])+" image",children:(0,ee.tZ)("img",{src:a,className:re().dynamic([["81a9a688c6047602",[u?"pointer":"auto",l]]])+" "+((i?"":"offline")||"")})}),(0,ee.BX)("div",{className:re().dynamic([["81a9a688c6047602",[u?"pointer":"auto",l]]])+" info",children:[(0,ee.BX)("div",{className:re().dynamic([["81a9a688c6047602",[u?"pointer":"auto",l]]]),children:[(0,ee.BX)("a",{href:"/@".concat(n),target:"_blank",onClick:c,className:re().dynamic([["81a9a688c6047602",[u?"pointer":"auto",l]]]),children:["@",n]}),!i&&" (offline)"]}),(0,ee.tZ)("div",{className:re().dynamic([["81a9a688c6047602",[u?"pointer":"auto",l]]]),children:o?"owner":zt[t]})]}),(0,ee.tZ)(re(),{id:"81a9a688c6047602",dynamic:[u?"pointer":"auto",l],children:".user-list-item-wrapper.__jsx-style-dynamic-selector{padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-order:1;-ms-flex-order:1;order:1}.image.__jsx-style-dynamic-selector{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;cursor:".concat(u?"pointer":"auto","}img.__jsx-style-dynamic-selector{width:40px;height:40px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;border:3px solid ").concat(l,";background:white;-o-object-fit:cover;object-fit:cover}.info.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-justify-content:center;justify-content:center;margin-left:var(--space-8)}img.offline.__jsx-style-dynamic-selector{-webkit-filter:grayscale(100%);filter:grayscale(100%)}.user-list-item-wrapper.online.__jsx-style-dynamic-selector{-webkit-order:0;-ms-flex-order:0;order:0}")})]})}function Mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Mt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xt(e){var t=Ft(ie.useState(!1),2),r=t[0],n=t[1],a=(0,we.Z)(),i=Tt(),o=(0,ke.qC4)({variables:{ids:e.users.map((function(e){return e.id}))},ssr:!1,skip:!e.users.length}),l=o.data,c=o.loading,s=o.error,u=e.users.reduce((function(e,t){return e[t.id]=t.color,e}),{});if(c)return null;if(s)return null;if(!(null===l||void 0===l?void 0:l.currentUser))return null;var d=l.usersByIds,f=l.currentUser,p=d.filter((function(e){return e.id!==f.id})),b=p.length-3;return(0,ee.BX)("div",{className:re().dynamic([["a53a4d6b8db5ce91",[he.j.mobileMax+100]]])+" multiplayer-users-container",children:[(0,ee.BX)(ye.Ug,{wrap:"nowrap",spacing:1,align:"center",children:[b>0?(0,ee.tZ)("div",{className:re().dynamic([["a53a4d6b8db5ce91",[he.j.mobileMax+100]]]),children:(0,ee.BX)(ve.Z,{filled:!1,border:!1,onClick:function(){return n(!0)},children:["+ ",b]})}):null,p.slice(0,3).map((function(e){return(0,ee.tZ)("div",{className:re().dynamic([["a53a4d6b8db5ce91",[he.j.mobileMax+100]]]),children:(0,ee.tZ)(_t,{id:e.id,username:e.username,image:e.image,color:u[e.id],onClick:i,canClick:!0})},e.id)})),(0,ee.tZ)(Lt,{isOpen:r,hideModal:function(){return n(!1)},onUserClick:function(){(0,ft.j)(ft.U3.MP2_VISITED_PROFILE,{replId:a,from:"OnlineUsers"})}})]}),(0,ee.tZ)(re(),{id:"a53a4d6b8db5ce91",dynamic:[he.j.mobileMax+100],children:".multiplayer-users-container.__jsx-style-dynamic-selector{padding:0 var(--space-8)}@media only screen and (max-width:".concat(he.j.mobileMax+100,"px){.multiplayer-users-container.__jsx-style-dynamic-selector{display:none}}")})]})}var Vt=r(41875),Gt=r(4590),Ht=r(74586),Wt=r(17161),Kt=r(29594),qt=r(38880),Yt=r(35060),$t=r(94590),Qt=r(12596),Jt=r(66754),er=r(48015),tr=r(88942),rr=r(90652);function nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ar(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ir(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ar(e,t,r[t])}))}return e}function or(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return nr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lr(e){var t=e.onSubmit,r=e.existingUsernames,n=e.isDisabled,a=e.onChange,i=e.placeholder,o=or(ie.useState(""),2),l=o[0],c=o[1],s=!!l.match(/.+@.+/),u=(0,rr.Z)(l.trim().replace(/^@/,""),250),d=(0,ke.skk)({skip:!u||s,variables:{query:u,limit:6}}),f=d.data,p=d.loading,b=d.error,m=(0,qt.Z)().showError;ie.useEffect((function(){b&&m(b.message)}),[b,m]);var h=null===f||void 0===f?void 0:f.usernameSearch;return(0,ee.BX)("form",{onSubmit:function(e){e.preventDefault(),t(l),c("")},className:"jsx-d408485a86637a91",children:[(0,ee.BX)("div",{className:"jsx-d408485a86637a91 form-content",children:[(0,ee.tZ)(tr.ZP,{onChange:function(e){e&&c(e.username)},itemToString:function(e){return(null===e||void 0===e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var n=e.getInputProps,o=e.getItemProps,s=e.getMenuProps,u=e.isOpen,d=e.highlightedIndex;return(0,ee.BX)("div",{className:"jsx-d408485a86637a91 dropdown",children:[(0,ee.tZ)(Qt.ZP,ir({},n({ref:null,value:l,onChange:function(e){c(e.currentTarget.value),null===a||void 0===a||a(e.currentTarget.value)},placeholder:null!==i&&void 0!==i?i:"Search by username or invite by email",autoComplete:"off",onKeyDown:function(e){"Enter"===e.key&&l.match(/.+@.+/)&&(t(l),c(""),e.currentTarget.blur())}}))),(0,ee.BX)("div",ir({},s(),{className:"jsx-d408485a86637a91",children:[u&&h&&h.length?(0,ee.tZ)("div",{className:"jsx-d408485a86637a91 dropdown-menu",children:h.map((function(e,t){return(0,ee.tZ)("div",ir({},o({item:e,index:t}),{className:"jsx-d408485a86637a91 "+(At()("result",{"is-active":d===t})||""),children:(0,ee.BX)(ye.Ug,{align:"center",spacing:1,children:[(0,ee.tZ)(Kt.Z,{size:"s",url:e.image}),(0,ee.tZ)("div",{className:"jsx-d408485a86637a91",children:e.username}),r.includes(e.username)?(0,ee.tZ)("div",{className:"jsx-d408485a86637a91 check-icon",children:(0,ee.tZ)(Ye.Z,{})}):null]})}),e.username)}))}):null,u&&p?(0,ee.tZ)("div",{className:"jsx-d408485a86637a91 dropdown-menu is-loading",children:"loading..."}):null,u&&h&&0===h.length?(0,ee.BX)("div",{className:"jsx-d408485a86637a91 dropdown-menu is-empty",children:['no results found for "',l,'"']}):null]}))]})}}),(0,ee.tZ)("div",{className:"jsx-d408485a86637a91",children:(0,ee.tZ)(ve.Z,{color:"primary",type:"submit",filled:!0,disabled:n||!l,children:"Invite"})})]}),(0,ee.tZ)(re(),{id:"d408485a86637a91",children:".form-content.jsx-d408485a86637a91{display:grid;position:relative;width:100%;grid-template-columns:1fr auto;grid-column-gap:var(--space-8);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.dropdown.jsx-d408485a86637a91{position:relative;z-index:5}.dropdown-menu.jsx-d408485a86637a91{position:absolute;z-index:1;top:100%;left:0;width:100%;background-color:var(--background-default);border:1px solid var(--foreground-dimmest);border-top:0 none;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);max-height:300px;overflow:auto}.dropdown-menu.is-loading.jsx-d408485a86637a91,.dropdown-menu.is-empty.jsx-d408485a86637a91{color:var(--foreground-dimmer);padding:var(--space-8)}.dropdown.jsx-d408485a86637a91:focus-within .dropdown-menu.jsx-d408485a86637a91{border-color:var(--accent-primary-default)}.spacer.jsx-d408485a86637a91{width:var(--space-8);pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.result.jsx-d408485a86637a91{cursor:pointer;padding:var(--space-8)var(--space-16)}.result.jsx-d408485a86637a91:hover,.is-active.jsx-d408485a86637a91{background-color:var(--accent-primary-dimmer)}.check-icon.jsx-d408485a86637a91{margin-left:auto;color:var(--accent-positive-default)}"})]})}function cr(e){var t=e.value,r=e.onButtonPress,n=e.statusText,a=void 0===n?"":n,i=e.image,o=e.filterValue,l=e.type,c=e.Icon;return(0,ee.BX)("div",{className:"jsx-a16e88ad40d0e05c "+(At()("multiplayer-item",{"is-editable":!!r})||""),children:[(0,ee.BX)(ye.Ug,{align:"center",spacing:1,children:[(0,ee.tZ)(Kt.Z,{size:"s",url:null!==i&&void 0!==i?i:""}),(0,ee.tZ)("div",{className:"jsx-a16e88ad40d0e05c label",children:o?(0,ee.tZ)(Jt.gr,{source:t,match:o}):"".concat(t," ").concat(a)}),!!r&&(0,ee.tZ)(ve.Z,{className:"remove-button",border:!1,filled:!1,"aria-label":"Remove ".concat(l||"email invite"),role:"tooltip","data-microtip-position":"left",onClick:r,children:c&&(0,ee.tZ)(c,{size:12,className:"jsx-a16e88ad40d0e05c"})})]}),(0,ee.tZ)(re(),{id:"a16e88ad40d0e05c",children:".multiplayer-item.jsx-a16e88ad40d0e05c{padding:var(--space-4)var(--space-16)}.multiplayer-item.is-editable.jsx-a16e88ad40d0e05c{padding-right:var(--space-8)}.multiplayer-item.is-editable.jsx-a16e88ad40d0e05c:hover{background-color:var(--background-root)}.label.jsx-a16e88ad40d0e05c{margin-right:auto}"})]})}var sr=r(17632);function ur(e){var t=e.email,r=e.onInvite,n=e.onCancel;return(0,ee.BX)("div",{className:"jsx-1a6ae4ac10e8f1fa root",children:[(0,ee.tZ)(Ne.Z,{level:3,align:"center",children:"Are you sure?"}),(0,ee.BX)(ge.Z,{align:"center",children:[(0,ee.tZ)("p",{className:"jsx-1a6ae4ac10e8f1fa message",children:"Adding an external user as a guest to this repl will give the user read and write access. Please confirm the below email address before inviting the user as a guest."}),(0,ee.tZ)("p",{className:"jsx-1a6ae4ac10e8f1fa email",children:t})]}),(0,ee.BX)("div",{className:"jsx-1a6ae4ac10e8f1fa controls",children:[(0,ee.tZ)(ve.Z,{onClick:n,children:"Cancel"}),(0,ee.tZ)(ve.Z,{filled:!0,color:"primary",onClick:r,children:"Invite"})]}),(0,ee.tZ)(re(),{id:"1a6ae4ac10e8f1fa",children:".root.jsx-1a6ae4ac10e8f1fa{color:var(--foreground-default);padding:var(--space-24);display:grid;grid-gap:var(--space-24)}.controls.jsx-1a6ae4ac10e8f1fa{display:grid;grid-gap:var(--space-8);grid-auto-flow:column}.message.jsx-1a6ae4ac10e8f1fa{padding-bottom:var(--space-16)}"})]})}var dr=r(76543),fr=r(64711);function pr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function br(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||hr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mr(e){return function(e){if(Array.isArray(e))return pr(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||hr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hr(e,t){if(e){if("string"===typeof e)return pr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pr(e,t):void 0}}function vr(e){var t,r=e.replId,n=(0,ke.JT6)({variables:{replId:r}}),a=n.data,i=n.loading,o=(0,rt.v9)((function(e){return e.user.userInfo.isLoggedIn?e.user.userInfo.id:null})),l=(0,qt.Z)(),c=l.showConfirm,s=l.showError,u=br(ie.useState(""),2),d=u[0],f=u[1],p=br((0,ke.fSO)({onError:function(e){return s(e.message)},onCompleted:function(e){var t=e.addMultiplayerUser.user;(0,ft.j)(ft.U3.MULTIPLAYER_INVITED,{replId:r,inviteMethod:"username"});var n=t?"@".concat(t.username):"Member";c("".concat(n," added"))}}),2),b=p[0],m=p[1],h=br((0,ke.QIy)({onError:function(e){return s(e.message)},onCompleted:function(e){var t=e.removeMultiplayerUser.user,r=t?"@".concat(t.username):"Member";c("".concat(r," removed"))}}),2),v=h[0],g=h[1],y="Repl"===(null===a||void 0===a?void 0:a.repl.__typename)?a.repl:null,x=br((0,ke.SvR)({onError:function(e){s(e.message)},update:function(e,t){var n,a=null===(n=t.data)||void 0===n?void 0:n.createMultiplayerInvite2;if(a)if("UserError"!==a.__typename){if("MultiplayerInvite"===a.__typename){var i=a.email;return(0,ft.j)(ft.U3.MULTIPLAYER_INVITED,{replId:r,inviteMethod:"email"}),void c("Invited ".concat(i," via email"))}if("ReplPermission"===a.__typename){e.modify({id:e.identify({__typename:"Repl",id:r}),fields:{permissions:function(t){var r=e.writeFragment({data:a,fragment:ke.L13});return mr(t).concat([r])}}});var o=a.user;(0,ft.j)(ft.U3.MULTIPLAYER_INVITED,{replId:r,inviteMethod:"email"});var l=o?"@".concat(o.username):"Member";c("".concat(l," added"))}}else s(a.message)}}),2),w=x[0],k=x[1],j=br((0,ke.Ejz)({onError:function(e){return s(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var t=e.deleteMultiplayerInvite.email;(0,ft.j)(ft.U3.MP2_REMOVED_EMAIL_INVITE,{replId:r,email:t}),c("Invite for ".concat(t," deleted"))}}else s(e.deleteMultiplayerInvite.message)}}),2),Z=j[0],S=j[1];if(y&&!y.owner)throw new Error("Cannot manage members on anon repls");if((null===y||void 0===y?void 0:y.owner)&&"Team"!==(null===y||void 0===y?void 0:y.owner.__typename))throw new Error("Expect repl owned by a team");var E,O,_,C="Team"===(null===y||void 0===y||null===(t=y.owner)||void 0===t?void 0:t.__typename)?y.owner:null,A=null!==(E=null===y||void 0===y?void 0:y.permissions.reduce((function(e,t){return t.user?mr(e).concat([t.user.username]):e}),[]))&&void 0!==E?E:[],I=null===y||void 0===y?void 0:y.permissions.reduce((function(e,t){if(!t.user)return e;var r=t.user;return!d||er.Z.filter(d,[r.username]).length>0?((null===C||void 0===C?void 0:C.members.some((function(e){var t;return(null===(t=e.user)||void 0===t?void 0:t.id)===r.id})))||e.users.push(r),e):e}),{users:[]}),N=null===y||void 0===y?void 0:y.multiplayerInvites.filter((function(e){return!d||er.Z.filter(d,[e.email]).length>0})),T=null===C||void 0===C?void 0:C.members.reduce((function(e,t){if(!t.user)return e;var r=t.user;if(!(!d||er.Z.filter(d,[r.username]).length>0))return e;var n=t.permissions&&t.permissions!==ke.SV1.Member,a=null===y||void 0===y?void 0:y.permissions.find((function(e){var t;return e.user&&(null===(t=e.user)||void 0===t?void 0:t.id)===r.id}));return n?e.teamAdmins.push(r):(null===a||void 0===a?void 0:a.type)?e.withPermisison.push(r):e.withoutPermisison.push(r),e}),{teamAdmins:[],withPermisison:[],withoutPermisison:[]}),P=null===T||void 0===T?void 0:T.teamAdmins.some((function(e){return e.id===o})),R=(null!==(O=null===I||void 0===I?void 0:I.users.length)&&void 0!==O?O:0)+(null!==(_=null===N||void 0===N?void 0:N.length)&&void 0!==_?_:0),L=null===y||void 0===y?void 0:y.currentUserPermissions.editMultiplayers,D=null===y||void 0===y?void 0:y.currentUserPermissions.inviteGuests,U=Boolean(T&&!T.teamAdmins.length&&!T.withPermisison.length&&(!(null===I||void 0===I?void 0:I.users.length)&&!(null===N||void 0===N?void 0:N.length)&&D||!D&&!T.withoutPermisison.length)),z=br(ie.useState(null),2),B=z[0],M=z[1];return(0,ee.BX)("div",{className:re().dynamic([["dc878561b7535f01",[he.j.mobileMax]]])+" root",children:[(0,ee.BX)(ye.gC,{spacing:2,align:"stretch",children:[(0,ee.BX)(ye.Ug,{children:[(0,ee.BX)(Ne.Z,{level:5,foreground:i?3:1,children:[L?"Add or remove members from this repl":null,i?"Loading...":null]}),L&&D&&!i&&(0,ee.tZ)("div",{"aria-label":" Add team members or invite external guests via email or username","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip",className:re().dynamic([["dc878561b7535f01",[he.j.mobileMax]]])+" information-icon-container",children:(0,ee.tZ)(sr.Z,{})})]}),D?(0,ee.tZ)(lr,{existingUsernames:A,onSubmit:function(e){!!e.match(/.+@.+/)&&!k.loading?M(e):m.loading||b({variables:{username:e,replId:r,type:"rw"}}),f("")},placeholder:L?"Search for users or invite guests":"Filter users",isDisabled:i,onChange:function(e){return f(e)}}):(0,ee.tZ)(Qt.ZP,{disabled:i,value:d,onChange:function(e){return f(e.currentTarget.value)},placeholder:L?"Filter team members to add or remove":"Filter team members"}),(0,ee.tZ)(It.Z,{isOpen:!!B,onRequestClose:function(){return M(null)},children:B?(0,ee.tZ)(ur,{email:B,onInvite:function(){w({variables:{email:B,replId:r,type:"rw"}}),M(null)},onCancel:function(){return M(null)}}):null}),(0,ee.BX)("div",{className:re().dynamic([["dc878561b7535f01",[he.j.mobileMax]]])+" "+(At()("multiplayers-list",{"is-empty":U})||""),children:[(null===T||void 0===T?void 0:T.withPermisison.length)?(0,ee.tZ)("div",{className:re().dynamic([["dc878561b7535f01",[he.j.mobileMax]]])+" list-heading",children:(0,ee.BX)(ye.Ug,{align:"center",spacing:1,children:[(0,ee.tZ)(Ht.Z,{size:12}),(0,ee.BX)(ge.Z,{foreground:2,size:"small",children:[null===T||void 0===T?void 0:T.withPermisison.length," member",1===(null===T||void 0===T?void 0:T.withPermisison.length)?"":"s"," with access"]})]})}):null,null===T||void 0===T?void 0:T.withPermisison.map((function(e){return(0,ee.tZ)(cr,{value:e.username,image:e.image,statusText:"(can edit)",type:"member",onButtonPress:P?function(){g.loading||v({variables:{replId:r,username:e.username}})}:void 0,Icon:Yt.Z},e.id)})),!!R&&(0,ee.tZ)("div",{className:re().dynamic([["dc878561b7535f01",[he.j.mobileMax]]])+" list-heading",children:(0,ee.BX)(ye.Ug,{align:"center",spacing:1,children:[(0,ee.tZ)(Ht.Z,{size:12}),(0,ee.BX)(ge.Z,{foreground:2,size:"small",children:[(0,fr.Z)("guest",R,!0),"with access"]})]})}),null===I||void 0===I?void 0:I.users.map((function(e){return(0,ee.tZ)(cr,{value:e.username,image:e.image,statusText:"(can edit)",type:"guest",onButtonPress:P?function(){g.loading||v({variables:{replId:r,username:e.username}})}:void 0,Icon:Yt.Z},e.id)})),null===N||void 0===N?void 0:N.map((function(e){return(0,ee.tZ)(cr,{value:e.email,statusText:"(pending)",onButtonPress:P?function(){S.loading||Z({variables:{replId:r,email:e.email}})}:void 0,Icon:Yt.Z},e.email)})),!D&&(null===T||void 0===T?void 0:T.withoutPermisison.length)?(0,ee.tZ)("div",{className:re().dynamic([["dc878561b7535f01",[he.j.mobileMax]]])+" list-heading",children:(0,ee.BX)(ye.Ug,{align:"center",spacing:1,children:[(0,ee.tZ)(Wt.Z,{size:12}),(0,ee.BX)(ge.Z,{foreground:2,size:"small",children:[(0,fr.Z)("member",null===T||void 0===T?void 0:T.withoutPermisison.length,!0),"without access"]})]})}):null,!D&&(null===T||void 0===T?void 0:T.withoutPermisison.map((function(e){return(0,ee.tZ)(cr,{value:e.username,image:e.image,type:"member",onButtonPress:L?function(){m.loading||b({variables:{replId:r,username:e.username,type:"rw"}})}:void 0,Icon:$t.Z},e.id)}))),(null===T||void 0===T?void 0:T.teamAdmins.length)?(0,ee.tZ)("div",{className:re().dynamic([["dc878561b7535f01",[he.j.mobileMax]]])+" list-heading",children:(0,ee.BX)(ye.Ug,{align:"center",spacing:1,children:[(0,ee.tZ)(De.Z,{size:12}),(0,ee.tZ)(ge.Z,{foreground:2,size:"small",children:"Team admins cannot be removed from repls"})]})}):null,null===T||void 0===T?void 0:T.teamAdmins.map((function(e){return(0,ee.tZ)("div",{className:re().dynamic([["dc878561b7535f01",[he.j.mobileMax]]])+" "+(At()("multiplayer-item",{"is-editable":L})||""),children:(0,ee.BX)(ye.Ug,{align:"center",spacing:1,children:[(0,ee.tZ)(Kt.Z,{size:"s",url:e.image}),(0,ee.tZ)("div",{className:re().dynamic([["dc878561b7535f01",[he.j.mobileMax]]])+" label",children:d?(0,ee.tZ)(Jt.gr,{source:e.username,match:d}):e.username})]})},e.id)})),U?(0,ee.BX)(ge.Z,{foreground:2,align:"center",children:['No members matching "',d,'" found']}):null]}),L||i?null:(0,ee.tZ)(ge.Z,{foreground:2,size:"small",children:"Only admins can add and remove members to multiplayer"}),L&&D&&(0,ee.tZ)(dr.Z,{replId:r})]}),(0,ee.tZ)(re(),{id:"dc878561b7535f01",dynamic:[he.j.mobileMax],children:".root.__jsx-style-dynamic-selector{padding:var(--space-16);color:var(--foreground-default)}.multiplayers-list.__jsx-style-dynamic-selector{background-color:var(--background-root);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);height:300px;overflow-y:auto}.multiplayers-list.is-empty.__jsx-style-dynamic-selector{display:grid;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center;padding:var(--space-16);word-break:break-word}.multiplayer-item.__jsx-style-dynamic-selector{padding:var(--space-4)var(--space-16)}.multiplayer-item.is-editable.__jsx-style-dynamic-selector{padding-right:var(--space-8)}.multiplayer-item.is-editable.__jsx-style-dynamic-selector:hover{background-color:var(--background-root)}.list-heading.__jsx-style-dynamic-selector{padding:var(--space-16)var(--space-16)0}.label.__jsx-style-dynamic-selector{margin-right:auto}.information-icon-container.__jsx-style-dynamic-selector{margin-left:5px}@media screen and (min-width:".concat(he.j.mobileMax,"px){.root.__jsx-style-dynamic-selector{padding:var(--space-48)}}")})]})}var gr=r(7177),yr=r(76867);function xr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return xr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kr(e){var t,r=e.replId,n=e.onDone,a=e.isResubmit,i=e.lastUpdated,o=e.wid,l=(0,rt.I0)(),c=(0,Ie.Z)().iotester,s=(0,ke.CHr)({variables:{replId:r}}),u=c.lastRunAt.getTime()>i,d=(0,ke.xhi)({variables:{replId:r}}).data,f="Repl"===(null===d||void 0===d?void 0:d.repl.__typename)?d.repl:null,p=(null===f||void 0===f?void 0:f.template)||null,b=(null===p||void 0===p?void 0:p.dueDate)||null,m=(new Date).toISOString(),h=(0,qt.Z)(),v=h.showConfirm,g=h.showError,y=wr((0,ke.xAQ)({variables:{replId:r},onCompleted:function(e){var t=e.submitRepl;"UserError"!==t.__typename?"Repl"===t.__typename&&(v("Repl submitted"),n()):g(t.message)},onError:function(e){g(e.message)}}),2),x=y[0],w=y[1],k=u&&c.lastRunDidPass;return"Repl"===(null===(t=s.data)||void 0===t?void 0:t.repl.__typename)&&s.data.repl.ioTests.length>0&&!k?(0,ee.BX)("div",{className:"jsx-d481fcd42a3ce012 root",children:[(0,ee.tZ)(Ne.Z,{level:3,align:"center",children:u?"Fix test failures before submitting":"Run tests before submitting"}),(0,ee.tZ)(ge.Z,{align:"center",children:u?"Input/Output tests did not pass.":"Input/Output tests have not been run since this repl was last changed."}),(0,ee.BX)("div",{className:"jsx-d481fcd42a3ce012 controls",children:[(0,ee.tZ)(ve.Z,{disabled:w.loading,filled:!0,color:"primary",onClick:function(){l({type:"OPEN_SIDEPANE_BY_TYPE",wid:o,paneType:"autograder"}),n()},children:"View tests"}),(0,ee.tZ)(ve.Z,{disabled:w.loading,onClick:function(){return x()},children:"Submit anyway"})]}),(0,ee.tZ)(re(),{id:"d481fcd42a3ce012",children:".root.jsx-d481fcd42a3ce012{color:var(--foreground-default);padding:var(--space-24);display:grid;grid-gap:var(--space-24)}.controls.jsx-d481fcd42a3ce012{display:grid;grid-gap:var(--space-8);grid-auto-flow:column}"})]}):(0,ee.BX)("div",{className:"jsx-5c7e8dd57bd4f49b root",children:[(0,ee.tZ)(Ne.Z,{level:3,align:"center",children:a?" Resubmit this repl":"Submit this repl"}),(0,ee.tZ)(ge.Z,{align:"center",children:a?"This will re-notify team admins about your submission.":"This will submit your repl for review and notify the team's admins."}),b&&b<m&&(0,ee.tZ)(ge.Z,{align:"center",children:(0,ee.tZ)("div",{className:"jsx-5c7e8dd57bd4f49b late",children:"Note: Your submission is past the due date and will be marked late."})}),(0,ee.BX)("div",{className:"jsx-5c7e8dd57bd4f49b controls",children:[(0,ee.tZ)(ve.Z,{disabled:w.loading,onClick:n,children:"Cancel"}),(0,ee.tZ)(ve.Z,{filled:!0,color:"primary",disabled:w.loading,onClick:function(){return x()},children:a?"Submit again":"Submit"})]}),(0,ee.tZ)(re(),{id:"5c7e8dd57bd4f49b",children:".root.jsx-5c7e8dd57bd4f49b{color:var(--foreground-default);padding:var(--space-24);display:grid;grid-gap:var(--space-24)}.controls.jsx-5c7e8dd57bd4f49b{display:grid;grid-gap:var(--space-8);grid-auto-flow:column}.late.jsx-5c7e8dd57bd4f49b{color:var(--accent-negative-default)}"})]})}function jr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Zr="https://docs.replit.com/misc/annotations";function Sr(e){return(0,ee.BX)(It.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){jr(e,t,r[t])}))}return e}({},e,{children:[(0,ee.BX)("div",{className:"jsx-3b78244da897e245 container",children:[(0,ee.tZ)("h1",{className:"jsx-3b78244da897e245",children:"Introducing Annotations"}),(0,ee.tZ)("p",{className:"jsx-3b78244da897e245",children:"Annotations is a new feature that lets you leave detailed feedback on a student's code!"}),(0,ee.tZ)("div",{className:"jsx-3b78244da897e245 loom-video-container",children:(0,ee.tZ)("iframe",{src:"https://www.loom.com/embed/955fb177889c4838b9332224067d4be0?autoplay=1",frameBorder:"0",allowFullScreen:!0,webkitallowfullscreen:!0,mozallowfullscreen:!0,className:"jsx-3b78244da897e245 loom-video"})}),(0,ee.BX)("p",{className:"jsx-3b78244da897e245",children:["To learn more, check out the"," ",(0,ee.tZ)("a",{href:Zr,target:"_blank",className:"jsx-3b78244da897e245",children:"docs"})]}),(0,ee.BX)("div",{className:"jsx-3b78244da897e245 buttons",children:[(0,ee.tZ)("a",{href:Zr,target:"_blank",className:"jsx-3b78244da897e245",children:(0,ee.tZ)(ve.Z,{children:"Learn More"})}),(0,ee.tZ)(ve.Z,{color:"primary",onClick:e.onRequestClose,children:"Okay"})]})]}),(0,ee.tZ)(re(),{id:"3b78244da897e245",children:".container.jsx-3b78244da897e245{padding:var(--space-48);display:grid;grid-auto-flow:row;grid-row-gap:var(--space-16)}.container.jsx-3b78244da897e245 h1.jsx-3b78244da897e245{padding:var(--space-16)0;color:var(--foreground-default)}.container.jsx-3b78244da897e245 p.jsx-3b78244da897e245{color:var(--foreground-default)}.buttons.jsx-3b78244da897e245{display:grid;grid-auto-flow:column;-webkit-justify-content:end;justify-content:end;grid-column-gap:var(--space-8)}.buttons.jsx-3b78244da897e245 a.jsx-3b78244da897e245{text-decoration:none}.loom-video-container.jsx-3b78244da897e245{position:relative;padding-bottom:56.25%;height:0}.loom-video.jsx-3b78244da897e245{position:absolute;top:0;left:0;width:100%;height:100%}"})]}))}var Er=r(93577),Or=r(46846),_r=r(55982),Cr=r(37424),Ar=r(67938),Ir=r(92704),Nr=r(6529),Tr=r(71480);function Pr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Rr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Pr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Lr,Dr=function(e){var t,r,n,a,i,o,l,c,s,u=e.replId,d=e.onDone,f=(0,qt.Z)(),p=f.showConfirm,b=f.showError,m=(0,ke.fuF)({variables:{replId:u},onCompleted:function(e){var t,r,n=e.repl;"Repl"===n.__typename&&(null===(t=n.origin)||void 0===t||null===(r=t.template)||void 0===r?void 0:r.modelSolution)&&"ReplTemplateModelSolution"===n.origin.template.modelSolution.__typename&&(j(n.origin.template.modelSolution.visibleAfterSubmitting),E(n.origin.template.modelSolution.visibleAfterPassingTests),C(n.origin.template.modelSolution.visibleAfterDueDate))}}),h=m.data,v=m.loading,g=Rr((0,ke.GA6)({onError:function(e){return b(e)},onCompleted:function(){p("Updated solution"),d()}}),2),y=g[0],x=g[1],w=Rr(ie.useState(!1),2),k=w[0],j=w[1],Z=Rr(ie.useState(!1),2),S=Z[0],E=Z[1],O=Rr(ie.useState(!1),2),_=O[0],C=O[1],A=Rr(ie.useState(),2),I=A[0],N=A[1],T=(0,Cr.H)();if(ie.useEffect((function(){var e="Students can ";if(k||_||S){e+="view the solution after";var t=[];k&&t.push("submitting their project"),S&&t.push("passing all tests"),_&&t.push("the due date has passed");for(var r=0;r<t.length;r++)r>0&&(e+=",",r===t.length-1&&(e+=" and")),e+=" "+t[r];e+="."}else e+="never view the solution.";N(e)}),[k,S,_]),v)return(0,ee.tZ)(Et.Z,{css:[Ze.l0.center],children:(0,ee.tZ)(Nt.Z,{})});var P="Repl"===(null===h||void 0===h?void 0:h.repl.__typename)&&"Team"===(null===(t=h.repl.owner)||void 0===t?void 0:t.__typename)&&(null===(r=h.repl.owner)||void 0===r?void 0:r.id),R="Repl"===(null===h||void 0===h?void 0:h.repl.__typename)&&(null===(n=h.repl.origin)||void 0===n||null===(a=n.template)||void 0===a?void 0:a.modelSolution);if(!R)return null;var L=R.id,D="Repl"===(null===h||void 0===h?void 0:h.repl.__typename)&&((null===(i=h.repl.origin)||void 0===i?void 0:i.ioTests.length)||(null===(o=h.repl.origin)||void 0===o||null===(l=o.unitTests)||void 0===l?void 0:l.tests.length)),U="Repl"===(null===h||void 0===h?void 0:h.repl.__typename)&&(null===(c=h.repl.origin)||void 0===c||null===(s=c.template)||void 0===s?void 0:s.dueDate);return(0,ee.tZ)("form",{onSubmit:function(e){e.preventDefault(),P&&L&&y({variables:{input:{teamId:P,solutionId:L,visibleAfterSubmitting:k,visibleAfterPassingTests:S,visibleAfterDueDate:_}}})},children:(0,ee.BX)(Et.Z,{css:[Ze.l0.colWithGap(32),Ze.l0.p(24)],children:[(0,ee.tZ)(Ar.h,{level:2,variant:"headerDefault",children:"Update solution"}),(0,ee.BX)(Et.Z,{css:[Ze.l0.colWithGap(16)],children:[(0,ee.BX)(Et.Z,{css:[Ze.l0.rowWithGap(8)],children:[(0,ee.tZ)(Nr.Z,{id:T("availableAfterSubmitting"),checked:k,onChange:function(){return j(!k)}}),(0,ee.tZ)("label",{htmlFor:T("availableAfterSubmitting"),children:(0,ee.tZ)(Ar.x,{children:"Available after submitting"})})]}),(0,ee.BX)(Et.Z,{css:[Ze.l0.rowWithGap(8)],children:[(0,ee.tZ)(Nr.Z,{id:T("availableAfterPassingTests"),checked:S,onChange:function(){return E(!S)}}),(0,ee.tZ)("label",{htmlFor:T("availableAfterPassingTests"),children:(0,ee.BX)(Et.Z,{css:[Ze.l0.rowWithGap(4)],children:[(0,ee.tZ)(Ar.x,{children:"Available after passing tests"}),(0,ee.BX)(Ar.x,{children:["(",D?"".concat(D," ").concat((0,fr.Z)("test",D)," defined"):"no tests exist yet",")"]})]})})]}),(0,ee.BX)(Et.Z,{css:[Ze.l0.rowWithGap(8),{verticalAlign:"baseline"}],children:[(0,ee.tZ)(Nr.Z,{id:T("availableAfterDueDate"),checked:_,onChange:function(){return C(!_)}}),(0,ee.tZ)("label",{htmlFor:T("availableAfterDueDate"),children:(0,ee.BX)(Et.Z,{css:[Ze.l0.rowWithGap(4)],children:[(0,ee.tZ)(Ar.x,{children:"Available after due date"}),(0,ee.BX)(Ar.x,{css:{textDecoration:"italic"},children:["(",U?(0,Tr.p)(U):"no due date set yet",")"]})]})})]})]}),(0,ee.tZ)(Et.Z,{css:[k||S||_?Ze.l0.backgroundColor.accentPositiveDimmest:Ze.l0.backgroundColor.accentNegativeDimmest,Ze.l0.p(8),Ze.l0.borderRadius(8)],children:I}),(0,ee.tZ)(Et.Z,{css:{alignItems:"start"},children:(0,ee.tZ)(Ir.zx,{stretch:!1,colorway:"primary",text:"Save",disabled:x.loading})})]})})};function Ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Br(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ur(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ur(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Mr=(zr(Lr={},ke.Sy.PublishTemplate,"Publish project"),zr(Lr,ke.Sy.EditTemplate,"Edit project"),zr(Lr,ke.Sy.Submit,"Submit"),zr(Lr,ke.Sy.Resubmit,"Resubmit"),zr(Lr,ke.Sy.UpdateModelSolution,"Update solution"),Lr);function Fr(e){var t=e.cta,r=e.replId,n=e.isGroupProject,a=e.wid,i=e.pud,o=Br(ie.useState(null),2),l=o[0],c=o[1],s=function(){return c(null)},u=(0,Er.Z)(),d=(0,Ie.Z)().fs,f=Br(ie.useState(0),2),p=f[0],b=f[1];ie.useEffect((function(){if(u&&!(0,_r.T3)(u)&&!(0,_r.sL)(u))return d.watchOtFile(u,{onChange:function(e){e.changeSource===Or.Fl.Local&&b(Date.now())}})}),[u,d,b]);var m=Boolean(l&&[ke.Sy.PublishTemplate,ke.Sy.EditTemplate].includes(l));return ie.useEffect((function(){t===ke.Sy.ReviewSubmission&&(je.Z.get("annotations/educationModalDismissed")||(c(t),je.Z.set("annotations/educationModalDismissed",!0)))}),[t]),(0,ee.BX)(ee.HY,{children:[Mr[t]&&(0,ee.tZ)(ve.Z,{filled:!0,border:!1,onClick:function(){return c(t)},children:Mr[t]}),(0,ee.tZ)(It.Z,{isOpen:l===ke.Sy.Submit||l===ke.Sy.Resubmit,onRequestClose:s,children:(0,ee.tZ)(kr,{replId:r,onDone:s,isResubmit:l===ke.Sy.Resubmit,lastUpdated:p,wid:a,pud:i})}),(0,ee.tZ)(It.Z,{preventClose:!0,isOpen:m,onRequestClose:s,width:n?"large":"medium",children:(0,ee.tZ)(yr.Z,{replId:r,onDone:s})}),(0,ee.tZ)(gr.Z,{isOpen:l===ke.Sy.UpdateModelSolution,onRequestClose:s,maxWidth:600,children:(0,ee.tZ)(Dr,{replId:r,onDone:s})}),(0,ee.tZ)(Sr,{isOpen:l===ke.Sy.ReviewSubmission,onRequestClose:s})]})}var Xr=r(34996),Vr=r(29694),Gr=r(13476),Hr=r(85567),Wr=r(88503),Kr=r(27464);function qr(){var e=(0,Ie.Z)().session;return(0,ee.tZ)("div",{className:"button-wrapper",children:(0,ee.tZ)(Kr.Z,{size:28,onClick:function(){e.setIsCommandBarOpen(!0)},tooltipDelay:500,alt:"Search & run commands",tooltipPlacement:"bottom-end",children:(0,ee.tZ)(Wr.Z,{})})})}var Yr=r(53985);function $r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Qr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||en(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jr(e){return function(e){if(Array.isArray(e))return $r(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||en(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function en(e,t){if(e){if("string"===typeof e)return $r(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$r(e,t):void 0}}function tn(e){var t=e.replId,r=(0,ke.X6F)({variables:{replId:t},pollInterval:8e3}),n=r.data,a=r.loading,i=(0,qt.Z)(),o=i.showConfirm,l=i.showError,c=Qr(ie.useState(!1),2),s=c[0],u=c[1],d=Qr((0,ke.QNh)({onCompleted:function(e){var r,n=null===(r=e.addMultiplayerUser.user)||void 0===r?void 0:r.username;n&&((0,ft.j)(ft.U3.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"username"}),o("Added @".concat(n)))}}),2),f=d[0],p=d[1],b=Qr((0,ke.GkG)({onError:function(e){return l(e.message)},onCompleted:function(e){var r,n=null===(r=e.removeMultiplayerUser.user)||void 0===r?void 0:r.username;n&&((0,ft.j)(ft.U3.MP2_REMOVED_USER_PERMISSION,{replId:t,username:n}),o("".concat(n," removed")))}}),2),m=b[0],h=b[1],v=Qr((0,ke.SvR)({update:function(e,r){var n,a=null===(n=r.data)||void 0===n?void 0:n.createMultiplayerInvite2;if(a)if("UserError"!==a.__typename){if("MultiplayerInvite"===a.__typename){var i=a.email;return(0,ft.j)(ft.U3.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"email"}),void o("Invited ".concat(i," via email"))}if("ReplPermission"===a.__typename){var c;e.modify({id:e.identify({__typename:"Repl",id:t}),fields:{permissions:function(t){var r=e.writeFragment({data:a,fragment:ke.L13});return Jr(t).concat([r])}}});var s=null===(c=a.user)||void 0===c?void 0:c.username;if(!s)return;(0,ft.j)(ft.U3.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"email"}),o("Invited @".concat(s))}}else l(a.message)}}),2),g=v[0],y=v[1],x=Qr((0,ke.Ejz)({onError:function(e){return l(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var r=e.deleteMultiplayerInvite.email;(0,ft.j)(ft.U3.MP2_REMOVED_EMAIL_INVITE,{replId:t,email:r}),o("invite for ".concat(r," deleted"))}}else l(e.deleteMultiplayerInvite.message)}}),2),w=x[0],k=x[1];ie.useEffect((function(){var e=p.error||y.error;e&&(e.message.includes("reached the limit")?u(!0):l(e.message))}),[p.error,y.error,l]);var j="Repl"===(null===n||void 0===n?void 0:n.repl.__typename)?n.repl:null,Z=null===n||void 0===n?void 0:n.currentUser,S=null===j||void 0===j?void 0:j.permissions.reduce((function(e,t){return t.user?Jr(e).concat([t.user.username]):e}),[]),E=null===j||void 0===j?void 0:j.currentUserPermissions.editMultiplayers,O=Boolean(j&&!j.permissions.length&&!j.multiplayerInvites.length),_=(null===j||void 0===j?void 0:j.permissions)?j.permissions.length:null;return(0,ee.BX)("div",{className:"jsx-7043475ed4bd7433 root",children:[(0,ee.BX)(ye.gC,{spacing:2,align:"stretch",children:[E&&S&&j?(0,ee.tZ)("div",{className:"jsx-7043475ed4bd7433",children:(0,ee.tZ)(lr,{existingUsernames:S,onSubmit:function(e){!!!e.match(/.+@.+/)||y.loading?p.loading||f({variables:{username:e,replId:j.id,type:"rw"}}):g({variables:{email:e,replId:j.id,type:"rw"}})}})}):null,(0,ee.BX)("div",{className:"jsx-7043475ed4bd7433",children:[(0,ee.BX)(Ne.Z,{level:5,foreground:a?3:1,children:[null!==_&&(null===Z||void 0===Z?void 0:Z.isSubscribed)?"".concat((0,fr.Z)("multiplayer",_,!0)):null,null===_||(null===Z||void 0===Z?void 0:Z.isSubscribed)?null:"".concat(_,"/").concat(50," ").concat((0,fr.Z)("multiplayer",_)),a?"Loading...":null]}),!a&&!(null===Z||void 0===Z?void 0:Z.isSubscribed)&&(0,ee.BX)(ge.Z,{size:"small",tag:"div",foreground:2,children:["Due to COVID-19, we're temporarily increasing the free multiplayer limit."," ",(0,ee.tZ)("a",{onClick:function(){return u(!0)},"aria-label":"Click to upgrade for unlimited invites","data-microtip-position":"top",role:"tooltip",className:"jsx-7043475ed4bd7433 info-tooltip",children:(0,ee.tZ)(sr.Z,{})})]})]}),O?(0,ee.tZ)("div",{className:"jsx-7043475ed4bd7433 empty-list",children:(0,ee.BX)(ye.Ug,{align:"center",justify:"center",children:[(0,ee.tZ)("div",{className:"jsx-7043475ed4bd7433",children:"No one is here"}),(0,ee.tZ)("div",{className:"jsx-7043475ed4bd7433",children:(0,ee.tZ)("img",{src:"/public/images/rainy-computer.png",className:"jsx-7043475ed4bd7433"})})]})}):(0,ee.BX)("div",{className:"jsx-7043475ed4bd7433 multiplayers-list",children:[null===j||void 0===j?void 0:j.permissions.map((function(e){var r=e.user,n=e.type;return r?(0,ee.BX)("div",{className:"jsx-7043475ed4bd7433 "+(At()("multiplayer-item",{"is-editable":j.currentUserPermissions.editMultiplayers})||""),children:[(0,ee.tZ)(Kt.Z,{size:"s",url:r.image}),(0,ee.BX)("div",{className:"jsx-7043475ed4bd7433 label",children:[r.username," ",n===ke.aQH.Rw?" (can edit)":null]}),j.currentUserPermissions.editMultiplayers?(0,ee.tZ)(ve.Z,{border:!1,filled:!1,"aria-label":"Remove member",role:"tooltip","data-microtip-position":"left",onClick:function(){h.loading||m({variables:{replId:t,username:r.username}})},children:(0,ee.tZ)(Yt.Z,{size:12})}):null]},r.id):null})),null===j||void 0===j?void 0:j.multiplayerInvites.map((function(e){return(0,ee.BX)("div",{className:"jsx-7043475ed4bd7433 "+(At()("multiplayer-item",{"is-editable":E})||""),children:[(0,ee.tZ)(Kt.Z,{size:"s"}),(0,ee.BX)("div",{className:"jsx-7043475ed4bd7433 label",children:[e.email," (pending)"]}),E?(0,ee.tZ)(ve.Z,{border:!1,filled:!1,"aria-label":"Remove email invite",role:"tooltip","data-microtip-position":"left",onClick:function(){k.loading||w({variables:{replId:t,email:e.email}})},children:(0,ee.tZ)(Yt.Z,{size:12})}):null]},e.email)}))]})]}),(0,ee.tZ)(Yr.Z,{isOpen:s,onClose:function(){return u(!1)},trackingInfo:{context:"workspace-multiplayer-header"}}),(0,ee.tZ)(re(),{id:"7043475ed4bd7433",children:".root.jsx-7043475ed4bd7433{color:var(--foreground-default)}.multiplayers-list.jsx-7043475ed4bd7433,.empty-list.jsx-7043475ed4bd7433{background-color:var(--background-root);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);height:200px}.multiplayers-list.jsx-7043475ed4bd7433{overflow-y:auto;padding:var(--space-8)0}.multiplayer-item.jsx-7043475ed4bd7433{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:var(--space-4)var(--space-16);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.multiplayer-item.is-editable.jsx-7043475ed4bd7433{padding-right:var(--space-8)}.multiplayer-item.is-editable.jsx-7043475ed4bd7433:hover{background-color:var(--background-root)}.label.jsx-7043475ed4bd7433{margin-right:auto;padding-left:var(--space-8)}.info-tooltip.jsx-7043475ed4bd7433{display:inline-block}.info-tooltip.jsx-7043475ed4bd7433,.info-tooltip.jsx-7043475ed4bd7433:hover,.info-tooltip.jsx-7043475ed4bd7433:focus{color:var(--foreground-default);border:none;outline:none}.empty-list.jsx-7043475ed4bd7433 img.jsx-7043475ed4bd7433{display:block;height:200px;opacity:60%}"})]})}function rn(e){var t=e.replId;return(0,ee.BX)("div",{className:re().dynamic([["55263c1c9413c0cf",[he.j.mobileMax]]]),children:[(0,ee.BX)(ye.gC,{spacing:2,align:"stretch",children:[(0,ee.tZ)(Ne.Z,{level:4,children:"Invite"}),(0,ee.tZ)(tn,{replId:t}),(0,ee.tZ)(dr.Z,{replId:t})]}),(0,ee.tZ)(re(),{id:"55263c1c9413c0cf",dynamic:[he.j.mobileMax],children:"div.__jsx-style-dynamic-selector{padding:var(--space-16)}@media screen and (min-width:".concat(he.j.mobileMax,"px){div.__jsx-style-dynamic-selector{padding:var(--space-32)}}")})]})}function nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function an(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return nn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var on=function(e){var t=e.children,r=e.showPopover,n=(0,Te.Z)("announcement","add-guest-new-user"),a=n.shouldDisplay,i=n.register,o=n.dismiss,l=an(ie.useState(!1),2),c=l[0],s=l[1],u=an(ie.useState(!1),2),d=u[0],f=u[1];ie.useEffect((function(){r&&!d&&i()}),[d,i,r]);var p=a&&!d;return(0,ee.BX)(xe.Z,{onClickOutside:function(){return f(!0)},isOpen:p,showArrow:!0,borderColor:"var(--accent-purple-default)",children:[t,(0,ee.BX)(ye.gC,{spacing:2,align:"stretch",children:[(0,ee.BX)(ye.Ug,{spacing:1,children:[(0,ee.tZ)(Me.Z,{}),(0,ee.tZ)(Ne.Z,{level:5,children:"Invite guests to your repl!"})]}),(0,ee.BX)(ge.Z,{children:[" ","Add external guests to your repl for interviews and collaborative projects."," "]}),(0,ee.tZ)(ye.Ug,{spacing:1,justify:"end",children:(0,ee.tZ)(ve.Z,{loading:c,onClick:function(){s(!0),(0,ft.j)(ft.U3.ADD_GUEST_POPOVER_DISMISSED),o()},children:"Got it"})})]})]})},ln=r(21217);function cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return cn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function un(e){var t=e.replbox,r=sn(ie.useState(t.getRunState()),2),n=r[0],a=r[1];return ie.useEffect((function(){return t.onStateChanged(a)}),[t]),{runState:n,run:ie.useCallback(t.run,[t.run]),stopRun:ie.useCallback(t.stopRun,[t.stopRun])}}function dn(e){switch(e){case ln.A.OFFLINE:return"loading";case ln.A.IDLE:return"idle";case ln.A.RUNNING:return"running";case ln.A.STOPPING:return"stopping"}}var fn=r(31284),pn=r(66552),bn=r(26967),mn=r(44660);function hn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){vn(e,t,r[t])}))}return e}function yn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return hn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var xn=60;function wn(e){var t,r,n,a,i=e.wid,o=e.pud,l=(0,rt.I0)(),c=(0,ue.useRouter)(),s=(0,we.Z)(),u=(0,bn.e$)(mn.H.Run),d=(0,bn.e$)(mn.H.Share),f=ie.useRef(null),p=yn(ie.useState(null),2),b=p[0],m=p[1],h=yn(ie.useState(!1),2),v=h[0],g=h[1],y=yn(ie.useState(!1),2),x=y[0],w=y[1],k=ie.useRef(x&&(null===d||void 0===d?void 0:d.isActive));ie.useEffect((function(){k.current&&!(null===d||void 0===d?void 0:d.isActive)&&w(!1),k.current=x&&(null===d||void 0===d?void 0:d.isActive)}),[d,x]),ie.useEffect((function(){(null===d||void 0===d?void 0:d.isActive)&&(x&&b?null===d||void 0===d||d.delegateTooltip(b):d.delegateTooltip(f.current))}),[d,x,b]);var j=yn((0,kt.J)(i,o,"header"),1)[0],Z=j.runstate,S=j.loading,E=(0,Ie.Z)(),O=E.presence,_=E.replbox,C=E.debuggest,A=E.fs,I=(0,Zt.Z)({presence:O}),N=un({replbox:_}),T=ie.useCallback((function(){O.getFollowedUser()&&O.unfollowUser()}),[O]),P=(0,fn.Z)(C.mainClient),R=(0,fn.Z)(null===P||void 0===P?void 0:P.state),L=(0,ke.ggE)({variables:{id:s}}),D=L.data,U=L.refetch;if("Repl"!==(null===D||void 0===D?void 0:D.repl.__typename))return(0,ee.tZ)("header",{className:re().dynamic([["42d062511d347474",[xn]]]),children:(0,ee.tZ)(re(),{id:"42d062511d347474",dynamic:[xn],children:"header.__jsx-style-dynamic-selector{background-color:var(--background-default);height:".concat(xn,"px}")})},"loading-header");var z=D.currentUser,B=D.repl,M=null;M="html"===B.lang.id&&(null===z||void 0===z?void 0:z.hasFlagDevtoolsWebview)?(0,ee.tZ)(Gr.Z,{runState:v?"running":"idle",onClick:function(){g(!0),A.flush().then((function(){g(!1),l({type:"REFRESH_WEBVIEW",wid:i})}))}}):"replbox"===B.lang.engine?(0,ee.tZ)(Gr.Z,{runState:dn(N.runState),onClick:function(){T(),N.runState!==ln.A.RUNNING?N.runState===ln.A.IDLE&&((0,ft.j)(ft.U3.RUN_BUTTON_CLICKED,{context:"workspace"}),N.run(),(0,ft.j)(ft.U3.PROJECT_RAN,{wid:i,language:null===B||void 0===B?void 0:B.lang.id,replId:s,replTitle:null===B||void 0===B?void 0:B.title})):N.stopRun()}}):S?(0,ee.tZ)(Gr.Z,{runState:"loading",onClick:function(){return null}}):"stopping"===Z||P&&"stopping"===R?(0,ee.tZ)(Gr.Z,{runState:"stopping",onClick:function(){return null}}):P&&"terminated"!==R?(0,ee.tZ)(Gr.Z,{runState:"running",onClick:function(){T(),P.stop()}}):"running"===Z?(0,ee.tZ)(Gr.Z,{runState:"running",onClick:function(){T(),l({type:"STOP_EVAL",wid:i})}}):(0,ee.tZ)(Gr.Z,{runState:"idle",onClick:function(){(0,ft.j)(ft.U3.RUN_BUTTON_CLICKED,{context:"workspace"}),T(),l({type:"RUN_REPL",wid:i})}});var F="Team"===(null===(t=B.owner)||void 0===t?void 0:t.__typename),X=Boolean("Team"===(null===(r=B.owner)||void 0===r?void 0:r.__typename)&&(null===(n=B.owner.capabilities)||void 0===n?void 0:n.isEducationPlan)),V=B.workspaceCta&&[ke.Sy.Submit,ke.Sy.Resubmit,ke.Sy.UpdateModelSolution,ke.Sy.PublishTemplate,ke.Sy.EditTemplate,ke.Sy.ReviewSubmission].includes(B.workspaceCta)?B.workspaceCta:null,G=!X&&B.currentUserPermissions.editMultiplayers;return(0,ee.BX)("header",{className:re().dynamic([["c32b9b66d3f48759",[xn,he.j.tabletMax,yt.X,he.j.mobileMax+100,he.j.mobileMax]]]),children:[(0,ee.BX)(pn.Z,{background:"default",css:[Ze.l0.align.center,Ze.l0.flex.row,Ze.l0.height("100%")],children:[(0,ee.BX)("div",{className:re().dynamic([["c32b9b66d3f48759",[xn,he.j.tabletMax,yt.X,he.j.mobileMax+100,he.j.mobileMax]]])+" left",children:[(0,ee.tZ)(jt.default,{as:"/~",href:"/home",children:(0,ee.tZ)("a",{className:re().dynamic([["c32b9b66d3f48759",[xn,he.j.tabletMax,yt.X,he.j.mobileMax+100,he.j.mobileMax]]])+" logo-link",children:(0,ee.tZ)(xt.Z,{})})}),(0,ee.tZ)(Vt.Z,{repl:B,refetch:U,onUpdateRepl:function(e){var t=!!e.title&&e.title!==B.title;if(l({type:"REPL_UPDATED",wid:i,updates:e}),t){var r=mt(c.query);c.push({pathname:"/replEnvironment",query:gn({},c.query,{replUrl:B.url})},{pathname:B.url,query:r},{shallow:!0})}}}),(0,ee.tZ)(Vr.Z,{repl:B,canEdit:B.currentUserPermissions.containerAttach})]}),(0,ee.tZ)("div",{className:re().dynamic([["c32b9b66d3f48759",[xn,he.j.tabletMax,yt.X,he.j.mobileMax+100,he.j.mobileMax]]])+" center",children:(0,ee.tZ)("div",{"data-cy":"ws-run-btn",ref:null===u||void 0===u?void 0:u.delegateTooltip,onClick:function(){(null===u||void 0===u?void 0:u.isActive)&&u.next()},className:re().dynamic([["c32b9b66d3f48759",[xn,he.j.tabletMax,yt.X,he.j.mobileMax+100,he.j.mobileMax]]])+" run-button-container",children:(0,ee.tZ)(wt.ZP,{placement:"bottom",isDisabled:null===u||void 0===u?void 0:u.isActive,tooltip:(0,ee.tZ)(Hr.Z,{shortcut:{cmdOrCtrlKey:!0,key:"Enter"}}),children:function(e,t){return(0,ee.tZ)("div",gn({},e,{ref:t,className:re().dynamic([["c32b9b66d3f48759",[xn,he.j.tabletMax,yt.X,he.j.mobileMax+100,he.j.mobileMax]]])+" "+(e&&null!=e.className&&e.className||"run-button"),children:M}))}})})}),(0,ee.BX)("div",{className:re().dynamic([["c32b9b66d3f48759",[xn,he.j.tabletMax,yt.X,he.j.mobileMax+100,he.j.mobileMax]]])+" right",children:[I&&I.length>0?(0,ee.tZ)(Xt,{users:I}):null,(null===z||void 0===z?void 0:z.isExplorer)?(0,ee.tZ)("a",{href:"/account#roles",target:"_blank",className:re().dynamic([["c32b9b66d3f48759",[xn,he.j.tabletMax,yt.X,he.j.mobileMax+100,he.j.mobileMax]]])+" explorer-badge",children:(0,ee.tZ)(Kr.Z,{colorway:"negative",size:28,alt:"You are an explorer. You may see bugs or other surprising behavior!",tooltipPlacement:"bottom-end",tooltipDelay:500,children:(0,ee.tZ)(Xr.Z,{})})}):null,V?(0,ee.tZ)(Fr,{cta:V,replId:B.id,isGroupProject:!!(null===(a=B.template)||void 0===a?void 0:a.isGroupProject),wid:i,pud:o}):null,G?(0,ee.tZ)("div",{ref:f,className:re().dynamic([["c32b9b66d3f48759",[xn,he.j.tabletMax,yt.X,he.j.mobileMax+100,he.j.mobileMax]]]),children:(0,ee.tZ)(on,{showPopover:B.currentUserPermissions.inviteGuests,children:(0,ee.tZ)(Ir.ZP,{onClick:function(){(0,ft.j)(ft.U3.INVITE_MODAL_OPENED,{wid:i,language:B.lang.id,replId:B.id,source:"replEnvironment"}),w(!0)},iconLeft:(0,ee.tZ)(Gt.Z,{}),text:"Invite"})})}):null,(0,ee.tZ)(qr,{})]})]}),(0,ee.tZ)(It.Z,{isOpen:x,onRequestClose:function(){return w(!1)},children:(0,ee.tZ)("div",{ref:m,className:re().dynamic([["c32b9b66d3f48759",[xn,he.j.tabletMax,yt.X,he.j.mobileMax+100,he.j.mobileMax]]]),children:F?(0,ee.tZ)(vr,{replId:B.id}):(0,ee.tZ)(rn,{replId:B.id})})}),(0,ee.tZ)(re(),{id:"c32b9b66d3f48759",dynamic:[xn,he.j.tabletMax,yt.X,he.j.mobileMax+100,he.j.mobileMax],children:"header.__jsx-style-dynamic-selector{position:fixed;top:0px;left:0px;width:100%;height:".concat(xn,"px;background-color:var(--background-default);border-bottom:.5px solid var(--background-highest);--button-width:60px;--center-width:var(--button-width)}@media screen and (min-width:").concat(he.j.tabletMax,"px){header.__jsx-style-dynamic-selector{--button-width:100px}}.logo-link.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:var(--foreground-default);width:32px;height:32px}.left.__jsx-style-dynamic-selector,.right.__jsx-style-dynamic-selector{height:100%;padding:0 var(--space-8);display:grid;grid-auto-flow:column;grid-column-gap:var(--space-8);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.left.__jsx-style-dynamic-selector{padding-left:").concat(yt.X,"px;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start}.right.__jsx-style-dynamic-selector{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.center.__jsx-style-dynamic-selector{display:none;width:var(--center-width);position:absolute;top:0;left:50%;height:100%;-webkit-transform:translateX(-50%);-moz-transform:translateX(-50%);-ms-transform:translateX(-50%);-o-transform:translateX(-50%);transform:translateX(-50%);padding:var(--space-8)0}.run-button-container.__jsx-style-dynamic-selector{height:100%}.run-button.__jsx-style-dynamic-selector{height:100%}.center.__jsx-style-dynamic-selector>div,.left.__jsx-style-dynamic-selector>div{margin:0!important}.explorer-badge.__jsx-style-dynamic-selector{display:none}@media screen and (min-width:").concat(he.j.mobileMax+100,"px){.left.__jsx-style-dynamic-selector,.right.__jsx-style-dynamic-selector{width:50%;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto}.center.__jsx-style-dynamic-selector{display:block}.left.__jsx-style-dynamic-selector{padding-right:-webkit-calc(var(--center-width)/2 + var(--space-8));padding-right:-moz-calc(var(--center-width)/2 + var(--space-8));padding-right:calc(var(--center-width)/2 + var(--space-8))}.right.__jsx-style-dynamic-selector{padding-left:-webkit-calc(var(--center-width)/2 + var(--space-8));padding-left:-moz-calc(var(--center-width)/2 + var(--space-8));padding-left:calc(var(--center-width)/2 + var(--space-8))}}@media screen and (min-width:").concat(he.j.mobileMax,"px){.explorer-badge.__jsx-style-dynamic-selector{display:unset;color:var(--foreground-default);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);background-color:var(--accent-negative-dimmest);height:28px}}")})]})}function kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){jn(e,t,r[t])}))}return e}function Sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return kn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function En(e){var t=e.wid,r=e.pud,n=e.style,a=(0,rt.I0)(),i=(0,we.Z)(),o=(0,ue.useRouter)(),l=Sn((0,kt.J)(t,r,"header"),1)[0],c=l.runstate,s=l.loading,u=(0,ke.f7Y)({variables:{id:i}}).data,d=un({replbox:(0,Ie.Z)().replbox});if("Repl"!==(null===u||void 0===u?void 0:u.repl.__typename))return(0,ee.BX)("div",{style:n,className:"jsx-f69d705497b111c9 lite-header",children:[(0,ee.BX)("div",{className:"jsx-f69d705497b111c9 lite-header-cta",children:[(0,ee.tZ)(Gr.Z,{runState:"loading",onClick:function(){return null},lite:!0}),";"]}),(0,ee.tZ)(re(),{id:"f69d705497b111c9",children:".lite-header.jsx-f69d705497b111c9{background:var(--background-default);border-bottom:1px solid var(--outline-dimmest);height:40px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch}.lite-header-cta.jsx-f69d705497b111c9{margin-left:auto;margin-right:auto;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;width:100px;padding:var(--space-4)0}"})]});var f=null,p=u.repl;f="replbox"===p.lang.engine?(0,ee.tZ)(Gr.Z,{lite:!0,runState:dn(d.runState),onClick:function(){d.runState!==ln.A.RUNNING?d.runState===ln.A.IDLE&&(d.run(),(0,ft.j)(ft.U3.PROJECT_RAN,{wid:t,language:null===p||void 0===p?void 0:p.lang.id,replId:i,replTitle:null===p||void 0===p?void 0:p.title})):d.stopRun()}}):s?(0,ee.tZ)(Gr.Z,{runState:"loading",onClick:function(){return null},lite:!0}):"stopping"===c?(0,ee.tZ)(Gr.Z,{runState:"stopping",onClick:function(){return null},lite:!0}):"running"===c?(0,ee.tZ)(Gr.Z,{runState:"running",onClick:function(){return a({type:"STOP_EVAL",wid:t})},lite:!0}):(0,ee.tZ)(Gr.Z,{runState:"idle",onClick:function(){return a({type:"RUN_REPL",wid:t})},lite:!0});var b={href:"https://replit.com".concat(p.url),target:"_blank",title:"open ".concat(p.title)},m=o.query.lite,h=p.lang,v=h.displayName,g=h.icon;return(0,ee.BX)("div",{style:n,className:"jsx-60baa1882bc8d6c3 lite-header",children:[(0,ee.tZ)("div",{className:"jsx-60baa1882bc8d6c3 lite-header-left",children:(null===m||void 0===m?void 0:m.includes("icon"))||(null===m||void 0===m?void 0:m.includes("title"))?(0,ee.BX)("a",Zn({},b,{className:"jsx-60baa1882bc8d6c3 "+(b&&null!=b.className&&b.className||"lite-header-title-link"),children:[m.includes("icon")?(0,ee.tZ)("img",{alt:v,title:v,src:g||void 0,className:"jsx-60baa1882bc8d6c3 lite-header-lang-icon"}):null,m.includes("title")?(0,ee.tZ)("div",{className:"jsx-60baa1882bc8d6c3 lite-header-title",children:(0,ee.tZ)("div",{className:"jsx-60baa1882bc8d6c3",children:p.title})}):null]})):null}),(0,ee.tZ)("div",{className:"jsx-60baa1882bc8d6c3 lite-header-cta",children:f}),(0,ee.tZ)("div",{className:"jsx-60baa1882bc8d6c3 lite-header-right",children:(null===m||void 0===m?void 0:m.includes("nologo"))?(0,ee.tZ)("a",Zn({},b,{className:"jsx-60baa1882bc8d6c3 "+(b&&null!=b.className&&b.className||"lite-header-open-link"),children:"open"})):(0,ee.BX)("a",Zn({},b,{className:"jsx-60baa1882bc8d6c3 "+(b&&null!=b.className&&b.className||"lite-header-logo-link"),children:["open in"," ",(0,ee.tZ)("img",{src:"/public/images/logo-small.png",className:"jsx-60baa1882bc8d6c3 lite-header-logo"})]}))}),(0,ee.tZ)(re(),{id:"60baa1882bc8d6c3",children:".lite-header.jsx-60baa1882bc8d6c3{background:var(--background-root);border-bottom:1px solid var(--outline-dimmest);height:40px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch}.lite-header-title-link.jsx-60baa1882bc8d6c3{font-size:12px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;max-width:100%;position:relative;text-decoration:none}.lite-header-title.jsx-60baa1882bc8d6c3{position:relative;top:1px;display:none;max-width:100%;overflow:hidden;text-decoration:none}.lite-header-title.jsx-60baa1882bc8d6c3>div.jsx-60baa1882bc8d6c3{overflow:hidden;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis}.lite-header-title-link.jsx-60baa1882bc8d6c3:hover .lite-header-title.jsx-60baa1882bc8d6c3{border-color:var(--accent-primary-default)}.lite-header-cta.jsx-60baa1882bc8d6c3{margin-left:auto;margin-right:auto;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;width:100px;padding:var(--space-4)0}.lite-header-cta.jsx-60baa1882bc8d6c3>div{margin-left:0px;height:100%;border-bottom:0 none}.lite-header-lang-icon.jsx-60baa1882bc8d6c3{width:20px;margin-right:4px}.lite-header-left.jsx-60baa1882bc8d6c3,.lite-header-right.jsx-60baa1882bc8d6c3{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;width:-webkit-calc(50% - 50px);width:-moz-calc(50% - 50px);width:calc(50% - 50px);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-left:10px;padding-right:10px}.lite-header-right.jsx-60baa1882bc8d6c3{-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.lite-header-logo-link.jsx-60baa1882bc8d6c3{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;text-decoration:none;border-bottom:none;color:var(--foreground-dimmest);font-size:14px;text-decoration:none}.lite-header-logo-link.jsx-60baa1882bc8d6c3:hover{color:var(--accent-primary-default)}.lite-header-logo.jsx-60baa1882bc8d6c3{width:60px;margin-left:4px}@media screen and (min-width:400px){.lite-header-title.jsx-60baa1882bc8d6c3{display:block}.lite-header-logo.jsx-60baa1882bc8d6c3{width:80px;margin-left:8px}}"})]})}function On(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){On(e,t,r[t])}))}return e}var Cn=(0,vt.$)({primary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ht.qg:return _n({},e,t.initialState);case ht.hq:return _n({},e,{loading:!0});case ht.FG:return _n({},e,{loading:!1});case"WORKSPACE_WILL_UNMOUNT":return _n({},e);default:return e}},runstate:gt.Z});function An(e){return(0,ue.useRouter)().query.lite?(0,ee.tZ)(En,_n({},e)):(0,ee.tZ)(wn,_n({},e))}var In=r(51207),Nn=r(87139),Tn=r(43368),Pn=r(71291),Rn=r(33108),Ln=r(28614);function Dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Un(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function zn(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Un(i,n,a,o,l,"next",e)}function l(e){Un(i,n,a,o,l,"throw",e)}o(void 0)}))}}function Bn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Dn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Mn=/(^.*language.*=.*?)(".*").*$/m,Fn=/(^.*run.*=.*?)(".*").*$/m;function Xn(e){if(!e.match(Mn)||!e.match(Fn))return null;var t=Mn.exec(e),r=Fn.exec(e);if(!t||!r)return null;var n,a,i=Bn(t,3),o=i[1],l=i[2],c=Bn(r,3),s=c[1],u=c[2];try{n=JSON.parse(l),a=JSON.parse(u)}catch(d){return null}return"string"!==typeof n||"string"!==typeof a?null:{languageBefore:o,language:n,languageIndex:t.index,runBefore:s,run:a,runIndex:r.index}}function Vn(e){var t=e.contents,r=e.language,n=e.run,a=Xn(t);if(!a)throw new Error("Parse error");var i=[];i.push(a.languageIndex+a.languageBefore.length+1),a.language.length&&i.push({d:a.language.length}),i.push(r);var o=[];return o.push(a.runIndex+a.runBefore.length+1),a.run.length&&o.push({d:a.run.length}),o.push(n),a.runIndex>a.languageIndex?In.type.compose(o,i):In.type.compose(i,o)}function Gn(e){return Hn.apply(this,arguments)}function Hn(){return Hn=zn(J().mark((function e(t){var r,n,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.run,a=t.language,e.abrupt("return",new Promise((function(e,t){var i=r.watchOtFile(".replit",{onReady:function(r){var o=r.initialContent,l=r.writeOps,c=o.toString("utf8");if(!Xn(c))return t(new Error("Parse error")),void i();l(Vn({contents:c,run:n,language:a})),e(i)},onError:t})})));case 2:case"end":return e.stop()}}),e)}))),Hn.apply(this,arguments)}function Wn(e){var t=e.children;return(0,ee.BX)(Et.Z,{css:{width:"100% ",height:"100%",backgroundColor:"var(--background-default)",color:Ze.TV.foregroundDefault,fontSize:Ze.TV.fontSizeDefault,overflowY:"auto"},children:[(0,ee.tZ)(Et.Z,{css:[Ze.l0.flex.row],children:(0,ee.BX)(Et.Z,{css:[Ze.l0.flex.row,Ze.l0.align.center,Ze.l0.p(4),{fontFamily:"var(--font-family-code)",backgroundColor:"var(--accent-primary-dimmest)",color:"var(--accent-primary-default)"}],children:[(0,ee.tZ)("img",{css:[Ze.l0.mr(8),{height:10,width:8}],src:"/public/images/prompt.png"}),(0,ee.tZ)(ge.Z,{size:"small",children:".replit"})]})}),(0,ee.tZ)(Et.Z,{css:[Ze.l0.p(16),{flex:"1 1 auto",overflowY:"auto"}],children:t})]})}function Kn(e){var t=e.isApplyingConfig,r=Bn(ie.useState("Unknown"===me().get(e.initialLanguage).displayName?"bash":e.initialLanguage),2),n=r[0],a=r[1],i=(0,Rn.Y)(e.initialRun,(function(e){if(!e)return{message:"add a run command"}}));return(0,ee.BX)("form",{css:{fontFamily:Ze.TV.fontFamilyCode},onSubmit:function(t){t.preventDefault(),i.value?e.onSubmit({language:n,run:i.value}):i.validate()},children:[(0,ee.BX)(Et.Z,{css:[Ze.l0.pt(16)],children:[(0,ee.tZ)("label",{css:[Ze.l0.pb(8)],htmlFor:"lang-sel",children:"select language"}),(0,ee.tZ)(Et.Z,{css:[{maxWidth:200}],children:(0,ee.tZ)(Tn.ZP,{disabled:t,initialSelectedItem:me().get(n),placeholder:"Language",onSelect:function(e){e&&a(e.key)}})})]}),(0,ee.BX)(Et.Z,{css:[{maxWidth:400},Ze.l0.pt(32),Ze.l0.colWithGap(8)],children:[(0,ee.tZ)("label",{htmlFor:"run-sel",children:"configure the run button"}),(0,ee.tZ)(Qt.ZP,{disabled:t,id:"run-sel",type:"text",value:i.value,style:{padding:"8px",fontFamily:Ze.TV.fontFamilyCode},placeholder:"enter command",onChange:function(e){i.setValue(e.currentTarget.value)}}),i.error?(0,ee.BX)(Et.Z,{css:[{color:"var(--accent-negative-default)",fontSize:Ze.TV.fontSizeSmall},Ze.l0.rowWithGap(4),Ze.l0.align.center],children:[(0,ee.tZ)(Ln.Z,{size:12}),(0,ee.tZ)(Et.Z,{children:i.error.message})]}):null,(0,ee.tZ)("a",{css:[{fontSize:Ze.TV.fontSizeSmall}],target:"_blank",href:"https://docs.replit.com/repls/dot-replit",children:"not sure what to do?"})]}),(0,ee.tZ)(Et.Z,{css:[Ze.l0.flex.row,Ze.l0.pt(32)],children:(0,ee.tZ)(ve.Z,{color:"primary",type:"submit",disabled:t||Boolean(i.error),children:t?"saving...":"done"})}),(0,ee.tZ)(It.Z,{isOpen:!1,preventClose:!0,onRequestClose:function(){},children:(0,ee.tZ)(Et.Z,{css:[Ze.l0.borderRadius(16),Ze.l0.p(32),{backgroundColor:"var(--background-default)"}],children:(0,ee.BX)(ye.gC,{align:"center",spacing:1,children:[(0,ee.tZ)(Nt.Z,{}),(0,ee.BX)(ge.Z,{children:["Upgrading to ",me().get(n).displayName]})]})})})]})}function qn(){return(0,ee.BX)(Et.Z,{css:{fontFamily:Ze.TV.fontFamilyCode},children:[(0,ee.tZ)(Et.Z,{children:".replit looks a lil messed up :/"}),(0,ee.tZ)("a",{css:[Ze.l0.pt(8),{fontSize:Ze.TV.fontSizeSmall}],target:"_blank",href:"https://docs.replit.com/repls/dot-replit",children:"view docs"})]})}function Yn(){return(0,ee.tZ)(Et.Z,{children:(0,ee.BX)("p",{css:{fontFamily:Ze.TV.fontFamilyCode},children:["initializing run configuration",(0,ee.tZ)(Nn.Z,{style:{color:"var(--foreground-default)"}})]})})}var $n=function(){var e,t=(0,we.Z)(),r=(0,Ie.Z)().fs,n=(0,ke.HmU)({variables:{replId:t}}),a="Repl"===(null===(e=n.data)||void 0===e?void 0:e.repl.__typename)?n.data.repl:null,i=function(e,t){var r=Bn(ie.useState(null),2),n=r[0],a=r[1];return ie.useEffect((function(){var r=!1;return e.readFile(t).then((function(e){r||a(e)})),function(){r=!0}}),[e,t]),n}(r,".replit"),o=Bn(ie.useState(!1),2),l=o[0],c=o[1],s=Bn((0,ke.Fn2)(),1)[0],u=function(){var e=zn(J().mark((function e(n){var a,i,o,l,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.language,i=n.run,c(!0),(0,ft.j)(ft.U3.REPL_FROM_REPO_RUN_CONFIG_COMPLETED),e.next=5,r.readFile(".replit");case 5:if(o=e.sent,l=function(){},!o.error){e.next=12;break}return e.next=10,r.writeFile(".replit",Pn.Z.from(['language = "'.concat(a,'"'),'run = "'.concat(i,'"')].join("\n")));case 10:e.next=15;break;case 12:return e.next=14,Gn({fs:r,run:i,language:a});case 14:l=e.sent;case 15:return e.next=17,r.flush();case 17:return e.next=19,r.persist({skipDebounce:!0});case 19:return l(),u={id:t,language:a},e.next=23,s({variables:{input:u}});case 23:window.location.replace(window.location.pathname);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(!a||!i)return(0,ee.tZ)(Wn,{children:(0,ee.tZ)(Yn,{})});if(null===i||void 0===i?void 0:i.error)return(0,ee.tZ)(Wn,{children:(0,ee.tZ)(qn,{})});var d=Xn(i.content.toString("utf8"));return d?(0,ee.tZ)(Wn,{children:(0,ee.tZ)(Kn,{initialLanguage:d.language,initialRun:d.run,isApplyingConfig:l,onSubmit:u})}):(0,ee.tZ)(Wn,{children:(0,ee.tZ)(qn,{})})},Qn=r(20795);function Jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ea(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ta(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ea(e,t,r[t])}))}return e}function ra(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Jn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var na=function(e){var t=e.navItems,r=e.activePanePuds;return ie.useEffect((function(){var e=document.body;e&&e.classList&&(t.some((function(e){return r.includes(e.pud)}))?e.classList.remove("sidenav-closed"):e.classList.add("sidenav-closed"))}),[t,r]),(0,ee.BX)("div",{className:"jsx-47d475dde80a5cb8 side-nav",children:[(0,ee.tZ)("div",{className:"jsx-47d475dde80a5cb8 side-nav-options",children:t.map((function(e){return(0,ee.tZ)(aa,ta({},e),e.type)}))}),(0,ee.tZ)(re(),{id:"47d475dde80a5cb8",children:".side-nav.jsx-47d475dde80a5cb8{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;background-color:var(--background-default);-webkit-border-top-left-radius:var(--border-radius-4);-moz-border-radius-topleft:var(--border-radius-4);border-top-left-radius:var(--border-radius-4);-webkit-border-bottom-left-radius:var(--border-radius-4);-moz-border-radius-bottomleft:var(--border-radius-4);border-bottom-left-radius:var(--border-radius-4);border-right:1px solid var(--background-higher)}.side-nav-options.jsx-47d475dde80a5cb8{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;height:100%;padding:var(--space-4)0}.side-nav-active-pane.jsx-47d475dde80a5cb8{-webkit-flex:1;-ms-flex:1;flex:1;height:100%;overflow:hidden}"})]})},aa=function(e){var t=e.icon?e.icon:Qn[e.svg],r=e.iconWrapper,n=ra(ie.useState(!0),2),a=n[0],i=n[1],o={"data-testid":"sidenav-".concat(e.type),"aria-label":e.tooltip,"data-microtip-position":"right",role:"tooltip"};return(0,ee.BX)("div",ta({onClick:function(){e.onClick()}},r?{}:o,{className:"jsx-fec3cffb12bc633b "+(At()("side-nav-item",{"side-nav-item-active":e.isActive})||""),children:[r?(0,ee.tZ)(r,{pud:e.pud,wid:e.wid,isVisible:a,onDismiss:function(){return i(!1)},tooltipProps:o,className:"jsx-fec3cffb12bc633b",children:(0,ee.tZ)("div",{onClick:function(){return i(!1)},className:"jsx-fec3cffb12bc633b side-nav-item-img",children:(0,ee.tZ)(t,{className:"jsx-fec3cffb12bc633b"})})}):(0,ee.tZ)("div",{className:"jsx-fec3cffb12bc633b side-nav-item-img",children:(0,ee.tZ)(t,{className:"jsx-fec3cffb12bc633b"})}),(0,ee.tZ)(re(),{id:"fec3cffb12bc633b",children:".side-nav-item.jsx-fec3cffb12bc633b{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center;cursor:pointer;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);height:-webkit-calc(var(--space-48) - var(--space-8));height:-moz-calc(var(--space-48) - var(--space-8));height:calc(var(--space-48) - var(--space-8));width:-webkit-calc(var(--space-48) - var(--space-8));width:-moz-calc(var(--space-48) - var(--space-8));width:calc(var(--space-48) - var(--space-8));margin-bottom:var(--space-4)}.side-nav-item.jsx-fec3cffb12bc633b:hover{background:var(--background-higher)}.side-nav-item.jsx-fec3cffb12bc633b:active{background:var(--background-higher)}.side-nav-item-active.jsx-fec3cffb12bc633b{background:var(--accent-primary-dimmest);color:var(--foreground-default)}.side-nav-item-img.jsx-fec3cffb12bc633b{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center;height:20px;width:20px;color:var(--foreground-dimmest)}.side-nav-item-img.jsx-fec3cffb12bc633b svg.jsx-fec3cffb12bc633b{height:100%;width:100%}.side-nav-item.jsx-fec3cffb12bc633b:hover .side-nav-item-img.jsx-fec3cffb12bc633b,.side-nav-item-active.jsx-fec3cffb12bc633b .side-nav-item-img.jsx-fec3cffb12bc633b{color:var(--accent-primary-strongest)}"})]}))};function ia(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function la(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){oa(e,t,r[t])}))}return e}function ca(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||ua(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sa(e){return function(e){if(Array.isArray(e))return ia(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ua(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ua(e,t){if(e){if("string"===typeof e)return ia(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ia(e,t):void 0}}var da=function(e){var t=e.wid,r=e.pud,n=ca((0,kt.J)(t,r,"sidenav"),1)[0],a=n.activePanePuds,i=n.navItems,o=(0,rt.I0)();return(0,ee.tZ)(na,{activePanePuds:a,navItems:i.map((function(e){return{type:e.pluginType,wid:t,pud:e.pud,onClick:function(){return o(function(e){var t=e.wid,r=e.pud,n=e.forPud;return function(e,a){a().workspace[t].plugins[r].state.activePanePuds.includes(n)?e(fa({wid:t,pud:r,forPud:n})):e(pa({wid:t,pud:r,forPud:n}))}}({wid:t,pud:r,forPud:e.pud}))},isActive:a.includes(e.pud),svg:e.svg,tooltip:e.tooltip,icon:e.icon,iconWrapper:e.iconWrapper}}))})};function fa(e){var t=e.wid,r=e.pud,n=e.forPud;return function(e,a){var i=a().workspace[t].layout;e((0,ht.fc)(la({property:void 0,wid:t},bt.Od(i,n)))),e({type:"ON_SIDEPANE_CLOSE",wid:t,pud:r,forPud:n})}}function pa(e){var t=e.wid,r=e.pud,n=e.forPud;return function(e,a){var i=a().workspace[t].layout,o=a().workspace[t].plugins[r].state.activePanePuds,l=bt.Bp(i,r);if(l){for(var c=bt.QK(i,bt.J9(l));"split"===c.type;)c=c.left;"pud"in c&&o.includes(c.pud)&&e(fa({wid:t,pud:r,forPud:c.pud})),i=a().workspace[t].layout;var s=a().workspace[t].plugins[r].state.savedPos;e((0,ht.fc)(la({property:void 0,wid:t},bt.$T(i,n,"leftOf",bt.J9(l),{position:s})))),(0,ft.j)(ft.U3.SIDEPANE_PLUGIN_OPENED,{plugin:n}),e({type:"ON_SIDEPANE_OPEN",wid:t,activePanePud:n})}}}function ba(e,t,r){switch(r.type){case ht.tK:return function(e){var t=e.wid,r=e.pud,n=e.paneType;return function(e,a){var i=a().workspace[t].plugins[r].state.navItems,o=!0,l=!1,c=void 0;try{for(var s,u=i[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var d=s.value;if(d.pluginType===n)return void e(pa({wid:t,pud:r,forPud:d.pud}))}}catch(f){l=!0,c=f}finally{try{o||null==u.return||u.return()}finally{if(l)throw c}}}}({wid:e,pud:t,paneType:r.paneType});case"SET_SPLIT_POSITION":return function(e){var t=e.wid,r=e.pud,n=e.position,a=e.path;return 0===n?function(e,n){var i=n().workspace[t],o=i.layout,l=i.plugins[r].state,c=bt.QK(o,a);"left"in c&&"pud"in c.left&&l.activePanePuds.includes(c.left.pud)&&e(fa({wid:t,pud:r,forPud:c.left.pud}))}:100===n?function(e,n){var i=n().workspace[t],o=i.layout,l=i.plugins[r].state,c=bt.QK(o,a);"right"in c&&"pud"in c.right&&l.activePanePuds.includes(c.right.pud)&&e(fa({wid:t,pud:r,forPud:c.right.pud}))}:function(e,i){var o=i().workspace[t],l=o.layout,c=o.plugins[r].state,s=bt.QK(l,a);"left"in s&&"pud"in s.left&&c.activePanePuds.includes(s.left.pud)&&e({type:"SET_SAVED_POSITION",position:n,pud:r,wid:t})}}({wid:e,pud:t,position:r.position,path:r.path});case"OPEN_SIDE_NAV_ITEM":return pa({wid:e,pud:t,forPud:r.navItem.pud});case"REMOVE_SIDE_NAV_ITEM":return function(n,a){(0,kt.Z)(a(),e,t,"sidenav").activePanePuds.includes(r.navItemPud)&&n(fa({wid:e,pud:t,forPud:r.navItemPud}))};default:return null}}function ma(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{navItems:[],activePanePuds:[],savedPos:15},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ht.qg:return la({},e,t.initialState);case"PLUGIN_CLOSED":var r=t.closedPud;return la({},e,{activePanePuds:e.activePanePuds.filter((function(e){return e!==r}))});case"ON_SIDEPANE_CLOSE":var n=t.forPud;return la({},e,{activePanePuds:e.activePanePuds.filter((function(e){return e!==n}))});case"ON_SIDEPANE_OPEN":return e.activePanePuds.includes(t.activePanePud)?e:la({},e,{activePanePuds:sa(e.activePanePuds).concat([t.activePanePud])});case"SET_SAVED_POSITION":return la({},e,{savedPos:t.position});case"ADD_SIDE_NAV_ITEM":if(e.navItems.some((function(e){return e.pud===t.navItem.pud})))return e;if("index"in t){var a=Math.min(t.index,e.navItems.length);return la({},e,{navItems:sa(e.navItems.slice(0,a)).concat([t.navItem],sa(e.navItems.slice(a)))})}return la({},e,{navItems:sa(e.navItems).concat([t.navItem])});case"REMOVE_SIDE_NAV_ITEM":var i=e.navItems.filter((function(e){return e.pud!==t.navItemPud}));return i.length===e.navItems.length?e:la({},e,{navItems:i});default:return e}}var ha,va,ga=r(22963),ya=r(51739),xa=r(1861),wa=r(7377),ka=r(62776),ja=r(31917);function Za(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Sa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ea(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Sa(e,t,r[t])}))}return e}function Oa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Za(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Za(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(e){e.Unloaded="UNLOADED",e.Loading="LOADING",e.Clean="CLEAN",e.Dirty="DIRTY",e.Syncing="SYNCING",e.Err="ERR"}(ha||(ha={}));var _a=(Sa(va={},ha.Unloaded,{FILE_UNLOAD:ha.Unloaded,FILE_LOADING:ha.Loading}),Sa(va,ha.Loading,{FILE_UNLOAD:ha.Unloaded,FILE_LOADED:ha.Clean,FILE_ERROR:ha.Err}),Sa(va,ha.Clean,{FILE_UNLOAD:ha.Unloaded,FILE_DIRTY:ha.Dirty}),Sa(va,ha.Dirty,{FILE_UNLOAD:ha.Unloaded,FILE_SYNCING:ha.Syncing,FILE_DIRTY:ha.Dirty}),Sa(va,ha.Syncing,{FILE_UNLOAD:ha.Unloaded,FILE_CLEAN:ha.Clean,FILE_DIRTY:ha.Dirty,FILE_ERROR:ha.Err}),Sa(va,ha.Err,{FILE_UNLOAD:ha.Unloaded}),va);function Ca(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.path&&(0,ka.isHiddenFile)(t.path))return e;switch(t.type){case"FILE_UNLOAD":case"FILE_LOADING":case"FILE_LOADED":case"FILE_SYNCING":case"FILE_DIRTY":case"FILE_CLEAN":case"FILE_ERROR":if((0,wa.GA)(e,t.path).length)return e;var r=e[t.path];if(!r)throw new ja.default("unable to perform file state transition: unknown file").setExtras({currentState:r,action:t});if(!_a[r])throw new ja.default("unable to perform file state transition: file is in an unknown state").setExtras({currentState:r,action:t});var n=_a[r][t.type];if(!n)throw new ja.default("unable to perform file state transition: invalid state transition").setExtras({currentState:r,action:t});return n===r?e:Ea({},e,Sa({},t.path,n));case"DELETE_FILE":var a=(0,wa.GA)(e,t.path),i=Ea({},e);return a.length?a.forEach((function(e){delete i[e]})):delete i[t.path],i;case"MOVE_FILE":var o=(0,wa.vk)(e,t.path,t.to);if(!o.length)return e;var l=Ea({},e);return o.forEach((function(t){var r=Oa(t,2),n=r[0],a=r[1];delete l[n],l[a]=e[n]})),l;case"CREATE_FILE":if(e[t.path])throw new ja.default("unable to perform file state transition: invalid state transition").setExtras({currentState:e[t.path],action:t});return Ea({},e,Sa({},t.path,t.file&&t.file.loaded?ha.Clean:ha.Unloaded));default:return e}}var Aa=r(56718),Ia=r(43421),Na=r(70762),Ta=r(36377);function Pa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ra(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Pa(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var La=function(e){var t=e.wid,r=e.language,n=e.tabIndex,a=e.filePath,i=e.onClick,o=e.onClose,l=e.isActiveFile,c=(0,Ie.Z)(),s=c.session,u=c.fs,d=Ra((0,Ia.c)({item:{type:Aa.z.FileHeaderTab,path:a,isFolder:!1},type:Aa.z.FileHeaderTab}),2)[1],f=Ra((0,ya.L)({accept:[Or.Tv.File,Aa.z.FileNode,Aa.z.FileHeaderTab],collect:function(e){var t,r=null===(t=e.getItem())||void 0===t?void 0:t.isFolder;return{isOver:e.isOver()&&!r}},drop:function(e){if(e&&!e.isFolder){var i=e.path;i!==a&&(s.openFile(i,{tabIndex:n}),(0,ft.j)(ft.U3.FILE_HEADER_TAB_REPLACED,{wid:t,language:r,tabIndex:n}))}}}),2),p=f[0],b=f[1],m=function(e,t){return e?"var(--background-default)":t?"var(--background-higher)":"var(--background-root)"}(l,p.isOver),h=Ra(ie.useState(!1),2),v=h[0],g=h[1],y=a.split("/"),x=y.pop(),w=y.join("/"),k=function(e){var t=e.path,r=e.initialExpanded,n=(0,Ie.Z)().fs;return(0,Ta.Z)({path:t,initialExpanded:r,fs:n})}({path:w.length>0?w:".",initialExpanded:!0}).children,j=null===k||void 0===k?void 0:k.filter((function(e){return e.filename!==x}));return(0,ee.BX)("div",{ref:function(e){d(e),b(e)},onClick:i,className:re().dynamic([["855b9fcedbf51a69",[m,l?"var(--foreground-default)":"var(--foreground-dimmer)",l?"var(--shadow-1)":"none",l?"auto":"var(--background-root)"]]])+" "+(At()("file-header-tab",{first:0===n})||""),children:[(0,ee.tZ)("span",{onDoubleClick:function(){g(!0)},className:re().dynamic([["855b9fcedbf51a69",[m,l?"var(--foreground-default)":"var(--foreground-dimmer)",l?"var(--shadow-1)":"none",l?"auto":"var(--background-root)"]]])+" file-path",children:v?(0,ee.tZ)(Na.Z,{onSubmit:function(e){var t=w.length>0?w+"/"+e:e;u.moveFile(a,t),g(!1)},onCancel:function(){g(!1)},loading:!1,siblings:j||[],parentPath:w,type:Or.Tv.File,initialValue:x,rename:!0}):a}),(0,ee.tZ)(ve.Z,{className:"close-file-button",size:"small",border:!1,filled:!1,Icon:Yt.Z,onClick:o}),(0,ee.tZ)(re(),{id:"855b9fcedbf51a69",dynamic:[m,l?"var(--foreground-default)":"var(--foreground-dimmer)",l?"var(--shadow-1)":"none",l?"auto":"var(--background-root)"],children:".file-header-tab.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:0 var(--space-24)0 var(--space-8);cursor:pointer;height:100%;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center;position:relative;background-color:".concat(m,";color:").concat(l?"var(--foreground-default)":"var(--foreground-dimmer)",";-webkit-box-shadow:").concat(l?"var(--shadow-1)":"none",";-moz-box-shadow:").concat(l?"var(--shadow-1)":"none",";box-shadow:").concat(l?"var(--shadow-1)":"none",";min-width:var(--space-80);-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-border-top-right-radius:var(--border-radius-4);-moz-border-radius-topright:var(--border-radius-4);border-top-right-radius:var(--border-radius-4);-webkit-border-top-left-radius:var(--border-radius-4);-moz-border-radius-topleft:var(--border-radius-4);border-top-left-radius:var(--border-radius-4)}.sidenav-closed .file-header-tab.first{-webkit-border-top-left-radius:0px;-moz-border-radius-topleft:0px;border-top-left-radius:0px}.close-file-button{opacity:.7;position:absolute;right:var(--space-4);padding:2px!important;color:var(--foreground-dimmer)!important}.file-header-tab.__jsx-style-dynamic-selector:hover{background-color:").concat(l?"auto":"var(--background-root)",";color:var(--foreground-default)}.file-header-tab.__jsx-style-dynamic-selector:hover .file-path{color:var(--foreground-default)}.file-header-tab.__jsx-style-dynamic-selector:hover .close-file-button{opacity:1}.close-file-button:hover{color:var(--foreground-default)!important}.file-path.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%}.spacer.__jsx-style-dynamic-selector{width:var(--space-8)}")})]})},Da=function(e){var t=e.text;return(0,ee.BX)("div",{className:"jsx-c8a47338c62d3349 empty",children:[(0,ee.tZ)(ge.Z,{size:"small",foreground:2,children:t}),(0,ee.tZ)(re(),{id:"c8a47338c62d3349",children:".empty.jsx-c8a47338c62d3349{background-color:var(--background-default);height:100%;min-width:var(--space-80);padding:var(--space-8)var(--space-16);-webkit-border-top-right-radius:var(--border-radius-4);-moz-border-radius-topright:var(--border-radius-4);border-top-right-radius:var(--border-radius-4);-webkit-border-top-left-radius:var(--border-radius-4);-moz-border-radius-topleft:var(--border-radius-4);border-top-left-radius:var(--border-radius-4)}"})]})},Ua=r(82820),za=r(39809),Ba=r(97584);function Ma(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Fa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ma(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ma(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xa(){var e=(0,Ie.Z)().session,t=Fa(ie.useState(e.getPreviewedFile()),2),r=t[0],n=t[1];return ie.useEffect((function(){return n(e.getPreviewedFile()),e.onPreviewedFileChanged(n)}),[e]),r}var Va=r(41045),Ga=r(90039),Ha=r(39550);function Wa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ka(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Wa(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qa(e){var t=e.id,r=e.username,n=e.color,a=(0,Ie.Z)().presence,i=(0,ke.qC4)({variables:{ids:[t]},ssr:!1}).data;if(!i)return null;var o=Ka(i.usersByIds,1)[0].image;return(0,ee.BX)("div",{className:re().dynamic([["8eb09786a976f628",[n]]])+" following-indicator",children:[(0,ee.BX)(ye.Ug,{wrap:"nowrap",className:"stack",spacing:"var(--space-4)",children:[(0,ee.tZ)(ye.gC,{className:"stack",align:"center",justify:"center",children:(0,ee.tZ)(_t,{id:t,username:r,image:o,color:n,size:22})}),(0,ee.tZ)(ye.gC,{className:"text-container",align:"center",justify:"center",children:(0,ee.BX)(ge.Z,{className:"following-text",children:["Observing ",r]})}),(0,ee.tZ)(ye.gC,{className:"stack",align:"center",justify:"center",children:(0,ee.tZ)(ve.Z,{size:"small",filled:!1,border:!1,textColor:n,onClick:function(){a.unfollowUser()},children:(0,ee.tZ)(Yt.Z,{})})})]}),(0,ee.tZ)(re(),{id:"8eb09786a976f628",dynamic:[n],children:".following-indicator.__jsx-style-dynamic-selector{height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8)}.following-indicator.__jsx-style-dynamic-selector .stack{height:100%;max-width:100%;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;overflow:clip}.following-indicator.__jsx-style-dynamic-selector .text-container{height:100%;margin-right:-2px}.following-indicator.__jsx-style-dynamic-selector .following-text{color:".concat(n,";white-space:nowrap}")})]})}function Ya(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ya(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ya(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ja(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Qa(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ei(){var e=function(){var e=(0,Ie.Z)().presence,t=$a(ie.useState(e.getFollowingUsers()),2),r=t[0],n=t[1];return ie.useEffect((function(){return n(e.getFollowingUsers()),e.onFollowingUsersChanged((function(e){n(e.followingUsers)}))}),[e]),r}();return 0===e.length?null:1===e.length?(0,ee.tZ)(ti,{user:e[0]}):(0,ee.BX)("div",{className:"jsx-4f2e88846001c10e followed-indicator",children:[(0,ee.BX)(ge.Z,{children:[e.length," users are observing you"]}),(0,ee.tZ)(re(),{id:"4f2e88846001c10e",children:".followed-indicator.jsx-4f2e88846001c10e{white-space:nowrap;height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}"})]})}function ti(e){var t=e.user,r=(0,ke.qC4)({variables:{ids:[t.id]},ssr:!1}).data;if(!r)return null;var n=Ja(r.usersByIds,1)[0].image,a=t.id,i=t.username,o=t.color;return(0,ee.BX)("div",{className:"jsx-add9eb548244268a followed-indicator",children:[(0,ee.BX)(ye.Ug,{wrap:"nowrap",align:"center",className:"stack",spacing:"var(--space-4)",children:[(0,ee.tZ)(_t,{id:a,username:i,image:n,color:o,size:22}),(0,ee.tZ)(ge.Z,{className:"username",children:i}),(0,ee.tZ)("div",{className:"jsx-add9eb548244268a text",children:(0,ee.tZ)(ge.Z,{children:"is observing you"})})]}),(0,ee.tZ)(re(),{id:"add9eb548244268a",children:".followed-indicator.jsx-add9eb548244268a{height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8)}.text.jsx-add9eb548244268a{white-space:nowrap}.followed-indicator.jsx-add9eb548244268a .stack{height:100%}.followed-indicator.jsx-add9eb548244268a .username{overflow:clip;max-width:150px;display:inline-block;-o-text-overflow:ellipsis;text-overflow:ellipsis}"})]})}var ri=r(95722),ni=r(91510);function ai(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ii(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ai(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ai(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var oi=function(e){var t,r=e.style,n=e.wid,a=e.pud,i=(0,Ua.Fg)(),o=(0,we.Z)(),l=(0,Ie.Z)(),c=l.session,s=l.fs,u=l.presence,d=(0,za.Z)().openFiles,f=(0,Er.Z)(),p=Xa(),b=(0,Ha.Z)(),m=(0,Ga.Z)(),h=(0,Ta.Z)({fs:s,path:Va.Q,initialExpanded:!0}).loading,v=(0,ke.IqK)({variables:{replId:o}}).data,g="Repl"===(null===v||void 0===v?void 0:v.repl.__typename)?v.repl.language:"",y=(0,rt.v9)((function(e){var t=(0,kt.Z)(e,n,a,"fileheader").filestatus;if(!f||!g)return!0;var r=t[f];return r===ha.Unloaded||r===ha.Loading})),x="md"===(0,_r.r6)(f||""),w=ie.useCallback((function(){(0,ft.j)(ft.U3.MARKDOWN_PREVIEW_TOGGLE_CLICKED,{isOn:Boolean(p)}),c.setPreviewedFile(p?null:f)}),[c,p,f]),k=d.map((function(e,t){return(0,ee.tZ)(La,{wid:n,language:g,filePath:e,tabIndex:t,onClick:function(){e!==f&&(c.openFile(e),b&&u.unfollowUser())},onClose:function(e){e.stopPropagation(),c.closeTab(t),(0,ft.j)(ft.U3.FILE_HEADER_TAB_CLOSED,{wid:n,language:g})},isActiveFile:e===f},t)})),j=ie.useRef(null),Z=null===(t=j.current)||void 0===t?void 0:t.osInstance(),S=ie.useRef(0),E=ie.useRef(0),O=ii((0,ya.L)({accept:[Or.Tv.File,Aa.z.FileNode,Aa.z.FileHeaderTab],collect:function(e){var t,r=null===(t=e.getItem())||void 0===t?void 0:t.isFolder;return{isOver:e.isOver({shallow:!0})&&!r}},canDrop:function(e){return!e.isFolder},drop:function(e,t){if(e&&!e.isFolder&&!t.didDrop()){var r=d.length;c.openFile(e.path,{tabIndex:r}),(0,ni.Z)({replId:o,action:"newTab",source:"dragdrop"})}}}),2),_=O[0],C=O[1],A=i===Ua.V2.replitLight?"os-theme-dark":"os-theme-light",I=h?"Loading files...":"No files open";return(0,ee.BX)("div",{ref:C,style:r,className:re().dynamic([["5fed894dbe44b79c",[_.isOver?"var(--background-higher)":"var(--background-root)",m?"0 0 0 3px ".concat(m):"0",b?"inset(-4px -4px 0px -4px)":"none",_.isOver?"var(--background-higher)":"var(--background-root)"]]])+" file-header",children:[(0,ee.tZ)(xa.E,{className:A,options:{overflowBehavior:{y:"hidden"},scrollbars:{autoHide:"leave"}},onWheel:function(e){if(Z&&0!==e.deltaY&&0===e.deltaX){var t=e.deltaY<0?-1:1,r=E.current!==t?Z.scroll().position.x:S.current,n=25*t,a=Z.scroll().max.x;S.current=Math.max(0,Math.min(a,r-n)),E.current=t;var i=function(){if(Z){var e=Z.scroll().position.x,t=S.current-e,r=Math.round(e+t/10);0!==t&&(Z.scroll({x:r}),window.requestAnimationFrame(i))}};window.requestAnimationFrame(i)}},ref:j,children:(0,ee.tZ)("div",{className:re().dynamic([["5fed894dbe44b79c",[_.isOver?"var(--background-higher)":"var(--background-root)",m?"0 0 0 3px ".concat(m):"0",b?"inset(-4px -4px 0px -4px)":"none",_.isOver?"var(--background-higher)":"var(--background-root)"]]])+" file-header-name",children:k.length>0?k:(0,ee.tZ)(Da,{text:I})})}),y&&(0,ee.tZ)("div",{className:re().dynamic([["5fed894dbe44b79c",[_.isOver?"var(--background-higher)":"var(--background-root)",m?"0 0 0 3px ".concat(m):"0",b?"inset(-4px -4px 0px -4px)":"none",_.isOver?"var(--background-higher)":"var(--background-root)"]]])+" loading-wrapper",children:(0,ee.tZ)("div",{className:re().dynamic([["5fed894dbe44b79c",[_.isOver?"var(--background-higher)":"var(--background-root)",m?"0 0 0 3px ".concat(m):"0",b?"inset(-4px -4px 0px -4px)":"none",_.isOver?"var(--background-higher)":"var(--background-root)"]]])+" file-header-loading-bar"})}),b?null:(0,ee.tZ)(ei,{}),x||y||!f||b?null:(0,ee.tZ)(ri.Z,{filePath:f,replLanguage:g}),b?(0,ee.tZ)(qa,{id:b.id,username:b.username,color:b.color}):null,x&&!b?(0,ee.tZ)(Ba.Z,{isOn:Boolean(p),onChange:w}):null,(0,ee.tZ)(re(),{id:"5fed894dbe44b79c",dynamic:[_.isOver?"var(--background-higher)":"var(--background-root)",m?"0 0 0 3px ".concat(m):"0",b?"inset(-4px -4px 0px -4px)":"none",_.isOver?"var(--background-higher)":"var(--background-root)"],children:".file-header.__jsx-style-dynamic-selector{position:relative;z-index:3;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;height:48px;width:100%;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;background-color:".concat(_.isOver?"var(--background-higher)":"var(--background-root)",";-webkit-border-top-right-radius:var(--border-radius-4);-moz-border-radius-topright:var(--border-radius-4);border-top-right-radius:var(--border-radius-4);-webkit-border-top-left-radius:var(--border-radius-4);-moz-border-radius-topleft:var(--border-radius-4);border-top-left-radius:var(--border-radius-4);-webkit-box-shadow:").concat(m?"0 0 0 3px ".concat(m):"0",";-moz-box-shadow:").concat(m?"0 0 0 3px ".concat(m):"0",";box-shadow:").concat(m?"0 0 0 3px ".concat(m):"0",";-webkit-clip-path:").concat(b?"inset(-4px -4px 0px -4px)":"none",";clip-path:").concat(b?"inset(-4px -4px 0px -4px)":"none","}.file-header.__jsx-style-dynamic-selector .os-host{height:100%;-webkit-flex:auto;-ms-flex:auto;flex:auto;min-width:0}.os-content-glue{height:50px!important}.file-header.__jsx-style-dynamic-selector .os-scrollbar-handle{max-width:300px}.file-header-name.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;width:100%;background-color:").concat(_.isOver?"var(--background-higher)":"var(--background-root)",";color:var(--foreground-dimmer);font-size:var(--font-size-default);height:100%;text-align:center;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end}.loading-wrapper.__jsx-style-dynamic-selector{position:absolute;bottom:0;left:0;right:0;height:2px;overflow:hidden}.file-header-loading-bar.__jsx-style-dynamic-selector{width:40px;height:2px;position:absolute;bottom:0;left:0;background:var(--background-higher);-webkit-animation:loading-bar-move 2.5s ease-in-out 0s infinite;-moz-animation:loading-bar-move 2.5s ease-in-out 0s infinite;-o-animation:loading-bar-move 2.5s ease-in-out 0s infinite;animation:loading-bar-move 2.5s ease-in-out 0s infinite;-webkit-animation-fill-mode:forward;-moz-animation-fill-mode:forward;-o-animation-fill-mode:forward;animation-fill-mode:forward}@keyframes loading-bar-move{0%{left:-7%}100%{left:105%}}")})]})},li=(0,vt.$)({filestatus:Ca}),ci=r(78411),si=r(50055);var ui=r(48265),di=r(90601);function fi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return fi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var mi,hi=function(e){var t=e.style,r=e.clearConsole,n=e.findPrevious,a=e.findNext,i=e.refCallback,o=e.wid,l=e.pud,c=(0,Ua.Fg)(),s=bi(ie.useState(!1),2),u=s[0],d=s[1];return(0,ee.tZ)(bn.xW,{stepId:mn.H.Output,children:(0,ee.BX)("div",{style:t,onKeyDown:function(e){"f"===e.key&&(0,di.jh)(e)&&!e.shiftKey&&(d(!0),e.preventDefault())},className:"jsx-c6ae3a1d7966c39d "+"".concat(Ua.RJ," ").concat(c===Ua.V2.replitSpooky?"spooky":"dark"),children:[(0,ee.BX)("div",{style:{},className:"jsx-c6ae3a1d7966c39d console",children:[(0,ee.tZ)("div",{className:"jsx-c6ae3a1d7966c39d controls",children:(0,ee.BX)(ye.Ug,{align:"center",wrap:"nowrap",children:[u?(0,ee.tZ)(ui.Rh,{findPrevious:n,findNext:a,exit:function(){return d(!1)}}):(0,ee.tZ)(ui.lD,{onClick:function(){return d(!0)}}),(0,ee.tZ)(ui.Zr,{onClick:r})]})}),(0,ee.tZ)("div",{ref:i,className:"jsx-c6ae3a1d7966c39d xterm-container"}),(0,ee.tZ)(gi,{wid:o,pud:l})]}),(0,ee.tZ)(re(),{id:"820aded6daee2107",children:".xterm .xterm-viewport{overflow-y:auto!important}"}),(0,ee.tZ)(re(),{id:"e029c8b18ed64eba",children:".console.jsx-c6ae3a1d7966c39d{height:100%;position:relative;background-color:var(--background-default);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);overflow:hidden;padding-left:1em;padding-top:10px;z-index:1}.controls.jsx-c6ae3a1d7966c39d{position:absolute;top:var(--space-8);right:var(--space-16);z-index:5;opacity:0}.console.jsx-c6ae3a1d7966c39d:hover .controls.jsx-c6ae3a1d7966c39d{opacity:1}.xterm-container.jsx-c6ae3a1d7966c39d{width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;height:100%}"})]})})},vi=(pi(mi={},-1,"Loading..."),pi(mi,-2,"Fetching token"),pi(mi,si.api.BootStatus.Stage.ACQUIRING,"Booting Repl"),pi(mi,si.api.BootStatus.Stage.PULL_FILES,"Downloading files"),pi(mi,si.api.BootStatus.Stage.LOAD_BLOCK,"Downloading files"),pi(mi,si.api.BootStatus.Stage.COMPLETE,"Ready"),mi),gi=function(e){var t=e.wid,r=e.pud,n=bi((0,kt.J)(t,r,"terminal2"),1)[0],a=n.connectionLoadingStatus,i=n.loadingEngine,o=bi(ie.useState(!i),2),l=o[0],c=o[1],s=bi(ie.useState(null),2),u=s[0],d=s[1],f=bi(ie.useState(a.stage in vi?a:{stage:-1}),2),p=f[0],b=f[1],m=bi(ie.useState(p.progress||0),2),h=m[0],v=m[1],g=ie.useRef(p.progress||0),y=ie.useRef(null);ie.useEffect((function(){a.stage in vi&&(p.stage!==a.stage&&(d(p),v(0),y.current=null),b(a))}),[a]),ie.useEffect((function(){if(p.progress&&p.total)if(p.stage===si.api.BootStatus.Stage.LOAD_BLOCK){if(!(h>p.progress)){var e=Date.now(),t=0;if(y.current){var r=e-y.current,n=p.progress-g.current;t=n/r*50}else{t=5e4}y.current=e,g.current=p.progress;var a=p.total,i=setInterval((function(){v((function(e){var r=e+t;return r>a?a:r}))}),50);return function(){return clearInterval(i)}}}else v(p.progress)}),[p.progress]);var x=p.stage===si.api.BootStatus.Stage.COMPLETE;if(ie.useEffect((function(){if(x){var e=setTimeout((function(){c(!0)}),1e3);return function(){return clearTimeout(e)}}}),[x]),l)return(0,ee.tZ)(ee.HY,{});var w=0;switch(p.stage){case-2:w=0;break;case-1:w=10;break;case si.api.BootStatus.Stage.ACQUIRING:w=20;break;case si.api.BootStatus.Stage.PULL_FILES:case si.api.BootStatus.Stage.LOAD_BLOCK:w=20+70*(p.total?h/p.total:1);break;case si.api.BootStatus.Stage.COMPLETE:w=100;break;default:!function(e){throw new Error("Unhandled discriminated union member: ".concat(JSON.stringify(e)))}(p.stage)}return(0,ee.BX)("div",{style:{opacity:x?0:1},className:"jsx-d3d2af536b0950f3 loader-container",children:[(0,ee.BX)("div",{className:"jsx-d3d2af536b0950f3",children:[u&&(0,ee.BX)("div",{className:"jsx-d3d2af536b0950f3 prev-status status",children:[vi[u.stage],u.total&&" 100%"]},vi[u.stage]),(0,ee.BX)("div",{className:"jsx-d3d2af536b0950f3 current-status status",children:[vi[p.stage],p.total&&" ".concat(Math.floor(h/p.total*100),"%")]},vi[p.stage])]}),(0,ee.tZ)("div",{className:"jsx-d3d2af536b0950f3 loader-bar",children:(0,ee.tZ)("div",{style:{width:w+"%"},className:"jsx-d3d2af536b0950f3 loader-filler"})}),(0,ee.tZ)(re(),{id:"d3d2af536b0950f3",children:".loader-container.jsx-d3d2af536b0950f3{position:absolute;left:25%;right:25%;top:47%;background-color:transparent;color:white;-webkit-transition:opacity.5s 2s;-moz-transition:opacity.5s 2s;-o-transition:opacity.5s 2s;transition:opacity.5s 2s}.loader-bar.jsx-d3d2af536b0950f3{background:none;border:solid white 1px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px}.loader-filler.jsx-d3d2af536b0950f3{height:5px;background-color:#fff;-webkit-transition:width cubic-bezier(.28,.26,.33,1)2s;-moz-transition:width cubic-bezier(.28,.26,.33,1)2s;-o-transition:width cubic-bezier(.28,.26,.33,1)2s;transition:width cubic-bezier(.28,.26,.33,1)2s}.status.jsx-d3d2af536b0950f3{text-align:center;position:absolute;width:100%;top:-2em;opacity:1}.current-status.jsx-d3d2af536b0950f3{-webkit-animation:fade-in.6s;-moz-animation:fade-in.6s;-o-animation:fade-in.6s;animation:fade-in.6s}.prev-status.jsx-d3d2af536b0950f3{top:-6em;opacity:0;-webkit-transition:top.4s,opacity.4s;-moz-transition:top.4s,opacity.4s;-o-transition:top.4s,opacity.4s;transition:top.4s,opacity.4s}@keyframes fade-in{0%{opacity:0;top:0em}100%{opacity:1;top:-2em}}"})]})},yi=r(51968);function xi(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function wi(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){xi(i,n,a,o,l,"next",e)}function l(e){xi(i,n,a,o,l,"throw",e)}o(void 0)}))}}function ki(e){return ji.apply(this,arguments)}function ji(){return ji=wi(J().mark((function e(t){var r,n,a,i,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,yi.Z)(t);case 2:return r=e.sent,n=r.xterm,a=r.fitAddon,i=r.searchAddon,o=r.setTheme,n.fit=function(){return a.fit()},n.searchAddon=i,n.setTheme=o,e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)}))),ji.apply(this,arguments)}var Zi=r(31826),Si=r(87152),Ei=r(89431),Oi=r(77012);function _i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ci(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function Ai(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ii(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ai(e,t,r[t])}))}return e}function Ni(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ti(e){return!!e&&!(0===e.h.px&&0===e.h.pc||0===e.w.px&&0===e.w.pc)}function Pi(e){var t=e.wid,r=e.pud,n=e.style,a=e.dimensions,i=(0,we.Z)(),o=Ni((0,kt.J)(t,r,"terminal2"),1)[0],l=o.lite,c=o.preventFocus,s=o.enabled,u=(0,Ie.Z)(),d=u.fs,f=u.debuggest,p=(0,Ei.Z)("flag-xterm-file-parser"),b=Ni(ie.useState(null),2),m=b[0],h=b[1],v=ie.useRef(null),g=(0,rt.I0)(),y=ie.useCallback((function(){g((0,ht.En)({wid:t,pud:r}))}),[g,t,r]),x=ie.useCallback((function(e){m&&m.searchAddon.findNext(e)}),[m]),w=ie.useCallback((function(e){m&&m.searchAddon.findPrevious(e)}),[m]),k=ie.useCallback((function(){j.current&&j.current.fit()}),[]),j=ie.useRef(null);ie.useEffect((function(){j.current=m,k()}),[m,k]);var Z=ie.useRef((0,Zi.Z)(k,50)).current,S=ie.useCallback((function(){m&&(window.removeEventListener("resize",Z),m.dispose())}),[m,Z]);ie.useEffect((function(){return function(){S()}}),[S]),ie.useEffect((function(){Ti(a)&&Z()}),[a,Z]);var E=ie.useCallback(function(){var e,n=(e=J().mark((function e(n){var o,u,b,y,x,w;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&v.current!==n&&(!a||Ti(a))){e.next=3;break}return!m||l||c||m.focus(),e.abrupt("return");case 3:return v.current=n,m&&S(),e.next=7,Si.l.query({query:ke.DkS,variables:{replId:i}});case 7:return o=e.sent,u="Repl"===o.data.repl.__typename?o.data.repl:void 0,e.next=11,ki({loadFileParserAddon:p,onFileLinkClick:function(e,r,n){return g({wid:t,type:"OPEN_DEEP_LINK",path:e,line:r,col:n})},listFiles:d.listFiles,replSlug:null===u||void 0===u?void 0:u.slug});case 11:b=e.sent,h(b),b.open(n),y=null===u||void 0===u?void 0:u.lang.header,b.clear=function(){b.reset(),y&&b.write("".concat(y.replace(/\n/g,"\n\r"),"\n\r"))},b.clear(),x=b.rows,w=b.cols,g((0,ht.H2)({rows:x,cols:w,wid:t})),b.onData((function(e){if(s){var r=(0,yi.I)(e),n=f.mainClient.current;n&&"terminated"!==n.state.current?n.sendInput(r):g({type:"CONSOLE_INPUT",wid:t,input:r})}})),b.onResize((function(){g((0,ht.H2)({rows:x,cols:w,wid:t}))})),b.attachCustomKeyEventHandler((function(e){return(0,Oi.h)(b,e)})),l||c||b.focus(),window.addEventListener("resize",Z),g(Ri({wid:t,pud:r,term:b}));case 25:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Ci(i,n,a,o,l,"next",e)}function l(e){Ci(i,n,a,o,l,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}(),[g,S,a,Z,l,c,i,r,m,t,s,d,f,p]),O=(0,Ua.Fg)();return ie.useEffect((function(){m&&m.setTheme(O)}),[m,O]),(0,ee.tZ)(hi,{wid:t,pud:r,style:n,clearConsole:y,refCallback:E,findNext:x,findPrevious:w},"".concat(t).concat(r,"terminal2"))}function Ri(e){var t=e.wid,r=e.pud,n=e.term;return function(e,a){var i=(0,kt.Z)(a(),t,r,"terminal2").bufferedTermData;e({type:"CLEAR_BUFFERED_DATA",wid:t,pud:r});var o=!0,l=!1,c=void 0;try{for(var s,u=i[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var d=s.value;n.write(d)}}catch(f){l=!0,c=f}finally{try{o||null==u.return||u.return()}finally{if(l)throw c}}e({type:"SET_TERM",wid:t,pud:r,termHandle:ci.Z.getHandle(n)})}}function Li(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{termHandle:null,loadingEngine:!0,bufferedTermData:[],lite:!1,connectionLoadingStatus:{stage:-2},enabled:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ht.qg:return Ii({},e,t.initialState);case ht.zT:return Ii({},e,{termHandle:null,connectionLoadingStatus:{stage:-2}});case ht.hq:return Ii({},e,{loadingEngine:!0,bufferedTermData:[],connectionLoadingStatus:{stage:-1}});case ht.FG:return Ii({},e,{loadingEngine:!1});case"DISABLE_CONSOLE":return Ii({},e,{enabled:!1});case"ENABLE_CONSOLE":return Ii({},e,{enabled:!0});case"SET_TERM":return Ii({},e,{termHandle:t.termHandle});case"BUFFER_TERM_DATA":return Ii({},e,{bufferedTermData:e.bufferedTermData.concat(t.data)});case"CLEAR_BUFFERED_DATA":return Ii({},e,{bufferedTermData:[]});case"UPDATE_ENGINE_LOAD_STATUS":return Ii({},e,{connectionLoadingStatus:{stage:t.stage,progress:t.progress,total:t.total}});default:return e}}function Di(e,t,r){switch(r.type){case"EVAL_SETUP":return function(e){var t=e.wid,r=e.pud;return function(e,n){var a=(0,kt.Z)(n(),t,r,"terminal2"),i=a.termHandle,o=a.preventFocus;if(i&&!o&&i){var l=ci.Z.get(i);l&&l.focus()}}}({wid:e,pud:t});case ht.fv:return function(e){var t=e.wid,r=e.pud;return function(e,n){var a=(0,kt.Z)(n(),t,r,"terminal2").termHandle;if(a){var i=ci.Z.get(a);i&&i.clear()}}}({wid:e,pud:t});case ht.wP:return function(e){var t=e.wid,r=e.pud,n=e.message;return function(e,a){var i=(0,kt.Z)(a(),t,r,"terminal2"),o=i.termHandle;if(i.enabled){var l=n.data;if(n.raw||(l=l.replace(/\n/g,"\n\r"),"error"===n.type&&(l="\x1b[31m".concat(l,"\x1b[00m"))),o){var c=ci.Z.get(o);c?c.write(l):e({type:"BUFFER_TERM_DATA",wid:t,pud:r,data:l})}else e({type:"BUFFER_TERM_DATA",wid:t,pud:r,data:l})}}}({wid:e,pud:t,message:r.message});case ht.FG:return function(e){var t=e.wid,r=e.pud;return function(e,n){var a=(0,kt.Z)(n(),t,r,"terminal2").termHandle;if(a){var i=ci.Z.get(a);i&&e((0,ht.H2)({rows:i.rows,cols:i.cols,wid:t}))}}}({wid:e,pud:t});case"FIT_TERMINAL":return function(e){var t=e.wid,r=e.pud;return function(e,n){var a=(0,kt.Z)(n(),t,r,"terminal2").termHandle;if(a){var i=ci.Z.get(a);i&&i.fit()}}}({wid:e,pud:t});default:return null}}var Ui=r(59059),zi=r(43825);function Bi(){var e=(0,Ie.Z)().replbox;return(0,ee.tZ)(zi.Z,{replbox:e})}var Mi=(0,rt.$j)((function(e,t){return e.workspace[t.wid].plugins[t.pud].state}),{evalProject:ht.mT,stopEval:ht.Rl})((function(e){var t=e.wid,r=e.loading,n=e.runstate,a=e.maxWidthBreakpoint,i=e.evalProject,o=e.stopEval,l=(0,we.Z)(),c=(0,ke.Iz6)({variables:{id:l}}).data,s=un({replbox:(0,Ie.Z)().replbox}),u=(0,Ua.Fg)(),d="floating-run",f=function(){};if(c)if("Repl"===c.repl.__typename&&"replbox"===c.repl.lang.engine){var p=c.repl;s.runState===ln.A.OFFLINE||s.runState===ln.A.STOPPING?d+=" floating-run-loading":s.runState===ln.A.RUNNING?(d+=" floating-run-stop",f=function(){s.stopRun()}):s.runState===ln.A.IDLE&&(f=function(){s.run(),(0,ft.j)(ft.U3.PROJECT_RAN,{wid:t,language:p.language,replId:l,replTitle:p.title})})}else r||"stopping"===n?d+=" floating-run-loading":"running"===n?(d+=" floating-run-stop",f=function(){o({wid:t})}):f=function(){i({wid:t})};else d+=" floating-run-loading";return(0,ee.tZ)("div",{onClick:f,className:re().dynamic([["1b5b7ca75e1a6668",[u===Ua.V2.replitSpooky?"url(/public/images/run_orange.svg)":"url(/public/images/run_green.svg)",a]]])+" "+(d||""),children:(0,ee.tZ)(re(),{id:"1b5b7ca75e1a6668",dynamic:[u===Ua.V2.replitSpooky?"url(/public/images/run_orange.svg)":"url(/public/images/run_green.svg)",a],children:".floating-run.__jsx-style-dynamic-selector{display:none;position:absolute;bottom:24px;right:24px;height:50px;width:50px;-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;border:solid 2px var(--accent-positive-dimmer);cursor:pointer;background-image:".concat(u===Ua.V2.replitSpooky?"url(/public/images/run_orange.svg)":"url(/public/images/run_green.svg)",";-webkit-background-size:20px 20px;-moz-background-size:20px 20px;-o-background-size:20px 20px;background-size:20px 20px;background-position:center;background-repeat:no-repeat;background-color:var(--accent-positive-dimmest);z-index:1000;opacity:.5}.floating-run-loading.__jsx-style-dynamic-selector{background-image:url(/public/images/loading_dots.gif)}.floating-run-stop.__jsx-style-dynamic-selector{background-image:url(/public/images/stop_green.svg)}.run-cta.__jsx-style-dynamic-selector{background:var(--accent-primary-default);padding:var(--space-16);color:var(--white);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}@media screen and (max-width:").concat(a,"px){.floating-run.__jsx-style-dynamic-selector{display:block}}")})})})),Fi=Mi;function Xi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Xi(e,t,r[t])}))}return e}var Gi=(0,vt.$)({primary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0,maxWidthBreakpoint:500},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ht.qg:return Vi({},e,t.initialState);case ht.hq:return Vi({},e,{loading:!0});case ht.FG:return Vi({},e,{loading:!1});default:return e}},runstate:gt.Z}),Hi=r(11884),Wi=function(){var e=(0,ke.__3)().data;return(null===e||void 0===e?void 0:e.currentUser)?(0,ee.BX)("div",{className:"jsx-9a1cd8c5ee126c5d help-container",children:[(0,ee.tZ)(Hi.Z,{currentUser:e.currentUser,tooltipPlacement:"right"}),(0,ee.tZ)(re(),{id:"9a1cd8c5ee126c5d",children:".help-container.jsx-9a1cd8c5ee126c5d{position:absolute;left:var(--space-8);bottom:var(--space-16);z-index:20;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center;width:var(--space-32);height:var(--space-32);cursor:pointer;-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;background-color:var(--background-default);color:var(--foreground-dimmer);border:1px solid var(--background-highest);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-box-shadow:var(--shadow-1);-moz-box-shadow:var(--shadow-1);box-shadow:var(--shadow-1);-webkit-transition:.1s;-moz-transition:.1s;-o-transition:.1s;transition:.1s}.help-container.jsx-9a1cd8c5ee126c5d:hover{border:1px solid var(--outline-default);-webkit-box-shadow:var(--shadow-2);-moz-box-shadow:var(--shadow-2);box-shadow:var(--shadow-2)}.help-container.jsx-9a1cd8c5ee126c5d:active{border:1px solid var(--accent-primary-default);-webkit-box-shadow:var(--shadow-1);-moz-box-shadow:var(--shadow-1);box-shadow:var(--shadow-1)}"})]}):null},Ki=r(96544),qi=r(97811);function Yi(e){var t=(0,Ki.x)();return ie.useEffect((function(){(null===t||void 0===t?void 0:t.language)&&(0,ft.j)(ft.U3.LIBRARIES_SEARCHED,{language:null===t||void 0===t?void 0:t.language})}),[null===t||void 0===t?void 0:t.language]),(0,ee.BX)(pn.Z,{background:"default",css:{justifyContent:"flex-start",borderTopRightRadius:Ze.TV.borderRadius4,borderBottomRightRadius:Ze.TV.borderRadius4,height:"100%"},children:[(0,ee.tZ)(Et.Z,{css:{position:"relative",height:Ze.TV.space48,justifyContent:"center",padding:Ze.TV.space12},children:(0,ee.tZ)(Ar.h,{variant:"subheadBig",level:3,children:"Packages"})}),(0,ee.tZ)(qi.Z,{}),(0,ee.tZ)(re(),{id:"7af3c6fe75261cd3",children:".pkgsearch-header.jsx-7af3c6fe75261cd3{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;height:var(--space-48);padding:var(--space-16)var(--space-8);position:relative;color:var(--foreground-default);width:100%}"})]})}var $i=r(23754);function Qi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ji(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Qi(e,t,r[t])}))}return e}var eo=function(e){var t=e.style,r=(0,Ie.Z)().fs,n=(0,Er.Z)(),a=(0,Ga.Z)();return n?(0,ee.tZ)(Et.Z,{css:Ji({},t,{zIndex:3,position:"relative",boxShadow:a?"0 3px 0 3px ".concat(a):"0"}),children:(0,ee.tZ)($i.Z,{filePath:n,fs:r})}):(0,ee.tZ)("div",{style:t,children:"No file to show"})},to=r(27349),ro=r(85133);function no(e){var t=e.wid,r=e.style,n=(0,ro.Z)(),a=(0,rt.I0)();return ie.useEffect((function(){n&&(0,ft.j)(ft.U3.PREFERENCES_OPENED,{wid:t,language:n.language})}),[t,n]),(0,ee.BX)("div",{style:r,className:"jsx-b9be03467a615027 workspace-preferences",children:[(0,ee.tZ)("div",{className:"jsx-b9be03467a615027 preferences-header",children:(0,ee.tZ)(Ne.Z,{level:4,children:"Settings"})}),(0,ee.tZ)(to.Z,{onBeforePreferencesUpdate:function(e){void 0!==e.isLayoutStacked&&a(function(e,t){return function(r,n){var a=n().workspace[e],i=a.layout,o=a.plugins,l=bt.PP(i,o,"editor")||bt.PP(i,o,"codemirror")||bt.PP(i,o,"blank")||bt.PP(i,o,"markdownviewer")||bt.PP(i,o,"mediaview"),c=bt.PP(i,o,"console")||bt.PP(i,o,"terminal2");if(c&&l){var s=bt.i3(l,c);if(s){r((0,ht.fc)({wid:e,path:s,property:"stacked",to:t}));var u=bt.PP(i,o,"webview")||bt.PP(i,o,"replboxdisplay");if(u){var d=bt.i3(u,c);d&&r((0,ht.fc)({wid:e,path:d,property:"stacked",to:!t}))}}}}}(t,e.isLayoutStacked)),a({type:ht.Dq,wid:t,updates:e})}}),(0,ee.tZ)(re(),{id:"b9be03467a615027",children:".workspace-preferences.jsx-b9be03467a615027{background:var(--background-default);-webkit-border-top-right-radius:var(--border-radius-4);-moz-border-radius-topright:var(--border-radius-4);border-top-right-radius:var(--border-radius-4);-webkit-border-bottom-right-radius:var(--border-radius-4);-moz-border-radius-bottomright:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);overflow-y:auto}.preferences-header.jsx-b9be03467a615027{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;height:var(--space-48);padding:var(--space-16)var(--space-8);color:var(--foreground-default);width:100%}"})]})}var ao=r(17518),io=r(80032);function oo(){var e=(0,Ie.Z)().replbox;return(0,ee.tZ)(io.Z,{replbox:e})}function lo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function co(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function so(e){return so=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},so(e)}function uo(e,t){return!t||"object"!==po(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fo(e,t){return fo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},fo(e,t)}var po=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function bo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=so(e);if(t){var a=so(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return uo(this,r)}}var mo=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fo(e,t)}(i,e);var t,r,n,a=bo(i);function i(){return lo(this,i),a.apply(this,arguments)}return t=i,(r=[{key:"render",value:function(){return(0,ee.BX)("div",{style:this.props.style,className:"jsx-f64f5253718b04a2 react-native-container",children:[(0,ee.BX)("div",{className:"jsx-f64f5253718b04a2 react-native-content",children:[(0,ee.tZ)("div",{style:{fontSize:"25px",textAlign:"center"},className:"jsx-f64f5253718b04a2",children:"\ud83d\ude14"}),(0,ee.tZ)("br",{className:"jsx-f64f5253718b04a2"}),(0,ee.tZ)("br",{className:"jsx-f64f5253718b04a2"}),"We have discontinued support for React Native on Replit to focus more on other languages that use our infrastracture. We had a good run and we're happy to have served thousands of users play with mobile apps using their favorite web IDE.",(0,ee.tZ)("br",{className:"jsx-f64f5253718b04a2"}),(0,ee.tZ)("br",{className:"jsx-f64f5253718b04a2"}),"You can checkout our"," ",(0,ee.tZ)(jt.default,{href:"/languages",children:(0,ee.tZ)("a",{className:"jsx-f64f5253718b04a2",children:"broad list of languages."})}),(0,ee.tZ)("br",{className:"jsx-f64f5253718b04a2"}),(0,ee.tZ)("br",{className:"jsx-f64f5253718b04a2"}),"For React Native you should head over to"," ",(0,ee.tZ)("a",{href:"https://snack.expo.io/",target:"_blank",className:"jsx-f64f5253718b04a2",children:"Snack"})," ","where our friends at ",(0,ee.tZ)("a",{href:"https://expo.io/",className:"jsx-f64f5253718b04a2",children:"Expo"})," have created a playground dedicated to React Native mobile development."]}),(0,ee.tZ)(re(),{id:"f64f5253718b04a2",children:".react-native-container.jsx-f64f5253718b04a2{font-size:17px;line-height:1.2}.react-native-content.jsx-f64f5253718b04a2{max-width:800px;margin:30px auto}"})]})}}])&&co(t.prototype,r),n&&co(t,n),i}(ie.Component),ho=r(72590),vo=r(85264);function go(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){yo(e,t,r[t])}))}return e}function wo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return go(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return go(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ko="CONNECT_VNC",jo="SET_VNC_URL",Zo="LOADING_GOVAL_STARTED";function So(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{vncUrl:"",connectCalled:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case jo:return xo({},e,{vncUrl:t.vncUrl});case ko:return xo({},e,{connectCalled:!0,vncUrl:t.vncUrl});case Zo:return xo({},e,{connectCalled:!1});default:return e}}var Eo=function(e){var t=e.wid,r=e.pud,n=wo((0,kt.J)(t,r,"vnc"),1)[0].connectCalled,a=(0,Ie.Z)(),i=a.fs,o=a.container;return ie.useContext(vo.F)?(0,ee.tZ)(vo.Y,{}):n?(0,ee.BX)("div",{className:"jsx-37dc34cb08fbd4af",children:[(0,ee.tZ)(ho.Z,{container:o,fs:i}),(0,ee.tZ)(re(),{id:"37dc34cb08fbd4af",children:"div.jsx-37dc34cb08fbd4af{background:var(--background-root);height:100%;width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center}"})]}):(0,ee.BX)("div",{className:"jsx-14fc1afaac340708",children:[(0,ee.BX)(ge.Z,{children:[(0,ee.tZ)(ge.Z,{style:{color:"var(--accent-positive-default)"},children:"Run "}),"your repl to see output"]}),(0,ee.tZ)(re(),{id:"14fc1afaac340708",children:"div.jsx-14fc1afaac340708{background:var(--background-root);height:100%;width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center}"})]})};function Oo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _o(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function Co(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Oo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ao=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rcv=function(e){var r=!0,n=!1,a=void 0;try{for(var i,o=t.waits.entries()[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var l=Co(i.value,2),c=l[0],s=l[1],u=void 0;try{u=c(e)}catch(f){return t.waits.delete(c),void s.reject(f)}if("boolean"!==typeof u){t.waits.delete(c);var d=new Error("Your wait callback must return a boolean");return void s.reject(d)}u&&(t.waits.delete(c),s.resolve(e))}}catch(p){n=!0,a=p}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}};var r=this;this.wait=function(){var e,t=(e=J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){r.waits.set(t,{resolve:e,reject:n})})));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){_o(i,n,a,o,l,"next",e)}function l(e){_o(i,n,a,o,l,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),this.waits=new Map};var Io=function(e){var t=[],r=null;return{receiver:function(e){var t={};return function(r,n,a){return t[r+n]||(t[r+n]=new Ao),t[r+n].rcv(a),e(r,n,a,t[r+n].wait)}}((function(n,a,i,o){var l={wid:n,pud:a,action:i,wait:o};return e&&!e.includes(l.action.type)?null:r?(r(l),null):(t.push(l),null)})),useReceiver:function(e){var n,a;ie.useDebugValue("Captured events: ".concat(t.length)),ie.useDebugValue("First event: ".concat(null===(n=t[0])||void 0===n?void 0:n.action.type)),ie.useDebugValue("Last event: ".concat(null===(a=t[t.length-1])||void 0===a?void 0:a.action.type)),ie.useEffect((function(){if(null!==r)throw new Error("Expected callback to be null, please useReceiver once in your plugin, or avoid using multiple instances of the plugin");return t.forEach(e),t=[],r=e,function(){r=null}}),[e])}}},No=r(89011);function To(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Po(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ro(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Po(e,t,r[t])}))}return e}function Lo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return To(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return To(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Do(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{canBeClosed:!1,autoReload:!1},t=arguments.length>1?arguments[1]:void 0;return t.type===ht.qg?Ro({},e,t.initialState):e}var Uo=Io(["REFRESH_WEBVIEW","EVAL_ENDED","FILE_CLEAN"]),zo=Uo.receiver,Bo=Uo.useReceiver;function Mo(e){var t=e.wid,r=e.pud,n=(0,rt.I0)(),a=(0,we.Z)(),i=Lo((0,kt.J)(t,r,"webview"),1)[0],o=i.canBeClosed,l=i.autoReload,c=Lo((0,ke.Qte)(),2),s=c[0],u=c[1],d=(0,qt.Z)().showError;ie.useEffect((function(){u.error&&d(u.error)}),[u.error,d]),ie.useEffect((function(){if(u.data){var e=u.data.updateRepl.repl.config;n({wid:t,type:"REPL_UPDATED",updates:{config:e}})}}),[u.data,n,t]);var f=ie.useRef(null),p=(0,Ie.Z)().fs;return Bo((function(e){switch(e.action.type){case"EVAL_ENDED":case"REFRESH_WEBVIEW":var t;null===(t=f.current)||void 0===t||t.refresh();break;case"FILE_CLEAN":var r;if(l)null===(r=f.current)||void 0===r||r.refresh()}return null})),(0,ee.tZ)(No.Z,{ref:f,fs:p,trackUrlSelect:function(e){n((0,ht.R$)({wid:t,eventKey:"WEB_HOSTING_URL_SELECTED",properties:{url:e},trackOnce:!0}))},canBeClosed:o,onClose:function(){s({variables:{input:{id:a,isServer:!1}}}),n(function(e){var t=e.wid,r=e.pud;return function(e,n){var a=n().workspace[t].layout,i=bt.Od(a,r),o=i.path,l=i.to;e((0,ht.fc)({wid:t,path:o,to:l,property:null})),e({type:"UNLOAD_PLUGIN",wid:t,pud:r})}}({wid:t,pud:r}))}})}function Fo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Xo(e,t,r[t])}))}return e}function Go(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Fo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ho={};function Wo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ho,t=arguments.length>1?arguments[1]:void 0,r=function(){switch(t.type){case"FILE_UNLOAD":return Vo({},e,Xo({},t.path,{path:t.path,loaded:!1}));case"FILE_LOADED":case"FILE_CACHE_HIT":return Vo({},e,Xo({},t.path,Vo({},e[t.path],t.file)));case"CREATE_FILE":return Vo({},e,Xo({},t.path,t.file||{path:t.path,loaded:!1}));case"MOVE_FILE":var r=(0,wa.vk)(e,t.path,t.to);if(!r.length)return e;var n=Vo({},e);return r.forEach((function(t){var r=Go(t,2),a=r[0],i=r[1];delete n[a];var o=e[a];if(!o)throw new Error("No source file!");n[i]=Vo({},o,{path:i})})),n;case"DELETE_FILE":var a=(0,wa.GA)(e,t.path);if(a.length&&e[t.path])throw new ja.default("matched children and node while deleting").setExtras({path:t.path,fileState:e});var i=Vo({},e);return a.length?a.forEach((function(e){delete i[e]})):delete i[t.path],i;case"OT_FILE_OP":if(!t.changeSource)throw new Error("Expected changeSource on action OT_FILE_OP got "+JSON.stringify(t));var o=e[t.path];if(!o)throw new Error("tried to perform an OT op on "+t.path+" but we don't know about that file.");if(!o.loaded)return e;var l=Ko(Pn.Z.from(o.content).toString("utf8"),t.op);return Vo({},e,Xo({},t.path,Vo({},o,{content:Pn.Z.from(l)})));default:return e}}();return t.path&&r!==e&&!e[t.path]&&r[t.path]&&"CREATE_FILE"!==t.type&&st.$e((function(r){r.setExtra("action",t),r.setExtra("prevstate",e),st.Tb(new Error("created file without using CREATE_FILE or FILE_CACHE_HIT"))})),r}function Ko(e,t){var r=e,n=0,a=!0,i=!1,o=void 0;try{for(var l,c=t[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var s=l.value;if("string"===typeof s)r=r.slice(0,n)+s+r.slice(n),n+=s.length;else if("object"===typeof s&&"number"===typeof s.d)r=r.slice(0,n)+r.slice(n+s.d);else{if("number"!==typeof s)throw new Error("bad ot op: "+s);n+=s}}}catch(u){i=!0,o=u}finally{try{a||null==c.return||c.return()}finally{if(i)throw o}}return r}function qo(e){var t=e.wid;return function(e,r){var n=r(),a=n.workspace?n.workspace[t]:n,i=function(e,t){var r=bt.PP(e,t,"fileheader");if(!r)throw new Error("expected to find fileHeader in layout!");return window["flag-windowing"]?bt.Il(r):bt.J9(r)}(a.layout,a.plugins);if(!i)throw new Error("No editor mounted");e({type:"UPDATE_LAYOUT",wid:t,path:i,to:"blank",property:"pud"})}}function Yo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Yo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Jo="fileviewercontroller";function el(e){return(0,_r.T3)(e)?"mediaview":(0,_r.sL)(e)?"draw":(0,_r.IQ)(e)?"pedit":"codemirror"}function tl(e){var t=e.wid,r=e.pud,n=e.path;return function(e,a){if(window["open-markdown-split"]&&"md"!==(0,_r.r6)(n)){var i=a().workspace[t],o=i.layout,l=i.plugins;if(bt.PP(o,l,"markdownviewer")){var c=Object.keys(l).find((function(e){return"markdownviewer"===l[e].type}));if(!c)throw new Error("Expect a markdownviewer to be in pluginlist");e(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){$o(e,t,r[t])}))}return e}({type:"UPDATE_LAYOUT",wid:t},bt.Od(o,c)))}}var s=a().workspace[t],u=function(e,t){var r=bt.PP(e,t,"fileheader");if(!r)throw new Error("expected to find fileHeader in layout!");return window["flag-windowing"]?bt.Il(r):bt.J9(r)}(s.layout,s.plugins);if(!u)throw new Error("No editor mounted");var d=(0,kt.Z)(a(),t,r,Jo).files[n];d&&d.loaded||e({type:"LOAD_FILE",wid:t,path:n}),e({type:"UPDATE_LAYOUT",wid:t,path:u,to:el(n),property:"pud"})}}var rl=Io(["WORKSPACE_MOUNTED","FILE_UNLOAD","OPEN_FILE","MOVE_FILE","DELETE_FILE","WORKSPACE_WILL_UNMOUNT"]),nl=rl.receiver,al=rl.useReceiver;function il(e){var t=e.wid,r=e.pud,n=(0,rt.I0)(),a=(0,Ie.Z)().session,i=Xa(),o=Qo(ie.useState(!1),2),l=o[0],c=o[1],s=Qo((0,kt.J)(t,r,"fileviewercontroller"),1)[0].files,u=(0,rt.v9)((function(e){return e.workspace[t].activeFile}));return ie.useEffect((function(){i&&(s[i]||u&&"md"===(0,_r.r6)(u)||a.setPreviewedFile(null))}),[i,a,s,u]),ie.useEffect((function(){u&&"md"===(0,_r.r6)(u)&&a.setPreviewedFile(u)}),[a,u]),al((function(e){var a=e.action;switch(a.type){case"WORKSPACE_MOUNTED":if(c(!0),!u)break;n({type:"LOAD_FILE",wid:t,path:u});break;case"FILE_UNLOAD":if(!l)break;var i=a.path;n(function(e){var t=e.wid,r=e.path;return function(e,n){setTimeout((function(){var a=n().workspace[t].activeFile;r===a&&e({type:"LOAD_FILE",wid:t,path:a})}))}}({wid:t,path:i}));break;case"OPEN_FILE":var o=a.path;if(!o)break;n(tl({wid:t,pud:r,path:o}));break;case"MOVE_FILE":var s=a.path,d=a.to;if(u!==s)break;n({type:"OPEN_FILE",wid:t,path:d});break;case"DELETE_FILE":var f=a.path;n(function(e){var t=e.wid,r=e.pud,n=e.path;return function(e,a){var i=a().workspace[t].activeFile;if(i&&(i===n||(0,wa.yr)(n,i))){var o=(0,kt.Z)(a(),t,r,Jo).files,l=Object.keys(o).concat(n).sort(),c=l.indexOf(n),s=l[0===c?1:c-1];e(void 0!==s?{type:"OPEN_FILE",wid:t,path:s}:qo({wid:t}))}}}({wid:t,pud:r,path:f}));break;case"WORKSPACE_WILL_UNMOUNT":c(!1)}return null})),null}var ol=(0,vt.$)({files:Wo}),ll=r(24561);function cl(e){var t=e.preventHighlightBorder,r=(0,Ga.Z)();return(0,ee.BX)("div",{className:re().dynamic([["ce19fd45a6bcd165",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])+" loader",children:[(0,ee.tZ)("div",{className:re().dynamic([["ce19fd45a6bcd165",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])+" wrap",children:(0,ee.BX)(ll.ZP,{primaryColor:"var(--background-highest)",secondaryColor:"var(--background-higher)",uniquekey:"editorLoader",children:[(0,ee.tZ)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"70",height:"10",className:re().dynamic([["ce19fd45a6bcd165",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])}),(0,ee.tZ)("rect",{x:"80",y:"0",rx:"3",ry:"3",width:"100",height:"10",className:re().dynamic([["ce19fd45a6bcd165",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])}),(0,ee.tZ)("rect",{x:"190",y:"0",rx:"3",ry:"3",width:"10",height:"10",className:re().dynamic([["ce19fd45a6bcd165",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])}),(0,ee.tZ)("rect",{x:"15",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:re().dynamic([["ce19fd45a6bcd165",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])}),(0,ee.tZ)("rect",{x:"155",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:re().dynamic([["ce19fd45a6bcd165",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])}),(0,ee.tZ)("rect",{x:"15",y:"40",rx:"3",ry:"3",width:"90",height:"10",className:re().dynamic([["ce19fd45a6bcd165",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])}),(0,ee.tZ)("rect",{x:"115",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:re().dynamic([["ce19fd45a6bcd165",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])}),(0,ee.tZ)("rect",{x:"185",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:re().dynamic([["ce19fd45a6bcd165",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])}),(0,ee.tZ)("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"30",height:"10",className:re().dynamic([["ce19fd45a6bcd165",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])}),(0,ee.tZ)("rect",{x:"15",y:"80",rx:"3",ry:"3",width:"70",height:"10",className:re().dynamic([["ce19fd45a6bcd165",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])}),(0,ee.tZ)("rect",{x:"95",y:"80",rx:"3",ry:"3",width:"60",height:"10",className:re().dynamic([["ce19fd45a6bcd165",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])}),(0,ee.tZ)("rect",{x:"165",y:"80",rx:"3",ry:"3",width:"30",height:"10",className:re().dynamic([["ce19fd45a6bcd165",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])}),(0,ee.tZ)("rect",{x:"15",y:"100",rx:"3",ry:"3",width:"110",height:"10",className:re().dynamic([["ce19fd45a6bcd165",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])}),(0,ee.tZ)("rect",{x:"135",y:"100",rx:"3",ry:"3",width:"100",height:"10",className:re().dynamic([["ce19fd45a6bcd165",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])}),(0,ee.tZ)("rect",{x:"0",y:"120",rx:"3",ry:"3",width:"70",height:"10",className:re().dynamic([["ce19fd45a6bcd165",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])})]})}),(0,ee.tZ)(re(),{id:"ce19fd45a6bcd165",dynamic:[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"],children:".loader.__jsx-style-dynamic-selector{position:absolute;z-index:3;right:0;top:0;height:100%;width:100%;background-color:var(--background-default);overflow:hidden;padding:var(--space-16);-webkit-border-bottom-right-radius:var(--border-radius-4);-moz-border-radius-bottomright:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);-webkit-border-bottom-left-radius:var(--border-radius-4);-moz-border-radius-bottomleft:var(--border-radius-4);border-bottom-left-radius:var(--border-radius-4);-webkit-box-shadow:".concat(r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)",";-moz-box-shadow:").concat(r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)",";box-shadow:").concat(r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)","}.wrap.__jsx-style-dynamic-selector{overflow:hidden}.wrap.__jsx-style-dynamic-selector>svg{max-width:640px;min-width:500px;height:auto}@media screen and (min-width:900px){.loader.__jsx-style-dynamic-selector{padding:30px}}")})]})}function sl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ul(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return sl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dl(){var e=(0,Ie.Z)().session,t=ul(ie.useState(e.getCursorPosition()),2),r=t[0],n=t[1];return ie.useEffect((function(){return n(e.getCursorPosition()),e.onCursorPositionChanged(n)}),[e]),r}var fl=r(85252),pl=r(79399),bl=r(95694),ml=r(45734),hl=r(92432);function vl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function gl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return vl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var yl=(0,Zi.Z)((function(e){e.scrollIntoView({behavior:"smooth",block:"center"})}),100),xl=ie.memo(pl.Z),wl=function(e){var t=(0,Ie.Z)().fs,r=dl(),n=(0,Er.Z)(),a=(0,Ie.Z)().session,i=gl(ie.useState(!1),2),o=i[0],l=i[1],c=Xa(),s=gl(ie.useState(!0),2),u=s[0],d=s[1];ie.useEffect((function(){n&&c!==n&&"md"===(0,_r.r6)(n)&&a.setPreviewedFile(n)}),[c,n,a]);var f=ie.useRef(null),p=(0,fl.Z)((function(){l(!0),f.current&&clearTimeout(f.current),f.current=setTimeout((function(){l(!1)}),150)}),{type:"throttle",wait:37.5});ie.useLayoutEffect((function(){if(!o&&n===c){var e=document.querySelectorAll(".rendered-markdown [data-sourcepos]"),t=Array.from(e);if(t){var a=r.lineNumber,i=r.column,l=!0,s=!1,u=void 0;try{for(var d,f=t[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=d.value,b=p.dataset.sourcepos;if(!b)throw new Error("Expected data source pos on selected element");var m=gl(b.split("-"),2),h=m[0],v=m[1],g=gl(h.split(":").map(Number),2),y=g[0],x=g[1],w=gl(v.split(":").map(Number),2),k=w[0],j=w[1];if(a>=y&&i>=x&&(a<k||a===k&&i<=j))return void yl(p)}}catch(Z){s=!0,u=Z}finally{try{l||null==f.return||f.return()}finally{if(s)throw u}}}}}),[r,o,n,c]);var b,m,h,v=gl(ie.useState(null),2),g=v[0],y=v[1];return ie.useEffect((function(){if(y(null),c&&(0,_r.Mb)(c))return t.watchOtFile(c,{onReady:function(e){var t=e.initialContent;y(t.toString())},onChange:function(e){var t=e.latestContent;y(t)}})}),[c,t]),c?null===g?(0,ee.tZ)(cl,{preventHighlightBorder:!0}):(0,ee.BX)(bl.G7,{css:[bl.l0.colWithGap(8),bl.l0.height("100%"),bl.l0.width("100%"),bl.l0.overflow("auto"),bl.l0.backgroundColor.backgroundDefault,bl.l0.zIndex(2),bl.l0.align.center,bl.l0.py(16),bl.l0.px(16),(b={margin:"0 auto"},m="@media only screen and (min-width: ".concat(he.j.tabletMin,"px)"),h=bl.l0.px(32),m in b?Object.defineProperty(b,m,{value:h,enumerable:!0,configurable:!0,writable:!0}):b[m]=h,b)],tag:"div",innerRef:p,children:[(0,ee.BX)(bl.G7,{css:[bl.l0.rowWithGap(0),bl.l0.height(30),bl.l0.width("100%"),bl.l0.justify.spaceBetween,bl.l0.align.center,bl.l0.backgroundColor.backgroundDefault],children:[(0,ee.tZ)(kl,{}),(0,ee.tZ)(bl.hU,{alt:u?"Unconstrain content width":"Constrain content width",onClick:function(){return d((function(e){return!e}))},children:(0,ee.BX)(bl.G7,{css:[bl.l0.rowWithGap(0),bl.l0.align.center],children:[u?(0,ee.tZ)(ml.Z,{}):(0,ee.tZ)(hl.Z,{}),u?(0,ee.tZ)(hl.Z,{}):(0,ee.tZ)(ml.Z,{})]})})]}),(0,ee.tZ)(bl.G7,{css:[u&&bl.l0.maxWidth(840),bl.l0.width("100%")],children:(0,ee.tZ)(xl,{path:c,source:g,fs:t,sourcePos:!0})})]}):(0,ee.tZ)("div",{style:e.style,children:"No current file"})},kl=function(){var e=Xa();return(0,ee.BX)(bl.G7,{css:[bl.l0.rowWithGap(2),bl.l0.color.foregroundDimmer,bl.l0.width("calc(100% - ".concat(bl.TV.space16,")")),bl.l0.align.center],children:[(0,ee.tZ)(Ht.Z,{}),(0,ee.BX)(bl.xv,{css:bl.l0.m(4),color:"dimmer",children:["Preview of ",(0,ee.tZ)("a",{href:"#".concat(e),children:e})]})]})},jl=r(60001),Zl=r(38732),Sl=r(57923),El=r(25108);function Ol(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ol(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ol(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Al=".lesson/".concat("instructions.md"),Il=function(e){var t=e.contents,r=(0,Ie.Z)().fs,n=(0,Zl.Z)(r,Al);return(0,ee.BX)("div",{className:re().dynamic([["21a55501dce7f81b",[he.j.tabletMin]]])+" root",children:[(0,ee.tZ)("div",{className:re().dynamic([["21a55501dce7f81b",[he.j.tabletMin]]])+" content",children:(0,ee.tZ)(jl.Z,{components:{img:n},sourcePos:!0,children:t})}),(0,ee.tZ)(re(),{id:"21a55501dce7f81b",dynamic:[he.j.tabletMin],children:".root.__jsx-style-dynamic-selector{height:100%;width:100%;overflow:auto;background:var(--background-default);z-index:2;position:relative}.content.__jsx-style-dynamic-selector{max-width:840px;margin:0 auto;padding:var(--space-32)var(--space-16)}@media only screen and (min-width:".concat(he.j.tabletMin,"px){.content.__jsx-style-dynamic-selector{padding:var(--space-48)var(--space-32)}}")})]})},Nl=function(e){var t=(0,we.Z)(),r=(0,Ie.Z)().fs,n=(0,Sl.Z)(),a=Cl(ie.useState(null),2),i=a[0],o=a[1];return ie.useEffect((function(){r.readFile(Al).then((function(e){if(n.current)return e.error?(El.error(e.error),void st.$e((function(t){t.setTag("instructions-viewer",!0),st.Tb("Error loading instructions viewier: ".concat(e.error))}))):void o(e.content.toString())}))}),[r,n,t]),i?(0,ee.tZ)(Il,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){_l(e,t,r[t])}))}return e}({},e,{contents:i})):(0,ee.tZ)(cl,{preventHighlightBorder:!0})},Tl=Nl,Pl=r(89957),Rl=r(5420);function Ll(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Dl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ul(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Dl(e,t,r[t])}))}return e}function zl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ll(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ll(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Bl=function(e){var t=e.logs,r=e.timeRef,n=e.setTimeRef;return(0,ee.BX)("div",{className:"jsx-20359c57abb6776a log-list",children:[t.map((function(e){var t=JSON.stringify(e.cmd,null,2),a=r?e.timestamp-r:e.timestamp;return(0,ee.BX)("div",{className:"jsx-20359c57abb6776a "+("log "+(e.highlighted?"highlighted ":"")+("in"===e.dir?"in":"")||0),children:[(0,ee.BX)("div",{className:"jsx-20359c57abb6776a direction",children:[(0,ee.tZ)("div",{className:"jsx-20359c57abb6776a",children:e.dir}),(0,ee.tZ)("div",{className:"jsx-20359c57abb6776a",children:"in"===e.dir?"\u25b6\ufe0f":"\u2b05\ufe0f"}),(0,ee.tZ)("div",{className:"jsx-20359c57abb6776a",children:(0,ee.BX)(ve.Z,{size:"small",filled:!0,color:"positive",onClick:function(){return n(e.timestamp)},children:[a.toFixed(0),"ms"]})})]}),(0,ee.tZ)("pre",{className:"jsx-20359c57abb6776a",children:t})]},e.index)})),(0,ee.tZ)("div",{className:"jsx-20359c57abb6776a bottom-anchor"}),(0,ee.tZ)(re(),{id:"20359c57abb6776a",children:".log-list.jsx-20359c57abb6776a{overflow:auto;height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.log-list.jsx-20359c57abb6776a *.jsx-20359c57abb6776a{overflow-anchor:none}.bottom-anchor.jsx-20359c57abb6776a{overflow-anchor:auto!important;min-height:1px}.log.jsx-20359c57abb6776a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:deepskyblue;border:1px solid;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.in.jsx-20359c57abb6776a{color:red}.highlighted.jsx-20359c57abb6776a{background:yellow}.direction.jsx-20359c57abb6776a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-justify-content:space-evenly;justify-content:space-evenly;text-align:center;min-width:30px;border-right:1px solid}.direction.jsx-20359c57abb6776a>div.jsx-20359c57abb6776a:not(:last-child){border-bottom:1px solid;width:100%}"})]})};var Ml=function(e){var t=e.filters,r=e.updateFilters;return(0,ee.BX)(Et.Z,{css:Ze.l0.colWithGap(4),children:[(0,ee.tZ)(Ar.x,{variant:"subheadDefault",children:"Regex (regex,flags):"}),(0,ee.tZ)(Pl.ZP,{id:"regex",onChange:function(e){var t=null;if(e.currentTarget.value){var n=zl(e.currentTarget.value.split(","),2),a=n[0],i=n[1];try{t=new RegExp(a,i)}catch(o){}}r({regexp:t})},placeholder:"\\w+,gi"}),(0,ee.tZ)(Ar.x,{variant:"subheadDefault",children:"Directions:"}),(0,ee.tZ)(Rl.E,{css:Ze.l0.rowWithGap(16),name:"direction",value:t.direction,onChange:function(e){var t,n=e.target.value;r({direction:(t=n,"in"===t||"out"===t||""===t?n:"")})},children:[{val:"",text:"Both"},{val:"in",text:"In"},{val:"out",text:"Out"}].map((function(e){return(0,ee.BX)(Et.Z,{css:[Ze.l0.rowWithGap(8)],children:[(0,ee.tZ)(Rl.Y,{id:e.val,value:e.val}),(0,ee.tZ)("label",{htmlFor:e.val,children:e.text})]})}))}),(0,ee.tZ)(Ar.x,{variant:"subheadDefault",children:"Filter style:"}),(0,ee.tZ)(Rl.E,{css:Ze.l0.rowWithGap(16),name:"filter-style",value:t.highlightOnly?"highlight":"filter",onChange:function(e){return r({highlightOnly:"highlight"===e.target.value})},children:[{val:"highlight",text:"Highlight"},{val:"filter",text:"Filter"}].map((function(e){return(0,ee.BX)(Et.Z,{css:[Ze.l0.rowWithGap(8)],children:[(0,ee.tZ)(Rl.Y,{id:e.val,value:e.val}),(0,ee.tZ)("label",{htmlFor:e.val,children:e.text})]})}))})]})},Fl=function(e,t){if(!t.regexp&&!t.direction)return e.map((function(e){return Ul({},e,{highlighted:!1})}));var r=function(e){var r=e.dir,n=e.cmd;return(!t.direction||r===t.direction)&&!(t.regexp&&t.regexp.test&&!t.regexp.test(JSON.stringify(n)))};return t.highlightOnly?e.map((function(e){return r(e)?Ul({},e,{highlighted:!0}):e})):e.filter(r)},Xl=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=zl(ie.useState(e),2),r=t[0],n=t[1],a=ie.useCallback((function(){return n((function(e){return!e}))}),[]);return[r,a]},Vl=function(e){var t=e.wid,r=e.pud,n=zl(Xl(!0),2),a=n[0],i=n[1],o=zl(ie.useState(null),2),l=o[0],c=o[1],s=zl((0,kt.J)(t,r,"adminpanel"),2),u=s[0],d=u.crosisDebug,f=u.filters,p=u.crosisLogs,b=s[1],m=(0,rt.I0)();return d?(0,ee.BX)("div",{className:"jsx-2f549e2fe3454f6a crosis-logs",children:[(0,ee.BX)("div",{className:"jsx-2f549e2fe3454f6a",children:[(0,ee.BX)("div",{className:"jsx-2f549e2fe3454f6a buttons",children:[(0,ee.tZ)(ve.Z,{color:"orange",onClick:i,children:a?"hide filters":"show filters"}),l&&(0,ee.tZ)(ve.Z,{color:"negative",onClick:function(){return c(null)},children:"Reset Time Ref"}),(0,ee.tZ)(ve.Z,{color:"negative",onClick:function(){return m({type:"CLEAR_CROSIS_LOGS",wid:t})},children:"Clear logs"})]}),a?(0,ee.tZ)(Ml,{filters:f,updateFilters:function(e){b({filters:Ul({},f,e)})}}):null]}),(0,ee.tZ)(Bl,{logs:Fl(p,f),timeRef:l,setTimeRef:c}),(0,ee.tZ)(re(),{id:"2f549e2fe3454f6a",children:".crosis-logs.jsx-2f549e2fe3454f6a{height:100%;width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.buttons.jsx-2f549e2fe3454f6a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}"})]}):(0,ee.tZ)(ve.Z,{color:"positive",filled:!0,onClick:function(){b({crosisDebug:!0}),m({type:"START_CROSIS_ADMIN_LOGS",wid:t})},children:"Start logging crosis v5"})},Gl=r(68004),Hl=r(1311);function Wl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Kl(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function ql(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Kl(i,n,a,o,l,"next",e)}function l(e){Kl(i,n,a,o,l,"throw",e)}o(void 0)}))}}function Yl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Yl(e,t,r[t])}))}return e}function Ql(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Jl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Wl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ec=function(e){var t=e.wid,r=e.pud,n=Jl((0,kt.J)(t,r,"adminpanel"),1)[0].token,a=(0,rt.I0)();return n?(0,ee.BX)("div",{className:"jsx-2e9ac5ab034fc317 token-viewer",children:[(0,ee.BX)("div",{className:"jsx-2e9ac5ab034fc317",children:["raw:",(0,ee.tZ)("pre",{className:"jsx-2e9ac5ab034fc317",children:n})]}),(0,ee.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,ee.BX)("div",{className:"jsx-2e9ac5ab034fc317",children:["parsed:",(0,ee.tZ)("pre",{className:"jsx-2e9ac5ab034fc317",children:JSON.stringify((0,Hl.h)(n),null,2)})]}),(0,ee.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,ee.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,ee.tZ)(tc,{token:n,setToken:function(e){a({wid:t,type:"USE_CUSTOM_TOKEN",customToken:e})},becomeOwner:function(){a({wid:t,type:"REPL_UPDATED",updates:{isOwner:!0}})}}),(0,ee.tZ)(re(),{id:"2e9ac5ab034fc317",children:".token-viewer.jsx-2e9ac5ab034fc317{height:100%;overflow:auto;padding:10px}pre.jsx-2e9ac5ab034fc317{white-space:pre-wrap;word-wrap:break-word}"})]}):(0,ee.tZ)("div",{children:"no token yet, wait for connection"})},tc=function(e){var t=e.token,r=e.setToken,n=e.becomeOwner,a=Jl(ie.useState((function(){var e=(0,Hl.h)(t),r=(e.salt,e.iat,e.exp,Ql(e,["salt","iat","exp"]));return JSON.stringify(r,null,2)})),2),i=a[0],o=a[1],l=Jl(ie.useState(!1),2),c=l[0],s=l[1],u=function(){var e=ql(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,(0,nt.uz)("/data/admin/custom_token_please_be_careful_or_you_will_be_fired",{tokenOptions:t});case 3:(n=e.sent).token&&"string"===typeof n.token&&r(n.token),s(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c?(0,ee.tZ)("div",{children:"Getting yer token, please wait..."}):(0,ee.BX)("div",{children:[(0,ee.tZ)(ve.Z,{color:"negative",onClick:ql(J().mark((function e(){var r,a,i,o,l,c,s,d,f;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(0,Hl.h)(t),i.salt,i.iat,i.exp,i.presenced,o=Ql(i,["salt","iat","exp","presenced"]),l=(null===(r=o.repl)||void 0===r?void 0:r.sourceRepl)||(null===(a=o.id)||void 0===a?void 0:a.sourceRepl)){e.next=6;break}return window.alert("You own this repl?!"),e.abrupt("return");case 6:return c=Jl(ue.default.query.replUrl.split("/"),3),s=c[1],d=c[2],f=$l({},o,{id:l,slug:d,user:s.replace("@","")}),n(),e.next=11,u(f);case 11:case"end":return e.stop()}}),e)}))),children:"\ud83d\udea7 Experimental. Impersonate Owner & RECONNECT\ud83d\udea7"}),(0,ee.tZ)("br",{}),(0,ee.tZ)("br",{}),(0,ee.BX)("div",{children:["\u26a0\ufe0fBE REALL CAREFUL HERE!\u26a0\ufe0f You can possibly break the world! \ud83d\ude35",(0,ee.tZ)("br",{}),(0,ee.tZ)("br",{}),"Double check all the values, double check the flags and everything.",(0,ee.tZ)("br",{}),(0,ee.tZ)("br",{}),"You should probably go look at the code and how these values are used"]}),(0,ee.tZ)("br",{}),(0,ee.tZ)(Gl.Z,{rows:25,value:i,onChange:function(e){return o(e.currentTarget.value)}}),(0,ee.tZ)(ve.Z,{color:"negative",onClick:function(){var e;try{e=JSON.parse(i)}catch(t){return void window.alert("INVALID JSON!! Be careful!")}u(e)},children:"\u26a0\ufe0fGIMME TOKEN & RECONNECT\u26a0\ufe0f"})]})},rc=r(75291);function nc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ac(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return nc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ic=function(e){var t=e.wid,r=e.pud,n=ac((0,kt.J)(t,r,"adminpanel"),1)[0].customGurl,a=(0,rt.I0)(),i=ac(ie.useState(n),2),o=i[0],l=i[1],c="default";return je.Z.get("gurl")?c="from localStorage: "+je.Z.get("gurl","string"):n&&(c="from session state "+n),(0,ee.BX)("div",{style:{height:"100%",overflow:"auto"},children:[(0,ee.tZ)(Qt.ZP,{value:o,onChange:function(e){return l(e.currentTarget.value)}}),(0,ee.tZ)("br",{}),(0,ee.BX)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,ee.tZ)(ve.Z,{color:"positive",onClick:function(){a({type:"SET_CUSTOM_GURL",wid:t,gurl:o})},children:"Set gurl"}),(0,ee.tZ)(ve.Z,{color:"orange",onClick:function(){a({type:"SET_CUSTOM_GURL",wid:t,gurl:"wss://eval.global.replit.com"}),je.Z.remove("gurl")},children:"reset"})]}),(0,ee.tZ)("br",{}),(0,ee.tZ)("br",{}),(0,ee.BX)("div",{children:["Current gurl: ",c]}),(0,ee.tZ)("br",{}),n&&(0,ee.BX)(ve.Z,{color:"negative",onClick:function(){je.Z.set("gurl",n)},children:['Persist "',n,'" in local storage']}),(0,ee.tZ)("br",{}),(0,ee.tZ)("br",{}),"Gurl order of precedence:",(0,ee.BX)("ol",{style:{margin:20},children:[(0,ee.tZ)("li",{children:"gurl set in the form above"}),(0,ee.tZ)("li",{children:"gurl in localStorage"}),(0,ee.BX)("li",{children:["If in development webapp and a there's a response from",(0,ee.tZ)("code",{children:"https://currenthost:4563"})," or",(0,ee.tZ)("code",{children:"http://currenthost:4560"}),", then it will use that."]}),(0,ee.BX)("li",{children:["default is ",(0,ee.tZ)("code",{children:"wss://eval.global.replit.com"})]})]})]})};function oc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){oc(e,t,r[t])}))}return e}function cc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},r=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e(),n=arguments.length>1?arguments[1]:void 0;if("SET_STATE"===n.type){if(!n.pud)throw new Error("SET_STATE action should be namespaced");return lc({},r,n.state)}return t(r,n)};return{reducer:r,setState:function(e,t,r,n){r({type:"SET_STATE",wid:e,pud:t,state:n})}}}function sc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function uc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){uc(e,t,r[t])}))}return e}function fc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return sc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pc(e){var t=e.wid,r=e.pud,n=fc(Xl(!1),2),a=n[0],i=n[1],o=fc(ie.useState(null),2),l=o[0],c=o[1],s=fc((0,kt.J)(t,r,"adminpanel"),2),u=s[0],d=u.v6filters,f=u.crosisV6Logs,p=s[1];return(0,ee.BX)(Et.Z,{css:[Ze.l0.colWithGap(8),Ze.l0.height("100%")],children:[(0,ee.BX)(Et.Z,{css:[Ze.l0.rowWithGap(4),Ze.l0.justify.spaceBetween],children:[(0,ee.tZ)(Ir.ZP,{onClick:i,text:a?"Hide filters":"Show filters"}),l&&(0,ee.tZ)(Ir.ZP,{onClick:function(){return c(null)},text:"Reset Time Ref"}),(0,ee.tZ)(Ir.ZP,{colorway:"negative",onClick:function(){p({crosisV6Logs:[]})},text:"Clear logs"})]}),a?(0,ee.tZ)(Ml,{filters:d,updateFilters:function(e){p({v6filters:dc({},d,e)})}}):null,(0,ee.tZ)(Et.Z,{css:[Ze.l0.flex.growAndShrink(1),Ze.l0.overflow("auto"),Ze.l0.height("100%")],children:(0,ee.tZ)(Bl,{logs:Fl(f,d),timeRef:l,setTimeRef:c})})]})}function bc(e){var t=fc((0,kt.J)(e.wid,e.pud,"adminpanel"),2),r=t[0].crosisDebug,n=t[1],a=(0,rt.I0)();return r?(0,ee.tZ)(pc,dc({},e)):(0,ee.tZ)(Ir.ZP,{colorway:"positive",onClick:function(){n({crosisDebug:!0}),a({type:"START_CROSIS_ADMIN_LOGS",wid:e.wid})},text:"Start logging goval"})}var mc=r(98647),hc=r(5152),vc=r(77287),gc=r(428),yc=(0,hc.default)((function(){return r.e(367).then(r.t.bind(r,55171,23))}),{loadableGenerated:{webpack:function(){return[55171]}}}),xc=function(){var e,t,r=(0,we.Z)(),n=(0,ke.bPN)({variables:{replId:r}}).data,a="replitDark"===(0,Ua.Fg)()?"bright":"bright:inverted",i="Repl"===(null===n||void 0===n?void 0:n.repl.__typename)?JSON.parse(JSON.stringify(n.repl)):void 0;i&&(delete i.__typename,null===(e=i.user)||void 0===e||delete e.__typename,null===(t=i.origin)||void 0===t||delete t.__typename,delete i.config.__typename);return(0,ee.BX)(Et.Z,{css:[Ze.l0.colWithGap(16),Ze.l0.p(4)],children:[(0,ee.BX)(Et.Z,{css:Ze.l0.rowWithGap(2),children:[(0,ee.BX)(Ar.x,{children:["Repl ID: ",(0,ee.tZ)(vc.Z,{children:r})]}),(0,ee.tZ)(Kr.Z,{alt:"Copy to clipboard",onClick:function(){return(0,mc.Z)(r)},children:(0,ee.tZ)(gc.Z,{})})]}),(0,ee.tZ)("div",{className:"jsx-3187c500f6b377b0",children:i&&(0,ee.tZ)(yc,{iconStyle:"circle",style:{backgroundColor:"transparent"},displayDataTypes:!1,theme:a,src:i,collapseStringsAfterLength:40})}),(0,ee.tZ)(re(),{id:"3187c500f6b377b0",children:"pre.jsx-3187c500f6b377b0{white-space:pre-wrap;word-wrap:break-word}"})]})};function wc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kc(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function jc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){jc(e,t,r[t])}))}return e}function Sc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||Oc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ec(e){return function(e){if(Array.isArray(e))return wc(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Oc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oc(e,t){if(e){if("string"===typeof e)return wc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wc(e,t):void 0}}var _c=cc((function(){return{crosisDebug:!1,crosisLogs:[],crosisV6Logs:[],v6filters:{regexp:null,direction:"",highlightOnly:!0},filters:{regexp:null,direction:"",highlightOnly:!0},token:"",customGurl:""}}),(function(e,t){return"START_CROSIS_ADMIN_LOGS"===t.type?Zc({},e,{crosisDebug:!0}):"CROSIS_ADMIN_LOG"===t.type?Zc({},e,{crosisLogs:Ec(e.crosisLogs).concat([{index:e.crosisLogs.length,dir:t.dir,cmd:t.cmd,timestamp:t.timestamp}])}):"CLEAR_CROSIS_LOGS"===t.type?Zc({},e,{crosisLogs:[]}):"GOVAL_TOKEN"===t.type?Zc({},e,{token:t.token}):"SET_CUSTOM_GURL"===t.type?Zc({},e,{customGurl:t.gurl}):e})),Cc=_c.reducer,Ac=_c.setState,Ic=(0,vt.$)({primary:Cc});function Nc(e,t,r){return"WORKSPACE_MOUNTED"===r.type?function(){var t,r=(t=J().mark((function t(r){var n;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,rc.Z)();case 2:(n=t.sent)&&r({type:"SET_CUSTOM_GURL",wid:e,gurl:n});case 4:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function o(e){kc(i,n,a,o,l,"next",e)}function l(e){kc(i,n,a,o,l,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}():"START_CROSIS_ADMIN_LOGS"===r.type?function(r,n){n().services.container.client().addDebugFunc((function(a){if("log"===a.type){var i=(0,kt.Z)(n(),e,t,"adminpanel").crosisV6Logs;Ac(e,t,r,{crosisV6Logs:Ec(i).concat([{index:i.length+1,dir:a.log.direction,cmd:a.log.cmd,timestamp:window.performance.now()}])})}}))}:null}var Tc=function(e){var t,r=e.wid,n=e.pud,a=Sc(ie.useState("repl"),2),i=a[0],o=a[1];t="repl"===i?xc:"logs"===i?Vl:"logs2"===i?bc:"token"===i?ec:ic;var l=["repl","logs","logs2","token","gurl"].map((function(e){return(0,ee.tZ)(Ir.ZP,{css:Ze.l0.flex.grow(1),colorway:e===i?"primary":void 0,onClick:function(){return o(e)},text:e},e)}));return(0,ee.BX)(pn.Z,{background:"default",css:[Ze.l0.colWithGap(8),Ze.l0.p(4),Ze.l0.height("100%")],children:[(0,ee.tZ)(Et.Z,{css:Ze.l0.rowWithGap(2),children:l}),(0,ee.tZ)(Et.Z,{css:[Ze.l0.flex.growAndShrink(1),Ze.l0.overflow("auto")],children:(0,ee.tZ)(t,{wid:r,pud:n})})]})},Pc=function(){var e=(0,Ie.Z)().fs;return(0,Ta.Z)({fs:e,path:Va.Q,initialExpanded:!0}).loading?(0,ee.tZ)(cl,{}):(0,ee.tZ)("div",{className:"jsx-cf2a6740bb467749 blank",children:(0,ee.tZ)(re(),{id:"cf2a6740bb467749",children:".blank.jsx-cf2a6740bb467749{background-color:var(--background-default);height:100%;width:100%}"})})};function Rc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Rc(e,t,r[t])}))}return e}var Dc=at.L;function Uc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dc,t=arguments.length>1?arguments[1]:void 0;return"UPDATE_WORKSPACE_PREFERENCES"===t.type?Lc({},e,t.updates):e}function zc(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function Bc(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){zc(i,n,a,o,l,"next",e)}function l(e){zc(i,n,a,o,l,"throw",e)}o(void 0)}))}}function Mc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Mc(e,t,r[t])}))}return e}var Xc=function(e){var t=e.reason;return(0,ee.BX)("div",{className:"jsx-1038c6d9a11c6c8 spinner-modal-container",children:[(0,ee.tZ)("div",{className:"jsx-1038c6d9a11c6c8 spinner",children:(0,ee.tZ)(xt.Z,{})}),(0,ee.BX)("h3",{className:"jsx-1038c6d9a11c6c8 reason",children:[t,"..."]}),(0,ee.tZ)(re(),{id:"1038c6d9a11c6c8",children:"@keyframes replit-logo-spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.spinner-modal-container.jsx-1038c6d9a11c6c8{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center;min-width:225px;height:225px;cursor:not-allowed;background-color:var(--background-overlay);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);z-index:500000;padding:var(--space-16);color:white}.spinner.jsx-1038c6d9a11c6c8{width:80px;height:80px;-webkit-animation:replit-logo-spin 1.5s linear infinite;-moz-animation:replit-logo-spin 1.5s linear infinite;-o-animation:replit-logo-spin 1.5s linear infinite;animation:replit-logo-spin 1.5s linear infinite}.reason.jsx-1038c6d9a11c6c8{margin-top:20px;font-size:18px;font-weight:500}"})]})},Vc=function(e){var t=e.style,r=e.wid,n=e.pud,a=(0,rt.v9)((function(e){return(0,kt.Z)(e,r,n,"lock")})),i=a.isLocked,o=a.showSpinner,l=a.reason;return i?o?(0,ee.BX)("div",{style:t,className:"jsx-c6481388fcbd4378",children:[(0,ee.tZ)(Xc,{reason:l}),(0,ee.tZ)(re(),{id:"c6481388fcbd4378",children:"div.jsx-c6481388fcbd4378{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center;position:fixed;top:0;bottom:0;left:0;right:0;cursor:not-allowed;background-color:rgba(0,0,0,.25);z-index:500000}"})]}):(0,ee.tZ)("div",{style:t,className:"jsx-51edd2e08e15b20d",children:(0,ee.tZ)(re(),{id:"51edd2e08e15b20d",children:"div.jsx-51edd2e08e15b20d{position:fixed;top:0;bottom:0;left:0;right:0;cursor:not-allowed;z-index:500000}"})}):null},Gc=(0,vt.$)({primary:function(e,t){switch(t.type){case"LOCK_WORKSPACE":return Fc({},e,{showSpinner:t.showSpinner,reason:t.reason,isLocked:!0});case"UNLOCK_WORKSPACE":return Fc({},e,{showSpinner:!1,isLocked:!1});default:return e}},preferences:Uc});function Hc(e,t,r){switch(r.type){case"LOCK_WORKSPACE":return function(){var t=Bc(J().mark((function t(r,n){var a;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n().workspace[e].layout,!bt.Bp(a,"lock")){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,r(Fc({wid:e,type:"UPDATE_LAYOUT"},bt.$T(a,"lock","inside",["floating"])));case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();case"UNLOCK_WORKSPACE":return function(){var t=Bc(J().mark((function t(r,n){var a;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n().workspace[e].layout,t.next=3,r(Fc({wid:e,type:"UPDATE_LAYOUT"},bt.Od(a,"lock")));case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();default:return null}}var Wc=r(68948);function Kc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){qc(e,t,r[t])}))}return e}function $c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Kc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{closable:!0,title:"",message:"",trackingCtx:"",isOpen:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PROMPT_HACKER_UPGRADE":return{isOpen:!0,title:t.title,message:t.message,closable:t.closable,trackingCtx:t.trackingCtx};case"DISMISS_HACKER_UPGRADE":return Yc({},e,{isOpen:!1});default:return e}}var Jc=function(e){var t=e.wid,r=e.pud,n=$c((0,kt.J)(t,r,"hackerupgradeprompt"),1)[0],a=n.title,i=n.message,o=n.trackingCtx,l=n.isOpen,c=n.closable,s=$c(ie.useState(!1),2),u=s[0],d=s[1],f=$c(ie.useState(!1),2),p=f[0],b=f[1],m=$c(ie.useState(!1),2),h=m[0],v=m[1],g=function(){return d(!1)},y=(0,ke.KiG)({ssr:!1}),x=function(e){var t=e.loading,r=e.data;return t?"loading":r&&r.currentUser?r.currentUser.isHacker?"hacker":"signedUp":"anon"}(y),w=(0,rt.I0)();return ie.useEffect((function(){h&&"hacker"===x&&b(!0)}),[h,x]),ie.useEffect((function(){if(p){var e=setTimeout((function(){window.location.reload()}),1500);return function(){return clearTimeout(e)}}}),[p]),p?(0,ee.BX)(It.Z,{isOpen:!0,onRequestClose:function(){return!1},preventClose:!0,children:[(0,ee.BX)("div",{className:"jsx-8199d54483a6610b",children:[(0,ee.tZ)("h3",{className:"jsx-8199d54483a6610b",children:"The page will reload soon with your new superpowers"}),(0,ee.tZ)("br",{className:"jsx-8199d54483a6610b"}),(0,ee.tZ)(Nt.Z,{style:{width:76,height:76,margin:"0 auto"}})]}),(0,ee.tZ)(re(),{id:"8199d54483a6610b",children:"div.jsx-8199d54483a6610b{padding:75px 52.5px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-justify-content:center;justify-content:center;font-weight:100;text-align:center}"})]}):l?(0,ee.BX)(ee.HY,{children:[u?"loading"===x?(0,ee.tZ)(It.Z,{isOpen:!0,onRequestClose:function(){return!1},preventClose:!0,children:(0,ee.tZ)(Nt.Z,{style:{width:76,height:76,margin:"0 auto"}})}):"anon"===x?(0,ee.tZ)(It.Z,{isOpen:!0,onRequestClose:g,children:(0,ee.tZ)(Wc.Z,{onSuccess:function(){y.refetch(),v(!0)}})}):(0,ee.tZ)(Yr.Z,{onClose:g,isOpen:u,trackingInfo:{context:o}}):null,(0,ee.BX)("div",{className:"jsx-6bb6e71c8f8fbe48 warning-label-outer",children:[(0,ee.BX)("div",{className:"jsx-6bb6e71c8f8fbe48 warning-label-inner",children:[(0,ee.tZ)("span",{className:"jsx-6bb6e71c8f8fbe48 warning-label-warning",children:a}),(0,ee.tZ)("span",{className:"jsx-6bb6e71c8f8fbe48 warning-label-message",children:"hacker"!==x?i:"\ud83e\udd26\u200d\u2640\ufe0f You've run out of disk space."}),"hacker"!==x&&(0,ee.tZ)("button",{onClick:function(){(0,ft.j)(ft.U3.UPGRADE_SELECTED,{source:"inline",planID:"hacker"}),d(!0)},className:"jsx-6bb6e71c8f8fbe48 warning-label-upgrade",children:"Upgrade"}),c&&(0,ee.tZ)("button",{onClick:function(){w({type:"DISMISS_HACKER_UPGRADE",wid:t})},className:"jsx-6bb6e71c8f8fbe48 warning-label-x",children:"\xd7"})]}),(0,ee.tZ)(re(),{id:"6bb6e71c8f8fbe48",children:".warning-label-outer.jsx-6bb6e71c8f8fbe48{display:table;background:var(--background-default);position:absolute;bottom:24px;left:50%;-webkit-transform:translate(-50%,0);-moz-transform:translate(-50%,0);-ms-transform:translate(-50%,0);-o-transform:translate(-50%,0);transform:translate(-50%,0);-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;z-index:30;-webkit-box-shadow:var(--shadow-1);-moz-box-shadow:var(--shadow-1);box-shadow:var(--shadow-1)}.warning-label-inner.jsx-6bb6e71c8f8fbe48{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center;background-color:white;padding:8px;background-color:var(--accent-orange-dimmest);color:var(--accent-orange-strongest);-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;min-width:400px;max-width:600px}.warning-label-upgrade.jsx-6bb6e71c8f8fbe48{margin:8px;padding:8px 16px;background-color:var(--accent-positive-dimmest);color:var(--white);-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;border:none;font-size:1em;font-weight:bold}.warning-label-warning.jsx-6bb6e71c8f8fbe48{font-weight:bold;margin:0px 8px}.warning-label-x.jsx-6bb6e71c8f8fbe48{font-weight:bold;font-size:1.5em;text-align:center;vertical-align:center;color:grey;outline:none;background:none;border:none;cursor:pointer;margin:8px}"})]})]}):null};function es(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function ts(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){es(i,n,a,o,l,"next",e)}function l(e){es(i,n,a,o,l,"throw",e)}o(void 0)}))}}function rs(e){return ns.apply(this,arguments)}function ns(){return(ns=ts(J().mark((function e(t){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Si.l){e.next=2;break}throw new Error("Expected Apollo Client");case 2:return e.next=4,Si.l.query({query:ke.zTE,variables:{replId:t}});case 4:if("Repl"===(r=e.sent.data).repl.__typename){e.next=7;break}throw new Error("Expected repl");case 7:return e.abrupt("return",r.repl);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function as(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function is(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return as(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return as(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var os=Io(["OPEN_SHELL","PORT_OPEN","SET_VNC_URL","RUN_REPL"]),ls=os.receiver,cs=os.useReceiver;function ss(){var e=(0,we.Z)(),t=is(ie.useState(""),2),r=t[0],n=t[1],a=(0,rt.I0)();return cs((function(t){var i=t.action,o=t.wid;switch(i.type){case"SET_VNC_URL":n(i.vncUrl);break;case"OPEN_SHELL":a(function(e){var t=e.wid;return function(e,r){(0,ft.j)(ft.U3.SHELL_OPENED);var n=r().workspace[t],a=n.layout,i=n.plugins,o=bt.PP(a,i,"shell");o&&e({type:"SET_ACTIVE_TAB",path:bt.Il(bt.Il(o)),tabIndex:1,wid:t})}}({wid:o}));break;case"PORT_OPEN":if(5900===i.port){a(function(e){var t=e.wid,r=e.replId,n=e.vncUrl;return function(){var e=ts(J().mark((function e(a,i){var o,l,c,s,u,d,f,p,b,m,h;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=i().workspace[t],c=l.layout,s=l.plugins,e.next=4,rs(r);case 4:if(!(u=e.sent).config.isVnc&&(null===(o=u.currentUserPermissions)||void 0===o?void 0:o.changeConfig)&&a({type:"REQUEST_REPL_UPDATE",wid:t,updates:{config:{isVnc:!0,isServer:!1}}}),!bt.PP(c,s,"vnc")){e.next=10;break}return a({type:"CONNECT_VNC",vncUrl:n,wid:t}),e.abrupt("return");case 10:a({type:"LOAD_PLUGIN",wid:t,pluginPud:d="vnc",pluginType:"vnc",title:"output",initialState:{}}),bt.e$(c,d)||(f=bt.PP(c,s,"console")||bt.PP(c,s,"terminal2")||bt.Jz(),p=bt.Il(bt.Il(f)),b=bt.$T(c,d,"above",p),m=b.path,h=b.to,a({type:"UPDATE_LAYOUT",wid:t,path:m,to:h,property:void 0})),a({type:"CONNECT_VNC",vncUrl:n,wid:t});case 14:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}({wid:o,replId:e,vncUrl:r}));break}a(function(e){var t=e.wid,r=e.replId;return function(){var e=ts(J().mark((function e(n,a){var i,o,l,c,s,u,d,f,p,b,m;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a().workspace[t],l=o.layout,c=o.plugins,e.next=4,rs(r);case 4:if(!(s=e.sent).config.isServer&&(null===(i=s.currentUserPermissions)||void 0===i?void 0:i.changeConfig)&&n({type:"REQUEST_REPL_UPDATE",wid:t,updates:{config:{isServer:!0,isVnc:!1}}}),!bt.PP(l,c,"webview")){e.next=10;break}return n({type:"REFRESH_WEBVIEW",wid:t}),e.abrupt("return");case 10:n({type:"LOAD_PLUGIN",wid:t,pluginPud:u="webview",pluginType:"webview",title:"output",initialState:{canBeClosed:!0}}),bt.e$(l,u)||(d=bt.PP(l,c,"console")||bt.PP(l,c,"terminal2")||bt.Jz(),f=bt.Il(bt.Il(d)),p=bt.$T(l,u,"above",f),b=p.path,m=p.to,n({type:"UPDATE_LAYOUT",wid:t,path:b,to:m,property:void 0}));case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}({wid:o,replId:e}));break;case"RUN_REPL":a(function(e){var t=e.wid;return function(e,r){var n=r().workspace[t],a=n.layout,i=n.plugins,o=bt.PP(a,i,"shell");o&&e({type:"SET_ACTIVE_TAB",path:bt.Il(bt.Il(o)),tabIndex:0,wid:t})}}({wid:o}))}return null})),null}var us=44100,ds=32896,fs=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.audioStart=0,this.feed=function(e){var r=t.getFormatedValue(e),n=new Float32Array(t.samples.length+r.length);n.set(t.samples,0),n.set(r,t.samples.length),t.samples=n},this.getFormatedValue=function(e){for(var t=new Float32Array(e.length),r=0;r<e.length;r++)t[r]=e[r]/2147483648;return t},this.stop=function(){if(t.bufferSource)try{t.bufferSource.stop()}catch(e){if("InvalidStateError"!==e.name&&"RangeError"!==e.name)throw e}},this.flush=function(e){if(t.audioCtx&&t.samples.length){var r=0,n=t.audioCtx.currentTime;if(0===e)t.startTime=n,t.audioStart=n;else{for(var a=n-t.audioStart,i=Math.floor(a*us);i>e-ds;)t.audioStart+=.7459410430839002,i-=ds;i>e&&(r=i-e,t.startTime=n),t.startTime=n}t.samples=t.samples.slice(r,t.samples.length);for(var o,l,c,s=t.audioCtx.createBufferSource(),u=t.samples.length/1,d=t.audioCtx.createBuffer(1,u,us),f=0;f<1;f++)for(o=d.getChannelData(f),l=f,c=0;c<u;c++)o[c]=t.samples[l],l+=1;t.startTime<t.audioCtx.currentTime&&(t.startTime=t.audioCtx.currentTime),s.buffer=d,s.connect(t.gainNode),s.start(t.startTime),t.stop(),t.bufferSource=s,t.startTime+=d.duration,t.samples=new Float32Array}},this.samples=new Float32Array;var r=window.AudioContext||window.webkitAudioContext;this.audioCtx=new r,this.gainNode=this.audioCtx.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioCtx.destination),this.startTime=this.audioCtx.currentTime};function ps(e){var t=e.container,r=(0,ie.useState)(!1),n=r[0],a=r[1],i=(0,ie.useRef)(null);(0,ie.useEffect)((function(){return t.openChannel({name:"audio",service:"audio"},(function(e){var t=e.channel;if(t){var r=null,n=!1;return t.onCommand((function(e){var t;n||(n=!0,(0,ft.j)(ft.U3.AUDIO_PLAYING_STARTED),i.current=function(){r=new fs,i.current=null},a(!0)),r&&(null===e||void 0===e||null===(t=e.audio2)||void 0===t?void 0:t.data)&&(e.audio2.samples||(e.audio2.samples=0),r.feed(Int32Array.from(e.audio2.data)),r.flush(e.audio2.samples))})),function(){a(!1),r&&(r.stop(),r=null),i.current=null}}}))}),[t]);var o=function(){a(!1),(0,ft.j)(ft.U3.AUDIO_PROMPT_CLOSED,{accepted:!1})};return(0,ee.tZ)(It.Z,{isOpen:n,preventClose:!0,onRequestClose:o,children:(0,ee.BX)(Et.Z,{css:[Ze.l0.colWithGap(32),Ze.l0.p(32)],children:[(0,ee.BX)(Et.Z,{css:[Ze.l0.colWithGap(16)],children:[(0,ee.tZ)(Ar.h,{variant:"headerBig",level:3,children:"We hear audio!"}),(0,ee.tZ)(Ar.x,{children:"Hey! It appears that this repl is playing audio."}),(0,ee.tZ)(Ar.x,{children:"In order for us to hear the audio you're receiving, please click confirm."})]}),(0,ee.BX)(Et.Z,{css:[Ze.l0.rowWithGap(16)],children:[(0,ee.tZ)(ve.Z,{onClick:o,children:"Cancel"}),(0,ee.tZ)(ve.Z,{color:"positive",filled:!0,onClick:function(){a(!1),(0,ft.j)(ft.U3.AUDIO_PROMPT_CLOSED,{accepted:!0}),i.current&&i.current()},children:"Confirm"})]})]})})}function bs(){var e=(0,Ie.Z)().container;return(0,ee.tZ)(ps,{container:e})}var ms=r(35424),hs=r.n(ms),vs=r(91272);function gs(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function ys(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ys(e,t,r[t])}))}return e}function ws(e){return new Promise((function(t,r){var n=e.openChannel({service:"gcsfiles"},(function(e){if(!e.error)return e.channel.request({persistMirror:{path:"."}}).then((function(e){e.ok,n(),t()})),function(e){e.willReconnect&&n()};r(e.error)}))}))}var ks=function(e){var t={"go.mod":"go","package.json":"nodejs","Cargo.toml":"rust","requirements.txt":"python3","pyproject.toml":"python3","index.html":"html",Gemfile:"ruby",Makefile:"bash"};for(var r in t)if(e.includes(r))return t[r];var n=me().allSupportedByPopularity().reduce((function(e,t){var r=t.ext,n=t.key;return e[r]=e[r]?e[r]:n,e}),{}),a=e.map((function(e){return e.split(".").slice(-1)[0]})).reduce((function(e,t){var r=e.find((function(e){return e.ext===t}));return r?r.count++:e.push({ext:t,count:1}),e}),[]).sort((function(e,t){return t.count-e.count}));return a.length&&(1===a.length||a[0].count>=2*a[1].count)&&n[a[0].ext]?n[a[0].count]:"bash"};function js(e){var t=e.wid,r=e.replLanguage,n=e.onDone;return function(){var e,a=(e=J().mark((function e(a,i){var o,l,c,s,u,d,f,p,b,m,h,v,g,y,x,w;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"LOCK_WORKSPACE",showSpinner:!0,reason:"Detecting Language",wid:t}),o=i().services,l=o.fs,c=o.session,s=o.container,e.next=4,l.readDir(Va.Q);case 4:return u=e.sent,d=u.error?[]:u.children.filter((function(e){return e.type===Or.Tv.File})).map((function(e){return e.filename})),(f=d.find((function(e){return e.toLowerCase().includes("readme")}))||(0,vs.T)(d,r)||d[0])&&c.openFile(f),e.next=10,ws(s);case 10:return e.next=12,l.readFile(".replit");case 12:return p=e.sent,e.next=15,l.stat("replit.nix");case 15:if(b=e.sent,m=null,h={displayName:""},v=!1,null===p.error&&b.exists?(m="nix",h=me().get(m),v=!0):null===p.error&&(m=hs().parse(p.content.toString("utf8")).language,h=me().get(m),v="Unknown"!==h.displayName),!p.error&&m&&v){e.next=30;break}if(a({type:"UNLOCK_WORKSPACE",wid:t}),!p.error){e.next=28;break}return g=ks(d),y="nodejs"===g?"npm start":"",x='language = "'.concat(g,'"\nrun = "').concat(y,'"'),e.next=28,l.writeFile(".replit",Pn.Z.from(x));case 28:return a({type:"INSERT_RUN_FLOW_PLUGIN",wid:t,pudToInsert:"config"}),e.abrupt("return");case 30:if(m!==r){e.next=33;break}return a({type:"UNLOCK_WORKSPACE",wid:t}),e.abrupt("return");case 33:return w=h.displayName,a({type:"LOCK_WORKSPACE",showSpinner:!0,reason:"Upgrading to ".concat(w),wid:t}),e.next=37,l.persist({skipDebounce:!0});case 37:n(me().getCanonicalName(m));case 38:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){gs(i,n,a,o,l,"next",e)}function l(e){gs(i,n,a,o,l,"throw",e)}o(void 0)}))});return function(e,t){return a.apply(this,arguments)}}()}function Zs(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ss(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Zs(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zs(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Es=Io(["START_GIT_CLONE","END_GIT_CLONE","INSERT_RUN_FLOW_PLUGIN"]),Os=Es.receiver,_s=Es.useReceiver;function Cs(){var e=(0,we.Z)(),t=(0,rt.I0)(),r=(0,ue.useRouter)(),n=(0,ke.jCQ)({variables:{replId:e}}).data,a=Ss((0,ke.IRU)(),1)[0],i=Ss(ie.useState(null),2),o=i[0],l=i[1];return _s((function(e){var i=e.action,c=e.wid;switch(i.type){case"START_GIT_CLONE":var s="Repl"===(null===n||void 0===n?void 0:n.repl.__typename)?n.repl.url:void 0;if(!s)throw new Error("expected url");r.replace({pathname:r.pathname,query:r.query},s,{shallow:!0});break;case"END_GIT_CLONE":var u="Repl"===(null===n||void 0===n?void 0:n.repl.__typename)?n.repl:void 0;if(!u)throw new Error("Expected repl");t(js({wid:c,replLanguage:u.language,onDone:function(e){a({variables:{input:{id:u.id,language:e}}}).then((function(){window.location.replace(window.location.pathname)}))}}));break;case"INSERT_RUN_FLOW_PLUGIN":var d=i.pudToInsert;t(function(e){var t=e.wid,r=e.currentPud,n=e.pudToInsert,a=e.setCurrentPud;return function(e,i){var o=i().workspace[t],l=o.layout,c=o.plugins;if(!bt.e$(l,n)){var s=bt.PP(l,c,"shell");if(!s)throw new Error("Expected shell path");var u=bt.Il(bt.Il(s));e(xs({wid:t,type:"UPDATE_LAYOUT"},bt.$T(l,n,"above",u)));var d=i().workspace[t].layout;r&&e(xs({wid:t,type:"UPDATE_LAYOUT"},bt.Od(d,r))),a(n)}}}({wid:c,currentPud:o,pudToInsert:d,setCurrentPud:l}))}return null})),null}var As=r(73049);function Is(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function Ns(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Is(i,n,a,o,l,"next",e)}function l(e){Is(i,n,a,o,l,"throw",e)}o(void 0)}))}}var Ts="deeplink";function Ps(e){var t=e.wid,r=e.path,n=e.line,a=e.col,i=e.wait,o=e.indexStart,l=e.indexEnd;return function(){var e=Ns(J().mark((function e(c,s){var u,d;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=s().services.session,s().workspace[t].activeFile===r){e.next=7;break}return d=i((function(e){return("FILE_LOADED"===e.type||"FILE_CACHE_HIT"===e.type)&&e.path===r})),c({type:"OPEN_FILE",path:r,wid:t}),e.next=7,d;case 7:n&&c({type:"SELECT_EDITOR_POSITION",path:r,wid:t,position:{lineNumber:n,column:(a||0)+1}}),u.updateDeeplink({path:r,line:n,col:a}),o&&c({type:"SELECT_MODEL_INDEX",path:r,wid:t,indexStart:o,indexEnd:l});case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}function Rs(e){var t=e.wid,r=e.pud,n=e.wait,a=e.fs;return function(){var e=Ns(J().mark((function e(i){var o,l,c,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,As.u9)()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,As.mv)(a);case 4:if(o=e.sent,l=o.path,c=o.line,s=o.col,l){e.next=10;break}return e.abrupt("return");case 10:i(Ps({wid:t,pud:r,path:l,line:c,col:s,wait:n}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}var Ls=Io(["WORKSPACE_MOUNTED","WORKSPACE_WILL_UNMOUNT","OPEN_DEEP_LINK","OPEN_FILE"]),Ds=Ls.receiver,Us=Ls.useReceiver;function zs(){var e=(0,we.Z)(),t=(0,rt.I0)(),r=(0,Ie.Z)(),n=r.fs,a=r.session,i=r.dotReplit;return ie.useEffect((function(){return a.onDeeplinkUpdated((function(e){var t=(0,As.YM)(e);window.location.hash=t}))}),[a]),Us((function(r){var o=r.wid,l=r.pud,c=r.action,s=r.wait;switch(c.type){case"WORKSPACE_MOUNTED":t(function(e){var t=e.wid,r=e.pud,n=e.wait,a=e.fs;return function(e,i){var o=function(){(0,kt.Z)(i(),t,r,Ts).isSettingHash?Fs(t,r,e,{isSettingHash:!1}):e(Rs({wid:t,pud:r,wait:n,fs:a}))};Fs(t,r,e,{handleHashChange:o}),window.addEventListener("hashchange",o)}}({wid:o,pud:l,wait:s,fs:n})),(0,As.u9)()?t(Rs({wid:o,pud:l,wait:s,fs:n})):t(function(e){var t=e.wid,r=e.replId,n=e.fs,a=e.dotReplit;return function(){var e=Ns(J().mark((function e(i,o){var l,c;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o().workspace[t].activeFile){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,(0,vs.W)({replId:r,fs:n,dotReplit:a});case 5:if(l=e.sent,c=l.entrypoint){e.next=10;break}return i(qo({wid:t})),e.abrupt("return");case 10:i({type:"OPEN_FILE",wid:t,path:c});case 11:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}({wid:o,replId:e,fs:n,dotReplit:i}));break;case"WORKSPACE_WILL_UNMOUNT":t(function(e,t){return function(r,n){var a=(0,kt.Z)(n(),e,t,Ts).handleHashChange;a&&window.removeEventListener("hashchange",a)}}(o,l));break;case"OPEN_DEEP_LINK":var u=c.path,d=c.line,f=c.col,p=c.indexStart,b=c.indexEnd;t(Ps({wid:o,pud:l,path:u,line:d,col:f,wait:s,indexStart:p,indexEnd:b}));break;case"OPEN_FILE":var m=c.path||"";t(function(e,t,r,n,a){return function(){var i=Ns(J().mark((function i(o){var l;return J().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,As.mv)(n);case 2:i.sent.path!==r&&(Fs(e,t,o,{isSettingHash:!0}),window.location.hash.length>0?a.updateDeeplink({path:r}):(l=ue.default.asPath.includes("#")?ue.default.asPath.slice(0,ue.default.asPath.indexOf("#")):ue.default.asPath,ue.default.replace({pathname:ue.default.pathname,query:ue.default.query},"".concat(l,"#").concat(r),{shallow:!0})));case 5:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()}(o,l,m,n,a))}return null})),null}var Bs=cc((function(){return{isSettingHash:!1,handleHashChange:void 0}})),Ms=Bs.reducer,Fs=Bs.setState;var Xs=function(e){return(0,ee.BX)(It.Z,{preventClose:!0,isOpen:!0,onRequestClose:e.onCancel,children:[(0,ee.BX)("div",{className:"jsx-c8605a5cd2db572d notification-perm-container",children:[(0,ee.BX)("div",{className:"jsx-c8605a5cd2db572d infobox",children:[(0,ee.tZ)("h2",{className:"jsx-c8605a5cd2db572d title",children:"Replit needs your permission to enable notifications."}),(0,ee.tZ)("div",{className:"jsx-c8605a5cd2db572d",children:"Never miss messages from your collaborators if you\u2019re in another tab or window."})]}),(0,ee.BX)("div",{className:"jsx-c8605a5cd2db572d controlbox",children:[(0,ee.tZ)(ve.Z,{onClick:e.onCancel,children:"Cancel"}),(0,ee.tZ)(ve.Z,{filled:!0,color:"positive",onClick:e.onConfirm,children:"Confirm"})]})]}),(0,ee.tZ)(re(),{id:"c8605a5cd2db572d",children:".notification-perm-container.jsx-c8605a5cd2db572d{padding:30px}.infobox.jsx-c8605a5cd2db572d{padding-bottom:75px}.infobox.jsx-c8605a5cd2db572d .title.jsx-c8605a5cd2db572d{padding-bottom:22px}.controlbox.jsx-c8605a5cd2db572d{display:grid;grid-template-columns:auto auto;grid-column-gap:10px;-webkit-justify-content:end;justify-content:end}"})]})};function Vs(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function Gs(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Vs(i,n,a,o,l,"next",e)}function l(e){Vs(i,n,a,o,l,"throw",e)}o(void 0)}))}}function Hs(e){return Ws.apply(this,arguments)}function Ws(){return Ws=Gs(J().mark((function e(t){var r,n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==Si.l){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Si.l.query({query:ke.vce,variables:{username:t}});case 5:return n=e.sent.data,e.abrupt("return",null===n||void 0===n||null===(r=n.user)||void 0===r?void 0:r.image);case 7:case"end":return e.stop()}}),e)}))),Ws.apply(this,arguments)}function Ks(){return"Notification"in window?"true"===je.Z.get(Js,"string")?"dismissed":window.Notification.permission:"denied"}function qs(){return Ys.apply(this,arguments)}function Ys(){return(Ys=Gs(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,window.Notification.requestPermission().then(),e.next=7;break;case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return",new Promise((function(e){window.Notification.requestPermission((function(t){e(t)}))})));case 7:return e.abrupt("return",window.Notification.requestPermission());case 8:case"end":return e.stop()}}),e,null,[[0,4]])})))).apply(this,arguments)}function $s(){return Qs.apply(this,arguments)}function Qs(){return(Qs=Gs(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qs();case 2:t=e.sent,eu(!1),(0,ft.j)("granted"===t?ft.U3.WEB_NOTIFICATION_PERM_GRANTED:ft.U3.WEB_NOTIFICATION_PERM_DENIED);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Js="notifications/dismissedModal";function eu(e){je.Z.set(Js,String(e)),e&&(0,ft.j)(ft.U3.WEB_NOTIFICATION_PERM_DISMISSED_MODAL)}var tu={};function ru(e){return nu.apply(this,arguments)}function nu(){return(nu=Gs(J().mark((function e(t){var r,n,a,i,o,l,c,s,u,d,f;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.title,n=t.body,a=t.badge,i=t.icon,o=t.iconByUsername,l=t.tag,c=t.onClick,s=t.cacheDuration,u=void 0===s?0:s,document.hidden||!document.hasFocus()){e.next=3;break}return e.abrupt("return");case 3:if("granted"===Ks()){e.next=5;break}return e.abrupt("return");case 5:if(d=Date.now(),!(l in tu)){e.next=9;break}if(!(tu[l]+u>d)){e.next=9;break}return e.abrupt("return");case 9:if(!o){e.next=13;break}return e.next=12,Hs(o);case 12:i=e.sent;case 13:(f=new window.Notification(r,{body:n,badge:a||"/public/images/logo-grayscale.png",icon:i||"/public/images/icon-square.png",tag:l})).addEventListener("click",(function(){window.focus(),f.close()})),c&&f.addEventListener("click",c),tu[l]=d;case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function au(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}var iu=Io(["REQUEST_NOTIFICATION_PERMS"]),ou=iu.receiver,lu=iu.useReceiver;function cu(){var e=(0,ie.useState)(!1),t=e[0],r=e[1];lu((function(e){var t=e.action;if("REQUEST_NOTIFICATION_PERMS"===t.type){var n=Ks();("default"===n||"dismissed"===n&&t.force)&&r(!0)}return null}));var n=function(){var e,t=(e=J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$s();case 2:r(!1);case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){au(i,n,a,o,l,"next",e)}function l(e){au(i,n,a,o,l,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return t?(0,ee.tZ)(Xs,{onCancel:function(){eu(!0),r(!1)},onConfirm:n}):null}var su=r(11542),uu=r(60818);function du(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||bu(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pu(e){return function(e){if(Array.isArray(e))return du(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||bu(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bu(e,t){if(e){if("string"===typeof e)return du(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?du(e,t):void 0}}var mu=function(e){var t,r,n,a=e.style,i=(0,we.Z)(),o=(0,ke.r8C)({variables:{replID:i},pollInterval:1e4}),l=o.data,c=o.error,s=o.loading;l&&("Repl"===l.repl.__typename?r=null===l||void 0===l||null===(n=l.repl)||void 0===n?void 0:n.database:t="Could not fetch Database info");c&&("GraphQL error: You don't have access to this database"===c.message?r=null:t=c.message);var u=(0,rt.v9)((function(e){return e.user.userInfo}));return(0,ee.BX)("div",{style:a,className:"jsx-b4bf5de4051434e6 database",children:[(0,ee.tZ)("div",{className:"jsx-b4bf5de4051434e6 header",children:(0,ee.tZ)(Ne.Z,{level:4,children:"Database"})}),(0,ee.tZ)(su.Z,{height:1}),(0,ee.tZ)("div",{className:"jsx-b4bf5de4051434e6 wrapper",children:u.isLoggedIn?(0,ee.BX)(ee.HY,{children:[(0,ee.BX)("span",{className:"jsx-b4bf5de4051434e6 description",children:[(0,ee.tZ)("a",{href:"https://docs.replit.com/misc/database",target:"_blank",rel:"noopener",className:"jsx-b4bf5de4051434e6 docs-link",children:"Replit Database"}),"is an easy to use key-value store."]}),t&&(0,ee.tZ)("div",{className:"jsx-b4bf5de4051434e6 error",children:t}),(r||s)&&(0,ee.tZ)("div",{className:"jsx-b4bf5de4051434e6 usage",children:(0,ee.tZ)(hu,{database:r,loading:s})}),!s&&(0,ee.BX)("div",{className:"jsx-b4bf5de4051434e6",children:[(0,ee.tZ)("span",{className:"jsx-b4bf5de4051434e6 command-title",children:"commands"}),(0,ee.tZ)(vu,{})]})]}):(0,ee.tZ)(Ou,{})}),(0,ee.tZ)(Eu,{}),(0,ee.tZ)(re(),{id:"b4bf5de4051434e6",children:".database.jsx-b4bf5de4051434e6{-o-text-overflow:ellipsis;text-overflow:ellipsis;background-color:var(--background-default);color:var(--foreground-default);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-width:120px;padding:var(--space-8);-webkit-border-top-right-radius:var(--border-radius-4);-moz-border-radius-topright:var(--border-radius-4);border-top-right-radius:var(--border-radius-4);-webkit-border-bottom-right-radius:var(--border-radius-4);-moz-border-radius-bottomright:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4)}.header.jsx-b4bf5de4051434e6{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:var(--space-32);position:relative;color:var(--foreground-default);width:100%}.description.jsx-b4bf5de4051434e6{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;color:var(--foreground-dimmer);padding-bottom:var(--space-16)0}.docs-link.jsx-b4bf5de4051434e6{font-weight:var(--font-weight-medium);color:var(--accent-primary-default);margin-right:var(--space-4)}.wrapper.jsx-b4bf5de4051434e6{overflow-y:auto;-webkit-flex:1;-ms-flex:1;flex:1;width:100%}.error.jsx-b4bf5de4051434e6{color:var(--accent-negative-default);margin-bottom:var(--space-16)}.usage.jsx-b4bf5de4051434e6{margin-bottom:var(--space-16)}.command-title.jsx-b4bf5de4051434e6{font-size:var(--font-size-small);text-transform:uppercase;font-weight:var(--font-weight-medium);letter-spacing:.5px;margin-bottom:var(--space-16)}"})]})},hu=function(e){var t=e.database;if(e.loading)return(0,ee.tZ)(Nt.Z,{style:{margin:"10px auto",width:"35px",height:"35px"}});if(!t)return null;var r=t.sizeMB||0,n="MB";return r<1&&(r*=1e3,n="KB"),(0,ee.BX)("div",{className:"jsx-8535943fa3f82310 storage-section",children:[(0,ee.tZ)("span",{className:"jsx-8535943fa3f82310 storage-title",children:"storage"}),(0,ee.BX)("div",{className:"jsx-8535943fa3f82310",children:[(0,ee.BX)("span",{className:"jsx-8535943fa3f82310 storage-data",children:[r.toFixed(2)," ",n]}),(0,ee.tZ)("span",{className:"jsx-8535943fa3f82310 separator",children:"|"}),(0,ee.tZ)("span",{className:"jsx-8535943fa3f82310 storage-data",children:"".concat(t.keysCount||0," ").concat(1===t.keysCount?"key":"keys")})]}),(0,ee.tZ)(re(),{id:"8535943fa3f82310",children:".storage-section.jsx-8535943fa3f82310{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:var(--space-8)0}.storage-title.jsx-8535943fa3f82310{font-size:var(--font-size-small);text-transform:uppercase;font-weight:var(--font-weight-medium);letter-spacing:.5px;padding-bottom:var(--space-4)}.separator.jsx-8535943fa3f82310{color:var(--foreground-dimmest);padding:0 var(--space-8)}.storage-data.jsx-8535943fa3f82310{color:var(--foreground-dimmer)}"})]})},vu=function(){var e=(0,Er.Z)(),t=(0,ee.tZ)(Su,{});if(e)switch((0,_r.r6)(e)){case"go":t=(0,ee.tZ)(Zu,{examples:ku});break;case"js":case"ts":case"tsx":case"jsx":case"mjs":t=(0,ee.tZ)(Zu,{examples:ju});break;case"py":t=(0,ee.tZ)(Zu,{examples:wu})}return(0,ee.BX)("div",{className:"jsx-20dd830203ca879 examples-container",children:[t,(0,ee.tZ)(re(),{id:"20dd830203ca879",children:".examples-container.jsx-20dd830203ca879{padding:var(--space-4)0}"})]})},gu=function(e){var t=e.title,r=e.content,n=fu(ie.useState(r),2),a=n[0],i=n[1],o=fu(function(){var e=t.split(" ");return[e[0],e.slice(1).join(" ")]}(),2),l=o[0],c=o[1];return(0,ee.BX)("div",{className:"jsx-af9be46108dc642a command-container",children:[(0,ee.BX)("span",{className:"jsx-af9be46108dc642a command-title",children:[(0,ee.tZ)("span",{className:"jsx-af9be46108dc642a command-keyword",children:l}),c]}),(0,ee.BX)("div",{className:"jsx-af9be46108dc642a command-wrapper",children:[(0,ee.tZ)("div",{className:"jsx-af9be46108dc642a command-example",children:r.map((function(e,r){return"input"===e.type?(0,ee.tZ)("input",{onChange:function(e){var t=pu(a);t[r].value=e.target.value,i(t)},placeholder:e.placeholder,value:e.value||"",className:"jsx-af9be46108dc642a"},"".concat(t,"-").concat(r)):(0,ee.tZ)("code",{className:"jsx-af9be46108dc642a",children:e.value},"".concat(t,"-").concat(r))}))}),(0,ee.tZ)(yu,{code:a.reduce((function(e,t){return"input"===t.type?e+(t.value||t.placeholder):e+t.value}),"")})]}),(0,ee.tZ)(re(),{id:"af9be46108dc642a",children:".command-container.jsx-af9be46108dc642a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;position:relative;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:start;-webkit-box-align:start;-ms-flex-align:start;align-items:start}.command-title.jsx-af9be46108dc642a{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;white-space:nowrap;margin-bottom:var(--space-8);color:var(--foreground-dimmer)}.command-keyword.jsx-af9be46108dc642a{color:var(--foreground-default);font-weight:var(--font-weight-medium);margin-right:var(--space-4)}.command-wrapper.jsx-af9be46108dc642a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-justify-content:start;justify-content:start;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.command-example.jsx-af9be46108dc642a{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;padding:2px 4px;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);background-color:var(--background-higher);-webkit-transition:background-color.1s;-moz-transition:background-color.1s;-o-transition:background-color.1s;transition:background-color.1s;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:var(--space-4);margin-bottom:var(--space-4)}.command-example.jsx-af9be46108dc642a:hover,.command-example.jsx-af9be46108dc642a:hover>code.jsx-af9be46108dc642a{background-color:var(--background-higher)}code.jsx-af9be46108dc642a{padding:2px;background-color:var(--background-higher);color:var(--accent-negative-default);-webkit-transition:background-color.1s;-moz-transition:background-color.1s;-o-transition:background-color.1s;transition:background-color.1s;white-space:nowrap}input.jsx-af9be46108dc642a{text-align:center;width:40px;height:auto;background-color:var(--background-default);border:1px solid var(--background-highest);color:var(--foreground-default);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);-webkit-transition:background-color.1s;-moz-transition:background-color.1s;-o-transition:background-color.1s;transition:background-color.1s;cursor:text}input.jsx-af9be46108dc642a:focus{border:.5px solid var(--accent-primary-default);outline:none}"})]})},yu=function(e){var t=e.code,r=(0,uu.Z)();return r?(0,ee.tZ)(ve.Z,{className:"button",size:"small",onClick:function(){r({code:t})},children:"Insert \u2192"}):(0,ee.tZ)(ve.Z,{className:"button",size:"small",onClick:function(){return(0,mc.Z)(t)},children:"Copy"})},xu=[{title:"Set a key to a value",content:[{type:"code",value:"curl $REPLIT_DB_URL -d '"},{type:"input",placeholder:"key"},{type:"code",value:"="},{type:"input",placeholder:"value"},{type:"code",value:"'"}]},{title:"Get a key's value",content:[{type:"code",value:"curl $REPLIT_DB_URL/"},{type:"input",placeholder:"key"}]},{title:"Delete a key",content:[{type:"code",value:"curl -XDELETE $REPLIT_DB_URL/"},{type:"input",placeholder:"key"}]},{title:"List all keys",content:[{type:"code",value:'curl "$REPLIT_DB_URL?prefix='},{type:"input",placeholder:"key"},{type:"code",value:'"'}]}],wu=[{title:"Import the database",content:[{type:"code",value:"from replit import db"}]},{title:"Set a key to a value",content:[{type:"code",value:'db["'},{type:"input",placeholder:"key"},{type:"code",value:'"] = "'},{type:"input",placeholder:"value"},{type:"code",value:'"'}]},{title:"Get a key's value",content:[{type:"code",value:'value = db["'},{type:"input",placeholder:"key"},{type:"code",value:'"]'}]},{title:"Delete a key",content:[{type:"code",value:'del db["'},{type:"input",placeholder:"key"},{type:"code",value:'"]'}]},{title:"List all keys",content:[{type:"code",value:"keys = db.keys()"}]},{title:"List keys with a prefix",content:[{type:"code",value:'matches = db.prefix("'},{type:"input",placeholder:"prefix"},{type:"code",value:'")'}]}],ku=[{title:"Import the database",content:[{type:"code",value:'import "github.com/replit/database-go"'}]},{title:"Set a key to a value",content:[{type:"code",value:'database.Set("'},{type:"input",placeholder:"key"},{type:"code",value:'", "'},{type:"input",placeholder:"value"},{type:"code",value:'")'}]},{title:"Get a key's value",content:[{type:"code",value:'value, _ := database.Get("'},{type:"input",placeholder:"key"},{type:"code",value:'")'}]},{title:"Delete a key",content:[{type:"code",value:'database.Delete("'},{type:"input",placeholder:"key"},{type:"code",value:'")'}]},{title:"List all keys",content:[{type:"code",value:'keys, _ := database.ListKeys("")'}]},{title:"List keys with a prefix",content:[{type:"code",value:"matches, _ := database.ListKeys("},{type:"input",placeholder:"prefix"},{type:"code",value:'")'}]}],ju=[{title:"Import the database",content:[{type:"code",value:'const Database = require("@replit/database")'}]},{title:"Create a new database",content:[{type:"code",value:"const db = new Database()"}]},{title:"Set a key to a value",content:[{type:"code",value:'db.set("'},{type:"input",placeholder:"key"},{type:"code",value:'", "'},{type:"input",placeholder:"value"},{type:"code",value:'").then(() => {});'}]},{title:"Get a key's value",content:[{type:"code",value:'db.get("'},{type:"input",placeholder:"key"},{type:"code",value:'").then(value => {});'}]},{title:"Delete a key",content:[{type:"code",value:'db.delete("'},{type:"input",placeholder:"key"},{type:"code",value:'").then(() => {});'}]},{title:"List all keys",content:[{type:"code",value:"db.list().then(keys => {});"}]},{title:"List keys with a prefix",content:[{type:"code",value:'db.list("'},{type:"input",placeholder:"prefix"},{type:"code",value:'").then(matches => {});'}]}],Zu=function(e){var t=e.examples;return(0,ee.tZ)("div",{children:(0,ee.tZ)(ye.gC,{spacing:2,children:t.map((function(e,t){return(0,ee.tZ)(gu,{title:e.title,content:e.content},t)}))})})},Su=function(){return(0,ee.BX)(ee.HY,{children:[(0,ee.BX)("span",{className:"jsx-46219eb104982fd9 intro",children:["We've set an environment variable called ",(0,ee.tZ)("code",{className:"jsx-46219eb104982fd9",children:"REPLIT_DB_URL"})," in your repl."]}),(0,ee.tZ)("div",{className:"jsx-46219eb104982fd9 examples",children:(0,ee.tZ)(ye.gC,{spacing:2,children:xu.map((function(e,t){return(0,ee.tZ)(gu,{title:e.title,content:e.content},t)}))})}),(0,ee.tZ)("span",{className:"jsx-46219eb104982fd9 disclaimer",children:"You can use the Database from any repl by making HTTP requests similar to those above. We have language clients for Python, Go, and Node, switch to a file that uses that language to see how to use the client."}),(0,ee.tZ)(re(),{id:"46219eb104982fd9",children:".intro.jsx-46219eb104982fd9{color:var(--foreground-dimmer);padding-top:var(--space-8);padding-bottom:var(--space-16)}.examples.jsx-46219eb104982fd9{padding:var(--space-8)0}.disclaimer.jsx-46219eb104982fd9{padding-top:var(--space-8);padding-bottom:var(--space-16);color:var(--foreground-dimmer)}code.jsx-46219eb104982fd9{padding:2px;background-color:var(--background-higher);color:var(--accent-negative-default);-webkit-transition:background-color.1s;-moz-transition:background-color.1s;-o-transition:background-color.1s;transition:background-color.1s;white-space:nowrap}"})]})},Eu=function(){return(0,ee.BX)("div",{className:"jsx-2ed001497e03e43",children:[(0,ee.tZ)("a",{href:"https://replit.com/talk/announcements/Replit-Database-feedback/51085",target:"_blank",rel:"noopener",className:"jsx-2ed001497e03e43",children:"Send feedback"}),(0,ee.tZ)(re(),{id:"2ed001497e03e43",children:"div.jsx-2ed001497e03e43{background-color:var(--background-root);color:var(--foreground-default);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;height:var(--space-32);padding:var(--space-16)var(--space-8)var(--space-16)var(--space-16);position:relative;font-size:var(--font-size-default)}"})]})},Ou=function(){return(0,ee.BX)("div",{className:"jsx-18e3af5255e6c00c wrapper",children:[(0,ee.BX)("span",{className:"jsx-18e3af5255e6c00c description",children:[(0,ee.tZ)("a",{href:"https://docs.replit.com/misc/database",target:"_blank",rel:"noopener",className:"jsx-18e3af5255e6c00c docs-link",children:"Replit Database"}),"is the fastest and easiest way to store data from your repl. Try it out by logging in or signing up."]}),(0,ee.tZ)("a",{href:"/signup",className:"jsx-18e3af5255e6c00c",children:(0,ee.tZ)(ve.Z,{fullWidth:!0,color:"primary",filled:!0,children:"Sign up"})}),(0,ee.tZ)(re(),{id:"18e3af5255e6c00c",children:".wrapper.jsx-18e3af5255e6c00c{padding:var(--space-8)0;color:var(--foreground-dimmer);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}span.jsx-18e3af5255e6c00c{margin-bottom:var(--space-8)}.docs-link.jsx-18e3af5255e6c00c{font-weight:var(--font-weight-medium);color:var(--accent-primary-default);margin-right:var(--space-4)}"})]})},_u=r(95468),Cu=r(16108),Au=r(28774),Iu=r(47019),Nu=r(69780),Tu=r(74430),Pu=r(33398),Ru=r(33539),Lu=r(92317),Du=r(18690),Uu=r(20730);function zu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Bu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return zu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Mu=r(74659),Fu=r(35528),Xu=r(65577);function Vu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Gu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Vu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wu(e){var t,r=e.wid,n=(0,Ie.Z)(),a=n.container,i=n.session,o=n.presence,l=n.replbox,c=n.fs,s=un({replbox:l}),u=ie.useRef(s);ie.useEffect((function(){u.current=s}),[s]);var d=(0,rt.I0)(),f=function(){var e=(0,Ie.Z)().session,t=Bu(ie.useState(e.getIsCommandBarOpen()),2),r=t[0],n=t[1];return ie.useEffect((function(){return n(e.getIsCommandBarOpen()),e.onCommandBarToggled(n)}),[e]),r}(),p=(0,Ei.Z)("flag-cluicurl"),b=(0,we.Z)(),m=(0,rt.v9)((function(e){return e.workspace[r].plugins})),h=Object.values(m).some((function(e){return"webview"===e.type})),v=(0,ke.g2A)({variables:{replId:b}}).data,g=Hu(ie.useState(null),2),y=g[0],x=g[1],w=(0,Xu.Z)(y),k=Hu(ie.useState(null),2),j=k[0],Z=k[1],S=Hu(ie.useState(!1),2),E=S[0],O=S[1],_=ie.useCallback((function(){o.getFollowedUser()&&o.unfollowUser()}),[o]);ie.useEffect((function(){f&&(0,ft.j)(ft.U3.COMMAND_BAR_SELECTED,{source:"workspace"}),f&&w.current||x(!!f||null)}),[f,w]),ie.useEffect((function(){null!==y&&_(),i.setIsCommandBarOpen(null!==y)}),[y,i,_]);var C="Repl"===(null===v||void 0===v?void 0:v.repl.__typename)?v.repl:null,A="Team"===(null===C||void 0===C||null===(t=C.owner)||void 0===t?void 0:t.__typename),I=ie.useMemo((function(){var e,t,n=function(){x(null)};if(C){var o=Boolean("Team"===(null===(e=C.owner)||void 0===e?void 0:e.__typename)&&(null===(t=C.owner.capabilities)||void 0===t?void 0:t.isEducationPlan)),l=p?{curl:{data:{type:"action",label:"curl",icon:(0,ee.tZ)(Nu.Z,{}),description:"Make http requests",run:function(){(0,ft.j)(ft.U3.CLUI_COMMAND_EXECUTED,{command:"curl",source:"clui"}),d({type:"ADD_CLUI_CURL_TAB",wid:r}),x(null)}}}}:{};return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Gu(e,t,r[t])}))}return e}({files:(0,Du.ZP)({fs:c,session:i,onSelect:function(e){(0,ft.j)(ft.U3.CLUI_COMMAND_EXECUTED,{command:"find",source:"clui"}),d({wid:r,type:"OPEN_FILE",path:e}),n()},onCreateNewFile:function(e){n(),c.writeFile(e,Pn.Z.from("")).then((function(){i.openFile(e)})),(0,ni.Z)({replId:C.id,action:"create",source:"commandbar"})}}),search:(0,Uu.ZP)({container:a,onSelect:function(e,t,a){(0,ft.j)(ft.U3.CLUI_COMMAND_EXECUTED,{command:"search",source:"clui"}),(0,ni.Z)({replId:C.id,action:"select",source:"commandbar"}),d({wid:r,type:"OPEN_DEEP_LINK",path:e,line:t,col:a}),n()}})},o?{}:{multiplayer:{data:{type:"action",label:"Multiplayer",icon:(0,ee.tZ)(_u.Z,{}),description:"Open multiplayer mode",keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"M"},run:function(e){(0,ft.j)(ft.U3.CLUI_COMMAND_EXECUTED,{command:"multiplayer",source:e?"shortcut":"clui"}),(0,ft.j)(ft.U3.INVITE_MODAL_OPENED,{wid:r,language:C.lang.id,replId:C.id,source:"clui"}),O(!0),n()}}}},{run:{data:{type:"action",label:"Run",icon:(0,ee.tZ)(Cu.Z,{}),description:"Run repl",keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"Enter"},run:function(e){(0,ft.j)(ft.U3.CLUI_COMMAND_EXECUTED,{command:"run",source:e?"shortcut":"clui"}),"replbox"===C.lang.engine&&u.current.runState===ln.A.IDLE?(u.current.run(),(0,ft.j)(ft.U3.PROJECT_RAN,{wid:r,language:null===C||void 0===C?void 0:C.lang.id,replId:C.id,replTitle:C.title})):d({wid:r,type:"RUN_REPL"}),n()}}}},h?{refresh:{data:{type:"action",label:"Refresh",icon:(0,ee.tZ)(Au.Z,{}),description:"Refresh webview",keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"S"},run:function(e){(0,ft.j)(ft.U3.CLUI_COMMAND_EXECUTED,{command:"refresh",source:e?"shortcut":"clui"}),d({wid:r,type:"REFRESH_WEBVIEW"}),n()}}}}:{},{shell:{data:{type:"action",label:"Shell",icon:(0,ee.tZ)(Iu.Z,{}),description:"Open shell",keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"S"},run:function(e){(0,ft.j)(ft.U3.CLUI_COMMAND_EXECUTED,{command:"shell",source:e?"shortcut":"clui"}),d({wid:r,type:"OPEN_SHELL"}),n()}}},settings:{data:{type:"action",label:"Settings",icon:(0,ee.tZ)(qe.Z,{}),description:"Manage editor settings",keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:","},run:function(e){(0,ft.j)(ft.U3.CLUI_COMMAND_EXECUTED,{command:"settings",source:e?"shortcut":"clui"}),d({type:"OPEN_SIDEPANE_BY_TYPE",paneType:"preferences",wid:r}),n()}}},"version-control":{data:{label:"Version control",type:"action",icon:(0,ee.tZ)(Tu.Z,{}),description:"Open version control sidebar",keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"G"},run:function(e){(0,ft.j)(ft.U3.CLUI_COMMAND_EXECUTED,{command:"version control",source:e?"shortcut":"clui"}),d({type:"OPEN_SIDEPANE_BY_TYPE",paneType:"git",wid:r}),n()}}},new:(0,Mu.Z)({transformMatchScore:function(e){return.1*e},onLanguageOrReplSelected:function(e){n(),Z(e)}})},l)}}),[C,c,p,a,i,d,r,h]),N={data:{type:"basic",description:"Type a command..."},commands:I};return(0,Fu.Z)({onActive:function(){x(!0)},onDismiss:function(){x(null)}}),ie.useEffect((function(){var e=function(e){if(I){(0,Ru.b)(e);var t=Object.entries(I),r=!0,n=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var l,c=Hu(i.value,2),s=c[0],u=c[1],d=u.data&&"keyboardShortcut"in u.data?u.data.keyboardShortcut:null;if(d&&(d.cmdOrCtrlKey===Boolean((0,di.jh)(e))&&d.altKey===Boolean(e.altKey)&&d.shiftKey===Boolean(e.shiftKey)&&(null===(l=d.key)||void 0===l?void 0:l.toLowerCase())===e.key.toLowerCase())){var f;if(e.preventDefault(),_(),"action"===(null===(f=u.data)||void 0===f?void 0:f.type))return void u.data.run(!0);x([{value:s,command:u}])}}}catch(p){n=!0,a=p}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[I,_,x]),(0,ee.BX)(ee.HY,{children:[(0,ee.tZ)(It.Z,{isOpen:Boolean(j),onRequestClose:function(){return Z(null)},children:(0,ee.tZ)(Pu.Z,{initialSelectedLanguageOrReplId:j||void 0,onCancel:function(){return Z(null)}})}),(0,ee.tZ)(It.Z,{isOpen:null!==y,onRequestClose:function(){return x(null)},hideCloseButton:!0,children:(0,ee.tZ)(Lu.ZP,{keyboardShortcut:Fu.q,root:N,initialCommandPath:Array.isArray(y)?y:void 0})}),C?(0,ee.tZ)(It.Z,{isOpen:E,onRequestClose:function(){return O(!1)},children:A?(0,ee.tZ)(vr,{replId:C.id}):(0,ee.tZ)(rn,{replId:C.id})}):null]})}var Ku,qu=r(71171),Yu=r.n(qu);function $u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){$u(e,t,r[t])}))}return e}!function(e){e.TEXT="TEXT",e.MENTION="MENTION",e.LINK="LINK",e.REPL_LINK="REPL_LINK",e.DEEP_LINK="DEEP_LINK",e.CODE="CODE",e.BOLD="BOLD",e.ITALICS="ITALICS",e.STRIKETHROUGH="STRIKETHROUGH",e.QUOTE="QUOTE"}(Ku||(Ku={}));var Ju=function(e){var t=e.fragment,r=e.onClick;return(0,ee.tZ)(ge.Z,{size:"small",onClick:r,children:t.content})},ed=function(e){var t=e.fragment,r=e.onClick;return(0,ee.tZ)(ge.Z,{size:"small",fontWeight:"medium",onClick:r,children:t.content})},td=function(e){var t=e.fragment,r=e.onClick;return(0,ee.tZ)("a",{href:t.url,onClick:r,rel:"noreferrer noopener nofollow",target:"_blank",children:t.content})},rd=function(e){var t=e.fragment,r=e.onClick;return(0,ee.tZ)("a",{href:t.url,onClick:r,target:"_blank",children:t.content})},nd=function(e){var t=e.fragment,r=e.onClick;return(0,ee.tZ)("a",{href:t.url,onClick:r,children:t.content})},ad=function(e){var t=e.fragment,r=e.onClick,n=e.style;return(0,ee.tZ)("code",{onClick:r,style:n,children:t.content})},id=function(e){var t=e.fragment,r=e.onClick;return(0,ee.tZ)("b",{onClick:r,children:t.content})},od=function(e){var t=e.fragment,r=e.onClick;return(0,ee.tZ)("i",{onClick:r,children:t.content})},ld=function(e){var t=e.fragment,r=e.onClick;return(0,ee.BX)("span",{onClick:r,className:"jsx-e2f6e2707e7599fa",children:[t.content,(0,ee.tZ)(re(),{id:"e2f6e2707e7599fa",children:"span.jsx-e2f6e2707e7599fa{text-decoration:line-through}"})]})},cd=function(e){var t=e.fragment,r=e.onClick;return(0,ee.BX)("blockquote",{onClick:r,className:"jsx-8741a91fadaf26be",children:[t.content,(0,ee.tZ)(re(),{id:"8741a91fadaf26be",children:"blockquote.jsx-8741a91fadaf26be{border-left:2px solid var(--foreground-dimmest);padding-left:6px;color:var(--foreground-dimmest)}"})]})},sd=/(@[0-9a-zA-Z_]+)/,ud=/(#[-a-zA-Z0-9@:%._+~#=/]+)/,dd=/(https?:\/\/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{2,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&//=]*))/,fd=/(`.+?`)/,pd=/(\*\*.+?\*\*)/,bd=/(_.+?_)/,md=/(\*.+?\*)/,hd=/(~~.+?~~)/,vd=/(^>.+?$\n?)/m,gd=/\/@([0-9a-zA-Z_]+)\/(.+)/;function yd(e){var t=e.url;return{type:Ku.LINK,url:t,content:t}}function xd(e){var t=e.hash;return{type:Ku.DEEP_LINK,url:t,content:t}}function wd(e,t){if(dd.test(e)){var r={};try{r=new window.URL(e)}catch(a){return{content:e,type:Ku.TEXT}}return["repl.it","replit.com",document.location.host].includes(r.host)?r.pathname===t.replUrl?xd({hash:r.hash}):gd.test(r.pathname)?function(e){var t=e.url,r=gd.exec(t.pathname);if(!r)throw new Error("Not a repl URL");return{type:Ku.REPL_LINK,url:t.href,content:"@".concat(r[1],"/").concat(r[2]).concat(t.hash)}}({url:r}):yd({url:e}):yd({url:e})}if(ud.test(e))return xd({hash:e});if(vd.test(e))return function(e){var t=e.text;return{type:Ku.QUOTE,content:t}}({text:e.slice(1).trim()});if(fd.test(e))return function(e){var t=e.code;return{type:Ku.CODE,content:t}}({code:e.slice(1,-1)});if(pd.test(e))return function(e){var t=e.text;return{type:Ku.BOLD,content:t}}({text:e.slice(2,-2)});if(bd.test(e)||md.test(e))return function(e){var t=e.text;return{type:Ku.ITALICS,content:t}}({text:e.slice(1,-1)});if(hd.test(e))return function(e){var t=e.text;return{type:Ku.STRIKETHROUGH,content:t}}({text:e.slice(2,-2)});if(sd.test(e)){var n=e.slice(1);if(!t.users||t.users.includes(n))return function(e){var t=e.username;return{type:Ku.MENTION,username:t,content:"@".concat(t)}}({username:n})}return{content:e,type:Ku.TEXT}}var kd=new RegExp([fd.source,pd.source,bd.source,md.source,hd.source,dd.source,sd.source,ud.source,vd.source].join("|"),"m");function jd(e,t){var r=e.split(kd),n=[],a=[],i=!0,o=!1,l=void 0;try{for(var c,s=r[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var u=c.value;if(u){var d=wd(u,t);if(d){if(d.type===Ku.MENTION){if(!d.username)continue;n.push(d.username)}a.push(d)}}}}catch(f){o=!0,l=f}finally{try{i||null==s.return||s.return()}finally{if(o)throw l}}return{tokens:a,mentions:n}}function Zd(e){var t=e.message,r=e.onMentionClick,n=void 0===r?function(){}:r,a=e.codeStyles,i=void 0===a?{}:a;return(0,ee.tZ)(ee.HY,{children:t.tokens.map((function(e,t){var r={fragment:e,key:t};return e.type===Ku.MENTION?(0,ee.tZ)(ed,Qu({},r,{onClick:function(){return n(e)}})):e.type===Ku.LINK?(0,ee.tZ)(td,Qu({},r)):e.type===Ku.REPL_LINK?(0,ee.tZ)(rd,Qu({},r)):e.type===Ku.DEEP_LINK?(0,ee.tZ)(nd,Qu({},r)):e.type===Ku.CODE?(0,ee.tZ)(ad,Qu({},r,{style:i})):e.type===Ku.BOLD?(0,ee.tZ)(id,Qu({},r)):e.type===Ku.ITALICS?(0,ee.tZ)(od,Qu({},r)):e.type===Ku.STRIKETHROUGH?(0,ee.tZ)(ld,Qu({},r)):e.type===Ku.QUOTE?(0,ee.tZ)(cd,Qu({},r)):(0,ee.tZ)(Ju,Qu({},r))}))})}var Sd=r(52697),Ed=function(e){var t={},r=!0,n=!1,a=void 0;try{for(var i,o=e.messages[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var l=i.value;l.user&&(t[l.user.id]=l.user)}}catch(c){n=!0,a=c}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}return Object.values(t)};function Od(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _d(e){return function(e){if(Array.isArray(e))return Od(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Od(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Od(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Cd=function(e){var t,r,n=e.annote,a=e.onClick,i=((null===(t=(0,ke.Fqz)().data)||void 0===t||null===(r=t.currentUser)||void 0===r?void 0:r.editorPreferences.fontSize)||14)-2,o=n.messages.some((function(e){return!e.seen})),l=Ed(n).filter((function(e){return!n.user||e.id!==n.user.id})),c="".concat(i,"px");return(0,ee.BX)("div",{onClick:a,className:re().dynamic([["d8011f42e3dcb4ea",[i]]])+" annotation-preview",children:[(0,ee.tZ)("div",{className:re().dynamic([["d8011f42e3dcb4ea",[i]]])+" user-stack",children:[n.user].concat(_d(l)).slice(0,3).map((function(e){return e&&(0,ee.tZ)(Kt.Z,{url:e.image,size:"xs",style:{minWidth:c,minHeight:c,height:c,width:c}},e.id)}))}),n.messages.length>0&&(0,ee.BX)("div",{className:re().dynamic([["d8011f42e3dcb4ea",[i]]])+" comment-info",children:[(0,ee.tZ)("div",{className:re().dynamic([["d8011f42e3dcb4ea",[i]]])+" comment-count",children:n.messages.length}),(0,ee.tZ)(Sd.Z,{size:i,unreadDot:o})]}),(0,ee.tZ)(re(),{id:"d8011f42e3dcb4ea",dynamic:[i],children:".annotation-preview.__jsx-style-dynamic-selector{position:absolute;padding:4px;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);-webkit-border-top-right-radius:0;-moz-border-radius-topright:0;border-top-right-radius:0;-webkit-border-bottom-right-radius:0;-moz-border-radius-bottomright:0;border-bottom-right-radius:0;background-color:var(--background-default);color:var(--foreground-default);display:grid;grid-auto-flow:column;grid-column-gap:var(--space-8);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border:.5px solid var(--background-higher);-webkit-transform:translateX(-100%);-moz-transform:translateX(-100%);-ms-transform:translateX(-100%);-o-transform:translateX(-100%);transform:translateX(-100%);-webkit-box-shadow:var(--shadow-1);-moz-box-shadow:var(--shadow-1);box-shadow:var(--shadow-1);-webkit-transition:width.2s,background-color.2s,-webkit-transform.1s;-moz-transition:width.2s,background-color.2s,-moz-transform.1s;-o-transition:width.2s,background-color.2s,-o-transform.1s;transition:width.2s,background-color.2s,-webkit-transform.1s;transition:width.2s,background-color.2s,-moz-transform.1s;transition:width.2s,background-color.2s,-o-transform.1s;transition:width.2s,background-color.2s,transform.1s;z-index:1}.annotation-preview.__jsx-style-dynamic-selector:hover{-webkit-transform:translateX(-100%)translateX(-5%)scale(1.1);-moz-transform:translateX(-100%)translateX(-5%)scale(1.1);-ms-transform:translateX(-100%)translateX(-5%)scale(1.1);-o-transform:translateX(-100%)translateX(-5%)scale(1.1);transform:translateX(-100%)translateX(-5%)scale(1.1)}.user-stack.__jsx-style-dynamic-selector{display:grid;grid-auto-flow:column;grid-column-gap:var(--space-4)}.comment-info.__jsx-style-dynamic-selector{display:grid;grid-auto-flow:column;grid-gap:var(--space-4);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-count.__jsx-style-dynamic-selector{font-weight:var(--font-weight-medium);font-size:.8em;font-size:".concat(i,"px}")})]})},Ad=r(13475),Id=r(70420),Nd=["TextMessageContentType","PreviewMessageContentType"];function Td(e){var t=[],r=null,n=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var c,s,u,d,f=o.value;if(!r||(null===f||void 0===f||null===(c=f.user)||void 0===c?void 0:c.id)!==(null===r||void 0===r||null===(s=r.user)||void 0===s?void 0:s.id)||(null===f||void 0===f||null===(u=f.anchor)||void 0===u?void 0:u.id)!==(null===r||void 0===r?void 0:r.anchorId)||!Nd.includes(r.messageType)||!Nd.includes(f.content.__typename)||new Date(f.timeCreated).getTime()-new Date(r.timeCreated).getTime()>6e5)r&&t.push(r),r={user:f.user,timeCreated:f.timeCreated,anchorId:null===f||void 0===f||null===(d=f.anchor)||void 0===d?void 0:d.id,messages:[f],messageType:f.content.__typename};else r.messages.push(f)}}catch(p){a=!0,i=p}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return r&&t.push(r),t}function Pd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Rd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Pd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pd(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ld(e){var t=(0,we.Z)(),r=Rd((0,ke.nAY)(),1)[0];ie.useEffect((function(){if(e){var n=e.messages.filter((function(e){return!e.seen})).map((function(e){return e.id}));0!==n.length&&r({variables:{replId:t,threadId:e.id,messageIds:n},optimisticResponse:{markMessagesAsSeen:{messages:n.map((function(e){return{id:e,seen:!0,__typename:"AnnotationMessage"}})),__typename:"AnnotationMessageList"}}})}}),[t,e,r])}var Dd=ie.createContext({activeFile:null,users:[],annotations:[],generalThread:void 0,explainAnchor:null,visibleAnnotation:null,onRequestCloseThread:function(){},setVisibleAnnotation:function(){},setExplainAnchor:function(){},handleFinalizeMessage:function(){},handleChangeMessage:function(){},setResolvedAnnotation:function(){},createAnnotationAnchorPlaceholder:function(){},markAllMessagesInReplAsSeenByUser:function(){}});function Ud(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zd(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ud(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ud(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Md(e){var t=(0,Ei.Z)("flag-typing-indicator"),r=ie.useContext(Dd).users,n=Bd(ie.useState({}),2),a=n[0],i=n[1],o=ie.useRef(null),l=ie.useCallback((function(){var e={};for(var t in a)Date.now()-a[t].time<1e3&&(e[t]=a[t]);i(e)}),[a,i]);return(0,ke.qxQ)({variables:{threadId:e},onSubscriptionData:function(t){var n,a,c=t.subscriptionData;if(null===(n=c.data)||void 0===n?void 0:n.threadPreview){var s=null===(a=c.data)||void 0===a?void 0:a.threadPreview;if("number"===typeof s.userId){var u=new Date,d=u.toJSON();i((function(t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){zd(e,t,r[t])}))}return e}({},t,zd({},s.userId,{time:u.getTime(),user:r.find((function(e){return e.id===s.userId})),id:s.messageId,currentUserIsAuthor:!1,timeCreated:d,timeUpdated:d,anchor:{id:e},content:{__typename:"PreviewMessageContentType",preview:s.message}}))})),o.current&&clearTimeout(o.current),o.current=setTimeout(l,2e3)}}},skip:!t}),ie.useMemo((function(){return Object.values(a)}),[a])}var Fd=r(18651),Xd=r(64784);function Vd(){var e,t=(0,we.Z)(),r=(0,ke.OEU)({variables:{replId:t}}).data;if("Repl"!==(null===r||void 0===r?void 0:r.repl.__typename))return[];var n=[];(null===(e=r.repl.owner)||void 0===e?void 0:e.username)&&"User"===r.repl.owner.__typename&&n.push(r.repl.owner);var a=!0,i=!1,o=void 0;try{for(var l,c=r.repl.permissions[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var s,u=l.value;(null===(s=u.user)||void 0===s?void 0:s.username)&&n.push(u.user)}}catch(d){i=!0,o=d}finally{try{a||null==c.return||c.return()}finally{if(i)throw o}}return n}function Gd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Hd(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function Wd(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Wd(e,t,r[t])}))}return e}function qd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Gd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gd(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Yd=ie.forwardRef((function(e,t){var r,n,a=e.annote,i=e.placeholder,o=e.onChangeMessage,l=e.onFinalizeMessage,c=function(){""!==d.trim()&&(l({messageId:g||Yu()(),message:d.trim()}),y(null),f(""),setTimeout(j),(0,ft.j)(ft.U3.CONVERSATION_MESSAGE_SENT,{threadMessagesCount:a.messages.length,otherThreadParticipantsCount:P.length,anchorId:a.id}))},s=null===(r=(0,ke.Fqz)().data)||void 0===r||null===(n=r.currentUser)||void 0===n?void 0:n.id,u=qd(ie.useState(""),2),d=u[0],f=u[1],p=qd(ie.useState(!1),2),b=p[0],m=p[1],h=ie.useRef(null),v=qd(ie.useState(null),2),g=v[0],y=v[1],x=Vd(),w=(0,Xd.Z)(),k=w.ref,j=w.update,Z=qd((0,Fd.Z)({"@":function(){var e,t=(e=J().mark((function e(t){var r,n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x.filter((function(e){return e.id!==s})),t&&(n=t.toLowerCase(),r=r.filter((function(e){return e.username.toLowerCase().startsWith(n)}))),e.abrupt("return",r.slice(0,5).map((function(e){return{icon:(0,ee.tZ)(Kt.Z,{url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}})));case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Hd(i,n,a,o,l,"next",e)}function l(e){Hd(i,n,a,o,l,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}()}),2),S=Z[0].suggestions,E=Z[1],O=(0,tr.Kb)({items:(null===S||void 0===S?void 0:S.results)||[],defaultHighlightedIndex:0,isOpen:Boolean(null===S||void 0===S?void 0:S.results.length),onSelectedItemChange:function(e){var t=e.selectedItem;if(S&&t){var r=S.applySuggestion({targetValue:d,suggestionValue:t.value}),n=r.fullValue,a=r.cursorIndex;f(n),setTimeout((function(){h.current&&(h.current.setSelectionRange(a,a),h.current.focus(),j())}))}}}),_=O.isOpen,C=O.getInputProps,A=O.getMenuProps,I=O.getItemProps,N=O.highlightedIndex,T=O.getComboboxProps;ie.useEffect((function(){var e="threads/drafts/".concat(a.id),t=je.Z.get(e,"string");t&&f(t);var r=h.current;return function(){if(r){var t=r.value;0!==t.length?je.Z.set(e,t):je.Z.remove(e)}}}),[]),ie.useEffect((function(){setTimeout((function(){h.current&&h.current.focus()}))}),[h]);var P=Ed(a).filter((function(e){return e.id!==s})),R="Add a comment";return 1===P.length?R="Reply to @".concat(P[0].username):P.length>1&&(R="Reply"),a.isResolved&&(R="Reply to unresolve this thread"),i&&(R=i),(0,ee.BX)("div",{className:"jsx-bfbb8b62e7b10f1d",children:[(0,ee.BX)("div",Kd({},T(),{className:"jsx-bfbb8b62e7b10f1d input-group",children:[(0,ee.tZ)("textarea",Kd({},C({autoFocus:!0,placeholder:R,value:d,onCompositionStart:function(){return m(!0)},onCompositionEnd:function(){return m(!1)},onChange:function(e){var t=e.target.value,r=g||Yu()();g||y(r),f(t),o({messageId:r,message:t})},onKeyDown:function(e){_||(e.nativeEvent.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||b||(e.preventDefault(),c()))},rows:1,ref:function(e){h.current=e,t&&"object"===typeof t&&(t.current=e),E(e),k(e)}}),{className:"jsx-bfbb8b62e7b10f1d "+(At()("inputbox",{hasContent:d.length>0})||"")})),(0,ee.tZ)("button",{onClick:c,className:"jsx-bfbb8b62e7b10f1d "+(At()("send-button",{isValid:d.length>0})||""),children:(0,ee.tZ)(Cu.Z,{filled:!0,size:12})})]})),(0,ee.tZ)("div",Kd({},A({}),{className:"jsx-bfbb8b62e7b10f1d",children:_&&(0,ee.tZ)("div",{className:"jsx-bfbb8b62e7b10f1d mention-suggestions-container",children:S.results.map((function(e,t){return(0,ie.createElement)("div",Kd({},I({item:e,index:t}),{key:e.value,className:"jsx-bfbb8b62e7b10f1d "+(At()("mention-suggestion",{selected:N===t})||""),children:[e.icon,(0,ee.tZ)("div",{className:"jsx-bfbb8b62e7b10f1d",children:e.value})]}))}))})})),(0,ee.tZ)(re(),{id:"bfbb8b62e7b10f1d",children:'.input-group.jsx-bfbb8b62e7b10f1d{display:grid;grid-template-columns:1fr -webkit-min-content;grid-template-columns:1fr min-content;grid-gap:10px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:start;justify-content:start}.inputbox.jsx-bfbb8b62e7b10f1d{background:var(--background-higher);color:var(--foreground-default);border:none;-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);padding:var(--space-8);outline:none;resize:none;font-family:"IBM Plex Sans",sans-serif;font-size:var(--font-size-default);line-height:16px;overflow-y:auto;max-height:-webkit-calc(var(--font-size-default)*18);max-height:-moz-calc(var(--font-size-default)*18);max-height:calc(var(--font-size-default)*18)}.inputbox.jsx-bfbb8b62e7b10f1d::-webkit-input-placeholder{white-space:pre}.inputbox.jsx-bfbb8b62e7b10f1d:-moz-placeholder{white-space:pre}.inputbox.jsx-bfbb8b62e7b10f1d::-moz-placeholder{white-space:pre}.inputbox.jsx-bfbb8b62e7b10f1d:-ms-input-placeholder{white-space:pre}.inputbox.jsx-bfbb8b62e7b10f1d::-ms-input-placeholder{white-space:pre}.inputbox.jsx-bfbb8b62e7b10f1d::placeholder{white-space:pre}.inputbox.hasContent.jsx-bfbb8b62e7b10f1d{-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}.send-button.jsx-bfbb8b62e7b10f1d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center;width:24px;height:24px;background:var(--background-highest);color:var(--foreground-dimmest);border:none;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%}.send-button.jsx-bfbb8b62e7b10f1d:focus{outline:none}.send-button.isValid.jsx-bfbb8b62e7b10f1d{background:var(--accent-primary-default);color:var(--white);cursor:pointer}.send-button.isValid.jsx-bfbb8b62e7b10f1d:hover{background:var(--accent-primary-default)}.send-button.isValid.jsx-bfbb8b62e7b10f1d:active{background:var(--accent-primary-default)}.mention-suggestions-container.jsx-bfbb8b62e7b10f1d{padding-top:1em;display:grid;grid-row-gap:var(--space-4);overflow:hidden}.mention-suggestion.jsx-bfbb8b62e7b10f1d{display:grid;grid-template-columns:-webkit-min-content -webkit-max-content;grid-template-columns:min-content max-content;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-column-gap:var(--space-8);padding:var(--space-8)0;cursor:pointer;color:var(--foreground-default)}.mention-suggestion.selected.jsx-bfbb8b62e7b10f1d{background-color:var(--background-root)}.mention-suggestion.selected.jsx-bfbb8b62e7b10f1d>*.jsx-bfbb8b62e7b10f1d{-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);-o-transform:scale(1.1);transform:scale(1.1)}'})]})}));Yd.displayName="ThreadInputForwarded";var $d=Yd,Qd=r(9917),Jd=r(35977);function ef(e){var t=e.message,r=e.messageStyle,n=ie.useMemo((function(){return"TextMessageContentType"===t.content.__typename?jd(t.content.text,{}):"PreviewMessageContentType"===t.content.__typename&&"string"===typeof t.content.preview?jd(t.content.preview,{}):null}),[t.content]),a="PreviewMessageContentType"===t.content.__typename&&"string"!==typeof t.content.preview;return t.user&&(n||a)?(0,ee.BX)("div",{className:"jsx-e1dab5bcce309da6 "+(r||""),children:[(0,ee.BX)("div",{className:"jsx-e1dab5bcce309da6 message",children:[n&&(0,ee.tZ)(Zd,{message:n,codeStyles:{color:"var(--accent-negative-default)",background:"var(--background-highest)"}}),a&&(0,ee.BX)("span",{className:"jsx-e1dab5bcce309da6 typing-indicator",children:[(0,ee.tZ)("span",{className:"jsx-e1dab5bcce309da6 dot"}),(0,ee.tZ)("span",{className:"jsx-e1dab5bcce309da6 dot"}),(0,ee.tZ)("span",{className:"jsx-e1dab5bcce309da6 dot"})]})]}),(0,ee.tZ)(re(),{id:"e1dab5bcce309da6",children:".message.jsx-e1dab5bcce309da6{background:var(--background-higher);padding:var(--space-4)var(--space-8);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);font-size:var(--font-size-default);overflow-wrap:break-word;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;max-width:100%;white-space:pre-wrap}.userhighlight.jsx-e1dab5bcce309da6 .message.jsx-e1dab5bcce309da6{background:transparent}.typing-indicator.jsx-e1dab5bcce309da6{min-height:1em;display:grid;grid-auto-flow:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:var(--space-8)}.dot.jsx-e1dab5bcce309da6{width:6px;height:6px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;display:inline-block;background-color:var(--foreground-dimmest);-webkit-animation:pulse.6s infinite;-moz-animation:pulse.6s infinite;-o-animation:pulse.6s infinite;animation:pulse.6s infinite}.dot.jsx-e1dab5bcce309da6:nth-child(1){-webkit-animation-delay:0s;-moz-animation-delay:0s;-o-animation-delay:0s;animation-delay:0s}.dot.jsx-e1dab5bcce309da6:nth-child(2){-webkit-animation-delay:.2s;-moz-animation-delay:.2s;-o-animation-delay:.2s;animation-delay:.2s}.dot.jsx-e1dab5bcce309da6:nth-child(3){-webkit-animation-delay:.4s;-moz-animation-delay:.4s;-o-animation-delay:.4s;animation-delay:.4s}@keyframes pulse{0%{background-color:var(--foreground-dimmest)}50%{background-color:var(--foreground-dimmest)}100%{background-color:var(--foreground-dimmest)}}"})]}):null}var tf=r(61261);function rf(e){var t=e.message,r=ie.useMemo((function(){var e=t.timeCreated;return e?(0,tf.Z)(new Date(e),"do MMM, hh:mm a"):""}),[t]),n=t.user;return(0,ee.tZ)("div",{className:"resolved-message",children:(0,ee.BX)(ye.Ug,{align:"center",spacing:1,children:[n&&(0,ee.tZ)(Kt.Z,{url:n.image,size:"m"}),(0,ee.tZ)(Ye.Z,{color:"var(--foreground-default)",size:24}),(0,ee.BX)(ge.Z,{size:"xsmall",children:["Resolved ",r]})]})})}function nf(e){var t=e.message,r=ie.useMemo((function(){var e=t.timeCreated;return e?(0,tf.Z)(new Date(e),"do MMM, hh:mm a"):""}),[t]),n=t.user;return(0,ee.tZ)("div",{className:"resolved-message",children:(0,ee.BX)(ye.Ug,{align:"center",spacing:1,children:[n&&(0,ee.tZ)(Kt.Z,{url:n.image,size:"m"}),(0,ee.tZ)(Ye.Z,{size:24,color:"var(--foreground-dimmest)"}),(0,ee.BX)(ge.Z,{size:"xsmall",children:["Unresolved ",r]})]})})}var af=function(e){var t=new Date(e),r=new Date;return(0,Jd.Z)(r,t)<60?"now":(0,Qd.F)(t,!0)};function of(e){var t=e.messageGroup,r=t.messages,n=t.user,a=t.timeCreated;return n?(0,ee.BX)("div",{className:"jsx-3469fc8bae278840 message-group",children:[(0,ee.BX)("div",{className:"jsx-3469fc8bae278840 message-info",children:[(0,ee.tZ)("div",{className:"jsx-3469fc8bae278840 avatar",children:(0,ee.tZ)(Kt.Z,{url:n.image,size:"xs",style:{minHeight:"15px",minWidth:"15px",height:"15px",width:"15px"}})}),(0,ee.tZ)("div",{className:"jsx-3469fc8bae278840 username",children:n.username}),(0,ee.tZ)("div",{className:"jsx-3469fc8bae278840 time",children:af(a)})]}),(0,ee.tZ)("div",{className:"jsx-3469fc8bae278840 messages",children:r.map((function(e){return(0,ee.tZ)(ef,{message:e},e.id)}))}),(0,ee.tZ)(re(),{id:"3469fc8bae278840",children:".message-group.jsx-3469fc8bae278840{background-color:var(--background-default);color:var(--foreground-default);display:grid;position:relative;grid-template-rows:auto auto;grid-row-gap:var(--space-8);grid-template-columns:minmax(0,1fr)}.message-info.jsx-3469fc8bae278840{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:var(--font-size-small)}.messages.jsx-3469fc8bae278840{display:grid;grid-row-gap:var(--space-4);grid-template-columns:minmax(0,1fr)}.avatar.jsx-3469fc8bae278840{margin-right:5px}.username.jsx-3469fc8bae278840{color:var(--foreground-dimmer);font-weight:var(--font-weight-medium);margin-right:3px}.time.jsx-3469fc8bae278840{color:var(--foreground-dimmest)}"})]}):null}function lf(e){var t=e.messageGroup;if("TextMessageContentType"===t.messageType||"PreviewMessageContentType"===t.messageType)return(0,ee.tZ)(of,{messageGroup:t});if("StatusMessageContentType"===t.messageType){var r=t.messages[0];if("StatusMessageContentType"===r.content.__typename&&"resolved"===r.content.status)return(0,ee.tZ)(rf,{message:r});if("StatusMessageContentType"===r.content.__typename&&"unresolved"===r.content.status)return(0,ee.tZ)(nf,{message:r})}return null}function cf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||df(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uf(e){return function(e){if(Array.isArray(e))return cf(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||df(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function df(e,t){if(e){if("string"===typeof e)return cf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cf(e,t):void 0}}var ff=function(e){var t=e.annote,r=e.onFinalizeMessage,n=void 0===r?function(){}:r,a=e.onChangeMessage,i=void 0===a?function(){}:a,o=e.onResolve,l=void 0===o?function(){}:o,c=e.onRequestClose,s=void 0===c?function(){}:c,u=e.style,d=e.width,f=t.messages,p=ie.useRef(null),b=ie.useRef(null),m=Md(t.id),h=sf((0,ya.L)({accept:[Aa.z.FileNode,Aa.z.FileHeaderTab],collect:function(e){var t,r=null===(t=e.getItem())||void 0===t?void 0:t.isFolder;return{isOver:e.isOver({shallow:!0})&&!r}},canDrop:function(e){return!e.isFolder},drop:function(e){e&&!e.isFolder&&n({messageId:Yu()(),message:"#".concat(e.path)})}}),2),v=h[0],g=h[1],y=(0,Ad.Z)((function(e){var t,r=e.target;r.closest(".node-row")||r.closest(".file-header-tab")||""!==(null===(t=b.current)||void 0===t?void 0:t.value)||s()}),[]);Ld(t),ie.useEffect((function(){var e=function(e){var t;"Escape"===e.key&&""===(null===(t=b.current)||void 0===t?void 0:t.value)&&s()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[s]),ie.useEffect((function(){p.current&&(p.current.scrollTop=p.current.scrollHeight)}),[f]);var x=ie.useMemo((function(){var e,t=uf(f).sort((function(e,t){return new Date(e.timeCreated).getTime()-new Date(t.timeCreated).getTime()}));return(e=t).push.apply(e,uf(m.filter((function(e){return!t.slice(-5).find((function(t){return t.id===e.id}))})))),Td(t)}),[f,m]),w=f.length>0;return(0,ee.BX)("div",{style:u,ref:function(e){g(e),y.current=e},className:"jsx-".concat(Id.Q.__hash)+" "+re().dynamic([["57b6bf0a275e3bf5",[d]]])+" "+(At()("annotation-group",{"is-over":v.isOver})||""),children:[x.length>0&&(0,ee.tZ)("div",{ref:p,className:"jsx-".concat(Id.Q.__hash)+" "+re().dynamic([["57b6bf0a275e3bf5",[d]]])+" message-group-container",children:x.map((function(e){return(0,ee.tZ)(lf,{messageGroup:e},e.messages[0].id)}))}),(0,ee.tZ)($d,{annote:t,onChangeMessage:i,onFinalizeMessage:n,ref:b}),(0,ee.BX)("div",{className:"jsx-".concat(Id.Q.__hash)+" "+re().dynamic([["57b6bf0a275e3bf5",[d]]])+" floating-group",children:[w?(0,ee.tZ)("div",{className:"jsx-".concat(Id.Q.__hash)+" "+re().dynamic([["57b6bf0a275e3bf5",[d]]])+" delete show-on-hover",children:(0,ee.tZ)("button",{"aria-label":"Resolve","data-microtip-position":"top",role:"tooltip",onClick:function(e){l(e)},className:"jsx-".concat(Id.Q.__hash)+" "+re().dynamic([["57b6bf0a275e3bf5",[d]]])+" floating-button resolve",children:(0,ee.tZ)(Ye.Z,{})})}):null,(0,ee.tZ)("div",{className:"jsx-".concat(Id.Q.__hash)+" "+re().dynamic([["57b6bf0a275e3bf5",[d]]])+" close",children:(0,ee.tZ)("button",{"aria-label":"Close","data-microtip-position":"top",role:"tooltip",onClick:s,className:"jsx-".concat(Id.Q.__hash)+" "+re().dynamic([["57b6bf0a275e3bf5",[d]]])+" floating-button close",children:(0,ee.tZ)(Yt.Z,{})})})]}),(0,ee.tZ)(re(),{id:Id.Q.__hash,children:Id.Q}),(0,ee.tZ)(re(),{id:"57b6bf0a275e3bf5",dynamic:[d],children:".annotation-group.__jsx-style-dynamic-selector{position:absolute;z-index:10;position:relative;display:grid;grid-row-gap:var(--space-16);-webkit-justify-content:stretch;justify-content:stretch;background-color:var(--background-default);padding:var(--space-8);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);width:".concat(d,"px;-webkit-box-shadow:var(--shadow-2);-moz-box-shadow:var(--shadow-2);box-shadow:var(--shadow-2);border:.5px solid var(--background-higher)}.annotation-group.is-over.__jsx-style-dynamic-selector{background-color:var(--background-root)}.annotation-group.__jsx-style-dynamic-selector *.__jsx-style-dynamic-selector{-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.message-group-container.__jsx-style-dynamic-selector{display:grid;grid-row-gap:var(--space-16);max-height:275px;overflow-y:auto;padding:var(--space-8);padding-bottom:0;grid-template-columns:minmax(0,1fr)}.floating-group.__jsx-style-dynamic-selector{position:absolute;display:grid;grid-auto-flow:column;-webkit-justify-content:end;justify-content:end;grid-column-gap:8px;top:-32px;left:0;right:0}.floating-group.__jsx-style-dynamic-selector .show-on-hover.__jsx-style-dynamic-selector{opacity:0}.annotation-group.__jsx-style-dynamic-selector:hover>.floating-group.__jsx-style-dynamic-selector .show-on-hover.__jsx-style-dynamic-selector{opacity:1}.feedback.__jsx-style-dynamic-selector{position:absolute;text-decoration:none}.floating-button.__jsx-style-dynamic-selector{width:24px;height:24px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;background:var(--background-higher);color:var(--foreground-dimmer);border:1px solid var(--background-highest);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center;cursor:pointer;-webkit-box-shadow:var(--shadow-2);-moz-box-shadow:var(--shadow-2);box-shadow:var(--shadow-2)}.floating-button.__jsx-style-dynamic-selector:focus{outline:none}.floating-button.__jsx-style-dynamic-selector:hover{color:var(--foreground-default);background:var(--background-higher)}.floating-button.delete.__jsx-style-dynamic-selector:hover{color:var(--white);background:var(--accent-negative-default);border-color:var(--accent-negative-default)}.floating-button.resolve.__jsx-style-dynamic-selector:hover{color:var(--white);background:var(--accent-positive-default);border-color:var(--accent-positive-default)}.floating-button.__jsx-style-dynamic-selector:active{background:var(--background-highest)}")})]})};function pf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return pf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pf(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mf(e){var t=e.annote,r=bf(ie.useState(null),2),n=r[0],a=r[1];ie.useEffect((function(){var e=t.messages[t.messages.length-1];if(e&&!e.currentUserIsAuthor){var r=new Date(e.timeCreated).getTime();if(!(Date.now()-r>5e3)){a(e);var n=setTimeout((function(){a(null)}),3e3);return function(){return clearTimeout(n)}}a(null)}else a(null)}),[t]);var i=ie.useMemo((function(){if("TextMessageContentType"!==(null===n||void 0===n?void 0:n.content.__typename))return null;var e=null===n||void 0===n?void 0:n.content.text;return e?jd(e,{}):null}),[n]);return n&&i?(0,ee.BX)("div",{className:"jsx-63503081fb661f99 annotation-message-popup",children:[n.user&&(0,ee.tZ)(Kt.Z,{url:n.user.image,size:"xs",style:{minWidth:"16px",minHeight:"16px",height:"16px",width:"16px"}},n.user.id),(0,ee.tZ)("div",{className:"jsx-63503081fb661f99 annotation-message-popup-text",children:(0,ee.tZ)(Zd,{message:i})}),(0,ee.tZ)(re(),{id:"63503081fb661f99",children:".annotation-message-popup.jsx-63503081fb661f99{position:absolute;background-color:var(--background-default);padding:4px;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);border:.5px solid var(--background-higher);-webkit-box-shadow:var(--shadow-1);-moz-box-shadow:var(--shadow-1);box-shadow:var(--shadow-1);display:grid;grid-auto-flow:column;grid-column-gap:var(--space-8);grid-template-columns:-webkit-min-content -webkit-max-content;grid-template-columns:min-content max-content;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;-webkit-transform:translateX(5px);-moz-transform:translateX(5px);-ms-transform:translateX(5px);-o-transform:translateX(5px);transform:translateX(5px)}.annotation-message-popup-text.jsx-63503081fb661f99{font-family:IBM Plex Sans;font-style:normal;font-weight:normal;font-size:.8em;color:var(--foreground-default)}"})]}):null}function hf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vf(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){vf(e,t,r[t])}))}return e}function yf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||wf(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xf(e){return function(e){if(Array.isArray(e))return hf(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||wf(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wf(e,t){if(e){if("string"===typeof e)return hf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hf(e,t):void 0}}function kf(e,t){var r=t.onReceiveAnnotationUpdate,n=void 0===r?function(){}:r,a=(0,qt.Z)().showError,i=yf(ie.useState(null),2),o=i[0],l=i[1],c=(0,ke.xTD)({variables:{replId:e}}),s=function(){var e,t=null===(e=c.data)||void 0===e?void 0:e.currentUser;return t?{user:{__typename:"User",id:t.id,username:t.username,image:t.image}}:{}},u=function(t,r){var n=t.readQuery({query:ke.yiQ,variables:{replId:e}}),a=[],i=n.repl.annotationAnchors,o=i.findIndex((function(e){return e.id===r.id}));a=-1===o?xf(i).concat([r]):xf(i.slice(0,o)).concat([r],xf(i.slice(o+1))),t.writeQuery({query:ke.yiQ,variables:{replId:e},data:gf({},n,{repl:gf({},n.repl,{annotationAnchors:a})})})},d=yf((0,ke.ASh)({onError:function(e){return a(e.message)},update:function(e,t){var r;if(t.errors)t.errors.forEach((function(e){return a(e.message)}));else{var n=null===(r=t.data)||void 0===r?void 0:r.createAnnotationAnchor;n&&("UserError"===n.__typename?a(n.message):"AnnotationAnchor"===n.__typename&&u(e,n))}}}),1),f=d[0],p=yf((0,ke.gEq)({onError:function(e){return a(e.message)},update:function(e,t){var r;if(t.errors)t.errors.forEach((function(e){return a(e.message)}));else{var n=null===(r=t.data)||void 0===r?void 0:r.createAnnotationMessage;n&&("UserError"===n.__typename?a(n.message):"AnnotationAnchor"===n.__typename&&u(e,n))}}}),1),b=p[0],m=yf((0,ke.RpE)({onError:function(e){return a(e.message)},update:function(e,t){var r;if(t.errors)t.errors.forEach((function(e){return a(e.message)}));else{var n=null===(r=t.data)||void 0===r?void 0:r.updateAnnotationAnchor;n&&("UserError"===n.__typename?a(n.message):"AnnotationAnchor"===n.__typename&&u(e,n))}}}),1),h=m[0],v=yf((0,ke.nAY)(),1)[0],g=yf((0,ke.HjV)(),1)[0];(0,ke.Tt1)({variables:{replId:e},onSubscriptionData:function(e){var t=e.subscriptionData.data,r=e.client,a=null===t||void 0===t?void 0:t.updatedAnnotation;a&&(u(r,a),n(a))}});var y=yf(ie.useState([]),2),x=y[0],w=y[1];ie.useEffect((function(){var e,t,r=[];"Repl"===(null===(e=c.data)||void 0===e?void 0:e.repl.__typename)&&(t=r).push.apply(t,xf(c.data.repl.annotationAnchors));o&&r.push(gf({},o,{isGeneral:Boolean(o.isGeneral),messages:[],isResolved:!1,__typename:"AnnotationAnchor"})),w(r)}),[c,o]);var k=ie.useMemo((function(){return x.find((function(e){return e.isGeneral}))}),[x]),j=ie.useMemo((function(){return x.reduce((function(e,t){return t.isResolved?e:t.messages.some((function(e){return!1===e.seen}))?e+1:e}),0)}),[x]),Z=function(e){var t=e.annotationAnchor,r=e.annotationMessage,n=e.highlight;f({variables:{annotationAnchor:t,annotationMessage:r,highlight:n},optimisticResponse:{createAnnotationAnchor:gf({},s(),t,{isGeneral:Boolean(t.isGeneral),__typename:"AnnotationAnchor",messages:r?[gf({},s(),r,{content:{text:r.text,__typename:"TextMessageContentType"},anchor:{id:t.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:Date.now(),currentUserIsAuthor:!0,seen:!0})]:[],isResolved:!1})}})};return{annotations:x,generalThread:k,unreadThreadCount:j,placeholderAnchorId:null===o||void 0===o?void 0:o.id,createAnnotationAnchorPlaceholder:function(e){var t=e.annotationAnchor;l(t)},deleteAnnotationAnchorPlaceholder:function(){l(null)},createAnnotationAnchor:Z,createAnnotationMessage:function(t){var r=t.anchor,n=t.annotationMessage,a=t.highlight;(null===o||void 0===o?void 0:o.id)===r.id?(l(null),Z({annotationAnchor:gf({},o),annotationMessage:n,highlight:a})):b({variables:{replId:e,anchorId:r.id,annotationMessage:n,highlight:a},optimisticResponse:{createAnnotationMessage:gf({},r,{messages:xf(r.messages.filter((function(e){return!e.id.startsWith("chat-")}))).concat([gf({},s(),n,{content:{text:n.text,__typename:"TextMessageContentType"},anchor:{id:r.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:Date.now(),currentUserIsAuthor:!0,seen:!0})])})}})},updateAnnotationAnchor:function(e){var t=e.annotationAnchor,r=e.changes;h({variables:{id:t.id,changes:r},optimisticResponse:{updateAnnotationAnchor:gf({},t,r,{isResolved:"boolean"===typeof r.isResolved?r.isResolved:t.isResolved})}})},updateThreadPreview:function(e){var t=e.threadId,r=e.messageId,n=e.message;g({variables:{threadId:t,messageId:r,message:n}})},markAllMessagesInReplAsSeenByUser:function(){v({variables:{replId:e}})}}}var jf=r(50553),Zf=r(86072),Sf=r(26687),Ef=r(98620),Of=r(33090),_f=r(32378);function Cf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Af(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Cf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cf(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var If=ie.createContext({setThreadsVisibility:function(){},threadsVisibility:!1}),Nf=If;function Tf(e){var t=e.children,r=Af(ie.useState(!1),2),n=r[0],a=r[1];return(0,ee.tZ)(If.Provider,{value:{threadsVisibility:n,setThreadsVisibility:a},children:t})}function Pf(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rf(e){return(0,ee.tZ)(Oe.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Pf(e,t,r[t])}))}return e}({},e,{children:(0,ee.tZ)("path",{d:"M16 21V19C16 17.9391 15.5786 16.9217 14.8284 16.1716C14.0783 15.4214 13.0609 15 12 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21M17 11L19 13L23 9M12.5 7C12.5 9.20914 10.7091 11 8.5 11C6.29086 11 4.5 9.20914 4.5 7C4.5 4.79086 6.29086 3 8.5 3C10.7091 3 12.5 4.79086 12.5 7Z",strokeLinecap:"round",strokeLinejoin:"round"})}))}var Lf=r(85106);var Df=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).allowNoWid,t=ie.useContext(Lf.Z);if(!t){if(e)return null;throw new Error("Expected wid to be in wid context")}return t},Uf=r(22692);var zf,Bf=r(60172);function Mf(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function Ff(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Mf(i,n,a,o,l,"next",e)}function l(e){Mf(i,n,a,o,l,"throw",e)}o(void 0)}))}}function Xf(e,t,r){return Vf.apply(this,arguments)}function Vf(){return(Vf=Ff(J().mark((function e(t,r,n){var a,i,o,l;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.path&&"number"===typeof t.indexStart&&"number"===typeof t.indexEnd&&t.otVersion){e.next=2;break}return e.abrupt("return");case 2:if(n!==t.otVersion){e.next=4;break}return e.abrupt("return",{path:t.path,indexStart:t.indexStart,indexEnd:t.indexEnd,otVersion:t.otVersion});case 4:return a=n,i=window.performance.now(),o=function(){(0,ft.j)(ft.U3.ANNOTATION_FASTFORWARDED,{opCount:a-t.otVersion,anchorId:t.id,flagPid1Fastforwards:!0,time:window.performance.now()-i})},e.next=9,r({indexStart:t.indexStart,indexEnd:t.indexEnd,versionFrom:t.otVersion,versionTo:a});case 9:return l=e.sent,o(),e.abrupt("return",{path:t.path,indexStart:l.indexStart,indexEnd:l.indexEnd,otVersion:a});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Hf(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function Wf(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Hf(i,n,a,o,l,"next",e)}function l(e){Hf(i,n,a,o,l,"throw",e)}o(void 0)}))}}function Kf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Gf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gf(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qf(){return(qf=Wf(J().mark((function e(t){var r,n,a,i,o,l,c,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.anchor,n=t.version,a=t.transformSelection,i=t.content,r.path){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,Xf(r,a,n);case 5:if(o=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return c=function(){},s=function(){try{for(var e=Bf.xv.of(i.split("\n")),t=e.lineAt(o.indexStart),r=e.lineAt(o.indexEnd),n=[],a=t.number===r.number?Math.max(0,t.number-1):t.number,l=Math.min(e.lines,r.number+1),c=a;c<=l;c++)n.push(e.line(c).text);return{startLineNumber:a,lines:n}}catch(s){st.Tb(s)}},e.abrupt("return",{anchor:r,newSelection:o,newPosition:undefined,selectedContent:l,getHighlight:c,getSnippet:s});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yf(e){var t=(0,Ie.Z)().fs,r=Kf(ie.useState(null),2),n=r[0],a=r[1],i=ie.useRef(null),o=ie.useRef(null),l=Kf(ie.useState(!1),2),c=l[0],s=l[1];return ie.useEffect((function(){if(null===e||void 0===e?void 0:e.path){var r=function(){o.current=null,s(!1)},n=t.watchOtFile(e.path,{onReady:function(e){var t=e.transformSelection,r=e.initialContent;i.current=r.toString(),o.current=t,s(!0)},onMoveOrDelete:function(){r()},onError:function(e){st.Tb(e),r()},onChange:function(e){var t=e.latestContent;i.current=t}});return function(){r(),n()}}}),[e,t]),ie.useEffect((function(){(null===e||void 0===e?void 0:e.path)&&c&&o.current&&null!==i.current&&function(e){return qf.apply(this,arguments)}({anchor:e,version:t.getOTVersion(e.path),transformSelection:o.current,content:i.current}).then((function(e){a(e)})).catch((function(){a(null)}))}),[t,e,c]),n}function $f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Qf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||ep(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jf(e){return function(e){if(Array.isArray(e))return $f(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ep(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ep(e,t){if(e){if("string"===typeof e)return $f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$f(e,t):void 0}}function tp(e){var t,r=e.annotation,n=e.onChangeMessage,a=void 0===n?function(){}:n,i=e.onFinalizeMessage,o=void 0===i?function(){}:i,l=e.onCloseThread,c=void 0===l?function(){}:l,s=e.scrollToAnchor,u=void 0===s?function(){}:s,d=e.markThreadResolved,f=void 0===d?function(){}:d,p=e.markThreadUnresolved,b=void 0===p?function(){}:p,m=(0,Ei.Z)("flag-thread-snippets"),h=Md(r.id),v=Yf(r),g=ie.useMemo((function(){var e,t=Jf(r.messages).sort((function(e,t){return new Date(e.timeCreated).getTime()-new Date(t.timeCreated).getTime()}));return(e=t).push.apply(e,Jf(h.filter((function(e){return!t.slice(-5).find((function(t){return t.id===e.id}))})))),Td(t)}),[r,h]),y=ie.useMemo((function(){if(v)return null===v||void 0===v?void 0:v.getSnippet()}),[v]),x=ie.useRef(null);Ld(r);ie.useEffect((function(){x.current&&(x.current.scrollTop=x.current.scrollHeight)}),[x,r]);var w=(null===v||void 0===v||null===(t=v.anchor)||void 0===t?void 0:t.path)||r.path||"";return(0,ee.BX)(ee.HY,{children:[(0,ee.BX)("div",{className:"jsx-f601ef3cc045c3e6 header",children:[(0,ee.tZ)("span",{className:"jsx-f601ef3cc045c3e6",children:(0,ee.tZ)(ve.Z,{filled:!1,border:!1,onClick:c,children:(0,ee.tZ)(jf.Z,{rotate:90})})}),(0,ee.tZ)("span",{className:"jsx-f601ef3cc045c3e6 separator"}),(0,ee.BX)(ye.Ug,{children:[!r.isResolved&&r.path&&(0,ee.tZ)(ve.Z,{filled:!1,border:!1,"aria-label":"Jump to code",role:"tooltip","data-microtip-position":"left",onClick:function(){return u(r.id)},children:(0,ee.tZ)(Zf.Z,{})}),!r.isResolved&&!r.isGeneral&&(0,ee.tZ)(ve.Z,{filled:!1,border:!1,"aria-label":"Resolve thread",role:"tooltip","data-microtip-position":"left",onClick:function(){return f(r)},children:(0,ee.tZ)(Ye.Z,{})}),r.isResolved&&!r.isGeneral&&(0,ee.tZ)(ve.Z,{filled:!1,border:!1,"aria-label":"Unresolve thread",role:"tooltip","data-microtip-position":"left",onClick:function(){return b(r)},children:(0,ee.tZ)(Rf,{})})]}),(0,ee.tZ)(re(),{id:"f601ef3cc045c3e6",children:".separator.jsx-f601ef3cc045c3e6{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.header.jsx-f601ef3cc045c3e6{padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;min-height:32px}"})]}),(0,ee.BX)("div",{className:"jsx-e771b3432a43458d "+"jsx-".concat(Id.Q.__hash)+" thread",children:[(0,ee.tZ)("div",{className:"jsx-e771b3432a43458d "+"jsx-".concat(Id.Q.__hash)+" message-group-container-container",children:(0,ee.BX)("div",{ref:x,className:"jsx-e771b3432a43458d "+"jsx-".concat(Id.Q.__hash)+" message-group-container",children:[m&&r.path&&(0,ee.tZ)(_f.u5,{path:w,snippet:y,onNavigateToCode:function(){return u(r.id)}}),g.map((function(e){return(0,ee.tZ)(lf,{messageGroup:e},e.messages[0].id)}))]})}),(0,ee.tZ)($d,{annote:r,onChangeMessage:a,onFinalizeMessage:o}),(0,ee.tZ)(re(),{id:Id.Q.__hash,children:Id.Q}),(0,ee.tZ)(re(),{id:"e771b3432a43458d",children:".thread.jsx-e771b3432a43458d{position:relative;display:grid;grid-row-gap:var(--space-16);-webkit-justify-content:stretch;justify-content:stretch;overflow:hidden;padding:var(--space-16);padding-top:0;grid-template-rows:1fr -webkit-min-content;grid-template-rows:1fr min-content;height:100%}.message-group-container-container.jsx-e771b3432a43458d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;overflow:hidden;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.message-group-container.jsx-e771b3432a43458d{display:grid;grid-row-gap:var(--space-16);overflow-y:auto;padding:var(--space-8);padding-bottom:0}"})]})]})}function rp(e){var t=e.unreadCount;return(0,ee.BX)("div",{className:"jsx-7452becc48d76305 count-container",children:[t>0?(0,ee.tZ)("div",{className:"jsx-7452becc48d76305 count",children:t}):null,(0,ee.tZ)(re(),{id:"7452becc48d76305",children:".count-container.jsx-7452becc48d76305{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;height:15px}.count.jsx-7452becc48d76305{background:var(--accent-primary-default);color:var(--white);font-size:var(--font-size-small);height:15px;padding:0 5px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center}"})]})}function np(e){var t,r=e.annotation,n=e.onClick,a=r.messages.some((function(e){return!e.seen})),i=Yf(r),o=ie.useMemo((function(){return r.messages.filter((function(e){return!1===e.seen})).length}),[r]),l=Ed(r),c=l.map((function(e){return e.username})).join(", "),s=r.messages[0],u=r.messages[r.messages.length-1],d=(null===i||void 0===i?void 0:i.anchor.path)||(null===r||void 0===r?void 0:r.path)||void 0,f=ie.useMemo((function(){if(i)return null===i||void 0===i?void 0:i.getSnippet()}),[i]),p=(null===r||void 0===r?void 0:r.user)?{src:r.user.image,alt:"".concat(null===(t=r.user)||void 0===t?void 0:t.username,"'s avatar")}:void 0,b="TextMessageContentType"===(null===r||void 0===r?void 0:r.messages[0].content.__typename)?r.messages[0].content.text:void 0,m=ie.useMemo((function(){if(!(null===u||void 0===u?void 0:u.timeCreated))return"";var e=new Date(u.timeCreated),t=e.getTime();return Date.now()-t<1e3?"just now":"".concat((0,Qd.F)(e,!0)," ago")}),[u]);return s?r.path?(0,ee.tZ)(_f.dp,{path:d,snippet:f,timeString:m,onClick:n,avatar:p,message:b}):(0,ee.BX)("button",{onClick:n,tabIndex:0,className:"jsx-e71b06328d0d68b1 "+(At()("thread",{unread:a})||""),children:[(0,ee.tZ)("div",{className:"jsx-e71b06328d0d68b1 profile",children:(0,ee.tZ)(Of.Z,{users:l})}),(0,ee.BX)("div",{className:"jsx-e71b06328d0d68b1 message-preview",children:[(0,ee.tZ)("div",{className:"jsx-e71b06328d0d68b1 thread-title",children:c}),"TextMessageContentType"===s.content.__typename&&(0,ee.tZ)("div",{className:"jsx-e71b06328d0d68b1 thread-preview",children:s.content.text})]}),(0,ee.BX)("div",{className:"jsx-e71b06328d0d68b1 info",children:[(0,ee.tZ)(rp,{unreadCount:o}),(0,ee.tZ)("div",{className:"jsx-e71b06328d0d68b1 time",children:m})]}),(0,ee.tZ)(re(),{id:"e71b06328d0d68b1",children:".thread.jsx-e71b06328d0d68b1{background:var(--background-default);padding:var(--space-8);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);display:grid;grid-auto-flow:column;grid-template-columns:-webkit-min-content minmax(0,1fr)-webkit-min-content;grid-template-columns:min-content minmax(0,1fr)min-content;grid-gap:var(--space-8);width:100%;max-height:52px;overflow:hidden;cursor:pointer;-webkit-transition:.1s all ease-in-out;-moz-transition:.1s all ease-in-out;-o-transition:.1s all ease-in-out;transition:.1s all ease-in-out;border:none;text-align:left}.thread.unread.jsx-e71b06328d0d68b1 .thread-title.jsx-e71b06328d0d68b1{font-weight:var(--font-weight-bold)}.thread.jsx-e71b06328d0d68b1:hover{-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-ms-transform:scale(1.05);-o-transform:scale(1.05);transform:scale(1.05);-webkit-transition:.2s all;-moz-transition:.2s all;-o-transition:.2s all;transition:.2s all}.thread.jsx-e71b06328d0d68b1:focus{outline:none;outline-offset:2px;-webkit-box-shadow:0 0 0 3px var(--accent-primary-dimmer);-moz-box-shadow:0 0 0 3px var(--accent-primary-dimmer);box-shadow:0 0 0 3px var(--accent-primary-dimmer)}.thread-title.jsx-e71b06328d0d68b1,.thread-preview.jsx-e71b06328d0d68b1{white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.thread-title.jsx-e71b06328d0d68b1{color:var(--foreground-default);font-size:var(--font-size-default)}.thread-preview.jsx-e71b06328d0d68b1{color:var(--foreground-dimmer);font-size:var(--font-size-small)}.profile.jsx-e71b06328d0d68b1{width:25px;height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.time.jsx-e71b06328d0d68b1{white-space:pre;font-size:var(--font-size-small);color:var(--foreground-dimmest)}.info.jsx-e71b06328d0d68b1{display:grid;grid-gap:var(--space-4);-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end}"})]}):null}function ap(e){var t=e.generalThreadsOpen,r=e.setGeneralThreadsOpen,n=(0,we.Z)(),a=ie.useContext(Dd),i=a.generalThread,o=a.handleChangeMessage,l=a.handleFinalizeMessage,c=a.createAnnotationAnchorPlaceholder,s=ie.useMemo((function(){return i?Td(Jf(i.messages).sort((function(e,t){return new Date(e.timeCreated).getTime()-new Date(t.timeCreated).getTime()}))):[]}),[i]);ie.useEffect((function(){i||c({annotationAnchor:{id:Yu()(),replId:n,isGeneral:!0,indexStart:null,indexEnd:null,isResolved:!1,otVersion:null,path:null}})}),[i,n,c]);var u=ie.useMemo((function(){return i?i.messages.filter((function(e){return!1===e.seen})).length:0}),[i]),d=ie.useRef(null);Ld(t&&i||null);return ie.useEffect((function(){d.current&&(d.current.scrollTop=d.current.scrollHeight)}),[d,i]),i?(0,ee.BX)("div",{onClick:function(){return r(!0)},className:"jsx-f2c7b6e2655edf19 "+"jsx-".concat(Id.Q.__hash)+" "+(At()("general-thread",{"is-open":t})||""),children:[(0,ee.BX)("div",{className:"jsx-f2c7b6e2655edf19 "+"jsx-".concat(Id.Q.__hash)+" general-thread-header",children:[(0,ee.BX)(ye.Ug,{spacing:1,align:"center",children:[(0,ee.tZ)(Ne.Z,{level:5,children:"Chat"}),(0,ee.tZ)(rp,{unreadCount:u})]}),(0,ee.tZ)(ye.Ug,{spacing:1,align:"center",children:(0,ee.tZ)(ve.Z,{onClick:function(e){r(!t),e.stopPropagation()},filled:!1,Icon:function(){return(0,ee.tZ)(jf.Z,{rotate:t?0:180})},border:!1,size:"small"})})]}),(0,ee.tZ)("div",{className:"jsx-f2c7b6e2655edf19 "+"jsx-".concat(Id.Q.__hash)+" message-group-container-container",children:(0,ee.tZ)("div",{ref:d,className:"jsx-f2c7b6e2655edf19 "+"jsx-".concat(Id.Q.__hash)+" message-group-container",children:s.map((function(e){return(0,ee.tZ)(lf,{messageGroup:e},e.messages[0].id)}))})}),(0,ee.tZ)("div",{className:"jsx-f2c7b6e2655edf19 "+"jsx-".concat(Id.Q.__hash)+" thread-input-container",children:(0,ee.tZ)($d,{placeholder:"Send message",annote:i,onChangeMessage:function(e){o({anchor:i,message:e.message,messageId:e.messageId}),r(!0)},onFinalizeMessage:function(e){l({anchor:i,message:e.message,messageId:e.messageId}),r(!0),(0,ft.j)(ft.U3.MESSAGE_SENT,{replId:n,source:"generalThreads",variant:"replace-chat"})}})}),(0,ee.tZ)(re(),{id:Id.Q.__hash,children:Id.Q}),(0,ee.tZ)(re(),{id:"f2c7b6e2655edf19",children:".general-thread.jsx-f2c7b6e2655edf19{margin:1px;padding:var(--space-16);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);border-top:1px solid var(--background-higher);-webkit-box-shadow:var(--shadow-2);-moz-box-shadow:var(--shadow-2);box-shadow:var(--shadow-2);z-index:100;position:absolute;bottom:0;left:0;right:0;background:var(--background-default);display:grid;overflow:hidden;grid-template-rows:-webkit-min-content 1fr -webkit-min-content;grid-template-rows:min-content 1fr min-content;grid-gap:var(--space-8);cursor:pointer;-webkit-transition:.2s height;-moz-transition:.2s height;-o-transition:.2s height;transition:.2s height;height:7.5em}.general-thread.is-open.jsx-f2c7b6e2655edf19{height:100%;cursor:unset}.general-thread-header.jsx-f2c7b6e2655edf19{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;width:100%}.message-group-container-container.jsx-f2c7b6e2655edf19{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;overflow:hidden;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:0}.general-thread.is-open.jsx-f2c7b6e2655edf19 .message-group-container-container.jsx-f2c7b6e2655edf19{height:100%}.message-group-container.jsx-f2c7b6e2655edf19{display:grid;grid-row-gap:var(--space-16);overflow-y:auto;padding:var(--space-8);padding-bottom:0}.thread-input-container.jsx-f2c7b6e2655edf19{width:100%}"})]}):null}function ip(e,t){var r,n,a=null===(r=e.messages)||void 0===r?void 0:r[e.messages.length-1],i=null===(n=t.messages)||void 0===n?void 0:n[t.messages.length-1];return a||i?a?i?new Date(i.timeCreated).getTime()-new Date(a.timeCreated).getTime():1:-1:0}function op(e){var t=e.annotations,r=e.inboxMode,n=e.generalThreadsOpen,a=e.setInboxMode,i=e.onThreadClick,o=e.onMarkAllAsReadClick,l=e.onClose,c=e.setGeneralThreadsOpen,s=(0,Ei.Z)("flag-mark-all-threads-as-read"),u=Qf(ie.useState(!1),2),d=u[0],f=u[1],p=(0,Ie.Z)().session,b=ie.useMemo((function(){return t.filter((function(e){return!e.isGeneral&&(r===zf.ACTIVE?!e.isResolved:e.isResolved)})).sort(ip)}),[t,r]),m=Qf(ie.useState(3),2),h=m[0],v=m[1],g=function(e){var t=ie.useRef(null),r=ie.useRef(e);return ie.useEffect((function(){r.current=e}),[e]),function(e){t.current&&t.current.disconnect(),e&&window.IntersectionObserver&&(t.current=new window.IntersectionObserver((function(e){e[0].isIntersecting&&r.current()})),t.current.observe(e))}}((function(){v((function(e){return e+3}))})),y=ie.useMemo((function(){var e={},t=!0,r=!1,n=void 0;try{for(var a,i=b[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o,l=a.value,c=l.messages[l.messages.length-1];if(c){var s=l.path||-1,u=e[s]||{threads:[],unreadCount:0,lastMessageTime:null,path:s,lang:null===(o=l.path)||void 0===o?void 0:o.split(".").slice(-1)[0]};u.threads.push(l),u.unreadCount+=l.messages.filter((function(e){return!1===e.seen})).length,u.lastMessageTime?u.lastMessageTime=new Date(Math.max(u.lastMessageTime.getTime(),new Date(c.timeCreated).getTime())):u.lastMessageTime=new Date(c.timeCreated),e[s]=u}}}catch(d){r=!0,n=d}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}return Object.values(e).sort((function(e,t){return t.lastMessageTime.getTime()-e.lastMessageTime.getTime()}))}),[b]);return(0,ee.BX)("div",{className:"jsx-10034a93e516db1e "+"jsx-".concat(Id.Q.__hash)+" threads-feed",children:[(0,ee.BX)("div",{className:"jsx-10034a93e516db1e "+"jsx-".concat(Id.Q.__hash)+" header",children:[(0,ee.BX)(ye.Ug,{align:"center",spacing:1,children:[(0,ee.tZ)(Ne.Z,{level:4,style:{marginLeft:"var(--space-8)"},children:"Threads"}),(0,ee.tZ)(Ef.Z,{isMenuOpen:d,renderAnchorComponent:function(){return(0,ee.tZ)(ve.Z,{filled:!0,border:!1,onClick:function(){return f(!d)},Icon:jf.Z,iconOnRight:!0,children:r})},renderItemChildComponent:function(e){return(0,ee.tZ)("div",{className:"jsx-10034a93e516db1e "+"jsx-".concat(Id.Q.__hash),children:e.label})},onClick:function(e){a(e.mode),f(!1)},items:[{label:"Active",mode:zf.ACTIVE},{label:"Resolved",mode:zf.RESOLVED}]}),s&&(0,ee.tZ)(ve.Z,{border:!1,filled:!1,Icon:Sf.Z,onClick:o,"aria-label":"Mark all as read",role:"tooltip","data-microtip-position":"bottom"})]}),(0,ee.tZ)("span",{className:"jsx-10034a93e516db1e "+"jsx-".concat(Id.Q.__hash),children:(0,ee.tZ)(ve.Z,{filled:!1,border:!1,onClick:l,children:(0,ee.tZ)(Yt.Z,{})})})]}),(0,ee.tZ)("div",{className:"jsx-10034a93e516db1e "+"jsx-".concat(Id.Q.__hash)+" threads-container",children:(0,ee.BX)(ye.gC,{spacing:6,align:"stretch",children:[(0,ee.BX)(ee.HY,{children:[y.slice(0,h).map((function(e){return(0,ee.BX)("div",{className:"jsx-10034a93e516db1e "+"jsx-".concat(Id.Q.__hash)+" thread-group",children:[-1!==e.path&&(0,ee.tZ)("button",{onClick:function(){"string"===typeof e.path&&p.openFile(e.path)},className:"jsx-10034a93e516db1e "+"jsx-".concat(Id.Q.__hash)+" group-header",children:(0,ee.BX)("div",{className:"jsx-10034a93e516db1e "+"jsx-".concat(Id.Q.__hash)+" left",children:[(0,ee.tZ)(Uf.Z,{path:"number"!==typeof e.path?e.path:"",size:20}),(0,ee.tZ)("span",{className:"jsx-10034a93e516db1e "+"jsx-".concat(Id.Q.__hash)+" path",children:e.path}),(0,ee.tZ)(rp,{unreadCount:e.unreadCount})]})}),e.threads.map((function(e){return(0,ee.tZ)(np,{annotation:e,onClick:function(){return i(e.id)}},e.id)}))]},e.path)})),h<y.length&&(0,ee.tZ)("div",{ref:g,style:{height:"100px"},className:"jsx-10034a93e516db1e "+"jsx-".concat(Id.Q.__hash)})]}),(0,ee.tZ)("div",{className:"jsx-10034a93e516db1e "+"jsx-".concat(Id.Q.__hash)+" general-threads-buffer"})]})}),(0,ee.tZ)(ap,{generalThreadsOpen:n,setGeneralThreadsOpen:c}),(0,ee.tZ)(re(),{id:Id.Q.__hash,children:Id.Q}),(0,ee.tZ)(re(),{id:"6bd29fae0c26abbe",children:"::-webkit-scrollbar-track{background:transparent!important}"}),(0,ee.tZ)(re(),{id:"ca620c0fa3049fc0",children:".feedback.jsx-10034a93e516db1e{text-decoration:none}.threads-feed.jsx-10034a93e516db1e .list-wrapper{z-index:1}.threads-feed.jsx-10034a93e516db1e{height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.threads-container.jsx-10034a93e516db1e{position:relative;padding:var(--space-16);overflow-y:auto;overflow-y:overlay}.header.jsx-10034a93e516db1e{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;padding:var(--space-8);padding-top:var(--space-16);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;min-height:32px}.thread-group.jsx-10034a93e516db1e{max-width:100%;display:grid;grid-gap:var(--space-16)}.group-header.jsx-10034a93e516db1e{color:var(--foreground-default);font-size:var(--font-size-subhead-default);cursor:pointer;display:grid;border:none;background-color:transparent;grid-gap:var(--space-8);grid-auto-flow:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-weight:var(--font-weight-medium);max-width:100%;overflow:hidden}.group-header.jsx-10034a93e516db1e:hover{color:var(--accent-primary-stronger)}.group-header.jsx-10034a93e516db1e .left.jsx-10034a93e516db1e{display:grid;grid-auto-flow:column;grid-template-columns:-webkit-min-content 1fr -webkit-max-content;grid-template-columns:min-content 1fr max-content;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:var(--space-8)}.path.jsx-10034a93e516db1e{text-align:left;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.general-threads-buffer.jsx-10034a93e516db1e{height:104px}"})]})}function lp(e){var t,r,n=e.isOpen,a=Df(),i=(0,we.Z)(),o=(0,ke.sw0)({variables:{replId:i}}).data,l=ie.useContext(Nf).setThreadsVisibility,c=ie.useRef(null),s=Qf(ie.useState(null),2),u=s[0],d=s[1],f=Qf(ie.useState(zf.ACTIVE),2),p=f[0],b=f[1],m=Qf(ie.useState(!1),2),h=m[0],v=m[1],g=ie.useContext(Dd),y=g.annotations,x=g.handleFinalizeMessage,w=g.handleChangeMessage,k=g.setResolvedAnnotation,j=g.createAnnotationAnchorPlaceholder,Z=g.markAllMessagesInReplAsSeenByUser;ie.useEffect((function(){var e=function(e){var t;if("Escape"===e.key&&c.current){var r=document.querySelectorAll(":hover"),n=Array.from(r).filter((function(e){var t;return null===(t=c.current)||void 0===t?void 0:t.contains(e)})).length>0,a=e.target&&(null===(t=c.current)||void 0===t?void 0:t.contains(e.target));(n||a)&&(u?d(null):h?v(!1):l(!1))}};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[c,u,h,v,d,l]);var S=(0,rt.I0)();if("Repl"!==(null===o||void 0===o||null===(t=o.repl)||void 0===t?void 0:t.__typename)||!(null===(r=o.repl)||void 0===r?void 0:r.user)||!o.currentUser)return null;if(!n)return null;var E=y.find((function(e){return e.id===u}));return(0,ee.BX)("div",{ref:c,className:"jsx-ff646b2cd36de159 "+"jsx-".concat(Id.Q.__hash)+" conversations-container",children:[!E&&(0,ee.tZ)(op,{annotations:y,onThreadClick:function(e){d(e),"Repl"===o.repl.__typename&&(0,ft.j)(ft.U3.THREAD_SELECTED,{replId:i,source:"threads",general:!1,variant:"replace-chat"})},onNewThreadClick:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Yu()();j({annotationAnchor:{id:t,replId:i,path:null,otVersion:null,indexStart:null,indexEnd:null,isGeneral:e}}),d(t)}()},onMarkAllAsReadClick:Z,inboxMode:p,onClose:function(){return l(!1)},setInboxMode:function(e){return b(e)},generalThreadsOpen:h,setGeneralThreadsOpen:function(e){e!==h&&(v(e),"Repl"===o.repl.__typename&&e&&(0,ft.j)(ft.U3.THREAD_SELECTED,{replId:i,source:"threads",general:!0,variant:"replace-chat"}))}}),E&&(0,ee.tZ)(tp,{annotation:E,onCloseThread:function(){return d(null)},onFinalizeMessage:function(e){x({anchor:E,message:e.message,messageId:e.messageId}),"Repl"===o.repl.__typename&&(0,ft.j)(ft.U3.MESSAGE_SENT,{replId:i,source:"threads",variant:"replace-chat"})},onChangeMessage:function(e){w({anchor:E,message:e.message,messageId:e.messageId})},markThreadResolved:function(e){k(e,!0),d(null)},markThreadUnresolved:function(e){k(e,!1)},scrollToAnchor:function(e){S({type:"SCROLL_TO_ANNOTATION",anchorId:e,wid:a})}}),(0,ee.tZ)(re(),{id:Id.Q.__hash,children:Id.Q}),(0,ee.tZ)(re(),{id:"ff646b2cd36de159",children:".conversations-container.jsx-ff646b2cd36de159{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:575px;width:350px;-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);border-color:var(--background-higher);border-width:1px;border-style:solid;-webkit-box-shadow:var(--shadow-1);-moz-box-shadow:var(--shadow-1);box-shadow:var(--shadow-1);background-color:var(--background-default)}@media only screen and (max-height:672px){.conversations-container.jsx-ff646b2cd36de159{height:450px;width:300px}}"})]})}!function(e){e.ACTIVE="Active",e.RESOLVED="Resolved"}(zf||(zf={}));var cp=r(72218),sp=r(85060);function up(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function dp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||pp(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fp(e){return function(e){if(Array.isArray(e))return up(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pp(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pp(e,t){if(e){if("string"===typeof e)return up(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?up(e,t):void 0}}function bp(e){var t,r,n=e.onClick,a=(0,ke.r92)(),i=(0,Ei.Z)("flag-threads-popup-notifications"),o=ie.useContext(Dd).generalThread,l=function(e){var t=dp(ie.useState([]),2),r=t[0],n=t[1],a=dp(ie.useState(null),2),i=a[0],o=a[1],l=ie.useRef(r);l.current=r;var c=ie.useRef(null);return ie.useEffect((function(){if(null===c.current){var e=r[0];e&&(o(e),c.current=setTimeout((function(){n(l.current.slice(1)),0===l.current.length&&o(null),c.current=null}),2500))}}),[r]),(0,sp.Z)((function(){e[e.length-1]&&n(fp(r).concat([e[e.length-1]]))}),[e.length]),i}((null===o||void 0===o?void 0:o.messages)||[]),c=ie.useMemo((function(){if("TextMessageContentType"!==(null===l||void 0===l?void 0:l.content.__typename))return null;var e=null===l||void 0===l?void 0:l.content.text;return e?jd(e,{}):null}),[l]);return i&&l&&l.user&&l.user.id!==(null===(t=a.data)||void 0===t||null===(r=t.currentUser)||void 0===r?void 0:r.id)?(0,ee.BX)("div",{onClick:function(e){e.stopPropagation(),n(e)},className:"jsx-4ee14b2dec205719 message-notification",children:[(0,ee.tZ)(ke.jq$,{variables:{username:l.user.username},children:function(e){var t=e.loading,r=e.data;return!t&&r&&r.user&&r.user.image?(0,ee.tZ)("img",{src:r.user.image,className:"jsx-4ee14b2dec205719 chat-message-picture"}):(0,ee.tZ)("div",{className:"jsx-4ee14b2dec205719 chat-message-picture"})}}),(0,ee.BX)("div",{className:"jsx-4ee14b2dec205719 message",children:[(0,ee.tZ)("span",{className:"jsx-4ee14b2dec205719 dimmed-text",children:l.user.username}),":"," ",(0,ee.tZ)("span",{className:"jsx-4ee14b2dec205719 bold-text",children:c&&(0,ee.tZ)(Zd,{message:c})})]}),(0,ee.tZ)(re(),{id:"4ee14b2dec205719",children:".message-notification.jsx-4ee14b2dec205719{background:var(--background-default);border:1px solid var(--accent-purple-default);position:absolute;right:60px;bottom:0;color:var(--foreground-default);-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;padding:3px 15px;cursor:auto;max-width:250px;width:auto;height:36px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;opacity:1;cursor:pointer;font-size:14px}.chat-message-picture.jsx-4ee14b2dec205719{min-width:24px;margin-right:10px;width:24px;-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px;border:1px solid transparent}.bold-text.jsx-4ee14b2dec205719{color:var(--foreground-default)}.dimmed-text.jsx-4ee14b2dec205719{color:var(--foreground-dimmest)}.message.jsx-4ee14b2dec205719{-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}"})]}):null}var mp=function(e){var t=e.unreadThreadCount,r=e.onClick;return(0,ee.BX)("div",{onClick:r,css:{backgroundColor:Ze.TV.blurpleDefault},className:re().dynamic([["9525eb8c09ba8e13",[Ze.TV.borderRadius8,Ze.TV.borderRadius8]]])+" floating-icon-wrapper",children:[(0,ee.tZ)(bp,{onClick:r}),(0,ee.tZ)("div",{className:re().dynamic([["9525eb8c09ba8e13",[Ze.TV.borderRadius8,Ze.TV.borderRadius8]]])+" chat-icon-wrapper",children:(0,ee.tZ)(cp.Z,{})}),t>0&&(0,ee.tZ)("div",{className:re().dynamic([["9525eb8c09ba8e13",[Ze.TV.borderRadius8,Ze.TV.borderRadius8]]])+" unread-icon"}),(0,ee.tZ)(re(),{id:"9525eb8c09ba8e13",dynamic:[Ze.TV.borderRadius8,Ze.TV.borderRadius8],children:".floating-icon-wrapper.__jsx-style-dynamic-selector{height:36px;width:50px;-webkit-border-radius:".concat(Ze.TV.borderRadius8," 0 0 ").concat(Ze.TV.borderRadius8,";-moz-border-radius:").concat(Ze.TV.borderRadius8," 0 0 ").concat(Ze.TV.borderRadius8,";border-radius:").concat(Ze.TV.borderRadius8," 0 0 ").concat(Ze.TV.borderRadius8,";position:absolute;right:0px;bottom:var(--space-16);z-index:10;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center;cursor:pointer;opacity:1;-webkit-transition:300ms;-moz-transition:300ms;-o-transition:300ms;transition:300ms}.chat-icon-wrapper.__jsx-style-dynamic-selector{width:32px;height:32px;padding:5px;color:#fff}.unread-icon.__jsx-style-dynamic-selector{position:absolute;top:5px;left:12px;background:red;width:8px;height:8px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;z-index:11}")})]})};function hp(){var e=(0,we.Z)(),t=kf(e,{onReceiveAnnotationUpdate:function(){}}).unreadThreadCount,r=ie.useContext(Nf);return(0,ee.tZ)(mp,{onClick:function(){r.threadsVisibility||((0,ft.j)(ft.U3.THREADS_OPENED,{unread:Boolean(t)}),(0,ft.j)(ft.U3.MESSAGES_LIST_OPENED,{replId:e,context:"threads",variant:"replace-chat"})),r.setThreadsVisibility((function(e){return!e}))},unreadThreadCount:t})}var vp=r(44269);function gp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return gp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xp(e){var t=(0,Ie.Z)().anchorer,r=yp(ie.useState(null),2),n=r[0],a=r[1];return ie.useEffect((function(){if(e){var r=t.onAnchorPortalSet(e,(function(e){a(e)}));return function(){r()}}}),[e,t]),n}function wp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kp(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function jp(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){kp(i,n,a,o,l,"next",e)}function l(e){kp(i,n,a,o,l,"throw",e)}o(void 0)}))}}function Zp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return wp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Sp=function(){var e=jp(J().mark((function e(t){var r,n,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.code,n=t.language,e.next=3,null===Si.l||void 0===Si.l?void 0:Si.l.query({query:ke.nFn,variables:{code:r,language:n}});case 3:if("ExplainCodeResult"!==(null===(a=e.sent)||void 0===a?void 0:a.data.explainCode.__typename)){e.next=6;break}return e.abrupt("return",a.data.explainCode.explanation);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var Ep=r(70917),Op=r(42650),_p=r(47845),Cp=r(76898);var Ap=function(e){var t=e.explanation,r=e.errorMessage,n=e.loading,a=e.codexFeedback,i=e.onRequestClose,o=e.onRequestExplainAgain,l=e.onExplainFail,c=e.onExplainSuccess,s=null;return n?s=(0,ee.tZ)("div",{css:[Ze.l0.p(16)],children:(0,ee.BX)(ll.ZP,{viewBox:"0 0 100 10",primaryColor:"var(--background-higher)",secondaryColor:"var(--background-highest)",speed:1.5,children:[(0,ee.tZ)("rect",{x:"0",y:"0",rx:"2",ry:"2",width:"100",height:"4"}),(0,ee.tZ)("rect",{x:"0",y:"6",rx:"2",ry:"2",width:"33",height:"4"})]})}):t?s=(0,ee.BX)("div",{css:[Ze.l0.p(8),{display:"grid",gridGap:Ze.TV.space8}],children:[(0,ee.tZ)("pre",{css:{fontFamily:Ze.TV.fontFamilyCode,whiteSpace:"pre-wrap",lineHeight:Ze.TV.lineHeightDefault,fontSize:Ze.TV.fontSizeDefault,color:Ze.TV.foregroundDefault,backgroundColor:Ze.TV.backgroundHighest,padding:Ze.TV.space8,borderRadius:Ze.TV.borderRadius8},children:t}),(0,ee.tZ)("div",{css:(0,Ep.iv)({color:Ze.TV.foregroundDefault}),children:"Is this a good explanation?"}),n?null:(0,ee.BX)(Et.Z,{css:[Ze.l0.rowWithGap(8),Ze.l0.justify.start,Ze.l0.align.center],children:[a?(0,ee.tZ)(Ir.ZP,{disabled:!0,iconLeft:(0,ee.tZ)(_p.Z,{}),onClick:function(){},small:!0,text:"Thanks!"}):(0,ee.BX)(Et.Z,{css:[Ze.l0.rowWithGap(8),Ze.l0.justify.start,Ze.l0.align.center],children:[(0,ee.tZ)(Ir.ZP,{text:"No",colorway:"negative",outlined:"no"!==a,onClick:l,small:!0,iconLeft:(0,ee.tZ)(Yt.Z,{})}),(0,ee.tZ)(Ir.ZP,{text:"Yes",colorway:"positive",onClick:c,small:!0,outlined:"yes"!==a,iconLeft:(0,ee.tZ)(Ye.Z,{})})]}),(0,ee.tZ)("a",{href:"https://replit.com/support",target:"_blank",rel:"noopener noreferrer",css:[Ze.l0.color.foregroundDimmest,{fontSize:Ze.TV.fontSizeSmall,"&:hover":{color:Ze.TV.foregroundDefault}}],children:"Send Feedback"})]})]}):r&&(s=(0,ee.tZ)("div",{css:[Ze.l0.p(8),{display:"grid",gridGap:Ze.TV.space8}],children:r})),(0,ee.BX)(pn.Z,{background:"higher",css:(0,Ep.iv)({background:Ze.TV.backgroundHigher,boxShadow:Ze.TV.shadow1,borderWidth:1,borderColor:Ze.TV.backgroundHighest,borderStyle:"solid",borderRadius:Ze.TV.borderRadius8,width:"320px"}),children:[(0,ee.BX)("div",{css:[{display:"flex",justifyContent:"space-between",borderBottom:"1px solid",borderBottomColor:Ze.TV.backgroundHighest},Ze.l0.flex.row,Ze.l0.rowWithGap(2),Ze.l0.p(8)],children:[(0,ee.BX)("div",{css:(0,Ep.iv)({display:"grid",gridAutoFlow:"column",gridGap:Ze.TV.space8,alignItems:"center"}),children:[(0,ee.tZ)(Op.Z,{}),(0,ee.tZ)("div",{css:(0,Ep.iv)({color:Ze.TV.foregroundDefault}),children:"Explain Code"}),(0,ee.tZ)("a",{href:"https://blog.replit.com/codex",target:"_blank",css:Ze.l0.color.foregroundDefault,children:(0,ee.tZ)(Kr.Z,{alt:"Learn more",tooltipDelay:0,tooltipText:"This beta feature uses Codex by OpenAI. Click to learn more.",type:"button",children:(0,ee.tZ)(sr.Z,{color:Ze.TV.foregroundDefault})})}),(0,ee.tZ)(Kr.Z,{alt:"Generate new explanation",onClick:o,type:"button",children:(0,ee.tZ)(Cp.Z,{})})]}),(0,ee.tZ)("div",{className:"right",children:(0,ee.tZ)(Kr.Z,{alt:"Close",tooltipHidden:!0,onClick:i,type:"button",children:(0,ee.tZ)(Yt.Z,{})})})]}),s]})},Ip=r(73935),Np=ie.createContext({editorRight:0});function Tp(e){var t=e.anchor,r=e.children,n=(0,Er.Z)(),a=(0,Ie.Z)().anchorer,i=xp(t.id);return ie.useEffect((function(){if(n===t.path)return a.addAnchors([t]),function(){a.removeAnchors([t.id])}}),[n,t.id]),i?Ip.createPortal((0,ee.tZ)(Np.Provider,{value:{editorRight:i.getEditorRight()},children:r}),i.dom,t.id):null}function Pp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Pp(e,t,r[t])}))}return e}var Lp=function(){var e=(0,Ie.Z)().anchorer,t=function(){var e,t,r,n,a,i,o,l,c,s,u=(0,we.Z)(),d=ie.useContext(Dd),f=d.explainAnchor,p=d.setExplainAnchor,b=Yf(f),m=xp(null===f||void 0===f?void 0:f.id),h=ie.useMemo((function(){return(null===b||void 0===b?void 0:b.anchor.path)?(0,vp.UP)(b.anchor.path):(null===f||void 0===f?void 0:f.path)?(0,vp.UP)(null===f||void 0===f?void 0:f.path):"unknown"}),[b,m,f]),v=ie.useMemo((function(){return(null===b||void 0===b?void 0:b.selectedContent)?null===b||void 0===b?void 0:b.selectedContent:m?m.getContent():void 0}),[b,m]),g=(0,ke.LxS)({fetchPolicy:"no-cache",variables:{code:v,language:h,replId:u},skip:!b||!v,notifyOnNetworkStatusChange:!0}),y=Zp((0,ke.CUF)(),2),x=y[0],w=y[1],k=function(){var e=jp(J().mark((function e(t){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ExplainCodeResult"===(null===(r=g.data)||void 0===r?void 0:r.explainCode.__typename)&&!g.loading&&!w.loading){e.next=3;break}return e.abrupt("return");case 3:x({variables:{completionId:g.data.explainCode.id,feedback:t},optimisticResponse:{__typename:"RootMutationType",giveCodexFeedback:{__typename:"CodexFeedback",id:g.data.explainCode.id,feedback:t}}}),(0,ft.j)(ft.U3.CODEX_FEEDBACK_SUBMITTED,{language:h,feedback:t,feature:"explanation"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j="ExplainCodeResult"===(null===(e=g.data)||void 0===e||null===(t=e.explainCode)||void 0===t?void 0:t.__typename)?g.data.explainCode.explanation:void 0,Z="UserError"===(null===(r=g.data)||void 0===r||null===(n=r.explainCode)||void 0===n?void 0:n.__typename)||"UnauthorizedError"===(null===(a=g.data)||void 0===a||null===(i=a.explainCode)||void 0===i?void 0:i.__typename)?g.data.explainCode.message:null,S="ExplainCodeResult"===(null===(o=g.data)||void 0===o||null===(l=o.explainCode)||void 0===l?void 0:l.__typename)&&g.data.explainCode.id===(null===(c=w.data)||void 0===c||null===(s=c.giveCodexFeedback)||void 0===s?void 0:s.id)?w.data.giveCodexFeedback.feedback:null;return{explainAnchor:f,setExplainAnchor:p,resolvedExplainAnchor:b,anchorPortal:m,getCodeExplanation:Sp,loading:g.loading,explanation:j,errorMessage:Z,refetchExplanation:jp(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,ft.j)(ft.U3.CODEX_FEATURE_USED,{feature:"explanation",isRetry:!0,language:h}),e.abrupt("return",g.refetch());case 2:case"end":return e.stop()}}),e)}))),giveCodexFeedback:k,codexFeedback:S}}(),r=t.explainAnchor,n=t.setExplainAnchor,a=t.explanation,i=t.errorMessage,o=t.loading,l=t.refetchExplanation,c=t.giveCodexFeedback,s=t.codexFeedback;if(ie.useEffect((function(){return e.onCodeExplained((function(e){n(Rp({},e,{id:Yu()()}))}))}),[]),!r)return null;var u={explanation:a,errorMessage:i,loading:o,onRequestClose:function(){return n(null)},onRequestExplainAgain:function(){return l()},codexFeedback:s,onExplainFail:function(){return c(ke.TYv.No)},onExplainSuccess:function(){return c(ke.TYv.Yes)}};return(0,ee.tZ)("div",{children:(0,ee.tZ)(Tp,{anchor:r,children:(0,ee.tZ)("div",{css:{left:"2em",position:"fixed"},children:(0,ee.tZ)(Ap,Rp({},u))})})})},Dp=r(74125);function Up(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zp(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function Bp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||Xp(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fp(e){return function(e){if(Array.isArray(e))return Up(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Xp(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xp(e,t){if(e){if("string"===typeof e)return Up(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Up(e,t):void 0}}var Vp=Io(["SCROLL_TO_ANNOTATION","FILE_CACHE_HIT","FILE_LOADED"]),Gp=Vp.receiver,Hp=Vp.useReceiver;function Wp(e){var t=e.thread,r=(0,we.Z)(),n=ie.useContext(Dd),a=n.visibleAnnotation,i=n.setVisibleAnnotation,o=n.handleChangeMessage,l=n.handleFinalizeMessage,c=n.setResolvedAnnotation,s=n.onRequestCloseThread,u=ie.useContext(Np);return t?(0,ee.tZ)("div",{children:a===t.id?(0,ee.tZ)(ff,{annote:t,onFinalizeMessage:function(e){l({anchor:t,message:e.message,messageId:e.messageId})},onChangeMessage:function(e){o({anchor:t,message:e.message,messageId:e.messageId})},onResolve:function(){c(t,!0)},onRequestClose:s,width:225,style:{position:"fixed",left:null===u||void 0===u?void 0:u.editorRight,transform:"translate(-".concat(window.innerWidth<(null===u||void 0===u?void 0:u.editorRight)+10?225:0,"px)")}}):(0,ee.BX)(Et.Z,{css:{position:"fixed",left:null===u||void 0===u?void 0:u.editorRight,transform:"translateX(-100%)"},children:[(0,ee.tZ)(Cd,{annote:t,onClick:function(){i(t.id),(0,ft.j)(ft.U3.THREAD_SELECTED,{replId:r,source:"file",general:!1,variant:"replace-chat"})}}),(0,ee.tZ)(mf,{annote:t})]})}):null}function Kp(e){var t=e.wid,r=(0,we.Z)(),n=ie.useContext(Nf).threadsVisibility,a=(0,Er.Z)(),i=(0,Ei.Z)("flag-typing-indicator"),o=(0,Ei.Z)("flag-typing-presence"),l=(0,Dp.Z)({filePath:a,replId:r}),c=(0,Ie.Z)(),s=c.container,u=c.anchorer,d=c.session,f=Mp(ie.useState(null),2),p=f[0],b=f[1],m=Vd(),h=m.map((function(e){return e.username})),v=(0,ke.Fqz)(),g=kf(r,{onReceiveAnnotationUpdate:function(e){var t,r,n;if(e.messages){var a=e.messages[e.messages.length-1];a&&(null===(t=a.user)||void 0===t?void 0:t.id)!==(null===(r=v.data)||void 0===r||null===(n=r.currentUser)||void 0===n?void 0:n.id)&&"TextMessageContentType"===a.content.__typename&&a.user&&(ru({title:"".concat(a.user.username," made an annotation"),body:a.content.text,tag:"annotation-".concat(a.id),iconByUsername:a.user.username}),(0,ft.j)(ft.U3.ANNOTATION_UPDATE_RECEIVED,{messageId:a.id,sender:a.user.id,time:new Date(a.timeCreated).getTime()}))}}}),y=g.annotations,x=g.generalThread,w=g.placeholderAnchorId,k=g.createAnnotationAnchorPlaceholder,j=g.deleteAnnotationAnchorPlaceholder,Z=g.createAnnotationMessage,S=g.updateAnnotationAnchor,E=g.updateThreadPreview,O=g.markAllMessagesInReplAsSeenByUser,_=Mp(ie.useState(null),2),C=_[0],A=_[1],I=(0,rt.I0)();ie.useEffect((function(){return u.onThreadCreated((function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Bp(e,t,r[t])}))}return e}({id:Yu()(),replId:r},e);k({annotationAnchor:t}),b(t.id)}))}),[u,k,r]),Hp((function(e){var r,n=e.action;return"SCROLL_TO_ANNOTATION"===n.type&&I((r=J().mark((function e(){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(r=y.find((function(e){return e.id===n.anchorId})))||void 0===r?void 0:r.path){e.next=3;break}return e.abrupt("return");case 3:if(a===r.path){e.next=15;break}return e.prev=4,e.next=7,s.exec("test","-f",r.path);case 7:if(null===e.sent.error){e.next=10;break}return e.abrupt("return");case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(4),e.abrupt("return");case 15:I({type:"OPEN_DEEP_LINK",path:r.path,wid:t,indexStart:r.indexStart,indexEnd:r.indexEnd}),b(r.id);case 17:case"end":return e.stop()}}),e,null,[[4,12]])})),function(){var e=this,t=arguments;return new Promise((function(n,a){var i=r.apply(e,t);function o(e){zp(i,n,a,o,l,"next",e)}function l(e){zp(i,n,a,o,l,"throw",e)}o(void 0)}))})),null}));if(!window)return null;return(0,ee.BX)(Dd.Provider,{value:{activeFile:a,users:m,annotations:y,generalThread:x,explainAnchor:C,visibleAnnotation:p,onRequestCloseThread:function(){b(null),j(),d.focusEditor()},setVisibleAnnotation:b,setExplainAnchor:A,handleFinalizeMessage:function(e){var t=e.anchor,r=e.resolvedAnchor,n=e.message,a=e.messageId,i=jd(n,{users:Fp(h).concat(["everyone"])}),o=null===r||void 0===r?void 0:r.getHighlight();Z({anchor:t,annotationMessage:{id:a,text:n,mentions:i.mentions},highlight:o})},handleChangeMessage:function(e){var t=e.anchor,r=e.message,n=e.messageId;i&&E({threadId:t.id,message:o?r:null,messageId:n})},setResolvedAnnotation:function(e,t){w===e.id?j():S({annotationAnchor:e,changes:{isResolved:t}})},createAnnotationAnchorPlaceholder:k,markAllMessagesInReplAsSeenByUser:O},children:[(0,ee.BX)("div",{className:"jsx-31cde6afe9fc4a3c annotations-container",children:[l&&(0,ee.tZ)(Lp,{}),(0,ee.BX)("div",{style:{position:"fixed",bottom:"var(--space-24)",right:"var(--space-8)",zIndex:1},className:"jsx-31cde6afe9fc4a3c",children:[!n&&(0,ee.tZ)("div",{className:"jsx-31cde6afe9fc4a3c",children:(0,ee.tZ)(hp,{})}),(0,ee.tZ)("div",{style:{position:"relative",right:"var(--space-8)"},className:"jsx-31cde6afe9fc4a3c",children:(0,ee.tZ)(lp,{isOpen:Boolean(n)})})]}),(0,ee.tZ)(re(),{id:"31cde6afe9fc4a3c",children:".annotations-container.jsx-31cde6afe9fc4a3c{z-index:10;position:absolute;height:0;width:0}.new-annotation-button.jsx-31cde6afe9fc4a3c{position:absolute;-webkit-transform:translateY(-webkit-calc(-100% - 8px))translateX(56px);-moz-transform:translateY(-moz-calc(-100% - 8px))translateX(56px);-ms-transform:translateY(calc(-100% - 8px))translateX(56px);-o-transform:translateY(calc(-100% - 8px))translateX(56px);transform:translateY(-webkit-calc(-100% - 8px))translateX(56px);transform:translateY(-moz-calc(-100% - 8px))translateX(56px);transform:translateY(calc(-100% - 8px))translateX(56px);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);background-color:var(--background-higher);color:var(--foreground-default);cursor:pointer;border:.5px solid var(--outline-dimmest);-webkit-box-shadow:var(--shadow-1);-moz-box-shadow:var(--shadow-1);box-shadow:var(--shadow-1);-webkit-transition:width.2s,background-color.2s,-webkit-transform.1s,opacity.2s ease.3s;-moz-transition:width.2s,background-color.2s,-moz-transform.1s,opacity.2s ease.3s;-o-transition:width.2s,background-color.2s,-o-transform.1s,opacity.2s ease.3s;transition:width.2s,background-color.2s,-webkit-transform.1s,opacity.2s ease.3s;transition:width.2s,background-color.2s,-moz-transform.1s,opacity.2s ease.3s;transition:width.2s,background-color.2s,-o-transform.1s,opacity.2s ease.3s;transition:width.2s,background-color.2s,transform.1s,opacity.2s ease.3s;z-index:1;white-space:pre;font-weight:var(--font-weight-medium);font-size:var(--font-size-small);padding:4px 8px;display:grid;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-auto-flow:column;grid-gap:4px}.new-annotation-button.jsx-31cde6afe9fc4a3c:hover{-webkit-transform:translateY(-webkit-calc(-100% - 8px))translateX(56px)scale(1.1);-moz-transform:translateY(-moz-calc(-100% - 8px))translateX(56px)scale(1.1);-ms-transform:translateY(calc(-100% - 8px))translateX(56px)scale(1.1);-o-transform:translateY(calc(-100% - 8px))translateX(56px)scale(1.1);transform:translateY(-webkit-calc(-100% - 8px))translateX(56px)scale(1.1);transform:translateY(-moz-calc(-100% - 8px))translateX(56px)scale(1.1);transform:translateY(calc(-100% - 8px))translateX(56px)scale(1.1)}"})]}),y.map((function(e){return"string"!==typeof e.path||e.isResolved?null:(0,ee.tZ)(Tp,{anchor:e,children:(0,ee.tZ)(Wp,{thread:e})},e.id)}))]})}var qp=r(60149),Yp=r(82730);r(41595);function $p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Qp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Qp(e,t,r[t])}))}return e}function eb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return $p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tb(e){var t=e.hint;return t?(0,ee.BX)("div",{className:"jsx-a797bc214182b3f6 hint-card-container",children:[(0,ee.BX)("div",{className:"jsx-a797bc214182b3f6 hint-header-container",children:[(0,ee.BX)(ye.Ug,{align:"center",children:[(0,ee.tZ)("div",{className:"jsx-a797bc214182b3f6 header",children:"Hint"}),(0,ee.tZ)(Ne.Z,{level:5,children:t.title})]}),(0,ee.tZ)("button",{onClick:function(){t.onDismiss()},className:"jsx-a797bc214182b3f6 dismiss-button",children:(0,ee.tZ)(Yt.Z,{size:16})})]}),(0,ee.BX)("div",{className:"jsx-a797bc214182b3f6 hint-content",children:[" ",(0,ee.BX)(ge.Z,{children:[t.text," ",(0,ee.tZ)("a",{target:"_blank",href:t.link,className:"jsx-a797bc214182b3f6",children:"Learn more"}),"."]}),(0,ee.tZ)("div",{className:"jsx-a797bc214182b3f6 hint-button",children:(0,ee.tZ)(ve.Z,{onClick:function(){t.onClick()},filled:!0,color:"purple",children:"Try it!"})})]}),(0,ee.tZ)(re(),{id:"a797bc214182b3f6",children:".hint-card-container.jsx-a797bc214182b3f6{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:var(--space-8);width:100%}.hint-header-container.jsx-a797bc214182b3f6{margin:0px var(--space-4)var(--space-8)0px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.header.jsx-a797bc214182b3f6{margin-right:var(--space-8);display:inline-block;color:var(--white);background:var(--accent-purple-default);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-subhead-default);font-weight:var(--font-weight-medium);padding:-webkit-calc(var(--space-4)/2)var(--space-4);padding:-moz-calc(var(--space-4)/2)var(--space-4);padding:calc(var(--space-4)/2)var(--space-4);text-align:center}.hint-content.jsx-a797bc214182b3f6{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.hint-button.jsx-a797bc214182b3f6{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center}.dismiss-button.jsx-a797bc214182b3f6{width:20px;height:20px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--foreground-default);background-color:var(--background-root);border:1px solid var(--accent-purple-default);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center;cursor:pointer;-webkit-box-shadow:var(--shadow-2);-moz-box-shadow:var(--shadow-2);box-shadow:var(--shadow-2)}"})]}):null}function rb(e){var t=e.direction,r=e.onClick;return(0,ee.BX)("div",{onClick:r,className:"jsx-24371dd3308448a arrow-container",children:[(0,ee.tZ)("div",{className:"jsx-24371dd3308448a "+"arrow-".concat(t)}),(0,ee.tZ)(re(),{id:"24371dd3308448a",children:".arrow-right.jsx-24371dd3308448a{border-top:var(--space-8)solid transparent;border-bottom:var(--space-8)solid transparent;border-left:var(--space-8)solid var(--accent-purple-default)}.arrow-left.jsx-24371dd3308448a{border-top:var(--space-8)solid transparent;border-bottom:var(--space-8)solid transparent;border-right:var(--space-8)solid var(--accent-purple-default)}.arrow-container.jsx-24371dd3308448a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center;min-width:var(--space-16);max-width:var(--space-16);opacity:.8;cursor:pointer;background:transparent}.arrow-container.jsx-24371dd3308448a:hover{opacity:1;background:var(--accent-purple-dimmest)}"})]})}function nb(e){var t=e.hintCards,r=e.dimensions,n=eb(ie.useState(0),2),a=n[0],i=n[1],o=eb(ie.useState(!1),2),l=o[0],c=o[1],s=eb((0,Yp.useKeenSlider)({initial:0,created:function(){c(!0)},slideChanged:function(e){i(e.details().relativeSlide)}}),2),u=s[0],d=s[1];ie.useEffect((function(){null===d||void 0===d||d.refresh()}),[t.length,d]),ie.useEffect((function(){d&&(null===r||void 0===r?void 0:r.w.pc)&&d.resize()}),[r,d]);var f=(0,Ua.Fg)();return t.length?(0,ee.BX)("div",{className:"jsx-c442f8858fc56784 "+(At()(Ua.RJ,f===Ua.V2.replitSpooky?"spooky":"dark","hint-carousel-container",{created:l})||""),children:[d&&!!a&&(0,ee.tZ)(rb,{direction:"left",onClick:function(){return d.prev()}}),(0,ee.tZ)("div",{ref:u,className:"jsx-c442f8858fc56784 keen-slider",children:t.map((function(e,t){return(0,ee.tZ)("div",{className:"jsx-c442f8858fc56784 keen-slider__slide hint",children:(0,ee.tZ)(tb,{hint:e})},t)}))}),d&&a!==d.details().size-1&&(0,ee.tZ)(rb,{direction:"right",onClick:function(){return d.next()}}),(0,ee.tZ)(re(),{id:"c442f8858fc56784",children:".hint-carousel-container.jsx-c442f8858fc56784{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;margin:var(--space-8)var(--space-8)0px var(--space-8);background-color:var(--background-root);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);border:1px solid var(--accent-purple-default);opacity:0}.created.jsx-c442f8858fc56784{opacity:1}.keen-slider.jsx-c442f8858fc56784{width:100%}.hint.jsx-c442f8858fc56784{width:100%}"})]}):null}function ab(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ib(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ab(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ab(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ob(e){return!!e&&!(0===e.h.px&&0===e.h.pc||0===e.w.px&&0===e.w.pc)}function lb(e){var t=e.dimensions,r=e.wid,n=ie.useRef(!1);return ie.useEffect((function(){!n.current&&ob(t)&&(n.current=!0)}),[t]),n.current||ob(t)?(0,ee.tZ)(db,{dimensions:t,wid:r}):(0,ee.tZ)("div",{})}var cb=Io(["OPEN_SHELL"]),sb=cb.receiver,ub=cb.useReceiver,db=function(e){var t,r=e.dimensions,n=e.wid,a=(0,Ie.Z)(),i=a.container,o=a.fs,l=function(e){var t=e.wid,r=(0,rt.I0)(),n=(0,we.Z)(),a=(0,ke.bdn)({variables:{replId:n}}),i=a.data,o=a.updateQuery,l=eb(ie.useState([]),2),c=l[0],s=l[1],u=eb(ie.useState(null),2),d=u[0],f=u[1],p=eb(ie.useState([]),2),b=p[0],m=p[1],h=eb(ie.useState(""),2),v=h[0],g=h[1],y=eb((0,ke.$y9)({update:function(e,t){var r,n={"packager-shell-hint":"packagerShellHintSeen","version-control-shell-hint":"versionControlShellHintSeen"},a=null===(r=t.data)||void 0===r?void 0:r.toursSeen.name;a&&n[a]&&o((function(e){return e.currentUser?Jp({},e,{currentUser:Jp({},e.currentUser,Qp({},n[a],!0))}):e}))}}),1),x=y[0];return ie.useEffect((function(){if(i&&"Repl"===i.repl.__typename){var e,n,a=i.repl,o=a.isOwner,l=a.lang,c=[],u=[];l.supportsGit&&o&&(null===(e=i.currentUser)||void 0===e||e.versionControlShellHintSeen,u.push({commands:["git"],hint:{text:"If you're looking to use git, try our version control plugin.",link:"https://docs.replit.com/tutorials/06-github-and-run-button#looking-at-the-version-control-panel-in-repl-it"}})),(l.supportsPackager3||"html"===l.id||"html_beta"===l.id)&&((null===(n=i.currentUser)||void 0===n?void 0:n.packagerShellHintSeen)?u.push({commands:["npm","install","get","pip"],hint:{text:"If you're looking to install packages, try our packager.",link:"https://docs.replit.com/repls/quick-start#adding-packages"}}):c.push({title:"Try our packager!",text:"Use our packager plugin to install packages.",link:"https://docs.replit.com/repls/quick-start#adding-packages",onDismiss:function(){return x({variables:{name:"packager-shell-hint"}})},onClick:function(){(0,ft.j)(ft.U3.SHELL_HINT_CTA_CLICKED,{hint:"packager"}),x({variables:{name:"packager-shell-hint"}}).then((function(){return r({type:"OPEN_SIDEPANE_BY_TYPE",paneType:"packager",wid:t})}))}})),s(c),m(u)}}),[i,r,t,x]),ie.useEffect((function(){if(v&&" "===v.slice(-1)){var e=!0,t=!1,r=void 0;try{for(var n,a=b[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var i=n.value;if(i.commands.includes(v.trim())){var o;f(null!==(o=i.hint)&&void 0!==o?o:null);break}}}catch(l){t=!0,r=l}finally{try{e||null==a.return||a.return()}finally{if(t)throw r}}}}),[b,v]),{hintCards:c,contextualHint:d,onShellKey:ie.useCallback((function(e){g((function(t){return"Backspace"===e.key?t.slice(0,-1):1!==e.key.length?"":" "===t.slice(-1)?e.key.toLowerCase():t+e.key.toLowerCase()}))}),[])}}({wid:n}),c=l.hintCards,s=l.contextualHint,u=l.onShellKey,d=(0,rt.I0)(),f=(0,Ei.Z)("flag-xterm-file-parser"),p=ib((0,qp.Z)({container:i,autoFocus:!0,onShellKey:u,createXtermProps:{loadFileParserAddon:f,onFileLinkClick:function(e,t,r){return d({wid:n,type:"OPEN_DEEP_LINK",path:e,line:t,col:r})},listFiles:o.listFiles,replSlug:null===(t=i.getContext())||void 0===t?void 0:t.repl.slug}}),2),b=p[0],m=p[1],h=ib(ie.useState(!1),2),v=h[0],g=h[1],y=ob(r),x=(0,Ei.Z)("flag-shellhints");ub((function(e){return"OPEN_SHELL"===e.action.type&&y&&b?(b.focus(),null):null})),ie.useEffect((function(){y&&b&&b.focus()}),[y,b]);var w=v&&b?(0,ee.tZ)(ui.Rh,{findPrevious:b.findPrevious,findNext:b.findNext,exit:function(){return g(!1)}}):(0,ee.tZ)(ui.lD,{onClick:function(){return g(!0)}}),k=(0,Ua.Fg)();return(0,ee.BX)("div",{className:"jsx-d20ffa1910a8638b "+"".concat(Ua.RJ," ").concat(k===Ua.V2.replitSpooky?"spooky":"dark"," container"),children:[x&&!!c.length&&(0,ee.tZ)(nb,{hintCards:c,dimensions:r}),x&&!!s&&(0,ee.BX)("code",{className:"jsx-d20ffa1910a8638b contextual-hint",children:[s.text," ",(0,ee.tZ)("a",{target:"_blank",href:s.link,className:"jsx-d20ffa1910a8638b",children:"Learn more"}),"."]}),(0,ee.BX)("div",{onKeyDown:function(e){"f"===e.key&&(0,di.jh)(e)&&(g(!0),e.preventDefault())},className:"jsx-d20ffa1910a8638b root",children:[b?(0,ee.tZ)(ee.HY,{children:(0,ee.BX)("div",{className:"jsx-d20ffa1910a8638b controls",children:[w,(0,ee.tZ)(ui.Zr,{onClick:b.clear})]})}):(0,ee.tZ)("code",{className:"jsx-d20ffa1910a8638b",children:"Loading..."}),(0,ee.tZ)("div",{ref:m,className:"jsx-d20ffa1910a8638b xterm-container"})]}),(0,ee.tZ)(re(),{id:"a6ad9278a3579faa",children:".xterm{height:100%}.xterm .xterm-viewport{overflow-y:auto!important;height:100%}"}),(0,ee.tZ)(re(),{id:"730e06514106ba64",children:".container.jsx-d20ffa1910a8638b{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;background-color:var(--background-default);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.root.jsx-d20ffa1910a8638b{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative;height:100%;padding-left:1em;padding-top:var(--space-8);overflow:hidden;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);z-index:1}.xterm-container.jsx-d20ffa1910a8638b{min-height:1px;height:100%}code.jsx-d20ffa1910a8638b{color:var(--foreground-dimmest)}.container.jsx-d20ffa1910a8638b:focus-within .controls.jsx-d20ffa1910a8638b{opacity:1}.controls.jsx-d20ffa1910a8638b{opacity:0;position:absolute;top:var(--space-8);right:var(--space-16);z-index:5;height:30px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.contextual-hint.jsx-d20ffa1910a8638b{margin:var(--space-8)0 0 var(--space-16)}"})]})};var fb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.code="",this.currentIndent=0,this.lib=t}var t=e.prototype;return t.indent=function(){this.currentIndent+=1},t.dedent=function(){if(0===this.currentIndent)throw new Error("indent at zero");this.currentIndent-=1},t.addIndents=function(){for(var e=0;e<this.currentIndent;e++)this.code+="  "},t.push=function(e){var t=e.split("\n"),r=!0,n=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var l=i.value;this.addIndents(),this.code+=l,this.newLine()}}catch(c){n=!0,a=c}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}},t.newLine=function(){this.code+="\n"},t.closeCurly=function(){this.addIndents(),this.code+=this.lib.getClosingBrackets()},t.toString=function(){return this.code},e}();function pb(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function bb(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){pb(i,n,a,o,l,"next",e)}function l(e){pb(i,n,a,o,l,"throw",e)}o(void 0)}))}}var mb="_test_runner";function hb(e){return mb+e}function vb(e){return gb.apply(this,arguments)}function gb(){return gb=bb(J().mark((function e(t){var r,n,a,i,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.code,a=t.filename,i=hb(a),o=Pn.Z.from(n,"utf8"),e.abrupt("return",r.writeFile(i,o));case 4:case"end":return e.stop()}}),e)}))),gb.apply(this,arguments)}function yb(e){return xb.apply(this,arguments)}function xb(){return(xb=bb(J().mark((function e(t){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.readDir(Va.Q);case 3:if(!(r=e.sent).error){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,Promise.all(r.children.map((function(e){return e.filename.startsWith(mb)?e.type===Or.Tv.File?t.deleteFile(e.filename):t.deleteDir(e.filename):Promise.resolve(null)})));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),st.$e((function(t){t.setTag("unitTestLib","true"),st.Tb(e.t0)}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function wb(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kb(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function jb(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){kb(i,n,a,o,l,"next",e)}function l(e){kb(i,n,a,o,l,"throw",e)}o(void 0)}))}}function Zb(e){return function(e){if(Array.isArray(e))return wb(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return wb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wb(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Sb={testRunnerName:function(){return"TestRunner"},testSuiteName:function(){return"TestSuite"},defaultImports:function(){return"import org.junit.Before;\nimport org.junit.After;\nimport org.junit.Test;\nimport static org.junit.Assert.*;"},classIntro:function(){return"public class ".concat(hb(Sb.testSuiteName())," {")},classConstructorName:function(){return hb(Sb.testSuiteName())},setupIntro:function(){return"@Before\npublic void setUp() {"},tearDownIntro:function(){return"@After\npublic void tearDown() {"},testIntro:function(e){return"".concat(Sb.testIntroPreName()).concat(e).concat(Sb.testIntroPostName())},testIntroPreName:function(){return"@Test\npublic void "},testIntroPostName:function(){return"() {"},getProperTestName:function(e){return e},parseTestResultName:function(e){return e.replace("(".concat(hb(Sb.testSuiteName()),")"),"")},buildSuite:function(e){var t=e.tests,r=e.meta,n=new fb(Sb);n.push(Sb.defaultImports()),r&&r.imports&&n.push(r.imports),n.newLine(),n.push(Sb.classIntro()),n.newLine(),n.indent(),r&&(r.initialization&&(n.push(r.initialization),n.newLine()),r.setup&&(n.push(Sb.setupIntro()),n.indent(),n.push(r.setup),n.dedent(),n.closeCurly(),n.newLine(),n.newLine()),r.tearDown&&(n.push(Sb.tearDownIntro()),n.indent(),n.push(r.tearDown),n.dedent(),n.closeCurly(),n.newLine(),n.newLine()));var a=!0,i=!1,o=void 0;try{for(var l,c=t[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var s=l.value;s.code&&(n.push(Sb.testIntro(s.name)),n.indent(),n.push(s.code),n.dedent(),n.closeCurly(),n.newLine(),n.newLine())}}catch(u){i=!0,o=u}finally{try{a||null==c.return||c.return()}finally{if(i)throw o}}return n.dedent(),n.closeCurly(),n.toString()},runSuite:function(e){return Cb.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,r=e.fs,n=e.packager,a=e.logger,i=e.tests,o=e.meta,l=Sb.buildSuite({tests:i,meta:o});return Sb.runSuite({container:t,fs:r,packager:n,logger:a,suiteCode:l})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"}"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react in this bitch either"},captureSetupError:function(e){var t=e.tag,r=e.raw;st.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",r),e.setExtra("language","java10"),st.Tb(t)}))},exampleTest:{id:-1,failureMessage:"An Adder class should have an add method that adds two ints and returns the result",name:"add",code:"Adder adder = new Adder();\nint result = adder.add(1, 2);\nassertEquals(3, result);\n"}},Eb="__UNIT_TEST_RESULT_START__",Ob="__UNIT_TEST_RESULT_END__",_b="import org.json.simple.JSONArray;\nimport org.json.simple.JSONObject;\nimport org.junit.runner.JUnitCore;\nimport org.junit.runner.Result;\nimport org.junit.runner.notification.Failure;\n\npublic class ".concat(hb(Sb.testRunnerName())," {\n    public static void main(String[] args) {\n      Result result = JUnitCore.runClasses(").concat(hb(Sb.testSuiteName()),'.class);\n      JSONArray failures = new JSONArray();\n\n        for (Failure failure : result.getFailures()) {\n            JSONObject obj = new JSONObject();\n            obj.put("name", failure.getTestHeader());\n            obj.put("stack", failure.getTrace());\n            failures.add(obj);\n        }\n        JSONObject out = new JSONObject();\n        out.put("passed", result.wasSuccessful());\n        out.put("failures", failures);\n        System.out.println();\n        System.out.println("').concat(Eb,'");\n        System.out.println(out);\n        System.out.println("').concat(Ob,'");\n    }\n}');function Cb(){return Cb=jb(J().mark((function e(t){var r,n,a,i,o,l,c,s,u,d,f,p,b,m,h,v,g,y,x,w,k,j,Z,S,E;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.container,n=t.fs,a=t.packager,i=t.logger,o=t.suiteCode,c=i.startLogSpinner("Setting up the environment"),e.next=5,yb(n);case 5:return c("Creating your test files 1/2"),e.next=8,vb({fs:n,code:o,filename:"".concat(Sb.testSuiteName(),".java")});case 8:if(s=e.sent,!(u=s.error)){e.next=14;break}return"Failed to create suite code file",Sb.captureSetupError({tag:"Failed to create suite code file",raw:u}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 14:return c("Creating your test files 2/2"),e.next=17,vb({fs:n,code:_b,filename:"".concat(Sb.testRunnerName(),".java")});case 17:if(d=e.sent,!(f=d.error)){e.next=23;break}return"Failed to create test runner file",Sb.captureSetupError({tag:"Failed to create test runner file",raw:f}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 23:return i.stopLogSpinner(),i.clearLine(),i.logMessage("Installing imported packages\r\n"),e.next=28,a.addPackages([{name:"junit:junit",version:"4.12"},{name:"com.googlecode.json-simple:json-simple",version:"1.1.1"},{name:"org.hamcrest:hamcrest-core",version:"1.3"}]);case 28:return e.next=30,a.installPackages();case 30:if(e.sent){e.next=33;break}return e.abrupt("return",{error:"Failed to install packages\r\n"});case 33:return i.clearLogs(),c=i.startLogSpinner("Compiling your files"),e.next=37,r.exec("find",".","-type","f","-name","*.java","-print0");case 37:if(p=e.sent,b=p.output,!(m=p.error)){e.next=44;break}return h="Failed to fetch working directory java files",Sb.captureSetupError({tag:h,raw:m}),e.abrupt("return",{error:"".concat(h,"\r\n\r\n")+(null===b||void 0===b?void 0:b.replace(/\n/g,"\n\r"))+"\r\n\r\n"+m});case 44:if("string"===typeof b){e.next=46;break}throw new Error("expected working directory files to be a string");case 46:return v=b.slice(0,-1).split("\0"),g=".:./target/dependency/*",e.next=50,(l=r).exec.apply(l,["javac","-classpath",g,"-d","."].concat(Zb(v)));case 50:if(y=e.sent,x=y.output,!(w=y.error)){e.next=57;break}return k="Failed to compile test runner file",Sb.captureSetupError({tag:k,raw:w}),e.abrupt("return",{error:"".concat(k,"\r\n\r\n")+(null===x||void 0===x?void 0:x.replace(/\n/g,"\n\r"))+"\r\n\r\n"+w});case 57:return c("Running your tests"),e.next=60,r.exec("java","-classpath",g,hb(Sb.testRunnerName()));case 60:if(j=e.sent,Z=j.output,!(S=j.error)){e.next=66;break}return(0,ft.j)(ft.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),e.abrupt("return",{error:"Running tests failed\r\n\r\n"+(null===Z||void 0===Z?void 0:Z.replace(/\n/g,"\n\r"))+"\r\n\r\n"+S});case 66:if("string"===typeof Z){e.next=68;break}throw new Error("expected runoutput to be a string");case 68:return E=JSON.parse(Z.slice(Z.indexOf(Eb)+Eb.length,Z.lastIndexOf(Ob))),e.abrupt("return",{result:E,error:null});case 70:case"end":return e.stop()}}),e)}))),Cb.apply(this,arguments)}var Ab=Sb;function Ib(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function Nb(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Ib(i,n,a,o,l,"next",e)}function l(e){Ib(i,n,a,o,l,"throw",e)}o(void 0)}))}}var Tb=function(e){return!!e&&e.trim().length>0&&e.split("\n").some((function(e){return!(e.trim().startsWith("#")||""===e.trim())}))},Pb={testRunnerName:function(){return"test_runner"},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"import unittest\nfrom main import *\n"},classIntro:function(){return"class UnitTests(unittest.TestCase):"},classConstructorName:function(){return"__init__"},setupIntro:function(){return"def setUp(self):"},tearDownIntro:function(){return"def tearDown(self):"},testIntro:function(e){return Pb.testIntroPreName()+e+Pb.testIntroPostName()},testIntroPreName:function(){return"def test_"},testIntroPostName:function(){return"(self):"},getProperTestName:function(e){return"test_".concat(e)},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,r=e.meta,n=new fb(Pb);n.push(Pb.defaultImports()),r&&r.imports&&n.push(r.imports),n.newLine(),n.push(Pb.classIntro()),n.newLine(),n.indent(),r&&(r.initialization&&(n.push(r.initialization),n.newLine()),Tb(r.setup)&&(n.push(Pb.setupIntro()),n.indent(),n.push(r.setup),n.dedent(),n.newLine()),Tb(r.tearDown)&&(n.push(Pb.tearDownIntro()),n.indent(),n.push(r.tearDown),n.dedent(),n.newLine()));var a=!0,i=!1,o=void 0;try{for(var l,c=t[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var s=l.value;n.push(Pb.testIntro(s.name)),n.indent(),n.push(s.code||"pass"),n.dedent(),n.newLine()}}catch(u){i=!0,o=u}finally{try{a||null==c.return||c.return()}finally{if(i)throw o}}return n.toString()},runSuite:function(e){return Ub.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,r=e.fs,n=e.packager,a=e.logger,i=e.tests,o=e.meta,l=Pb.buildSuite({tests:i,meta:o});return Pb.runSuite({container:t,fs:r,packager:n,logger:a,suiteCode:l})},hasClosingBrackets:function(){return!1},getClosingBrackets:function(){throw new Error("This language does not have closing brackets, check `hasClosingBrackets` first")},hasSemicolon:function(){return!1},getCommentChar:function(){return"#"},getHelpText:function(){return"no react in this bitch"},captureSetupError:function(e){var t=e.tag,r=e.raw;st.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",r),e.setExtra("language","python3"),st.Tb(t)}))},exampleTest:{id:-1,failureMessage:"In main.py you should have an add functions that adds two numbers and returns the result",name:"add",code:"self.assertEquals(add(1, 2), 3)"}},Rb="__UNIT_TEST_RESULT_START__",Lb="__UNIT_TEST_RESULT_END__",Db="import unittest\nimport ".concat(hb(Pb.testSuiteName()),"\nimport os\nimport json\nfrom time import sleep\n\nsuite = unittest.TestLoader().loadTestsFromTestCase(\n  ").concat(hb(Pb.testSuiteName()),'.UnitTests)\nf = open(os.devnull,"w")\ntest_res = unittest.TextTestRunner(stream=f).run(suite)\n\n# Merge errors and failures and normalize to {name, stack}\nfailures = [\n    {\n        "name": r[0]._testMethodName,\n        "stack": r[1],\n    } for r in test_res.errors + test_res.failures\n]\nprint()\nprint(\'').concat(Rb,'\')\nsleep(1)\nprint(json.dumps({\n    "passed": test_res.wasSuccessful(),\n    "failures": failures,\n}))\nprint()\nprint(\'').concat(Lb,"');");function Ub(){return Ub=Nb(J().mark((function e(t){var r,n,a,i,o,l,c,s,u,d,f,p,b,m;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.container,n=t.fs,a=t.packager,i=t.logger,o=t.suiteCode,l=i.startLogSpinner("Setting up the environment"),e.next=4,yb(n);case 4:return l("Creating your test files 1/2"),e.next=7,vb({fs:n,code:o,filename:"".concat(Pb.testSuiteName(),".py")});case 7:if(c=e.sent,!(s=c.error)){e.next=13;break}return"Failed to create suite code file",Pb.captureSetupError({tag:"Failed to create suite code file",raw:s}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 13:return l("Creating your test files 2/2"),e.next=16,vb({fs:n,code:Db,filename:"".concat(Pb.testRunnerName(),".py")});case 16:if(u=e.sent,!(d=u.error)){e.next=22;break}return"Failed to create test runner file",Pb.captureSetupError({tag:"Failed to create test runner file",raw:d}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 22:return i.stopLogSpinner(),i.clearLine(),i.logMessage("Installing imported packages\r\n"),e.next=27,a.installPackages();case 27:if(e.sent){e.next=30;break}return e.abrupt("return",{error:"Failed to install packages\r\n"});case 30:return i.clearLogs(),i.startLogSpinner("Running your tests"),e.next=34,r.exec("python","-B",hb("".concat(Pb.testRunnerName(),".py")));case 34:if(f=e.sent,p=f.output,!(b=f.error)){e.next=40;break}return(0,ft.j)(ft.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),e.abrupt("return",{error:"Running tests failed\r\n\r\n"+(null===p||void 0===p?void 0:p.replace(/\n/g,"\n\r"))+"\r\n"+b});case 40:if("string"===typeof p){e.next=42;break}throw new Error("expected runoutput to be a string");case 42:return m=JSON.parse(p.slice(p.indexOf(Rb)+Rb.length,p.lastIndexOf(Lb))),e.abrupt("return",{result:m,error:null});case 44:case"end":return e.stop()}}),e)}))),Ub.apply(this,arguments)}function zb(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function Bb(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){zb(i,n,a,o,l,"next",e)}function l(e){zb(i,n,a,o,l,"throw",e)}o(void 0)}))}}var Mb={testRunnerName:function(){throw new Error("Node test runner uses jest directly")},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"const index = require('./index.js');"},classIntro:function(){return'describe("UnitTests", function() {'},classConstructorName:function(){return null},setupIntro:function(){return"beforeAll(async function() {"},tearDownIntro:function(){return"afterAll(async function() {"},testIntro:function(e){return Mb.testIntroPreName()+e+Mb.testIntroPostName()},testIntroPreName:function(){return'test("'},testIntroPostName:function(){return'", async function() {'},getProperTestName:function(e){return e},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,r=e.meta,n=new fb(Mb);n.push(Mb.defaultImports()),r&&r.imports&&n.push(r.imports),n.newLine(),n.push(Mb.classIntro()),n.newLine(),n.indent(),r&&(r.initialization&&(n.push(r.initialization),n.newLine()),r.setup&&(n.push(Mb.setupIntro()),n.indent(),n.push(r.setup),n.dedent(),n.closeCurly(),n.newLine(),n.newLine()),r.tearDown&&(n.push(Mb.tearDownIntro()),n.indent(),n.push(r.tearDown),n.dedent(),n.closeCurly(),n.newLine(),n.newLine()));var a=!0,i=!1,o=void 0;try{for(var l,c=t[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var s=l.value;s.code&&(n.push(Mb.testIntro(s.name)),n.indent(),n.push(s.code),n.dedent(),n.closeCurly(),n.newLine(),n.newLine())}}catch(u){i=!0,o=u}finally{try{a||null==c.return||c.return()}finally{if(i)throw o}}return n.dedent(),n.closeCurly(),n.toString()},runSuite:function(e){return Fb.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,r=e.fs,n=e.packager,a=e.logger,i=e.tests,o=e.meta,l=Mb.buildSuite({tests:i,meta:o});return Mb.runSuite({container:t,fs:r,packager:n,logger:a,suiteCode:l})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"});"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react yet"},captureSetupError:function(e){var t=e.tag,r=e.raw;st.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",r),e.setExtra("language","nodejs"),st.Tb(t)}))},exampleTest:{id:-1,failureMessage:"",name:"add",code:"expect(add(1, 2)).toBe(3);"}};function Fb(){return Fb=Bb(J().mark((function e(t){var r,n,a,i,o,l,c,s,u,d,f,p,b,m,h,v,g,y,x,w,k,j;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.container,n=t.fs,a=t.packager,i=t.logger,o=t.suiteCode,l=i.startLogSpinner("Setting up the environment"),e.next=4,yb(n);case 4:return l("Creating your test files 1/2"),e.next=7,vb({fs:n,code:o,filename:"".concat(Mb.testSuiteName(),".js")});case 7:if(c=e.sent,!(s=c.error)){e.next=13;break}return"Failed to create suite code file",Mb.captureSetupError({tag:"Failed to create suite code file",raw:s}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 13:return l("Creating your test files 2/2"),u=69,d="jest.config.json",f={testRegex:hb("".concat(Mb.testSuiteName(),".js")),testEnvironment:"node",testFailureExitCode:u},e.next=19,vb({fs:n,code:JSON.stringify(f),filename:d});case 19:if(p=e.sent,!(b=p.error)){e.next=25;break}return"Failed to create config file",Mb.captureSetupError({tag:"Failed to create config file",raw:b}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 25:return i.stopLogSpinner(),i.clearLine(),i.logMessage("Installing imported packages\r\n"),e.next=30,a.installPackages();case 30:if(e.sent){e.next=33;break}return e.abrupt("return",{error:"Failed to install packages\r\n"});case 33:return i.clearLogs(),l=i.startLogSpinner("Running your tests"),m=hb("output.json"),e.next=38,r.exec("jest","--json","--outputFile",m,"--config",hb(d),"--forceExit","--passWithNoTests");case 38:if(h=e.sent,v=h.output,!(g=h.error)||g.endsWith(u.toString())){e.next=44;break}return(0,ft.j)(ft.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),e.abrupt("return",{error:"Running tests failed\r\n\r\n"+(null===v||void 0===v?void 0:v.replace(/\n/g,"\n\r"))+"\r\n"+g});case 44:return l("Parsing your test results"),e.next=47,n.readFile(m);case 47:if(!(y=e.sent).error){e.next=52;break}return"Error reading test results",Mb.captureSetupError({tag:"Error reading test results",raw:y.error}),e.abrupt("return",{error:"There was an error getting test results, if this happens please contact support."});case 52:if(x=y.content.toString(),!(w=JSON.parse(x)).success){e.next=56;break}return e.abrupt("return",{error:null,result:{passed:!0,failures:[]}});case 56:if(k=w.testResults[0],(j=k.assertionResults.filter((function(e){return"passed"!==e.status})).map((function(e){return{name:e.title,stack:e.failureMessages[0]}}))).length){e.next=60;break}return e.abrupt("return",{error:k.message.replace(/\n/g,"\r\n")});case 60:return e.abrupt("return",{error:null,result:{passed:!1,failures:j}});case 61:case"end":return e.stop()}}),e)}))),Fb.apply(this,arguments)}var Xb={java10:Ab,java10_beta:Ab,java:Ab,python3:Pb,python3_beta:Pb,python:Pb,nodejs:Mb,javascript:Mb,nodejs_beta:Mb};function Vb(e){return e in Xb}function Gb(e){if(!Vb(e))throw new Error("".concat(e," is not a supported unit testing language, it has to be one of ").concat(Object.keys(Xb)));return Xb[e]}var Hb=r(86578),Wb=r(47421),Kb=r(78120),qb=Kb.q6.define();function Yb(e){var t=e.editorRef,r=e.onChange,n=e.placeholder,a=e.skeleton,i=e.language,o=e.skeletonClosingBracket,l=e.indentSize,c=void 0===l?2:l,s=(0,Hb.Z)({language:i,indentIsSpaces:!0,indentSize:2,fontSize:14}),u=s.view,d=s.ref,f=ie.useRef(a?"".concat(a,"\n"):""),p=o?"\n".concat(o):"",b=" ".repeat(c);return ie.useEffect((function(){if(u&&u.state.doc.length){var e=f.current;f.current=a?"".concat(a,"\n"):"",u.dispatch({changes:{from:0,to:e.length-1,insert:a},annotations:[Kb.YW.addToHistory.of(!1),qb.of(!0)]})}}),[u,a]),ie.useEffect((function(){if(u){var e=Kb.yy.changeFilter.of((function(e){return!!e.annotation(qb)||[-1,f.current.length,e.startState.doc.length-p.length,e.startState.doc.length+1]})),a=Wb.tk.updateListener.of((function(e){var t=e.state.doc.slice(f.current.length,e.state.doc.toString().length-p.length).toString();if(t!=="".concat(b).concat(n,"\n").concat(b)?r(t):r(""),e.docChanged&&e.state.doc.length===f.current.length+p.length){var a="\n"+b;u.dispatch({changes:{from:f.current.length-1,insert:"\n"+b},selection:{anchor:f.current.length+a.length-1},annotations:[qb.of(!0)]})}})),i="".concat(f.current).concat(b).concat(n,"\n").concat(p);u.dispatch({changes:{from:0,to:u.state.doc.length,insert:i},effects:Kb.Py.appendConfig.of([e,a]),selection:{anchor:i.length},annotations:Kb.YW.addToHistory.of(!1)}),t({setValue:function(e){if(e){var t=u.state.doc.toString().length;u.dispatch({changes:{from:f.current.length,to:t-p.length,insert:e},annotations:Kb.YW.addToHistory.of(!1)})}},focus:function(){return u.focus()}})}}),[r,i,u,p,t,n,b]),(0,ee.BX)("div",{className:"jsx-c0a72647b9c20ef editor",children:[(0,ee.tZ)("div",{ref:d,className:"jsx-c0a72647b9c20ef"}),(0,ee.tZ)(re(),{id:"c0a72647b9c20ef",children:".editor.jsx-c0a72647b9c20ef{overflow:auto;position:absolute;width:100%;height:100%}.loader.jsx-c0a72647b9c20ef{height:100%;width:100%;z-index:5}"})]})}function $b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Qb(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Qb(e,t,r[t])}))}return e}function em(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return $b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tm(e){var t,r,n,a,i=e.isOpen,o=e.meta,l=e.language,c=e.hasMetadata,s=e.onClose,u=(0,we.Z)(),d=(0,qt.Z)().showConfirm,f=em(ie.useState(null),2),p=f[0],b=f[1],m=em(ie.useState(!0),2),h=m[0],v=m[1],g=em(ie.useState((null===o||void 0===o?void 0:o.initialization)||""),2),y=g[0],x=g[1],w=em(ie.useState((null===o||void 0===o?void 0:o.imports)||""),2),k=w[0],j=w[1],Z=em(ie.useState((null===o||void 0===o?void 0:o.setup)||""),2),S=Z[0],E=Z[1],O=em(ie.useState((null===o||void 0===o?void 0:o.tearDown)||""),2),_=O[0],C=O[1],A=em((0,ke.rUq)({onError:function(e){return b(e.message)},update:function(e,t){var r,n=null===(r=t.data)||void 0===r?void 0:r.createReplUnitTestMeta;n&&("UserError"===n.__typename?b(n.message):"ReplUnitTestMeta"===n.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:u}),fields:{unitTests:function(t){var r=e.writeFragment({data:n,fragment:ke.aAi});return t?Jb({},t,{meta:Jb({},r)}):{__typename:"ReplUnitTestsWithMeta",meta:r,tests:[]}}}}),d("Setup saved!"),s()))}}),2),I=A[0],N=A[1],T=em((0,ke.AFf)({onError:function(e){return b(e.message)},onCompleted:function(e){var t=e.updateReplUnitTestMeta;t&&("UserError"===t.__typename?b(t.message):"ReplUnitTestMeta"===t.__typename&&(d("Imports updated!"),s()))}}),2),P=T[0],R=T[1],L=Gb(l),D=k!==(null===o||void 0===o?void 0:o.imports)||y!==(null===o||void 0===o?void 0:o.initialization)||S!==(null===o||void 0===o?void 0:o.setup)||_!==(null===o||void 0===o?void 0:o.tearDown),U=N.loading||R.loading;return(0,ee.tZ)(It.Z,{isOpen:i,preventClose:!0,onRequestClose:s,children:(0,ee.BX)("div",{className:"jsx-5a7cee674f0a56c4 content",children:[(0,ee.BX)(ye.gC,{spacing:2,align:"stretch",children:[(0,ee.tZ)(nm,{unitTestsLib:L,onChange:j,language:l,initialValue:null!==(t=null===o||void 0===o?void 0:o.imports)&&void 0!==t?t:""}),(0,ee.tZ)("div",{onClick:function(){return v(!h)},className:"jsx-5a7cee674f0a56c4 collapse",children:(0,ee.BX)(ye.Ug,{spacing:2,align:"baseline",children:[(0,ee.tZ)(Ne.Z,{level:3,children:" Advanced"}),(0,ee.tZ)(jf.Z,{color:"var(--foreground-default)",size:20,rotate:h?270:0})]})}),h?null:(0,ee.BX)(ye.gC,{align:"stretch",spacing:1,children:[(0,ee.tZ)(am,{unitTestsLib:L,onChange:x,language:l,initialValue:null!==(r=null===o||void 0===o?void 0:o.initialization)&&void 0!==r?r:""}),(0,ee.tZ)(im,{unitTestsLib:L,onChange:E,language:l,initialValue:null!==(n=null===o||void 0===o?void 0:o.setup)&&void 0!==n?n:""}),(0,ee.tZ)(om,{unitTestsLib:L,onChange:C,language:l,initialValue:null!==(a=null===o||void 0===o?void 0:o.tearDown)&&void 0!==a?a:""})]}),(0,ee.BX)(ye.Ug,{justify:"space-between",children:[(0,ee.tZ)(ge.Z,{style:{color:"var(--accent-negative-default"},children:p}),(0,ee.BX)(ye.Ug,{spacing:2,justify:"end",children:[(0,ee.tZ)(ve.Z,{loading:U,onClick:s,children:"Close"}),(0,ee.tZ)(ve.Z,{color:"primary",disabled:!D,loading:U,onClick:function(){c?P({variables:{input:{initialization:y,imports:k,setup:S,tearDown:_,replId:u}}}):I({variables:{input:{initialization:y,imports:k,setup:S,tearDown:_,replId:u}}})},children:"Save"})]})]})]}),(0,ee.tZ)(re(),{id:"5a7cee674f0a56c4",children:".content.jsx-5a7cee674f0a56c4{height:100%;width:100%;padding:var(--space-24)}.editable-area.jsx-5a7cee674f0a56c4{width:100%;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;border:1px solid var(--background-higher);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8)0}.editor.jsx-5a7cee674f0a56c4{height:150px;padding-bottom:var(--space-8);-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.collapse.jsx-5a7cee674f0a56c4{cursor:pointer}"})]})})}var rm=new String(".content.jsx-d4acab3f10ffaa49{height:100%;width:100%;padding:var(--space-24)}.editable-area.jsx-d4acab3f10ffaa49{width:100%;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;border:1px solid var(--background-higher);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8)0}.editor.jsx-d4acab3f10ffaa49{height:150px;padding-bottom:var(--space-8);-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;position:relative}");function nm(e){var t=e.unitTestsLib,r=e.onChange,n=e.language,a=e.initialValue,i=em(ie.useState(null),2),o=i[0],l=i[1];ie.useEffect((function(){o&&(o.setValue(a),o.focus())}),[o,a]);var c=t.defaultImports().trim();return(0,ee.BX)(ye.gC,{spacing:1,align:"stretch",children:[(0,ee.BX)(ye.Ug,{justify:"space-between",children:[(0,ee.tZ)(Ne.Z,{level:3,children:"Imports"}),(0,ee.tZ)("a",{href:"https://docs.replit.com/repls/UnitTesting",target:"_blank",className:"jsx-".concat(rm.__hash),children:(0,ee.tZ)(ve.Z,{Icon:Qe.Z,children:"Docs"})})]}),(0,ee.tZ)("div",{className:"jsx-".concat(rm.__hash)+" editable-area",children:(0,ee.tZ)("div",{className:"jsx-".concat(rm.__hash)+" editor",children:(0,ee.tZ)(Yb,{onChange:r,placeholder:"".concat(t.getCommentChar()," Add imports here!"),editorRef:l,language:n,skeleton:c,skeletonClosingBracket:"",indentSize:0})})}),(0,ee.tZ)(re(),{id:rm.__hash,children:rm})]})}function am(e){var t=e.unitTestsLib,r=e.onChange,n=e.language,a=e.initialValue,i=em(ie.useState(null),2),o=i[0],l=i[1];ie.useEffect((function(){o&&o.setValue(a)}),[o,a]);var c=t.classConstructorName();return(0,ee.BX)(ye.gC,{spacing:1,align:"stretch",children:[(0,ee.BX)(ye.Ug,{justify:"space-between",children:[(0,ee.tZ)(Ne.Z,{level:4,children:"Initialization"}),(0,ee.tZ)("a",{href:"https://docs.replit.com/repls/UnitTesting",target:"_blank",className:"jsx-".concat(rm.__hash),children:(0,ee.tZ)(ve.Z,{Icon:Qe.Z,children:"Docs"})})]}),c&&(0,ee.tZ)(ye.Ug,{children:(0,ee.BX)(ge.Z,{children:["Hint: constructor name is ",(0,ee.tZ)("code",{className:"jsx-".concat(rm.__hash),children:c}),"."]})}),(0,ee.tZ)("div",{className:"jsx-".concat(rm.__hash)+" editable-area",children:(0,ee.tZ)("div",{className:"jsx-".concat(rm.__hash)+" editor",children:(0,ee.tZ)(Yb,{onChange:r,placeholder:"".concat(t.getCommentChar()," Add initialization code here!"),editorRef:l,language:n,skeleton:"",skeletonClosingBracket:"",indentSize:0})})}),(0,ee.tZ)(re(),{id:rm.__hash,children:rm})]})}function im(e){var t=e.unitTestsLib,r=e.onChange,n=e.language,a=e.initialValue,i=em(ie.useState(null),2),o=i[0],l=i[1];ie.useEffect((function(){o&&o.setValue(a)}),[o,a]);var c=t.setupIntro().trim();return(0,ee.BX)(ye.gC,{spacing:1,align:"stretch",children:[(0,ee.BX)(ye.Ug,{justify:"space-between",children:[(0,ee.tZ)(Ne.Z,{level:4,children:"Setup"}),(0,ee.tZ)("a",{href:"https://docs.replit.com/repls/UnitTesting",target:"_blank",className:"jsx-".concat(rm.__hash),children:(0,ee.tZ)(ve.Z,{Icon:Qe.Z,children:"Docs"})})]}),(0,ee.tZ)("div",{className:"jsx-".concat(rm.__hash)+" editable-area",children:(0,ee.tZ)("div",{className:"jsx-".concat(rm.__hash)+" editor",children:(0,ee.tZ)(Yb,{onChange:r,placeholder:"".concat(t.getCommentChar()," Add setup code here!"),editorRef:l,language:n,skeleton:c,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})}),(0,ee.tZ)(re(),{id:rm.__hash,children:rm})]})}function om(e){var t=e.unitTestsLib,r=e.onChange,n=e.language,a=e.initialValue,i=em(ie.useState(null),2),o=i[0],l=i[1];ie.useEffect((function(){o&&o.setValue(a)}),[o,a]);var c=t.tearDownIntro().trim();return(0,ee.BX)(ye.gC,{spacing:1,align:"stretch",children:[(0,ee.BX)(ye.Ug,{justify:"space-between",children:[(0,ee.tZ)(Ne.Z,{level:4,children:"Teardown"}),(0,ee.tZ)("a",{href:"https://docs.replit.com/repls/UnitTesting",target:"_blank",className:"jsx-".concat(rm.__hash),children:(0,ee.tZ)(ve.Z,{Icon:Qe.Z,children:"Docs"})})]}),(0,ee.tZ)("div",{className:"jsx-".concat(rm.__hash)+" editable-area",children:(0,ee.tZ)("div",{className:"jsx-".concat(rm.__hash)+" editor",children:(0,ee.tZ)(Yb,{onChange:r,placeholder:"".concat(t.getCommentChar()," Add teardown code here!"),editorRef:l,language:n,skeleton:c,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})}),(0,ee.tZ)(re(),{id:rm.__hash,children:rm})]})}rm.__hash="d4acab3f10ffaa49";var lm=function(e){var t=e.language,r=e.meta,n=em(ie.useState(!1),2),a=n[0],i=n[1];return(0,ee.BX)(ee.HY,{children:[(0,ee.tZ)(ve.Z,{Icon:qe.Z,filled:!0,fullWidth:!0,onClick:function(){return i(!0)},children:"Setup"}),(0,ee.tZ)(tm,{language:t,isOpen:a,onClose:function(){return i(!1)},hasMetadata:Boolean(null===r||void 0===r?void 0:r.id),meta:r}),(0,ee.tZ)(re(),{id:"899d4d8669179c5d",children:".collapse.jsx-899d4d8669179c5d{cursor:pointer}"})]})},cm=r(5383),sm=r(58375);function um(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function dm(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function fm(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){dm(i,n,a,o,l,"next",e)}function l(e){dm(i,n,a,o,l,"throw",e)}o(void 0)}))}}function pm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){pm(e,t,r[t])}))}return e}function mm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||vm(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hm(e){return function(e){if(Array.isArray(e))return um(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||vm(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vm(e,t){if(e){if("string"===typeof e)return um(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?um(e,t):void 0}}var gm="\x1b[0;31m",ym="\x1b[0m",xm=["\u28fe","\u28fd","\u28fb","\u28bf","\u287f","\u28df","\u28ef","\u28f7","\u2801","\u2802","\u2804","\u2840","\u2880","\u2820","\u2810","\u2808"];function wm(e){var t=e.name,r=e.failureMessage,n=e.stack;return"\u274c\t".concat(gm).concat(t).concat(ym,"\r").concat(r?"\nMessage: ".concat(r,"\r"):"","\nStack Trace:\r\n").concat(n.replace(/\n/g,"\r\n"),"\n\r\n\r\n")}var km=function(e){var t=e.language,r=e.unitTests,n=e.onResult,a=e.trackingContext,i=mm(ie.useState(!1),2),o=i[0],l=i[1],c=(0,Ie.Z)(),s=c.container,u=c.packager,d=c.fs,f=window.store.dispatch,p=null,b=function(){l(!1),yb(d),p&&(p.stopLogSpinner(),p=null)},m=function(){var e=fm(J().mark((function e(){var i,c,m,h,v,g,y,x,w,k,j,Z,S,E,O,_,C,A,I,N,T,P;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:if(i=null,p={startLogSpinner:function(e){if(i)throw new Error("A spinner is already active! call stopSpinner first or use the update callback to update the active spinner's message.");var t=e,r=0;return i=setInterval((function(){r++;var e=xm[r%xm.length];if(!p)throw new Error("Expected logger");p.clearLine(),p.logMessage(e+" "+t)}),100),function(e){t=e}},stopLogSpinner:function(){i&&clearInterval(i),i=null},logMessage:function(e){f((0,ht.yY)({wid:"",type:"",raw:!0,message:e}))},clearLine:function(){if(!p)throw new Error("Expected logger");p.logMessage("\x1b[1K\r")},clearLogs:function(){if(f({type:"CLEAR_CONSOLE"}),!p)throw new Error("Expected logger");p.logMessage("\r\n")}},r){e.next=6;break}throw new Error("Run button should not be active if there are no tests");case 6:return l(!0),(0,ft.j)(ft.U3.REPL_UNIT_TEST_RUN,{trackingData:{context:a}}),p.clearLogs(),c=Gb(t),e.next=12,c.buildAndRunTests(bm({container:s,fs:d,packager:u,logger:p},r));case 12:if(m=e.sent,p.stopLogSpinner(),p.clearLine(),p.clearLogs(),null===m.error){e.next=21;break}return p.logMessage("".concat(gm).concat(m.error).concat(ym,"\r\n")),b(),r.tests.map((function(e){return{testId:e.id,didPass:!1}})),e.abrupt("return");case 21:if(h=m.result.passed?[]:m.result.failures.map((function(e){return c.parseTestResultName(e.name)})),v=[],g=r.tests.map((function(e){return c.getProperTestName(e.name)})),!(y=h.filter((function(e){return!g.includes(e)}))).length){e.next=29;break}w=y[0],k=m.result.failures[0].stack,p.logMessage(wm({name:w,failureMessage:"The following error occurred but was not related to a single unit test",stack:k})),(x=v).push.apply(x,hm(r.tests.map((function(e){return{testId:e.id,didPass:!1}})))),e.next=60;break;case 29:j=!0,Z=!1,S=void 0,e.prev=30,E=r.tests[Symbol.iterator]();case 32:if(j=(O=E.next()).done){e.next=46;break}if(_=O.value,C=c.getProperTestName(_.name),A=h.indexOf(C),I=-1===A,v.push({testId:_.id,didPass:I}),!I){e.next=41;break}return p.logMessage((R=C,"\u2705\t".concat("\x1b[0;32m").concat(R).concat(ym,"\r\n\r\n"))),e.abrupt("continue",43);case 41:N=m.result.failures[A].stack,p.logMessage(wm({name:C,failureMessage:_.failureMessage,stack:N}));case 43:j=!0,e.next=32;break;case 46:e.next=52;break;case 48:e.prev=48,e.t0=e.catch(30),Z=!0,S=e.t0;case 52:e.prev=52,e.prev=53,j||null==E.return||E.return();case 55:if(e.prev=55,!Z){e.next=58;break}throw S;case 58:return e.finish(55);case 59:return e.finish(52);case 60:if(n(v),T=r.tests.length,!m.result.passed){e.next=66;break}return p.logMessage("".concat("\x1b[48;5;22m","  All tests have passed ").concat(T,"/").concat(T,"  ").concat(ym,"\r\n")),b(),e.abrupt("return");case 66:P=T-m.result.failures.length,p.logMessage("".concat("\x1b[48;5;88m","  ").concat(P,"/").concat(T," passed, see errors above  ").concat(ym)),b();case 69:case"end":return e.stop()}var R}),e,null,[[30,48,52,60],[53,,55,59]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=fm(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{m()}catch(t){st.$e((function(e){e.setTag("unittestsrun","true"),st.Tb(t)})),p&&p.logMessage("\r\n".concat(gm," Sorry, we have failed to run your tests. Please try again or contact support. ").concat(ym,"\r\n")),b()}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Boolean(r&&r.tests.length>0)?(0,ee.tZ)("div",{className:"run-button",children:(0,ee.tZ)(ve.Z,{loading:o,fullWidth:!0,color:"blue",filled:!0,Icon:Cu.Z,onClick:h,children:o?"Running":"Run tests"})}):null};function jm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Zm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Zm(e,t,r[t])}))}return e}function Em(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||_m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Om(e){return function(e){if(Array.isArray(e))return jm(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _m(e,t){if(e){if("string"===typeof e)return jm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jm(e,t):void 0}}function Cm(e){var t=e.isOpen,r=e.test,n=e.language,a=e.onClose,i=e.trackingContext,o=(0,we.Z)(),l=(0,qt.Z)().showConfirm,c=Em(ie.useState(null),2),s=c[0],u=c[1],d=Em(ie.useState(""),2),f=d[0],p=d[1],b=Em(ie.useState(""),2),m=b[0],h=b[1],v=Em(ie.useState(""),2),g=v[0],y=v[1],x=Em((0,ke.Hd4)({onError:function(e){return y(e.message)},update:function(e,t){var r,n=null===(r=t.data)||void 0===r?void 0:r.createReplUnitTest;n&&("UserError"===n.__typename?y(n.message):"ReplUnitTest"===n.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:o}),fields:{unitTests:function(t){var r=e.writeFragment({data:n,fragment:ke.Rbd});return t?Sm({},t,{tests:Om(t.tests).concat([r])}):{__typename:"ReplUnitTestsWithMeta",meta:null,tests:[r]}}}}),l("Test created!"),a()))}}),2),w=x[0],k=x[1],j=Em((0,ke.kOV)({onError:function(e){return y(e.message)},onCompleted:function(e){var t=e.updateReplUnitTest;t&&("UserError"===t.__typename?y(t.message):"ReplUnitTest"===t.__typename&&(l("Test updated!"),a()))}}),2),Z=j[0],S=j[1],E=(0,Rn.Y)("",(function(e){return e.length<=0?{message:"Must include test name"}:e.trim().split(" ").length>1?{message:"Test name must only be one word"}:void 0})),O=Em(ie.useState(!1),2),_=O[0],C=O[1];ie.useEffect((function(){t||C(!1)}),[t]),ie.useEffect((function(){E.setValue((null===r||void 0===r?void 0:r.name)||""),h((null===r||void 0===r?void 0:r.failureMessage)||""),p((null===r||void 0===r?void 0:r.code)||""),s&&s.setValue((null===r||void 0===r?void 0:r.code)||"")}),[r,s]),ie.useEffect((function(){y("")}),[f,y]);var A=Gb(n),I=!r||r.name!==E.value||r.code!==f||r.failureMessage!==m,N=k.loading||S.loading,T=A.testIntro(E.value||""),P=A.hasClosingBrackets()?A.getClosingBrackets():"";return(0,ee.tZ)(It.Z,{isOpen:t,preventClose:!0,onRequestClose:a,children:(0,ee.BX)("div",{className:"jsx-fe00344cc28ffe12 content",children:[(0,ee.BX)(ye.gC,{spacing:2,align:"stretch",children:[(0,ee.BX)(ye.Ug,{spacing:2,wrap:"nowrap",children:[(0,ee.tZ)(Ne.Z,{style:{flexShrink:0},level:3,children:"Name"}),(0,ee.tZ)(Qt.ZP,{autoFocus:!0,large:!0,required:!0,onChange:function(e){E.setValue(e.target.value),C(!0)},value:E.value,validationResults:_&&E.error?[{message:E.error.message,state:"error"}]:void 0,placeholder:"Enter test name here!"})]}),(0,ee.BX)(ye.Ug,{align:"baseline",justify:"space-between",children:[(0,ee.tZ)(Ne.Z,{level:3,children:"Code"}),(0,ee.tZ)(ve.Z,{Icon:Zf.Z,size:"small",onClick:function(){s&&s.setValue("  "+A.exampleTest.code),p(A.exampleTest.code)},children:"Show me an example"})]}),(0,ee.tZ)("section",{className:"jsx-fe00344cc28ffe12",children:(0,ee.tZ)("div",{className:"jsx-fe00344cc28ffe12 editable-area",children:(0,ee.tZ)("div",{className:"jsx-fe00344cc28ffe12 editor",children:(0,ee.tZ)(Yb,{skeleton:T,skeletonClosingBracket:P,language:n,editorRef:u,onChange:p,placeholder:"".concat(A.getCommentChar()," Enter code here")})})})}),(0,ee.tZ)("div",{className:"jsx-fe00344cc28ffe12 test-heading",children:(0,ee.tZ)(Ne.Z,{level:3,children:"Failure message"})}),(0,ee.tZ)("section",{className:"jsx-fe00344cc28ffe12",children:(0,ee.tZ)(Qt.ZP,{value:m,onChange:function(e){return h(e.target.value)},placeholder:"This will be displayed on test failure"})}),(0,ee.BX)(ye.Ug,{justify:"space-between",align:"center",children:[(0,ee.tZ)(ge.Z,{style:{color:"var(--accent-negative-default"},children:g}),(0,ee.BX)(ye.Ug,{spacing:2,justify:"end",children:[(0,ee.tZ)(ve.Z,{loading:!1,onClick:a,children:"Close"}),(0,ee.tZ)(ve.Z,{color:"primary",loading:N,disabled:!I,onClick:function(){E.validate()?C(!0):f.length<=0?y("Test cannot be empty"):r?(Z({variables:{input:{name:E.value,code:f,failureMessage:m,testId:r.id}}}),(0,ft.j)(ft.U3.REPL_UNIT_TEST_EDITED,{trackingData:{context:i}})):(w({variables:{input:{name:E.value,code:f,failureMessage:m,replId:o}}}),(0,ft.j)(ft.U3.REPL_UNIT_TEST_CREATED,{trackingData:{context:i}}))},children:"Save"})]})]})]}),(0,ee.tZ)(re(),{id:"fe00344cc28ffe12",children:".content.jsx-fe00344cc28ffe12{padding:var(--space-24)}.editable-area.jsx-fe00344cc28ffe12{border:1px solid var(--background-higher);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8)0}.editor.jsx-fe00344cc28ffe12{height:200px;padding-bottom:var(--space-8);position:relative}"})]})})}function Am(e){var t=e.testId,r=e.onClose,n=(0,qt.Z)().showConfirm,a=(0,we.Z)(),i=Em((0,ke.IVR)({onError:function(e){return u(e.message)},update:function(e,i){var o,l=null===(o=i.data)||void 0===o?void 0:o.deleteReplUnitTest;l&&("UserError"===l.__typename?u(l.message):"ReplUnitTest"===l.__typename&&t&&(e.modify({id:e.identify({__typename:"Repl",id:a}),fields:{unitTests:function(e,r){var n=r.readField,a=e.tests.filter((function(e){return n("id",e)!==t}));return Sm({},e,{tests:Om(a)})}}}),n("Test deleted!"),r()))}}),2),o=i[0],l=i[1],c=Em(ie.useState(""),2),s=c[0],u=c[1];return(0,ee.tZ)(It.Z,{isOpen:Boolean(t),onRequestClose:r,children:(0,ee.BX)("div",{className:"jsx-192315c7792e5695 content",children:[(0,ee.BX)(ye.gC,{spacing:2,align:"stretch",children:[(0,ee.tZ)(Ne.Z,{level:2,children:" Delete test "}),(0,ee.tZ)(ge.Z,{children:"Are you sure you want to delete this test? This cannot be undone."}),(0,ee.BX)(ye.Ug,{justify:"space-between",align:"center",children:[(0,ee.tZ)(ge.Z,{style:{color:"var(--accent-negative-default"},children:s}),(0,ee.BX)(ye.Ug,{spacing:2,justify:"end",children:[(0,ee.tZ)(ve.Z,{loading:l.loading,onClick:r,children:"Cancel"}),(0,ee.tZ)(ve.Z,{color:"negative",loading:l.loading,onClick:function(){if(!t)throw new Error("Expected a testId");o({variables:{testId:t}})},children:"Yes, delete this test"})]})]})]}),(0,ee.tZ)(re(),{id:"192315c7792e5695",children:".content.jsx-192315c7792e5695{padding:var(--space-24)}"})]})})}var Im=function(e){var t=e.unitTests,r=e.isAddingTest,n=e.onClose,a=e.language,i=e.canWrite,o=e.trackingContext,l=void 0===o?"default":o,c=Em(ie.useState(r),2),s=c[0],u=c[1],d=Em(ie.useState(null),2),f=d[0],p=d[1],b=Em(ie.useState(null),2),m=b[0],h=b[1],v=(0,we.Z)(),g=Em((0,ke.lQq)(),1)[0],y=(null===t||void 0===t?void 0:t.tests)||[];return(0,ee.BX)(ye.gC,{spacing:2,align:"stretch",children:[(0,ee.tZ)("div",{className:"jsx-93234499136c688a run-wrapper",children:(0,ee.tZ)(km,{language:a,unitTests:t,onResult:function(e){g({variables:{input:{replId:v,results:e},replId:v}})},trackingContext:l})}),(0,ee.tZ)("div",{className:"jsx-93234499136c688a tests-wrapper",children:y.length>0?(0,ee.tZ)(ye.gC,{spacing:1,align:"stretch",children:y.map((function(e){var t,r;return"ReplUnitTestLastRun"===(null===(t=e.lastRun)||void 0===t?void 0:t.__typename)&&(e.lastRun.status===ke.$I7.Passed?r="passed-test":e.lastRun.status===ke.$I7.Failed&&(r="failed-test")),(0,ee.tZ)("div",{className:"jsx-93234499136c688a "+"test ".concat(r),children:(0,ee.BX)(ye.Ug,{wrap:"nowrap",justify:"space-between",align:"center",children:[(0,ee.tZ)(ge.Z,{truncate:!0,children:e.name}),i?(0,ee.tZ)("div",{className:"jsx-93234499136c688a test-ctas",children:(0,ee.BX)(ye.Ug,{children:[(0,ee.tZ)(ve.Z,{border:!1,filled:!1,onClick:function(){p(e)},Icon:cm.Z}),(0,ee.tZ)(ve.Z,{border:!1,filled:!1,onClick:function(){h(e.id)},Icon:sm.Z})]})}):null]})},e.id)}))}):(0,ee.tZ)("div",{className:"jsx-93234499136c688a",children:(0,ee.BX)(ye.gC,{align:"center",spacing:2,children:[(0,ee.tZ)(ge.Z,{align:"center",children:"Looks like you don't have any tests yet!"}),i&&(0,ee.tZ)(ve.Z,{onClick:function(){return u(!0)},Icon:$t.Z,children:"Add test"})]})})}),(0,ee.tZ)(Cm,{isOpen:s||Boolean(f)||r,test:f,language:a,onClose:function(){p(null),u(!1),n&&n()},trackingContext:l}),(0,ee.tZ)(Am,{testId:m,onClose:function(){return h(null)}}),(0,ee.tZ)(re(),{id:"93234499136c688a",children:".tests-wrapper.jsx-93234499136c688a{-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-16)0;width:100%}.test.jsx-93234499136c688a{padding:var(--space-8)var(--space-8);border:1px solid var(--outline-dimmest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.passed-test.jsx-93234499136c688a{border-color:var(--accent-positive-default);background:var(--accent-positive-dimmer)}.failed-test.jsx-93234499136c688a{border-color:var(--accent-negative-default);background:var(--accent-negative-dimmer)}.test-ctas.jsx-93234499136c688a{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}"})]})};function Nm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tm(){return(0,ee.BX)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ee.tZ)("path",{d:"M23 4v6h-6M1 20v-6h6",stroke:"var(--foreground-default)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,ee.tZ)("path",{d:"M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15",stroke:"var(--foreground-default)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}var Pm=function(e){var t=e.onClick,r=e.hasTests,n=r?{"aria-label":"Delete all tests to switch test type","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip"}:{};return(0,ee.BX)("div",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Nm(e,t,r[t])}))}return e}({},n,{className:"jsx-44786ca38dd3aa42 "+(n&&null!=n.className&&n.className||"back-button"),children:[(0,ee.tZ)(ve.Z,{filled:!1,border:!1,size:"small",Icon:Tm,onClick:t,disabled:r,children:"Switch test type"}),(0,ee.tZ)(re(),{id:"44786ca38dd3aa42",children:".back-button.jsx-44786ca38dd3aa42{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-justify-content:center;justify-content:center}"})]}))},Rm=r(90361);function Lm(){var e=(0,ro.Z)(),t=(0,Ie.Z)().dotReplit,r=null===e||void 0===e?void 0:e.language,n=(0,ie.useState)(null),a=n[0],i=n[1],o=(0,ie.useState)(!0),l=o[0],c=o[1];return(0,ie.useEffect)((function(){if(r){if(Vb(r))return i(r),void c(!1);var e=!1,n=t.watch((function(t){var r,n;if(e||(e=!0,c(!1)),t.error)t.error===Rm.Y.NotFound&&i(null);else{var a=null===(r=t.config.unitTest)||void 0===r||null===(n=r.language)||void 0===n?void 0:n.toLowerCase();a&&Vb(a)?i(a):i(null)}}));return function(){n()}}}),[r,t]),{language:a,isLoading:l}}function Dm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Um(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Dm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dm(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var zm=function(e){var t,r,n,a,i=e.onBack,o=(0,we.Z)(),l=Um(ie.useState(!1),2),c=l[0],s=l[1],u=Lm(),d=u.language,f=u.isLoading,p=(0,ke.CHr)({variables:{replId:o}}),b=null===(t=p.data)||void 0===t?void 0:t.repl;if(p.loading||f)return(0,ee.BX)("div",{className:"jsx-1652fb32f8a812d3",children:[(0,ee.tZ)(Nt.Z,{}),(0,ee.tZ)(re(),{id:"1652fb32f8a812d3",children:"div.jsx-1652fb32f8a812d3{height:100%;width:100%;background-color:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center}"})]});if(!b||"Repl"!==b.__typename)return(0,ee.BX)("div",{className:"jsx-20824b07e103a23",children:[(0,ee.tZ)(ge.Z,{children:"Unable to fetch tests, please try again"}),(0,ee.tZ)(re(),{id:"20824b07e103a23",children:"div.jsx-20824b07e103a23{height:100%;width:100%;background-color:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-justify-content:center;justify-content:center;padding:var(--space-16)}"})]});if(!d)return(0,ee.BX)("div",{className:"jsx-20824b07e103a23",children:[(0,ee.tZ)(ge.Z,{align:"center",children:"Unit tests are currently only supported in Java, Python, and Node.js repls."}),(0,ee.tZ)(re(),{id:"20824b07e103a23",children:"div.jsx-20824b07e103a23{height:100%;width:100%;background-color:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-justify-content:center;justify-content:center;padding:var(--space-16)}"})]});var m="default";(null===b||void 0===b?void 0:b.isProject)?m="project_repl":(null===b||void 0===b?void 0:b.isProjectFork)&&(m="submission_repl");var h=Boolean((null===(r=b.unitTests)||void 0===r?void 0:r.tests)&&b.unitTests.tests.length>0);return(null===b||void 0===b||null===(n=b.currentUserPermissions)||void 0===n?void 0:n.writeTests)?(0,ee.BX)(ye.gC,{align:"center",spacing:2,children:[(0,ee.tZ)("header",{className:"jsx-d544bba35c5bcebb",children:(0,ee.BX)(ye.Ug,{wrap:"nowrap",justify:"space-between",align:"baseline",children:[(0,ee.tZ)(Ne.Z,{truncate:!0,level:4,children:"Unit tests"}),(0,ee.tZ)(ve.Z,{role:"tooltip","data-microtip-position":"left","aria-label":"Add test",filled:!1,border:!1,Icon:$t.Z,onClick:function(){return s(!0)}})]})}),(0,ee.tZ)("section",{className:"jsx-d544bba35c5bcebb",children:(0,ee.BX)(ye.gC,{spacing:1,align:"stretch",children:[(0,ee.tZ)(lm,{language:d,meta:(null===(a=b.unitTests)||void 0===a?void 0:a.meta)||null}),(0,ee.tZ)(Im,{isAddingTest:c,unitTests:(null===b||void 0===b?void 0:b.unitTests)||null,onClose:function(){return s(!1)},language:d,canWrite:!0,trackingContext:m}),i?(0,ee.tZ)(Pm,{hasTests:h,onClick:i}):null]})}),(0,ee.tZ)(re(),{id:"d544bba35c5bcebb",children:"header.jsx-d544bba35c5bcebb{width:100%}section.jsx-d544bba35c5bcebb{max-width:275px;width:100%;overflow-y:auto}"})]}):(0,ee.BX)(ye.gC,{spacing:2,align:"center",children:[(0,ee.tZ)("header",{className:"jsx-b80a7b783b8eaad8",children:(0,ee.tZ)(Ne.Z,{truncate:!0,level:4,children:"Unit tests"})}),(0,ee.tZ)("section",{className:"jsx-b80a7b783b8eaad8",children:(0,ee.tZ)(Im,{unitTests:(null===b||void 0===b?void 0:b.unitTests)||null,language:d,isAddingTest:!1,canWrite:!1,trackingContext:m})}),(0,ee.tZ)(re(),{id:"b80a7b783b8eaad8",children:"header.jsx-b80a7b783b8eaad8{width:100%}section.jsx-b80a7b783b8eaad8{width:100%;max-width:275px;overflow-y:auto}"})]})},Bm=r(86923);function Mm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Fm(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function Xm(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Fm(i,n,a,o,l,"next",e)}function l(e){Fm(i,n,a,o,l,"throw",e)}o(void 0)}))}}function Vm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gm(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Hm(e,t,r){return Hm=Gm()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&qm(a,r.prototype),a},Hm.apply(null,arguments)}function Wm(e){return Wm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Wm(e)}function Km(e,t){return!t||"object"!==$m(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qm(e,t){return qm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},qm(e,t)}function Ym(e){return function(e){if(Array.isArray(e))return Mm(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Mm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mm(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var $m=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Qm(e){var t="function"===typeof Map?new Map:void 0;return Qm=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Hm(e,arguments,Wm(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),qm(n,e)},Qm(e)}function Jm(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Wm(e);if(t){var a=Wm(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Km(this,r)}}function eh(e){switch(e){case ke.Flv.Match:return"The test passes if the expected output is in the actual output.";case ke.Flv.Exact:return"The test passes if the expected output is equal to the actual output.";case ke.Flv.Regex:return"The test passes if the actual output matches the regex expression for the expected output.";case ke.Flv.Compatibility:return"The test passes if the expected output is in the actual output; some characters are removed for backwards compatibility."}}var th=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qm(e,t)}(r,e);var t=Jm(r);function r(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var i;return Vm(this,r),(i=t.call.apply(t,[this].concat(Ym(n)))).name=i.constructor.name,i}return r}(Qm(Error));function rh(e){var t={id:e.id},r={id:-e.id,input:{input:e.input?e.input+"\n":""}};switch(e.type){case"compatibility":t.output={compatibility:{expected:e.output}};break;case"match":t.output={match:{expected:e.output,ignoreTrailingWhitespace:!0}};break;case"exact":t.output={exact:{expected:e.output,allowTrailingNewline:!0}};break;case"regex":t.output={regex:{expression:e.output}}}return{id:e.id,instructions:[r,t]}}function nh(e){var t=e.args,r=e.env,n=t.indexOf("--ps1"),a=t.indexOf("--ps2"),i=t.indexOf("-i");return-1!==n&&null!=t[n+1]&&(t[n+1]=""),-1!==a&&null!=t[a+1]&&(t[a+1]=""),-1!==i&&t.splice(i,1),t.includes("-q")||t.unshift(t.shift(),"-q"),r.PS1="",r.PS2="",{args:t,env:r}}function ah(e){return ih.apply(this,arguments)}function ih(){return ih=Xm(J().mark((function e(t){var r,n,a,i,o,l,c,s,u,d;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.getRunConfig();case 3:if(n=e.sent){e.next=6;break}throw new th("unable to fetch dotreplit run config");case 6:if(!n.interp){e.next=17;break}if("stderred"===(null===(i=null===(a=n.interp)||void 0===a?void 0:a.command)||void 0===i?void 0:i.args[0])&&("--"===i.args[1]?i.args.splice(0,2):i.args.shift()),i&&!(i.args.length<1)){e.next=14;break}throw o=new th("received interp without command"),st.Tb(o,(function(e){return e.setExtra("runInfo",d)})),o;case 14:if(!i.args[0].match(/(^|\/)prybar/i)){e.next=16;break}return e.abrupt("return",{execCommand:nh(i)});case 16:return e.abrupt("return",{execCommand:{args:i.args,env:i.env}});case 17:if(null===(r=n.run)||void 0===r?void 0:r.run){e.next=21;break}throw l=new th("Bad repl run config received"),st.Tb(l,(function(e){return e.setExtra("runConfig",n)})),l;case 21:return c=n.run,s=c.run,u=c.compile,s.env.PS1="",s.env.PS2="",d={execCommand:{args:s.args,env:s.env}},u&&(u.env.PS1="",u.env.PS2="",d.buildCommand={args:u.args,env:u.env}),e.abrupt("return",d);case 27:case"end":return e.stop()}}),e)}))),ih.apply(this,arguments)}function oh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ch(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){lh(e,t,r[t])}))}return e}function sh(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function uh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return oh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var dh=function(e){var t=e.test,r=e.onSubmit,n=e.onCancel,a=e.isOpen,i=e.onRequestClose,o=uh(ie.useState({}),2),l=o[0],c=o[1],s=function(e){return{name:(null===e||void 0===e?void 0:e.name)||"",type:(null===e||void 0===e?void 0:e.type)||ke.Flv.Match,input:(null===e||void 0===e?void 0:e.input)||"",output:(null===e||void 0===e?void 0:e.output)||""}},u=(0,qt.Z)().showError,d=uh(ie.useState(s(t)),2),f=d[0],p=d[1];ie.useEffect((function(){p(s(t)),c({})}),[t,p]);var b=function(e,t){c((function(r){return ch({},r,lh({},e,t?void 0:[{message:e+" expected but not provided.",state:"error"}]))}))};return(0,ee.tZ)(It.Z,{isOpen:a,onRequestClose:i,children:(0,ee.BX)("div",{className:re().dynamic([["d333e3fa403aca0c",[""===f.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-tests-view",children:[(0,ee.tZ)("div",{className:re().dynamic([["d333e3fa403aca0c",[""===f.type?"--foreground-dimmer":"--foreground-default"]]])+" header-row",children:(0,ee.tZ)(Ne.Z,{level:4,align:"center",children:t?"Edit test: ":"Create test"})}),(0,ee.tZ)("div",{className:re().dynamic([["d333e3fa403aca0c",[""===f.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,ee.tZ)(Qt.ZP,{label:"Test name",placeholder:"The name of the test",value:(null===f||void 0===f?void 0:f.name)||"",validationResults:l.name,onChange:function(e){var t;e.persist(),p((function(t){var r;return ch({},t,{name:(null===(r=e.target)||void 0===r?void 0:r.value)||""})})),b("name",null===(t=e.target)||void 0===t?void 0:t.value)},maxLength:20})}),(0,ee.tZ)("div",{className:re().dynamic([["d333e3fa403aca0c",[""===f.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,ee.tZ)(Bm.Z,{style:{height:"150px"},label:"Input (standard in)",placeholder:"The input for the test",value:f.input,fontFamily:"monospace",translate:"no",onChange:function(e){e.persist(),p((function(t){return ch({},t,{input:e.target.value})}))}})}),(0,ee.tZ)("div",{className:re().dynamic([["d333e3fa403aca0c",[""===f.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,ee.tZ)(Bm.Z,{style:{height:"150px"},label:"Expected output",validationResults:l.output,placeholder:"The expected output for the test",value:f.output,fontFamily:"monospace",translate:"no",onChange:function(e){var t;e.persist(),p((function(t){return ch({},t,{output:e.target.value})})),b("output",null===(t=e.target)||void 0===t?void 0:t.value)}})}),(0,ee.tZ)("div",{className:re().dynamic([["d333e3fa403aca0c",[""===f.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,ee.tZ)("div",{className:re().dynamic([["d333e3fa403aca0c",[""===f.type?"--foreground-dimmer":"--foreground-default"]]])+" dropdown-container",children:(0,ee.tZ)(Ef.Z,{items:[ke.Flv.Match,ke.Flv.Exact,ke.Flv.Regex,ke.Flv.Compatibility],renderItemChildComponent:function(e){return(0,ee.BX)("a",{className:re().dynamic([["d333e3fa403aca0c",[""===f.type?"--foreground-dimmer":"--foreground-default"]]]),children:[e,(0,ee.tZ)("br",{className:re().dynamic([["d333e3fa403aca0c",[""===f.type?"--foreground-dimmer":"--foreground-default"]]])}),(0,ee.tZ)(ge.Z,{size:"xsmall",children:eh(e)})]})},renderAnchorComponent:function(e){var t=e.innerRef,r=sh(e,["innerRef"]);return(0,ee.BX)("a",ch({ref:t},r,{className:re().dynamic([["d333e3fa403aca0c",[""===f.type?"--foreground-dimmer":"--foreground-default"]]])+" dropdown-view dropdown-anchor",children:[(0,ee.tZ)(ge.Z,{children:f.type}),(0,ee.tZ)(ge.Z,{children:(0,ee.tZ)(jf.Z,{})})]}))},onClick:function(e){p((function(t){return ch({},t,{type:e})}))}})})}),(0,ee.BX)("div",{className:re().dynamic([["d333e3fa403aca0c",[""===f.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row align-end",children:[(0,ee.tZ)(ve.Z,{onClick:n,children:"Cancel"}),(0,ee.tZ)(ve.Z,{color:"primary",filled:!0,onClick:function(){if(!f.name||!f.output)return u("Test name and expected output must be provided."),f.name||b("name"),void(f.output||b("output"));f.type?(r({testId:null===t||void 0===t?void 0:t.id,name:f.name,input:f.input||"",type:f.type,output:f.output}),p(s(void 0))):u("A test type must be provided")},children:"Save"})]}),(0,ee.tZ)(re(),{id:"d333e3fa403aca0c",dynamic:[""===f.type?"--foreground-dimmer":"--foreground-default"],children:".dropdown-container.__jsx-style-dynamic-selector{border:1px solid var(--outline-dimmest);width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.dropdown-anchor.__jsx-style-dynamic-selector{padding:var(--space-8)}.dropdown-container.__jsx-style-dynamic-selector .anchor{z-index:1}.dropdown-container.__jsx-style-dynamic-selector .dropdown-view{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;text-align:right}.dropdown-container.__jsx-style-dynamic-selector .dropdown-view .text{color:var(".concat(""===f.type?"--foreground-dimmer":"--foreground-default",")}.manage-tests-view.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:var(--space-16)}.manage-test-row.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;padding-top:var(--space-16)}.align-end.__jsx-style-dynamic-selector{-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.manage-test-row.__jsx-style-dynamic-selector>button{margin-left:var(--space-8)}.manage-test-row-section.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-justify-content:start;justify-content:start;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:0 var(--space-16);width:100%}")})]})})},fh=function(e){var t=e.test,r=e.onEdit,n=e.onDelete,a=e.onView,i=e.isTeacherView,o=e.status,l=e.isRunning,c=e.onShowFailed,s=e.disableButtons,u="";return o?u=o:l&&(u="Running"),(0,ee.BX)("div",{onClick:function(){return a()},className:"jsx-d0055d2df6a917c5 test",children:[(0,ee.BX)("div",{className:"jsx-d0055d2df6a917c5 test-row",children:[(0,ee.tZ)("div",{className:"jsx-d0055d2df6a917c5 test-text",children:(0,ee.tZ)(ge.Z,{size:"large",children:t.name})}),i&&(0,ee.tZ)("div",{onClick:function(e){return e.stopPropagation()},className:"jsx-d0055d2df6a917c5 test-row",children:(0,ee.BX)(ee.HY,{children:[(0,ee.tZ)(ve.Z,{color:"primary",onClick:r,Icon:cm.Z,disabled:s}),(0,ee.tZ)(su.Z,{width:"var(--space-4)"}),(0,ee.tZ)(ve.Z,{onClick:n,color:"negative",Icon:sm.Z,disabled:s})]})})]}),(o||l)&&(0,ee.BX)(ee.HY,{children:[(0,ee.tZ)(su.Z,{height:2}),(0,ee.BX)("div",{className:"jsx-d0055d2df6a917c5 test-row",children:[(0,ee.tZ)("div",{className:"jsx-d0055d2df6a917c5 test-text",children:(0,ee.tZ)(ge.Z,{className:At()([{"status-passed":"Passed"===o},{"status-failed":"Failed"===o}]),children:u})}),(0,ee.tZ)(ve.Z,{onClick:function(e){return e.stopPropagation(),c(e)},disabled:l,children:"Results"})]})]}),(0,ee.tZ)(re(),{id:"d0055d2df6a917c5",children:".test.jsx-d0055d2df6a917c5{background-color:var(--background-higher);margin-top:var(--space-8);padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);cursor:pointer}.test-row.jsx-d0055d2df6a917c5 .status-passed{color:var(--accent-positive-default)}.test-row.jsx-d0055d2df6a917c5 .status-failed{color:var(--accent-negative-default)}.test-text.jsx-d0055d2df6a917c5{width:100%;padding:var(--space-4)0;padding-right:var(--space-8);word-break:break-all}.test.jsx-d0055d2df6a917c5:hover{background-color:var(--background-higher)}.test-row.jsx-d0055d2df6a917c5{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-justify-content:start;justify-content:start}"})]})};function ph(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ph(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ph(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var mh=function(e){var t=e.text;if(!t)return null;var r=t.split("\n").map((function(e,t){return[e,"".concat(t+1)]}));return""===r[r.length-1][0]&&r.pop(),(0,ee.BX)(ye.Ug,{children:[(0,ee.tZ)("code",{className:"jsx-6ac664c130469a42 gutter",children:(0,ee.tZ)("pre",{className:"jsx-6ac664c130469a42",children:r.map((function(e){var t=bh(e,2);t[0];return t[1]})).join("\n")})}),(0,ee.tZ)("code",{className:"jsx-6ac664c130469a42 text",children:(0,ee.tZ)("pre",{className:"jsx-6ac664c130469a42",children:t})}),(0,ee.tZ)(re(),{id:"6ac664c130469a42",children:".gutter.jsx-6ac664c130469a42,.text.jsx-6ac664c130469a42{color:var(--foreground-default)}.gutter.jsx-6ac664c130469a42{min-width:1.5em}.text.jsx-6ac664c130469a42{max-width:80%}"})]})},hh=r(37529),vh=r.n(hh);function gh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return gh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var xh=function(e){var t=e.expected,r=e.actual;if(!t||!r)return null;var n=r.split("\n"),a=t.split("\n"),i=a.length>n.length?a:n,o=i.map((function(e,t){return[e,"".concat(t+1)]})),l=i.map((function(e,t){var r=t<n.length?n[t]:"",i=t<a.length?a[t]:"";return(0,ee.BX)(ee.HY,{children:[vh()(r,i).map((function(e,t){var r;return-1===e[0]&&(r={backgroundColor:"var(--accent-negative-dimmer)",textDecoration:"line-through"}),1===e[0]&&(r={backgroundColor:"var(--accent-positive-dimmer)",textDecoration:"underline"}),(0,ee.tZ)("span",{style:r,children:e[1]},t)})),(0,ee.tZ)("br",{})]})}));return(0,ee.BX)(ye.Ug,{children:[(0,ee.tZ)("code",{className:"jsx-6ac664c130469a42 gutter",children:(0,ee.tZ)("pre",{className:"jsx-6ac664c130469a42",children:o.map((function(e){var t=yh(e,2);t[0];return t[1]})).join("\n")})}),(0,ee.tZ)("code",{className:"jsx-6ac664c130469a42 text",children:(0,ee.tZ)("pre",{className:"jsx-6ac664c130469a42",children:l})}),(0,ee.tZ)(re(),{id:"6ac664c130469a42",children:".gutter.jsx-6ac664c130469a42,.text.jsx-6ac664c130469a42{color:var(--foreground-default)}.gutter.jsx-6ac664c130469a42{min-width:1.5em}.text.jsx-6ac664c130469a42{max-width:80%}"})]})},wh=function(e){var t=e.test,r=e.actualOutput,n=e.isOpen,a=e.isResults,i=e.onRequestClose,o=e.didFail,l=e.error,c=t?eh(t.type):"",s=null===r||void 0===r?void 0:r.split("\n"),u=null===t||void 0===t?void 0:t.output.split("\n"),d=null===t||void 0===t?void 0:t.output;return o=null!==o&&void 0!==o?o:"Failed"===(null===t||void 0===t?void 0:t.status),(0,ee.BX)(It.Z,{onRequestClose:i,isOpen:n&&void 0!==t,children:[(0,ee.BX)("div",{className:"jsx-c7ed87540f6ec33d test-info",children:[(0,ee.BX)(ye.gC,{align:"center",spacing:1,children:[(0,ee.BX)(Ne.Z,{level:4,children:[a&&"Test results: ",null===t||void 0===t?void 0:t.name]}),(0,ee.BX)(ye.Ug,{spacing:1,children:[(0,ee.tZ)("div",{role:"tooltip","data-microtip-position":"top","aria-label":c,className:"jsx-c7ed87540f6ec33d test-type",children:(0,ee.tZ)(ge.Z,{align:"center",size:"small",children:null===t||void 0===t?void 0:t.type})}),a&&(null===t||void 0===t?void 0:t.status)&&(0,ee.tZ)("div",{className:"jsx-c7ed87540f6ec33d "+"test-status ".concat(null===t||void 0===t?void 0:t.status),children:(0,ee.tZ)(ge.Z,{align:"center",size:"small",children:null===t||void 0===t?void 0:t.status})})]})]}),(0,ee.tZ)(su.Z,{height:6}),(0,ee.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-row",children:(0,ee.BX)("div",{className:"jsx-c7ed87540f6ec33d test-io-section",children:[(0,ee.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-label",children:a?(0,ee.BX)(ye.Ug,{spacing:1,align:"center",children:[(0,ee.tZ)(ge.Z,{size:"medium",children:"Expected output"}),(0,ee.tZ)(ge.Z,{size:"xsmall",children:(0,ee.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Your program is expected to print this output.",className:"jsx-c7ed87540f6ec33d help",children:"?"})})]}):(0,ee.tZ)(ge.Z,{size:"medium",children:"Output"})}),(0,ee.tZ)(su.Z,{height:"var(--space-8)"}),(0,ee.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-box",children:(0,ee.tZ)(mh,{text:null===t||void 0===t?void 0:t.output})})]})}),(0,ee.tZ)(su.Z,{height:2}),(0,ee.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-row",children:(0,ee.BX)("div",{className:"jsx-c7ed87540f6ec33d test-io-section",children:[(0,ee.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-label",children:a?(0,ee.BX)(ye.Ug,{spacing:1,align:"center",children:[(0,ee.tZ)(ge.Z,{size:"medium",children:"Actual output"}),(0,ee.tZ)(ge.Z,{size:"xsmall",children:(0,ee.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Your program actually printed this output.",className:"jsx-c7ed87540f6ec33d help",children:"?"})})]}):(0,ee.tZ)(ge.Z,{size:"medium",children:"Input"})}),(0,ee.tZ)(su.Z,{height:"var(--space-8)"}),(0,ee.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-box",children:(0,ee.tZ)(mh,{text:a?r:null===t||void 0===t?void 0:t.input})})]})}),a&&o&&(0,ee.tZ)(ee.HY,{children:l?(0,ee.BX)(ee.HY,{children:[(0,ee.tZ)(su.Z,{height:2}),(0,ee.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-row",children:(0,ee.BX)("div",{className:"jsx-c7ed87540f6ec33d test-io-section",children:[(0,ee.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-label",children:(0,ee.tZ)(ge.Z,{size:"medium",children:"Error(s)"})}),(0,ee.tZ)(su.Z,{height:"var(--space-8)"}),(0,ee.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-box",children:(0,ee.tZ)(mh,{text:l.stderr||l.message})})]})})]}):(null===t||void 0===t?void 0:t.type)!==ke.Flv.Regex&&u&&s&&(0,ee.BX)(ee.HY,{children:[(0,ee.tZ)(su.Z,{height:2}),(0,ee.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-row",children:(0,ee.BX)("div",{className:"jsx-c7ed87540f6ec33d test-io-section",children:[(0,ee.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-label",children:(0,ee.BX)(ye.Ug,{spacing:1,align:"center",children:[(0,ee.tZ)(ge.Z,{size:"medium",children:"Difference"}),(0,ee.tZ)(ge.Z,{size:"xsmall",children:(0,ee.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Modify your output to match the expected output.",className:"jsx-c7ed87540f6ec33d help",children:"?"})})]})}),(0,ee.tZ)(su.Z,{height:"var(--space-8)"}),(0,ee.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-box",children:(0,ee.tZ)(xh,{expected:d,actual:r})})]})})]})})]}),(0,ee.tZ)(re(),{id:"c7ed87540f6ec33d",children:".test-info.jsx-c7ed87540f6ec33d{padding:var(--space-24);display:relative}.test-io-line-spacing.jsx-c7ed87540f6ec33d{width:var(--space-8);-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.test-io-row.jsx-c7ed87540f6ec33d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.test-io-line-number.jsx-c7ed87540f6ec33d{display:inline-block;min-width:1.5em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.test-io-line.jsx-c7ed87540f6ec33d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-justify-content:start;justify-content:start;font-family:var(--font-family-code)}.test-io-line-content.jsx-c7ed87540f6ec33d{display:inline-block}.test-io-label.jsx-c7ed87540f6ec33d{padding-bottom:var(--space-8);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.test-io-label.jsx-c7ed87540f6ec33d .text{color:var(--foreground-dimmer)}.test-io-section.jsx-c7ed87540f6ec33d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-justify-content:start;justify-content:start;width:100%}.test-io-box.jsx-c7ed87540f6ec33d{height:100%;border:1px solid var(--outline-dimmest);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow-x:auto}.test-io-box.jsx-c7ed87540f6ec33d .text{white-space:nowrap}.test-type.jsx-c7ed87540f6ec33d,.test-status.jsx-c7ed87540f6ec33d{background-color:var(--background-highest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8);display:inline-block;spacing:1;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.test-status.jsx-c7ed87540f6ec33d .text{color:var(--white)}.test-status.Passed.jsx-c7ed87540f6ec33d{background-color:var(--accent-positive-default)}.test-status.Failed.jsx-c7ed87540f6ec33d{background-color:var(--accent-negative-default)}.help.jsx-c7ed87540f6ec33d{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center;border:1px solid var(--background-higher);-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;width:var(--space-16);height:var(--space-16);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}"})]})},kh=r(923),jh=r(46829),Zh=r(27754);function Sh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Eh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Eh(e,t,r[t])}))}return e}function _h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Sh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ch,Ah=function(){var e,t,r,n,a,i,o,l,c=(0,Ie.Z)(),s=c.iotester,u=c.dotReplit,d=c.container,f=(0,qt.Z)(),p=f.showError,b=f.showConfirm,m=_h(ie.useState([]),2),h=m[0],v=m[1],g=_h(ie.useState(),2),y=g[0],x=g[1],w=_h(ie.useState(d.getConnectionState()),2),k=w[0],j=w[1],Z=_h(ie.useState(s.state),2),S=Z[0],E=Z[1],O=_h(ie.useState(),2),_=O[0],C=O[1],A=(0,jh.useApolloClient)();ie.useEffect((function(){return d.onConnectionStateChanged(j)}),[j,d]);var I=(0,we.Z)(),N=(0,ke.CHr)({variables:{replId:I}}),T="Repl"===(null===(e=N.data)||void 0===e||null===(t=e.repl)||void 0===t?void 0:t.__typename)?N.data.repl:null,P="Team"===(null===T||void 0===T||null===(r=T.owner)||void 0===r?void 0:r.__typename)&&T.owner.id||null,R=_h((0,ke.vkX)({onCompleted:function(e){e&&e.saveIOTestResults&&p(e.saveIOTestResults.message)}}),1)[0];ie.useEffect((function(){var e=[s.onStateChanged((function(e){E(e),P&&e===kh.Z.Idle&&v((function(e){var t;return R({variables:{replId:I,results:Object.values(e).map((function(e){var r;return Oh({},e,{output:(null===(r=e.error)||void 0===r?void 0:r.stderr)?(null!==(t=e.output)&&void 0!==t?t:"")+e.error:e.output})})),teamId:P}}).catch((function(t){st.Tb(t,(function(t){return t.setExtras({results:e,payload:_})}))})),e}))})),s.onError((function(e){p(e.message)})),s.onTestResult((function(e){v((function(t){var r=Oh({},t[e.testId],{testId:e.testId,status:"passed"===e.body?ke.kQ0.Passed:ke.kQ0.Failed});return"error"===e.body&&(r.error=e.error),Oh({},t,Eh({},e.testId,r))}))})),s.onInstructionResult((function(e){v((function(t){var r,n,a=Math.abs(e.instructionId),i="";switch(e.body){case"passed":var o;i+=null!==(o=e.passed.output)&&void 0!==o?o:"";break;case"failed":var l;i+=null!==(l=e.failed.output)&&void 0!==l?l:"";break;case"timeout":var c;i+=null!==(c=e.timeout.output)&&void 0!==c?c:"";break;case"error":i+=e.error.message}return Oh({},t,Eh({},a,Oh({},t[a],{testId:a,output:(null!==(n=null===(r=h[a])||void 0===r?void 0:r.output)&&void 0!==n?n:"")+i})))}))}))];return function(){return e.forEach((function(e){return e()}))}}),[h,p,E,s,I,P,_,R]),ie.useEffect((function(){var e=function(e){var t,r;t=e,(null!=(r=Error)&&"undefined"!==typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](t):t instanceof r)&&p(e.message),st.Tb(e)};return ah(u).then(x).catch(e),u.watch((function(){return ah(u).then(x).catch(e)}))}),[u,x,p]);var L=null===T||void 0===T?void 0:T.ioTests,D=_h((0,ke.Nej)({onError:function(e){return p(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.deleteTemplateTest)||void 0===t?void 0:t.__typename)?p(e.deleteTemplateTest.message):(b("Test deleted!"),N.refetch())}}),2),U=D[0],z=D[1],B=_h((0,ke.AAz)({onError:function(e){return p(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.updateTemplateTest)||void 0===t?void 0:t.__typename)?p(e.updateTemplateTest.message):"ReplTemplateTest"===e.updateTemplateTest.__typename&&(b("Test updated!"),A.writeFragment({fragment:ke.GgA,data:e.updateTemplateTest}))}}),2),M=B[0],F=B[1],X=_h((0,ke.pVf)({onError:function(e){return p(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.createTemplateTest)||void 0===t?void 0:t.__typename)?p(e.createTemplateTest.message):(b("Test created!"),N.refetch())}}),2),V=X[0],G=X[1],H=N.loading||z.called&&z.loading||F.called&&F.loading||G.called&&G.loading;ie.useEffect((function(){H||C(y&&L&&L.length>0?{runInfo:y,tests:L.map(rh)}:void 0)}),[L,y,C,H]);var W=_h(ie.useState(!1),2),K=W[0],q=W[1],Y=_h(ie.useState(!1),2),$=Y[0],Q=Y[1],J=_h(ie.useState(!1),2),te=J[0],ne=J[1],ae=_h(ie.useState(),2),oe=ae[0],le=ae[1],ce="undefined"!==typeof oe&&"Repl"===(null===(n=N.data)||void 0===n?void 0:n.repl.__typename)&&N.data.repl.ioTests[oe]||void 0,se="Repl"===(null===(a=N.data)||void 0===a?void 0:a.repl.__typename)&&N.data.repl.isProject;if(N.error)return(0,ee.BX)("div",{className:"jsx-fb1466c53ace89ca wrapper",children:[(0,ee.tZ)(ge.Z,{align:"center",children:"Unable to fetch tests"}),(0,ee.tZ)(re(),{id:"fb1466c53ace89ca",children:".wrapper.jsx-fb1466c53ace89ca{padding:var(--deprecated-spacing-2);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-justify-content:center;justify-content:center}"})]});var ue=function(e){var t;if(void 0!==(null===(t=h[e])||void 0===t?void 0:t.status))return h[e].status===ke.kQ0.Passed?"Passed":"Failed"};return(0,ee.BX)("div",{className:"jsx-69bed4444090144f tests-panel",children:[(0,ee.tZ)("div",{className:"jsx-69bed4444090144f tests-header",children:(0,ee.tZ)(Ne.Z,{level:4,children:"Input/Output Tests"})}),N.loading?(0,ee.tZ)("div",{className:"jsx-69bed4444090144f spinner",children:(0,ee.tZ)(Nt.Z,{})}):(0,ee.BX)("div",{className:"jsx-69bed4444090144f tests",children:[(0,ee.BX)("div",{className:"jsx-69bed4444090144f button-bar",children:[se&&(0,ee.tZ)(ve.Z,{color:"green",Icon:$t.Z,className:"create-test-button",disabled:H||S!==kh.Z.Idle,onClick:function(){le(void 0),q(!0)},children:"Create test"}),!se&&L&&0===L.length?(0,ee.tZ)(ge.Z,{children:"This project has no tests "}):(0,ee.tZ)(ve.Z,{color:"positive",Icon:Cu.Z,onClick:function(){var e;if(!_||"Repl"!==(null===T||void 0===T?void 0:T.__typename)||"Team"!==(null===(e=T.owner)||void 0===e?void 0:e.__typename)||s.state!==kh.Z.Idle){var t=new Error("no tests or run info");throw st.Tb(t,(function(e){return e.setExtra("payload",_)})),t}v({}),(0,ft.j)(ft.U3.AUTOGRADER_STARTED),s.run(_).catch((function(e){st.Tb(e,(function(e){return e.setExtra("payload",_)})),p(e.message)}))},disabled:H||S!==kh.Z.Idle||!_||k!==Zh.e.CONNECTED,children:"Run tests"})]}),null===L||void 0===L?void 0:L.map((function(e,t){return(0,ee.tZ)(fh,{test:e,onEdit:function(){le(t),q(!0)},onDelete:function(){U({variables:{testId:e.id}})},onView:function(){le(t),Q(!0),ne(!1)},onShowFailed:function(){le(t),Q(!0),ne(!0)},isRunning:S!==kh.Z.Idle&&void 0!==h[e.id]&&void 0===h[e.id].status,isTeacherView:se,status:ue(e.id),disableButtons:H||S!==kh.Z.Idle},e.id)})),(0,ee.tZ)(dh,{test:ce,isOpen:K,readOnly:!se,onRequestClose:function(){q(!1),le(void 0)},onCancel:function(){q(!1),le(void 0)},onSubmit:function(e){var t,r,n,a;void 0!==e.testId?(M({variables:{input:e}}),le(void 0)):"Repl"===(null===(t=N.data)||void 0===t||null===(r=t.repl)||void 0===r?void 0:r.__typename)&&(null===(n=N.data)||void 0===n||null===(a=n.repl)||void 0===a?void 0:a.template)&&V({variables:{input:Oh({},e,{templateId:N.data.repl.template.id})}}),q(!1)}}),(0,ee.tZ)(wh,{test:ce,isOpen:$,actualOutput:"undefined"!==typeof ce?null===(i=h[ce.id])||void 0===i?void 0:i.output:void 0,error:ce&&(null===(o=h[ce.id])||void 0===o?void 0:o.error),didFail:ce&&(null===(l=h[ce.id])||void 0===l?void 0:l.status)===ke.kQ0.Failed,isResults:te,onRequestClose:function(){Q(!1),le(void 0)}})]}),(0,ee.tZ)(re(),{id:"69bed4444090144f",children:".flex-grow.jsx-69bed4444090144f{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.spacer-1.jsx-69bed4444090144f{padding:var(--space-4)}.tests-header.jsx-69bed4444090144f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;position:relative;padding:var(--space-4)0 var(--space-8)0;margin-bottom:var(--space-8);color:var(--foreground-default);width:100%;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.button-bar.jsx-69bed4444090144f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-bottom:var(--space-8)}.button-bar.jsx-69bed4444090144f>button{margin-right:var(--space-8);margin-bottom:var(--space-8)}.spinner.jsx-69bed4444090144f{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);-o-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.tests-panel.jsx-69bed4444090144f{min-width:200px;background-color:var(--background-default);color:var(--foreground-default);overflow:hidden auto}.section.jsx-69bed4444090144f{height:-webkit-calc(100% - 50px);height:-moz-calc(100% - 50px);height:calc(100% - 50px)}"})]})};function Ih(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Nh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ih(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ih(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(e){e[e.None=0]="None",e[e.Choose=1]="Choose",e[e.Unit=2]="Unit",e[e.IO=3]="IO"}(Ch||(Ch={}));var Th=function(e){var t=e.wid,r=e.pud,n=Nh(ie.useState(null),2),a=n[0],i=n[1],o=ie.useRef(Ch.None),l=(0,we.Z)(),c=Lm(),s=c.language,u=c.isLoading,d=(0,ke.CHr)({variables:{replId:l}}),f=d.loading;return ie.useEffect((function(){var e,t,r=null===(e=d.data)||void 0===e?void 0:e.repl;if("Repl"===(null===r||void 0===r?void 0:r.__typename)){var n=r.unitTests,a=r.ioTests,l=Ch.Choose;l=a.length>0?Ch.IO:(null===n||void 0===n?void 0:n.tests)&&(null===(t=n.tests)||void 0===t?void 0:t.length)>0||(null===n||void 0===n?void 0:n.meta)?Ch.Unit:r.currentUserPermissions.writeTests?o.current!==Ch.None?o.current:Ch.Choose:Ch.None,i(l)}}),[d.data,t,r]),f||u?(0,ee.BX)("div",{className:"jsx-1652fb32f8a812d3",children:[(0,ee.tZ)(Nt.Z,{}),(0,ee.tZ)(re(),{id:"1652fb32f8a812d3",children:"div.jsx-1652fb32f8a812d3{height:100%;width:100%;background-color:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center}"})]}):(0,ee.BX)("div",{className:"jsx-ba2c7540ad19d138 testing-controller",children:[a===Ch.None&&(0,ee.tZ)("div",{className:"jsx-ba2c7540ad19d138 empty",children:(0,ee.tZ)(ge.Z,{children:"No tests found"})}),a===Ch.Choose&&(0,ee.BX)(ye.gC,{align:"center",spacing:2,children:[(0,ee.tZ)(Ne.Z,{align:"center",level:3,children:"Choose a testing method"}),(0,ee.BX)("div",{onClick:function(){i(Ch.Unit),o.current=Ch.Unit},className:"jsx-ba2c7540ad19d138 "+(At()("panel",{"is-disabled":!s})||""),children:[(0,ee.tZ)(Ne.Z,{level:4,children:"Unit tests"}),(0,ee.tZ)(ge.Z,{align:"center",children:s?"A language specific framework that tests individual functions":"Unit tests are not currently supported for this language"})]}),(0,ee.tZ)("div",{onClick:function(){i(Ch.IO),o.current=Ch.IO},className:"jsx-ba2c7540ad19d138 panel",children:(0,ee.BX)(ye.gC,{spacing:1,align:"center",children:[(0,ee.tZ)(Ne.Z,{level:4,children:"Input output tests"}),(0,ee.tZ)(ge.Z,{align:"center",children:"Test your program via standard in, and assert based on the result of standard out"})]})})]}),a===Ch.IO&&(0,ee.tZ)(Ah,{}),a===Ch.Unit&&(0,ee.tZ)(zm,{onBack:function(){return i(Ch.Choose)}}),(0,ee.tZ)(re(),{id:"ba2c7540ad19d138",children:".empty.jsx-ba2c7540ad19d138{padding:var(--space-16);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);-webkit-box-shadow:var(--shadow-2);-moz-box-shadow:var(--shadow-2);box-shadow:var(--shadow-2);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center}.testing-controller.jsx-ba2c7540ad19d138{overflow-y:auto;padding:var(--space-8);height:100%;width:100%;background-color:var(--background-default);-webkit-box-shadow:var(--shadow-1);-moz-box-shadow:var(--shadow-1);box-shadow:var(--shadow-1)}.panel.jsx-ba2c7540ad19d138{width:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);border:1px solid var(--background-higher);max-width:200px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;padding:var(--space-8)}.panel.jsx-ba2c7540ad19d138:hover{background-color:var(--background-root)}.panel.is-disabled.jsx-ba2c7540ad19d138{opacity:.5;pointer-events:none}"})]})},Ph=function(){return(0,ee.BX)("div",{className:"jsx-625567ff9254a654 unit-tests",children:[(0,ee.tZ)(zm,{}),(0,ee.tZ)(re(),{id:"625567ff9254a654",children:".unit-tests.jsx-625567ff9254a654{background-color:var(--background-default);width:100%;height:100%;overflow-y:auto;padding:var(--space-8)}"})]})},Rh=r(94485),Lh=r(16342),Dh=r(34860);function Uh(e){var t=e.direction,r=e.url,n=(0,ee.BX)("span",{className:re().dynamic([["78db7dc25a35a576",["left"===t?"rotate(90deg)":"rotate(-90deg)"]]])+" "+(At()("chevron",{hoverable:void 0!==r})||""),children:[(0,ee.tZ)(jf.Z,{size:20,color:r?"var(--foreground-dimmest)":"var(--background-root)"}),(0,ee.tZ)(re(),{id:"78db7dc25a35a576",dynamic:["left"===t?"rotate(90deg)":"rotate(-90deg)"],children:".chevron.__jsx-style-dynamic-selector{display:inline-block;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);-webkit-transition:.2s all;-moz-transition:.2s all;-o-transition:.2s all;transition:.2s all}.chevron.__jsx-style-dynamic-selector svg{width:24px;height:24px;-webkit-transform:".concat("left"===t?"rotate(90deg)":"rotate(-90deg)",";-moz-transform:").concat("left"===t?"rotate(90deg)":"rotate(-90deg)",";-ms-transform:").concat("left"===t?"rotate(90deg)":"rotate(-90deg)",";-o-transform:").concat("left"===t?"rotate(90deg)":"rotate(-90deg)",";transform:").concat("left"===t?"rotate(90deg)":"rotate(-90deg)","}.hoverable.__jsx-style-dynamic-selector{cursor:pointer}.hoverable.chevron.__jsx-style-dynamic-selector svg:hover{stroke:var(--accent-primary-default)}.hoverable.__jsx-style-dynamic-selector:hover{background:var(--accent-primary-default)}")})]});return r?(0,ee.tZ)(jt.default,{href:r,children:(0,ee.tZ)("a",{children:n})}):n}var zh,Bh=function(){return(0,ee.BX)("span",{title:"late",className:"jsx-c2ef7e04fe810e06",children:["late",(0,ee.tZ)(re(),{id:"c2ef7e04fe810e06",children:"span.jsx-c2ef7e04fe810e06{display:inline-block;color:var(--accent-negative-default);border:1px solid var(--accent-negative-default);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:1px var(--space-4);font-size:var(--font-size-small)}"})]})};function Mh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Fh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Fh(e,t,r[t])}))}return e}function Vh(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Gh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||Wh(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hh(e){return function(e){if(Array.isArray(e))return Mh(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Wh(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wh(e,t){if(e){if("string"===typeof e)return Mh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Mh(e,t):void 0}}function Kh(e){var t=zh.NotStarted,r=zh.Started,n=zh.Submitted,a=zh.Reviewed;switch(e){case t:return"Not Started";case r:return"Not submitted yet";case n:return"Submitted";case a:return"Reviewed";default:return""}}function qh(e){return e?e.timeSubmitted||e.timeLastReviewed?e.timeSubmitted&&!e.timeLastReviewed?zh.Submitted:!e.timeSubmitted&&e.timeLastReviewed?zh.Reviewed:e.timeSubmitted&&e.timeLastReviewed?new Date(e.timeSubmitted)>new Date(e.timeLastReviewed)?zh.Submitted:zh.Reviewed:void 0:zh.Started:zh.NotStarted}!function(e){e.NotStarted="not-started",e.Started="started",e.Submitted="submitted",e.Reviewed="reviewed"}(zh||(zh={}));var Yh=function(e,t){if(e)return t?"".concat(e,"#").concat(t):e};function $h(e){var t=e.result,r=e.selected,n=e.current,a=e.isLate,i=Vh(e,["result","selected","current","isLate"]),o=(0,Er.Z)(),l=n?"":Yh(t.url,o),c=(0,ee.BX)(ye.Ug,{spacing:1,align:"center",children:[(0,ee.tZ)("div",{"data-microtip-position":"right","aria-label":Kh(t.status),role:"tooltip",className:"jsx-5d2ba38a58506d36 indicator-container",children:(0,ee.tZ)("div",{className:"jsx-5d2ba38a58506d36 "+(At()("indicator",t.status)||"")})}),(0,ee.tZ)(Kt.Z,{url:t.image}),(0,ee.tZ)("div",{className:"jsx-5d2ba38a58506d36 name",children:t.name}),a&&(0,ee.tZ)(Bh,{}),(0,ee.tZ)(re(),{id:"5d2ba38a58506d36",children:".indicator-container.jsx-5d2ba38a58506d36{width:10px;height:10px;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;padding:var(--space-4)}.name.jsx-5d2ba38a58506d36{color:var(--foreground-dimmer);font-size:var(--font-size-default);max-width:230px;-o-text-overflow:ellipsis;text-overflow:ellipsis;overflow:hidden}.indicator.jsx-5d2ba38a58506d36{width:8px;height:8px;-webkit-border-radius:16px;-moz-border-radius:16px;border-radius:16px}.indicator.submitted.jsx-5d2ba38a58506d36{background:var(--accent-yellow-dimmer)}.indicator.reviewed.jsx-5d2ba38a58506d36{background:var(--accent-positive-default)}.indicator.started.jsx-5d2ba38a58506d36{border:2px solid var(--foreground-dimmest)}"})]});return(0,ee.BX)("div",Xh({},i,{className:"jsx-39df8ba33633f058 "+(At()("result",t.status,{selected:r,current:n})||""),children:[l?(0,ee.BX)(ee.HY,{children:[(0,ee.tZ)(jt.default,{href:l,children:(0,ee.tZ)("a",{className:"jsx-39df8ba33633f058 result-link",children:c})},t.submissionId),(0,ee.tZ)("a",{href:l,target:"_blank",role:"tooltip","data-microtip-position":"left","aria-label":"Open in a new tab",className:"jsx-39df8ba33633f058 result-external-link",children:(0,ee.tZ)(Dh.Z,{color:"var(--foreground-default)"})})]}):(0,ee.tZ)("div",{className:"jsx-39df8ba33633f058 result-link",children:c}),(0,ee.tZ)(re(),{id:"39df8ba33633f058",children:".result.jsx-39df8ba33633f058{cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;background-color:var(--background-default)}.result.not-started.jsx-39df8ba33633f058{opacity:.4}.result.current.jsx-39df8ba33633f058{background-color:var(--background-root)}.selected.jsx-39df8ba33633f058{background-color:var(--background-root);opacity:1!important}.result-link.jsx-39df8ba33633f058{text-decoration:none;padding:var(--space-8)}.result-external-link.jsx-39df8ba33633f058{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:var(--space-8);opacity:0;margin-left:auto}.result.jsx-39df8ba33633f058:hover .result-external-link.jsx-39df8ba33633f058{opacity:1}.result-external-link.jsx-39df8ba33633f058 svg{-webkit-transition:.3s stroke;-moz-transition:.3s stroke;-o-transition:.3s stroke;transition:.3s stroke}.result-external-link.jsx-39df8ba33633f058:hover svg{stroke:var(--accent-primary-default)}"})]}))}var Qh=function(e){var t,r,n,a=e.team,i=e.submission,o=e.submissionList,l=e.template,c=(0,ue.useRouter)(),s=(0,Er.Z)(),u=Gh(ie.useState([]),2),d=u[0],f=u[1],p=Gh(ie.useState(""),2),b=p[0],m=p[1],h=(0,tr.Kb)({items:d,defaultHighlightedIndex:0,onSelectedItemChange:function(e){var t=e.selectedItem;d.length&&t&&-1!==e.highlightedIndex&&t.url&&c.push(t.url)}}),v=h.isOpen,g=h.getInputProps,y=h.getMenuProps,x=h.getItemProps,w=h.openMenu,k=h.highlightedIndex,j=ie.useRef(null);ie.useEffect((function(){v&&j.current&&j.current.focus()}),[v]);var Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(i.isGroupSubmission){var t=o;0!==e.length&&(t=t.filter((function(t){var r;return null===(r=t.submissionGroup)||void 0===r?void 0:r.users.some((function(t){var r;return null===(r=(null===t||void 0===t?void 0:t.fullName)||(null===t||void 0===t?void 0:t.username))||void 0===r?void 0:r.toLocaleLowerCase().includes(e.toLocaleLowerCase())}))})));var r=t.map((function(e){var t,r=e.submissionGroup.users.map((function(e){return e.fullName||e.username})).join(", ");return{image:e.submissionGroup.users[0].image,name:r,url:null===(t=e.repl)||void 0===t?void 0:t.url,status:qh(e),submissionId:e.id,timeSubmitted:null===e||void 0===e?void 0:e.timeSubmitted}}));f(Hh(r))}else{var n=a.students;n=0===e.length?n.filter((function(e){return e.user})).sort((function(e,t){return(e.nickname||e.user.fullName||e.user.username).localeCompare(t.nickname||t.user.fullName||t.user.username)})):n.filter((function(t){var r,n,a;return null===(a=t.nickname||(null===(r=t.user)||void 0===r?void 0:r.fullName)||(null===(n=t.user)||void 0===n?void 0:n.username))||void 0===a?void 0:a.toLocaleLowerCase().includes(e.toLocaleLowerCase())}));var l=n.map((function(e){var t,r=o.find((function(t){var r;return(null===(r=t.author)||void 0===r?void 0:r.id)===e.user.id}));return{image:e.user.image,name:e.nickname||e.user.fullName||e.user.username,url:null===r||void 0===r||null===(t=r.repl)||void 0===t?void 0:t.url,status:qh(r),submissionId:null===r||void 0===r?void 0:r.id,timeSubmitted:null===r||void 0===r?void 0:r.timeSubmitted}}));f(Hh(l))}},S=o.findIndex((function(e){return e.id===i.id})),E=o[S-1],O=o[S+1],_=o.filter((function(e){return e.timeLastReviewed})).length,C=function(e){var t=a.students.find((function(t){var r;return(null===(r=t.user)||void 0===r?void 0:r.id)===(null===e||void 0===e?void 0:e.id)}));return(null===t||void 0===t?void 0:t.nickname)||(null===e||void 0===e?void 0:e.fullName)||"@".concat(null===e||void 0===e?void 0:e.username)};return(0,ee.BX)("div",Xh({},y(),{className:"jsx-e10a8ca7bd05f64a submission-search",children:[v&&(0,ee.BX)("div",{className:"jsx-e10a8ca7bd05f64a dropdown",children:[(0,ee.BX)("div",{className:"jsx-e10a8ca7bd05f64a search-box-container",children:[(0,ee.tZ)("div",{className:"jsx-e10a8ca7bd05f64a search-icon",children:(0,ee.tZ)(Wr.Z,{})}),(0,ee.tZ)("input",Xh({},g({value:b,placeholder:"Navigate",onKeyDown:function(e){"Escape"===e.key&&f([])},onChange:function(e){var t=e.target.value;Z(t),m(t)},ref:j}),{className:"jsx-e10a8ca7bd05f64a search-box"}))]}),(0,ee.tZ)("div",{className:"jsx-e10a8ca7bd05f64a",children:d.map((function(e,t){return(0,ee.tZ)($h,Xh({result:e,selected:k===t,current:e.submissionId===i.id},x({index:t,item:e,onClick:function(e){e.nativeEvent.preventDownshiftDefault=!0}}),{isLate:l.dueDate&&e.timeSubmitted&&l.dueDate<e.timeSubmitted}))}))})]}),(0,ee.BX)("div",{className:"jsx-e10a8ca7bd05f64a navigation-element",children:[(0,ee.BX)("div",{onClick:function(){w(),Z()},className:"jsx-e10a8ca7bd05f64a pseudo-search-input",children:[(0,ee.tZ)("div",{className:"jsx-e10a8ca7bd05f64a search-icon",children:(0,ee.tZ)(Wr.Z,{})}),(0,ee.tZ)("div",{className:"jsx-e10a8ca7bd05f64a",children:"Navigate"})]}),(0,ee.BX)("div",{className:"jsx-e10a8ca7bd05f64a arrow-navigation",children:[(0,ee.tZ)(Uh,{direction:"left",url:Yh(null===E||void 0===E||null===(t=E.repl)||void 0===t?void 0:t.url,s)}),(0,ee.BX)("div",{className:"jsx-e10a8ca7bd05f64a",children:[_,"/",o.length]}),(0,ee.tZ)(Uh,{direction:"right",url:Yh(null===O||void 0===O||null===(r=O.repl)||void 0===r?void 0:r.url,s)})]})]}),(0,ee.tZ)("div",{className:"jsx-e10a8ca7bd05f64a submission-info",children:i.isGroupSubmission?i.submissionGroup.users.map((function(e){return(0,ee.tZ)("div",{className:"jsx-e10a8ca7bd05f64a submitter-row",children:(0,ee.BX)(ye.Ug,{spacing:1,align:"center",children:[(0,ee.tZ)(Kt.Z,{url:null===e||void 0===e?void 0:e.image}),(0,ee.tZ)("span",{className:"jsx-e10a8ca7bd05f64a submission-name",children:C(e)})]})},null===e||void 0===e?void 0:e.id)})):(0,ee.tZ)("div",{className:"jsx-e10a8ca7bd05f64a submission-identity",children:(0,ee.tZ)("div",{className:"jsx-e10a8ca7bd05f64a submitter-row",children:(0,ee.BX)(ye.Ug,{spacing:1,align:"center",children:[(0,ee.tZ)(Kt.Z,{url:null===(n=i.author)||void 0===n?void 0:n.image}),(0,ee.tZ)("span",{className:"jsx-e10a8ca7bd05f64a submission-name",children:C(i.author)})]})})})}),(0,ee.tZ)(re(),{id:"e10a8ca7bd05f64a",children:".submission-search.jsx-e10a8ca7bd05f64a{width:100%;position:relative;border:1px solid;-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);border-color:var(--foreground-dimmest)}.navigation-element.jsx-e10a8ca7bd05f64a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.pseudo-search-input.jsx-e10a8ca7bd05f64a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;color:var(--foreground-dimmer);font-size:var(--font-size-default)}.arrow-navigation.jsx-e10a8ca7bd05f64a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--foreground-dimmest);font-size:var(--font-size-small);-webkit-align-items:baseline;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;padding:0 var(--space-8)}.submitter-row.jsx-e10a8ca7bd05f64a{text-decoration:none;color:var(--foreground-default)}.submission-info.jsx-e10a8ca7bd05f64a{display:grid;grid-gap:var(--space-8);padding:var(--space-16)}.submission-name.jsx-e10a8ca7bd05f64a{color:var(--foreground-dimmer);font-size:var(--font-size-default)}.search-box.jsx-e10a8ca7bd05f64a{border:none;outline:none;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;font-size:var(--font-size-default);background-color:inherit;color:var(--foreground-default)}.search-icon.jsx-e10a8ca7bd05f64a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:var(--space-16);background-color:inherit}.search-box-container.jsx-e10a8ca7bd05f64a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;background-color:var(--background-default)}.dropdown.jsx-e10a8ca7bd05f64a{position:absolute;background:var(--background-default);z-index:10;width:350px;max-height:426px;overflow-y:scroll;overflow-y:overlay;white-space:nowrap;border:1px solid;-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);border-color:var(--foreground-dimmest);margin:-1px}"})]}))};function Jh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ev(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ev(e,t,r[t])}))}return e}function rv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Jh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var nv=function(e){return{short:(0,tf.Z)(e,"do MMM"),long:(0,tf.Z)(e,"do MMM, hh:mm a")}};function av(e){var t=e.submission,r=e.dueDate;return(0,ee.BX)("div",{className:"jsx-5ae79eda8485444a submission-info",children:[t.timeSubmitted?(0,ee.BX)(ee.HY,{children:[(0,ee.tZ)("div",{className:"jsx-5ae79eda8485444a submitted-header",children:(0,ee.BX)(ye.Ug,{spacing:1,align:"center",children:[(0,ee.tZ)(Ye.Z,{}),(0,ee.tZ)("span",{className:"jsx-5ae79eda8485444a submitted-text",children:"Submitted"}),r&&r<t.timeSubmitted&&(0,ee.tZ)(Bh,{})]})}),(0,ee.tZ)("div",{className:"jsx-5ae79eda8485444a submitted-time",children:(0,ee.BX)(ye.Ug,{spacing:1,align:"center",children:[(0,ee.tZ)(Rh.Z,{}),(0,ee.tZ)("span",{className:"jsx-5ae79eda8485444a",children:nv(new Date(t.timeSubmitted)).long})]})})]}):(0,ee.BX)(ee.HY,{children:[(0,ee.tZ)("div",{className:"jsx-5ae79eda8485444a submitted-header",children:(0,ee.BX)(ye.Ug,{spacing:1,align:"center",children:[(0,ee.tZ)(Yt.Z,{}),(0,ee.tZ)("span",{className:"jsx-5ae79eda8485444a submitted-text",children:"Not submitted"})]})}),(0,ee.tZ)("div",{className:"jsx-5ae79eda8485444a submitted-time",children:(0,ee.BX)(ye.Ug,{spacing:1,align:"center",children:[(0,ee.tZ)(Tu.Z,{}),(0,ee.BX)("span",{className:"jsx-5ae79eda8485444a",children:["Forked"," ",nv(new Date(t.repl.timeCreated)).short]})]})})]}),(0,ee.tZ)(re(),{id:"5ae79eda8485444a",children:".submission-info.jsx-5ae79eda8485444a{padding:var(--space-8);background-color:var(--background-root);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8)}.submitted-header.jsx-5ae79eda8485444a{color:var(--foreground-default);font-weight:var(--font-weight-medium);white-space:nowrap}.submitted-header.jsx-5ae79eda8485444a svg{width:2em;height:2em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.submitted-time.jsx-5ae79eda8485444a{color:var(--foreground-dimmer);padding:var(--space-8)var(--space-16);white-space:nowrap;font-size:var(--font-size-default)}.submitted-time.jsx-5ae79eda8485444a svg{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}"})]})}function iv(e){var t=e.repl,r=e.submission,n=e.onFeedbackCTA,a=void 0===n?function(){}:n,i=(0,Cr.H)(),o=(0,qt.Z)().showError,l=rv((0,ke.SyV)({onError:function(e){return o(e.message)},onCompleted:function(e){"UserError"===e.reviewRepl.__typename&&o(e.reviewRepl.message)}}),2),c=l[0],s=l[1].loading,u=rv((0,ke.F_9)(),1)[0],d=Boolean(r.timeLastReviewed);return(0,ee.BX)(pn.Z,{css:[Ze.l0.p(8),Ze.l0.borderRadius(8)],children:[(0,ee.BX)("div",{className:"jsx-badd306accf589e0 feedback-header",children:[(0,ee.tZ)(Sd.Z,{}),(0,ee.tZ)("span",{className:"jsx-badd306accf589e0",children:"Feedback"})]}),(0,ee.BX)("div",{className:"jsx-badd306accf589e0 mark-reviewed",children:[(0,ee.tZ)(Nr.Z,{id:i("reviewed-status"),disabled:s,checked:d,onChange:function(){return e=!d,void c({variables:{replId:t.id,status:e},optimisticResponse:{reviewRepl:tv({},t,{submission:tv({},r,{timeLastReviewed:e?(new Date).toJSON():null})})}});var e}}),(0,ee.tZ)("label",{htmlFor:i("reviewed-status"),className:"jsx-badd306accf589e0",children:d?"Reviewed":"Mark as reviewed"})]}),(0,ee.BX)("div",{className:"jsx-badd306accf589e0 feedback-info",children:[(0,ee.tZ)(sr.Z,{}),(0,ee.tZ)("div",{onClick:a,className:"jsx-badd306accf589e0",children:"Code feedback"})]}),r.timeSubmitted&&(0,ee.tZ)("div",{className:"jsx-badd306accf589e0 unsubmit",children:(0,ee.tZ)(ve.Z,{onClick:function(){u({variables:{replId:t.id},optimisticResponse:{unsubmitRepl:tv({},t,{submission:tv({},r,{timeLastReviewed:null})})}})},fullWidth:!0,children:"Unsubmit"})}),(0,ee.tZ)(re(),{id:"badd306accf589e0",children:".feedback-header.jsx-badd306accf589e0{display:grid;grid-auto-flow:column;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:var(--space-8);color:var(--foreground-default);font-weight:var(--font-weight-medium);white-space:nowrap}.feedback-header.jsx-badd306accf589e0 svg{width:1.4em;height:1.4em;padding:.3em;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.mark-reviewed.jsx-badd306accf589e0,.feedback-info.jsx-badd306accf589e0,.unsubmit.jsx-badd306accf589e0{display:grid;grid-auto-flow:column;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:var(--space-8);padding:var(--space-8)var(--space-16);font-size:var(--font-size-default);cursor:pointer;color:var(--foreground-dimmer)}.feedback-info.jsx-badd306accf589e0 svg{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}"})]})}function ov(e){var t=e.replUrl;return(0,ee.tZ)(jt.default,{href:"".concat(t,"/history"),children:(0,ee.BX)("a",{target:"_blank",className:"jsx-d3efcaed296b8808",children:[(0,ee.tZ)(ve.Z,{Icon:Qn.HistoryIcon,fullWidth:!1,className:"history-button",children:"See Repl History"}),(0,ee.tZ)(re(),{id:"d3efcaed296b8808",children:"a.jsx-d3efcaed296b8808{text-decoration:none}.history-button svg{width:1em}"})]})})}function lv(e){var t,r,n,a=e.data,i=rv(ie.useState(!1),2),o=i[0],l=i[1];if(!a||"Repl"!==a.repl.__typename||"Team"!==(null===(t=a.repl.owner)||void 0===t?void 0:t.__typename)||"ReplSubmission"!==(null===(r=a.repl.submission)||void 0===r?void 0:r.__typename)||"ReplTemplate"!==(null===(n=a.repl.template)||void 0===n?void 0:n.__typename))return null;var c=a.repl.submission,s=a.repl.template.submissions;return(0,ee.BX)("div",{className:"jsx-a8b6b0d83e1c54ba education-pane-container",children:[(0,ee.BX)("div",{className:"jsx-a8b6b0d83e1c54ba contents",children:[(0,ee.tZ)("div",{className:"jsx-a8b6b0d83e1c54ba template-selector-container",children:(0,ee.tZ)(Qh,{team:a.repl.owner,template:a.repl.template,submission:c,submissionList:s})}),(0,ee.tZ)(av,{submission:c,dueDate:a.repl.template.dueDate}),(0,ee.tZ)(iv,{repl:a.repl,submission:c,onFeedbackCTA:function(){return l(!0)}}),(0,ee.tZ)("div",{className:"jsx-a8b6b0d83e1c54ba buffer"})]}),(0,ee.BX)("div",{className:"jsx-a8b6b0d83e1c54ba bottom-dock",children:["Repl"===a.repl.__typename&&(0,ee.tZ)(ov,{replUrl:a.repl.url}),(0,ee.tZ)("div",{className:"jsx-a8b6b0d83e1c54ba",children:(0,ee.tZ)(jt.default,{href:"/team/".concat(a.repl.owner.username,"/templates/").concat(a.repl.template.repl.slug),children:(0,ee.tZ)(ve.Z,{Icon:Lh.Z,children:"Return to submissions"})})})]}),(0,ee.tZ)(Sr,{isOpen:o,onRequestClose:function(){return l(!1)}}),(0,ee.tZ)(re(),{id:"a8b6b0d83e1c54ba",children:".education-pane-container.jsx-a8b6b0d83e1c54ba{padding:var(--space-8);max-width:400px;width:inherit;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow:hidden}.contents.jsx-a8b6b0d83e1c54ba{display:grid;grid-gap:var(--space-16)}.bottom-dock.jsx-a8b6b0d83e1c54ba{display:grid;grid-gap:var(--space-8);margin-top:auto}.template-selector-container.jsx-a8b6b0d83e1c54ba{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-justify-content:center;justify-content:center}"})]})}var cv,sv=r(77847),uv=function(e){var t=e.fileName,r=e.docRef,n=e.initialContents,a=(0,Hb.Z)({filePath:t,fontSize:14,indentSize:4,indentIsSpaces:!0}),i=a.view,o=a.ref;return ie.useEffect((function(){if(i){var e=Wb.tk.updateListener.of((function(e){r.current=e.state.doc}));i.dispatch({effects:Kb.Py.appendConfig.of(e)}),i.focus()}}),[i,r]),ie.useEffect((function(){i&&(i.state.doc.length||i.dispatch({changes:{from:0,insert:n}}))}),[i,n]),(0,ee.BX)("div",{className:"jsx-d59ba8968f57599c editable-area",children:[(0,ee.tZ)("div",{className:"jsx-d59ba8968f57599c editor-wrapper",children:(0,ee.tZ)("div",{className:"jsx-d59ba8968f57599c editor",children:(0,ee.tZ)("div",{ref:o,className:"jsx-d59ba8968f57599c"})})}),(0,ee.tZ)(re(),{id:"d59ba8968f57599c",children:".editable-area.jsx-d59ba8968f57599c{width:100%;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;border:1px solid var(--background-higher);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8)0}.editor-wrapper.jsx-d59ba8968f57599c{height:450px;padding-bottom:var(--space-8);-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;position:relative}.editor.jsx-d59ba8968f57599c{overflow:auto;position:absolute;width:100%;height:100%}.loader.jsx-d59ba8968f57599c{height:100%;width:100%;z-index:5}"})]})},dv=function(e){var t=e.title,r=e.fileName,n=e.initialContents,a=e.isOpen,i=e.onSave,o=e.onCancel,l=ie.useRef(null);return(0,ee.BX)(It.Z,{width:"large",isOpen:a,onRequestClose:function(){},preventClose:!0,children:[(0,ee.tZ)("div",{className:"jsx-c68269737c22d0ec editor-modal",children:(0,ee.BX)(ye.gC,{align:"stretch",spacing:2,children:[(0,ee.BX)(Ne.Z,{level:3,children:["Edit ",t.toLowerCase()]}),(0,ee.tZ)(uv,{docRef:l,fileName:r,initialContents:n}),(0,ee.tZ)(ye.Ug,{justify:"end",align:"end",children:(0,ee.BX)(ye.Ug,{justify:"end",align:"end",spacing:1,children:[(0,ee.tZ)(ve.Z,{onClick:function(){return o()},children:"Cancel"}),(0,ee.tZ)(ve.Z,{color:"primary",onClick:function(){var e;return l.current&&i(null===(e=l.current)||void 0===e?void 0:e.toString())},children:"Save"})]})})]})}),(0,ee.tZ)(re(),{id:"c68269737c22d0ec",children:".editor-modal.jsx-c68269737c22d0ec{padding:var(--space-16)}"})]})};function fv(e){var t="For example, here is a code block in ".concat(e);switch(e){case"python3":return"".concat(t,'\n```python\ndef hello_world():\n  print("hello world!")\n```\n');case"java10":return"".concat(t,'\n```java\npublic class Main {\n  public static void main(String[] args) {\n    System.out.println("hello world");\n  }\n}\n```\n');case"html":return"".concat(t,"\n```python\n<html>\n<body>\n  <h1>hello world</h1>\n</body>\n</html>\n``")}return""}!function(e){e.LessonPlan="lessonplan.md",e.Instructions="instructions.md"}(cv||(cv={}));var pv=r(15853),bv=r(25108);function mv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hv(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function vv(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){hv(i,n,a,o,l,"next",e)}function l(e){hv(i,n,a,o,l,"throw",e)}o(void 0)}))}}function gv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return mv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yv(e){var t=e.attachments;return(0,ee.tZ)("div",{className:"manage-attachments",children:(0,ee.BX)(ye.gC,{spacing:2,children:[(0,ee.tZ)(xv,{attachment:t.find((function(e){return e.fileName===cv.LessonPlan})),fileName:cv.LessonPlan,label:"Lesson plan",helpText:"Upload teacher facing materials"}),(0,ee.tZ)(xv,{attachment:t.find((function(e){return e.fileName===cv.Instructions})),fileName:cv.Instructions,label:"Instructions",helpText:"Upload student facing materials"})]})})}function xv(e){var t,r=e.attachment,n=e.fileName,a=e.label,i=e.helpText,o=(0,ro.Z)(),l=(0,qt.Z)(),c=l.showConfirm,s=l.showError,u=(0,rt.I0)(),d=Df(),f=gv((0,ke.RG9)({onCompleted:function(){return c("Updated "+n)},onError:function(e){bv.log(e),s("Error")}}),2),p=f[0],b=f[1],m=ie.useCallback(function(){var e=vv(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o&&(p({variables:{input:{replId:o.id,fileName:n,contents:t,lastModified:(new Date).toISOString()}}}),n===cv.Instructions&&u({type:"INSTRUCTIONS_UPLOADED",wid:d,contents:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o,n,p,d,u]);return o&&(t=n===cv.LessonPlan?function(e){var t=e.language;return"# Lesson plan\n  \n  ** this file should contain teacher lesson plan details ** \n\n  __ students will never see this __\n\n  ## Learning Objectives\n  1. \n  2. \n  3. \n\n  Use [Markdown](https://gist.github.com/cuonggt/9b7d08a597b167299f0d) to format your lesson plan.\n\n  ".concat(fv(t),"\n  ")}({language:o.language}):function(e){var t=e.language;return"# Instructions  \n\n  ** this file should contain student lesson instructions **\n\n  _ students will see these instructions in a read-only workspace tab _\n\n  ## Steps\n  1. \n  2. \n  3. \n\n  Use [Markdown](https://gist.github.com/cuonggt/9b7d08a597b167299f0d) to format your instructions.\n\n  ".concat(fv(t),"\n  ")}({language:o.language})),(0,ee.tZ)(wv,{loading:!o||b.loading,fileName:n,contents:null===r||void 0===r?void 0:r.contents,defaultContents:t,label:a,helpText:i,attachmentLastUploadedAgo:r?(0,pv.Sy)(new Date(r.timeUpdated)):void 0,onUploadFile:m})}function wv(e){var t=e.loading,r=e.fileName,n=e.contents,a=e.defaultContents,i=e.label,o=e.helpText,l=e.attachmentLastUploadedAgo,c=e.onUploadFile,s=gv(ie.useState(!1),2),u=s[0],d=s[1];return(0,ee.BX)("div",{className:"jsx-5b5c01bd3abb3f44 attachment",children:[(0,ee.tZ)(dv,{title:i,fileName:r,isOpen:u,initialContents:n||a,onCancel:function(){return d(!1)},onSave:function(e){d(!1),c(e)}}),(0,ee.BX)(ye.Ug,{justify:"space-between",align:"center",wrap:"nowrap",children:[(0,ee.BX)(ye.gC,{spacing:1,children:[(0,ee.BX)(ye.Ug,{align:"center",spacing:1,wrap:"nowrap",children:[(0,ee.tZ)(ge.Z,{fontWeight:"medium",children:i}),(0,ee.tZ)(sv.Z,{label:o})]}),l&&(0,ee.BX)(ge.Z,{size:"xsmall",children:["Uploaded ",l]})]}),t?(0,ee.tZ)(Nt.Z,{style:{width:"16px",height:"16px"}}):(0,ee.tZ)(ve.Z,{border:!1,filled:!1,Icon:cm.Z,onClick:vv(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(!0);case 1:case"end":return e.stop()}}),e)})))})]}),(0,ee.tZ)(re(),{id:"5b5c01bd3abb3f44",children:".attachment.jsx-5b5c01bd3abb3f44{padding:var(--space-8);background-color:var(--background-root);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}"})]})}function kv(e){var t,r,n=e.data;return!n||"Repl"!==n.repl.__typename||"Team"!==(null===(t=n.repl.owner)||void 0===t?void 0:t.__typename)||"ReplTemplate"!==(null===(r=n.repl.template)||void 0===r?void 0:r.__typename)||n.repl.submission?null:(0,ee.BX)("div",{className:"jsx-ea2ca64296d8f56a project-view-container",children:[(0,ee.tZ)("div",{className:"jsx-ea2ca64296d8f56a project-view-contents",children:(0,ee.tZ)(yv,{attachments:n.repl.attachments})}),(0,ee.tZ)("div",{className:"jsx-ea2ca64296d8f56a bottom-dock",children:(0,ee.tZ)(ge.Z,{size:"small",children:(0,ee.tZ)("a",{href:"/curriculum",target:"_blank",className:"jsx-ea2ca64296d8f56a",children:"Find more curriculum on Curriculum Hub"})})}),(0,ee.tZ)(re(),{id:"ea2ca64296d8f56a",children:".project-view-container.jsx-ea2ca64296d8f56a{padding-top:var(--space-32);max-width:400px;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.bottom-dock.jsx-ea2ca64296d8f56a{display:grid;grid-gap:var(--space-8);margin-top:auto}"})]})}var jv=r(25108);function Zv(e){var t,r,n,a,i,o,l,c=e.style,s=(0,we.Z)(),u=(0,ke.SAU)({variables:{replId:s}}),d=u.data,f=u.loading,p=u.error;return f&&(o=(0,ee.tZ)("div",{children:"Loading..."})),p&&(jv.error(p),o=(0,ee.tZ)("div",{children:"Something went wrong"})),d&&"Repl"===d.repl.__typename&&"Team"===(null===(t=d.repl.owner)||void 0===t?void 0:t.__typename)&&"ReplTemplate"===(null===(r=d.repl.template)||void 0===r?void 0:r.__typename)&&"ReplSubmission"===(null===(n=d.repl.submission)||void 0===n?void 0:n.__typename)&&(o=(0,ee.tZ)(lv,{data:d}),l="Submissions"),d&&"Repl"===d.repl.__typename&&"Team"===(null===(a=d.repl.owner)||void 0===a?void 0:a.__typename)&&"ReplTemplate"===(null===(i=d.repl.template)||void 0===i?void 0:i.__typename)&&!d.repl.submission&&(o=(0,ee.tZ)(kv,{data:d}),l="Curriculum"),(0,ee.BX)("div",{style:c,className:"jsx-a46a7aae0e88f5b6 education-pane",children:[(0,ee.tZ)("div",{className:"jsx-a46a7aae0e88f5b6 education-pane-header",children:(0,ee.tZ)(Ne.Z,{level:4,children:l})}),o,(0,ee.tZ)(re(),{id:"a46a7aae0e88f5b6",children:".education-pane.jsx-a46a7aae0e88f5b6{background-color:var(--background-default);color:var(--foreground-dimmer);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:var(--space-8)}.education-pane-header.jsx-a46a7aae0e88f5b6{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;position:relative;color:var(--foreground-default);width:100%;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap}"})]})}var Sv=r(27632),Ev=r(10611),Ov=r(98990),_v=r(17877);function Cv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Av(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Iv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Av(e,t,r[t])}))}return e}function Nv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||Pv(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tv(e){return function(e){if(Array.isArray(e))return Cv(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Pv(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pv(e,t){if(e){if("string"===typeof e)return Cv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Cv(e,t):void 0}}function Rv(e){var t=e.root,r=e.initialValue,n=void 0===r?"":r,a=e.isOpen,i=ie.useRef(null),o=Nv(ie.useState(Boolean(n)),2),l=o[0],c=o[1],s=Nv(ie.useState(n),2),u=s[0],d=s[1],f=ie.useRef(n),p=ie.useRef(""),b=Nv(ie.useState(null),2),m=b[0],h=b[1],v=Nv(ie.useState((function(){var e={command:t,token:{value:"",start:0,end:0},parent:null,meta:{match:!0,searchValue:""}};return{options:[],value:n,index:n.length,searchValue:"",matchedAncestors:[e],rootNode:e}})),2),g=v[0],y=v[1],x=Nv(ie.useState(g.matchedAncestors.slice(1)),2),w=x[0],k=x[1],j=ie.useRef(null);ie.useEffect((function(){j.current=(0,_v.Z)({root:t,onUpdate:function(e){f.current&&(f.current=""),y(e),c(!1)}})}),[t,n]);var Z=ie.useMemo((function(){return Tv(w.map((function(e){return e.token.value}))).concat([u]).join(" ")}),[w,u]);ie.useEffect((function(){if(!j.current)throw new Error("Expected completerRef. Did you pass in a root command?");c(!0),j.current({value:Z,index:Z.length})}),[t,Z]);var S=(0,tr.Kb)({isOpen:a,inputValue:u,initialHighlightedIndex:0,defaultHighlightedIndex:0,itemToString:function(e){return e?e.value:""},items:g.options,stateReducer:function(e,t){var r=t.type,n=t.changes;switch(r){case tr.Kb.stateChangeTypes.MenuMouseLeave:return Iv({},n,{highlightedIndex:-1===e.highlightedIndex?0:e.highlightedIndex});case tr.Kb.stateChangeTypes.InputKeyDownEscape:case tr.Kb.stateChangeTypes.InputBlur:return Iv({},n,{highlightedIndex:0,selectedItem:null});default:return n}},onSelectedItemChange:function(e){e.selectedItem&&(k(e.selectedItem.path.slice(1)),d(""),S.reset(),i.current&&i.current.focus())}});ie.useEffect((function(){p.current&&w.length&&(d(p.current),p.current="")}),[g,w]);return{getMenuProps:S.getMenuProps,getToggleButtonProps:S.getToggleButtonProps,getComboboxProps:S.getComboboxProps,getItemProps:S.getItemProps,highlightedIndex:S.highlightedIndex,selectItem:S.selectItem,getInputProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return S.getInputProps(Iv({},e,{spellCheck:!1,autoComplete:"off",ref:function(t){"function"===typeof e.ref&&e.ref(t),i.current=t},onChange:function(t){f.current||(e.onChange&&e.onChange(t),m&&h(null),d(t.currentTarget.value))},onKeyDown:function(e){if(f.current&&1===e.key.length)p.current+=e.key;else{if(!j.current)throw new Error("Expected completerRef. Did you pass in a root command?");if("Escape"!==e.key)if("a"===e.key&&w.length&&e.metaKey)h({start:0,end:w.length});else{if("Backspace"===e.key&&m&&m.start<w.length){h(null),k(w.slice(0,m.start));var t=e.currentTarget,r=t.selectionStart,n=t.selectionEnd;if("number"!==typeof r||"number"!==typeof n)return;return d(e.currentTarget.value.slice(n)),void setTimeout((function(){i.current&&i.current.setSelectionRange(r,r)}))}if("Backspace"===e.key&&0===e.currentTarget.selectionStart&&w.length)k(w.slice(0,w.length-1));else if("ArrowLeft"===e.key&&e.shiftKey&&e.metaKey)h({start:0,end:w.length});else if("ArrowLeft"===e.key&&e.shiftKey&&0===e.currentTarget.selectionStart&&w.length){var a=m?Math.max(m.start-1,0):w.length-1;h({start:a,end:w.length})}else if("ArrowLeft"!==e.key||m||0!==e.currentTarget.selectionStart||!w.length){if("ArrowRight"!==e.key||!e.shiftKey||!m){var o="number"===typeof S.highlightedIndex&&S.highlightedIndex<g.options.length?g.options[S.highlightedIndex]:null;return" "===e.key&&o&&1===g.options.length&&o.token.value===u?(S.selectItem(o),void e.preventDefault()):"ArrowRight"===e.key?(m&&h(null),void(o&&S.selectItem(o))):"Tab"===e.key&&o?(e.preventDefault(),void S.selectItem(o)):void("Enter"===e.key&&o&&S.selectItem(o))}var l=m.start+1;h(l===m.end?null:{start:l,end:m.end})}else k(w.slice(0,w.length-1))}else e.currentTarget.blur()}}}))},isLoading:l,virtualSelection:m,completer:g,matchedBlocks:w,setMatchedBlocks:k,inputValue:u,clear:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).focus;k([]),d(""),S.reset(),e&&setTimeout((function(){i.current&&i.current.focus()}))}}}function Lv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Dv(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Dv(e,t,r[t])}))}return e}function zv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Lv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bv(e){var t=e.root,r=e.indentOptions,n=e.onIsOpenChange,a=e.initialValue,i=e.renderOutput,o=e.disableKeyboardShortcut,l=e.autoFocus,c=zv(ie.useState(!1),2),s=c[0],u=c[1];ie.useEffect((function(){u(!0)}),[]);var d=zv(ie.useState(!1),2),f=d[0],p=d[1],b=Rv({root:t,isOpen:f,initialValue:a}),m=b.getMenuProps,h=b.getInputProps,v=b.getComboboxProps,g=b.highlightedIndex,y=b.completer,x=b.getItemProps,w=b.matchedBlocks,k=b.setMatchedBlocks,j=b.virtualSelection,Z=b.inputValue,S=b.selectItem,E=b.clear,O=ie.useRef(E);ie.useEffect((function(){O.current=E}),[E]);var _=ie.useRef(Boolean(a)),C=ie.useRef(n),A=ie.useRef(null),I=ie.useRef(null),N=(0,ue.useRouter)();ie.useEffect((function(){C.current=n}),[n]),ie.useEffect((function(){C.current&&C.current(f)}),[f]),ie.useEffect((function(){if(!o){var e=function(e){(0,Ru.b)(e),"Escape"!==e.key?A.current&&!e.altKey&&!e.shiftKey&&(0,di.jh)(e)&&(di.V5?"k"===e.key.toLowerCase():"."===e.key.toLowerCase())&&(e.preventDefault(),document.activeElement===A.current?(A.current.blur(),p(!1),I.current&&I.current.focus()):(I.current=document.activeElement&&document.activeElement!==A.current&&"function"===typeof document.activeElement.focus?document.activeElement:null,A.current.focus())):p(!1)};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}}),[o]);var T=(0,Ad.Z)((function(){p(!1)}),[]);ie.useEffect((function(){y.errors&&y.errors.forEach((function(e){st.$e((function(t){t.setTag("completer","true"),st.Tb(e)}))}))}),[y.errors]),ie.useEffect((function(){if(a&&_.current&&y.options.length&&a===y.options[0].value){var e;_.current=!1;var t=zv(y.options,1)[0];if(!("basic"===(null===(e=t.command.data)||void 0===e?void 0:e.type)))return;S(t)}}),[a,y.options,S]);var P=Boolean(Z||w.length),R=w.length?w[w.length-1]:y.rootNode,L=R.command&&"data"in R.command&&R.command.data&&"description"in R.command.data?R.command.data.description:void 0,D=ie.useRef(i);return ie.useEffect((function(){D.current=i}),[i]),ie.useEffect((function(){var e,t,r,n=R.command;if("link"===(null===(e=n.data)||void 0===e?void 0:e.type)){var a=n.data.link;N.push(a.href,a.as)}else"action"===(null===(t=n.data)||void 0===t?void 0:t.type)?(n.data.run(),O.current(),p(!1),A.current&&A.current.blur()):"output"===(null===(r=n.data)||void 0===r?void 0:r.type)&&D.current&&(p(!1),D.current(n.data.output()),A.current&&A.current.blur())}),[R,N]),(0,ee.BX)("div",{ref:T,className:re().dynamic([["bc64af30e4ec2f2c",[he.j.tabletMin]]]),children:[(0,ee.BX)("div",Uv({},v(),{className:re().dynamic([["bc64af30e4ec2f2c",[he.j.tabletMin]]])+" root-wrap",children:[(0,ee.BX)("div",{className:re().dynamic([["bc64af30e4ec2f2c",[he.j.tabletMin]]])+" input-row",children:[w.length?w.map((function(e,t){var r=Boolean(j&&t>=j.start&&t<j.end);return(0,ee.tZ)("div",{className:re().dynamic([["bc64af30e4ec2f2c",[he.j.tabletMin]]])+" block-wrap",children:(0,ee.tZ)(Sv.Z,{node:e,isSelected:r,onClick:function(){k(w.slice(0,t+1))}})},e.token.value+t)})):(0,ee.tZ)("div",{className:re().dynamic([["bc64af30e4ec2f2c",[he.j.tabletMin]]])+" prompt-icon",children:(0,ee.tZ)(Ov.Z,{size:16,filled:!0,color:"var(--foreground-dimmest)"})}),(0,ee.tZ)("input",Uv({},h({autoFocus:l,placeholder:L,ref:function(e){A.current=e},onFocus:function(){p(!0)}}),{className:re().dynamic([["bc64af30e4ec2f2c",[he.j.tabletMin]]])})),!s||P||o?null:(0,ee.tZ)("div",{className:re().dynamic([["bc64af30e4ec2f2c",[he.j.tabletMin]]])+" keyboard-shortcut-container",children:(0,ee.tZ)(Hr.Z,{shortcut:{cmdOrCtrlKey:!0,key:di.V5?"k":"."}})}),P?(0,ee.tZ)(ve.Z,{Icon:Yt.Z,border:!1,filled:!1,onClick:function(){E({focus:!0})}}):null]}),(0,ee.tZ)("div",Uv({},m(),{className:re().dynamic([["bc64af30e4ec2f2c",[he.j.tabletMin]]]),children:f&&y.options.length?(0,ee.tZ)("div",{className:re().dynamic([["bc64af30e4ec2f2c",[he.j.tabletMin]]])+" menu",children:(0,ee.tZ)("ul",{className:re().dynamic([["bc64af30e4ec2f2c",[he.j.tabletMin]]]),children:y.options.map((function(e,t){var n=g===t;return(0,ee.tZ)("li",Uv({},x({key:e.value,item:e,index:t}),{className:re().dynamic([["bc64af30e4ec2f2c",[he.j.tabletMin]]]),children:(0,ee.tZ)(Ev.Z,{indentOptions:r,isActive:n,option:e,matchedBlocks:w})}))}))})}):null}))]})),(0,ee.tZ)(re(),{id:"bc64af30e4ec2f2c",dynamic:[he.j.tabletMin],children:".root-wrap.__jsx-style-dynamic-selector{font-size:var(--font-size-default);position:relative}.input-row.__jsx-style-dynamic-selector{border:1px solid transparent;-webkit-border-radius:var(--border-radius-8)var(--border-radius-8)0 0;-moz-border-radius:var(--border-radius-8)var(--border-radius-8)0 0;border-radius:var(--border-radius-8)var(--border-radius-8)0 0;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:42px;padding-left:var(--space-8);padding-right:var(--space-4);z-index:1;position:relative;color:var(--foreground-default)}input.__jsx-style-dynamic-selector{font-size:var(--font-size-default);background-color:transparent;border:0 none;outline:0 none;padding:var(--space-8);padding-left:0;display:block;width:100%;color:var(--foreground-default)}input.__jsx-style-dynamic-selector::-webkit-input-placeholder{color:var(--foreground-dimmest)}input.__jsx-style-dynamic-selector:-moz-placeholder{color:var(--foreground-dimmest)}input.__jsx-style-dynamic-selector::-moz-placeholder{color:var(--foreground-dimmest)}input.__jsx-style-dynamic-selector:-ms-input-placeholder{color:var(--foreground-dimmest)}input.__jsx-style-dynamic-selector::-ms-input-placeholder{color:var(--foreground-dimmest)}input.__jsx-style-dynamic-selector::placeholder{color:var(--foreground-dimmest)}input.__jsx-style-dynamic-selector:focus::-webkit-input-placeholder{color:var(--foreground-dimmer)}input.__jsx-style-dynamic-selector:focus:-moz-placeholder{color:var(--foreground-dimmer)}input.__jsx-style-dynamic-selector:focus::-moz-placeholder{color:var(--foreground-dimmer)}input.__jsx-style-dynamic-selector:focus:-ms-input-placeholder{color:var(--foreground-dimmer)}input.__jsx-style-dynamic-selector:focus::-ms-input-placeholder{color:var(--foreground-dimmer)}input.__jsx-style-dynamic-selector:focus::placeholder{color:var(--foreground-dimmer)}input.__jsx-style-dynamic-selector::-moz-selection{background-color:var(--accent-primary-dimmest)}input.__jsx-style-dynamic-selector::selection{background-color:var(--accent-primary-dimmest)}.prompt-icon.__jsx-style-dynamic-selector{margin-right:var(--space-8);height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center}.block-wrap.__jsx-style-dynamic-selector{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;padding-right:var(--space-8)}.menu.__jsx-style-dynamic-selector{padding-top:40px;position:absolute;left:0;top:0;width:100%;background-color:var(--background-higher);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);max-height:500px;overflow-y:auto}li.__jsx-style-dynamic-selector:last-child>div{-webkit-border-bottom-right-radius:var(--border-radius-8);-moz-border-radius-bottomright:var(--border-radius-8);border-bottom-right-radius:var(--border-radius-8);-webkit-border-bottom-left-radius:var(--border-radius-8);-moz-border-radius-bottomleft:var(--border-radius-8);border-bottom-left-radius:var(--border-radius-8)}.keyboard-shortcut-container.__jsx-style-dynamic-selector{display:none}@media screen and (min-width:".concat(he.j.tabletMin,"px){.keyboard-shortcut-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto}}")})]})}var Mv=r(10847),Fv=r(54943),Xv=r(13649),Vv=r(33790);function Gv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Hv(e){return function(e){if(Array.isArray(e))return Gv(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Gv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gv(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Wv=["GET","POST","PUT","DELETE","HEAD","PATCH","OPTIONS"];function Kv(e){var t=e.url,r=e.method,n=void 0===r?"GET":r,a=e.headers,i=void 0===a?{}:a;if(!t)throw new Error("No URL provided");if(!(0,Xv.Z)(t))throw new Error("URL is invalid: ".concat(t));if(n=n.toUpperCase(),!Wv.find((function(e){return e===n})))throw new Error("Method is invalid: ".concat(n));var o=[];for(var l in i)o.push("-H","".concat(l,": ").concat(i[l]));return["curl","-i","-s","-X",n].concat(Hv(o),[t])}function qv(e){if(null===e||void 0===e?void 0:e.matchedAncestors){var t=e.matchedAncestors.map((function(e){var t,r;return null===(r=null===(t=e.command)||void 0===t?void 0:t.data)||void 0===r?void 0:r.curl})).filter((function(e){return void 0!==e})),r=Yv(t);return r.method||(r.method="get"),r}}function Yv(e){return e.reduce((function(e,t){return(0,Vv.Z)(e,t)}),{})}function $v(){return(0,ee.BX)("div",{className:"jsx-fe9891e9bea91be0 loader-container",children:[(0,ee.BX)(ll.ZP,{primaryColor:"var(--background-highest)",secondaryColor:"var(--background-higher)",uniquekey:"editorLoader",children:[(0,ee.tZ)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"70",height:"10",className:"jsx-fe9891e9bea91be0"}),(0,ee.tZ)("rect",{x:"80",y:"0",rx:"3",ry:"3",width:"100",height:"10",className:"jsx-fe9891e9bea91be0"}),(0,ee.tZ)("rect",{x:"190",y:"0",rx:"3",ry:"3",width:"10",height:"10",className:"jsx-fe9891e9bea91be0"}),(0,ee.tZ)("rect",{x:"15",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:"jsx-fe9891e9bea91be0"}),(0,ee.tZ)("rect",{x:"155",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:"jsx-fe9891e9bea91be0"}),(0,ee.tZ)("rect",{x:"15",y:"40",rx:"3",ry:"3",width:"90",height:"10",className:"jsx-fe9891e9bea91be0"}),(0,ee.tZ)("rect",{x:"115",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:"jsx-fe9891e9bea91be0"}),(0,ee.tZ)("rect",{x:"185",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:"jsx-fe9891e9bea91be0"}),(0,ee.tZ)("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"30",height:"10",className:"jsx-fe9891e9bea91be0"}),(0,ee.tZ)("rect",{x:"15",y:"80",rx:"3",ry:"3",width:"70",height:"10",className:"jsx-fe9891e9bea91be0"}),(0,ee.tZ)("rect",{x:"95",y:"80",rx:"3",ry:"3",width:"60",height:"10",className:"jsx-fe9891e9bea91be0"}),(0,ee.tZ)("rect",{x:"165",y:"80",rx:"3",ry:"3",width:"30",height:"10",className:"jsx-fe9891e9bea91be0"}),(0,ee.tZ)("rect",{x:"15",y:"100",rx:"3",ry:"3",width:"110",height:"10",className:"jsx-fe9891e9bea91be0"}),(0,ee.tZ)("rect",{x:"135",y:"100",rx:"3",ry:"3",width:"100",height:"10",className:"jsx-fe9891e9bea91be0"}),(0,ee.tZ)("rect",{x:"0",y:"120",rx:"3",ry:"3",width:"70",height:"10",className:"jsx-fe9891e9bea91be0"})]}),(0,ee.tZ)(re(),{id:"fe9891e9bea91be0",children:".loader-container.jsx-fe9891e9bea91be0{padding:var(--space-24)}"})]})}function Qv(e){var t=e.html,r=(0,Ei.Z)("flag-curlclui-html-preview"),n=ie.useMemo((function(){return t?function(e){var t=e.html,r=void 0===t?"":t,n=new window.Blob([r],{type:"text/html"});return URL.createObjectURL(n)}({html:t}):null}),[t]);return n?(0,ee.BX)("div",{className:"jsx-878554194a44c0aa html-viewer",children:[r?(0,ee.tZ)("a",{target:"_blank",href:n,className:"jsx-878554194a44c0aa",children:"See response"}):(0,ee.tZ)("div",{className:"jsx-878554194a44c0aa response-text",children:t}),(0,ee.tZ)(re(),{id:"878554194a44c0aa",children:".html-viewer.jsx-878554194a44c0aa{display:block;padding:var(--space-16);background:var(--background-root)}.response-text.jsx-878554194a44c0aa{overflow-x:hidden;white-space:break-spaces;color:var(--foreground-default);font-family:var(--font-family-code);font-size:var(--font-size-small)}"})]}):null}function Jv(e){var t=e.output,r=e.error;return(0,ee.BX)("div",{className:"jsx-44e60dbe8ab776",children:[r&&(0,ee.tZ)("div",{className:"jsx-44e60dbe8ab776 error",children:r}),t&&(0,ee.tZ)("div",{className:"jsx-44e60dbe8ab776",children:t}),(0,ee.tZ)(re(),{id:"44e60dbe8ab776",children:".error.jsx-44e60dbe8ab776{color:var(--accent-negative-default)}"})]})}function eg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return eg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rg=(0,hc.default)((function(){return r.e(367).then(r.t.bind(r,55171,23))}),{loadableGenerated:{webpack:function(){return[55171]}}});function ng(e){var t,r=e.jsonString,n=tg(ie.useMemo((function(){try{return[JSON.parse(r),null]}catch(e){return[null,e]}}),[r]),2),a=n[0],i=n[1];return i?t=(0,ee.BX)("div",{className:"jsx-f9782d9ae1d9c22a json-error",children:[(0,ee.BX)("div",{className:"jsx-f9782d9ae1d9c22a error-message",children:["Error: Failed to parse JSON. ",i.message]}),(0,ee.tZ)("div",{className:"jsx-f9782d9ae1d9c22a raw-json-string",children:r}),(0,ee.tZ)(re(),{id:"f9782d9ae1d9c22a",children:".json-error.jsx-f9782d9ae1d9c22a{display:grid;grid-gap:var(--space-16)}.error-message.jsx-f9782d9ae1d9c22a{font-size:var(--font-size-small)}"})]}):a&&(t=(0,ee.tZ)(rg,{src:a,name:!1,displayDataTypes:!1})),(0,ee.BX)("div",{className:"jsx-eeafc9ff936fe5fb json-viewer",children:[t,(0,ee.tZ)(re(),{id:"eeafc9ff936fe5fb",children:".json-viewer.jsx-eeafc9ff936fe5fb{padding:var(--space-16);background:var(--background-root)}"})]})}var ag=r(80983),ig=r(95493),og=r.n(ig);function lg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var cg=["text/plain","application/json","application/octet-stream"],sg="gold",ug=function(e,t){if(e===t)return 1;var r=og().get(e.toLowerCase(),t.toLowerCase()),n=Math.max(e.length,t.length);return(n-r)/n},dg=function(e){return Object.keys(ag.extensions).filter((function(t){return t.includes(e)})).sort((function(t,r){return ug(e,r)-ug(e,t)}))},fg=function(e){var t=e.name,r=e.value,n=e.commands;return{data:{description:e.description||"".concat(t,": ").concat(r),color:sg,curl:{headers:lg({},t,r)}},commands:n}},pg=function(e){var t=e.commands;return{data:{color:sg},commands:function(e){if(e.relativeSearchDepth>0)return{};var r=e.searchValue,n={googlebot:fg({name:"user-agent",value:"Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)",description:"How Google sees your page",commands:t}),"this-browser":fg({name:"user-agent",value:window.navigator.userAgent,description:"Your browser's user-agent",commands:t})};return r.length?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){lg(e,t,r[t])}))}return e}(lg({},r,fg({name:"user-agent",value:r,commands:t})),n):n}}};function bg(e){var t=e.commands,r=e.rootArgs;return 1===(null===r||void 0===r?void 0:r.matchedAncestors.length)&&0===(null===r||void 0===r?void 0:r.searchValue.length)?{}:{header:{data:{description:"Add a request header",color:sg},commands:function(e){var n={},a=e.searchValue.toLowerCase(),i={commands:t,rootArgs:r};return n["content-type"]=function(e){var t=e.commands;return{data:{color:sg},commands:function(e){if(e.relativeSearchDepth>0)return{};var r=e.searchValue.toLowerCase(),n={},a=0===r.length?cg:dg(r),i=!0,o=!1,l=void 0;try{for(var c,s=a.slice(0,5)[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var u=c.value;n[u]=fg({name:"content-type",value:u,commands:t})}}catch(d){o=!0,l=d}finally{try{i||null==s.return||s.return()}finally{if(o)throw l}}return n}}}(i),n.authorization=function(e){var t=e.commands;return{data:{color:sg},commands:function(e){if(e.relativeSearchDepth>0)return{};var r=e.searchValue;return r.length?lg({},r,fg({name:"authorization",value:r,commands:t})):{}}}}(i),n["user-agent"]=pg(i),n.accept=function(e){var t=e.commands;return{data:{color:sg},commands:function(e){if(e.relativeSearchDepth>0)return{};var r=e.searchValue.toLowerCase(),n={},a=0===r.length?cg:dg(r),i=!0,o=!1,l=void 0;try{for(var c,s=a.slice(0,5)[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var u=c.value;n[u]=fg({name:"accept",value:u,commands:t})}}catch(d){o=!0,l=d}finally{try{i||null==s.return||s.return()}finally{if(o)throw l}}return n}}}(i),a.length>0&&!n[a]&&function(e){return/^[a-zA-Z0-9-]+$/.test(e)}(a)&&0===e.relativeSearchDepth&&(n[a]={data:{description:"Add a custom header",color:sg},commands:function(e){if(e.relativeSearchDepth>0)return{};var r=e.searchValue;return r.length?lg({},r,fg({name:a,value:r,commands:t})):{}}}),n}}}}function mg(e){return{data:{curlType:"body",curl:{headers:{"content-type":"application/json"}},color:"gold",description:"Add a JSON body to your request"},commands:e.commands}}function hg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vg(e){var t=e.onSelect,r=e.onSetContext,n=e.onGetCurl,a=e.recentUrls,i=void 0===a?[]:a,o=e.replRoot,l=e.parsedPaths,c=function(e){if(e.relativeSearchDepth>0)return{};var a=e.matchedAncestors.find((function(e){var t,r;return"url"===(null===(t=e.command)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.curlType)})),s=e.matchedAncestors.find((function(e){var t,r;return"method"===(null===(t=e.command)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.curlType)})),u=e.matchedAncestors.find((function(e){var t,r;return"body"===(null===(t=e.command)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.curlType)})),d=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){hg(e,t,r[t])}))}return e}({},a?{}:function(e){var t=e.commands,r=e.parsedPaths,n=e.recentUrls,a=e.replRoot,i={},o=e.rootArgs.searchValue,l=function(e,r){return{data:{curlType:"url",commandName:e,description:r,color:"blue",curl:{url:r}},commands:t}};o.startsWith("/")?i[o]=l(o,"".concat(a.replace(/\/+$/,"")).concat(o)):(0,Xv.Z)(o)&&(i[o]=l(o,o));var c=!0,s=!1,u=void 0;try{for(var d,f=r[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=d.value;i[p]||(i[p]=l(p,"".concat(null===a||void 0===a?void 0:a.replace(/\/+$/,"")).concat(p)))}}catch(x){s=!0,u=x}finally{try{c||null==f.return||f.return()}finally{if(s)throw u}}var b=!0,m=!1,h=void 0;try{for(var v,g=n[Symbol.iterator]();!(b=(v=g.next()).done);b=!0){var y=v.value;a&&y.startsWith(a)&&i[new URL(y).pathname]||(i[y]||(i[y]=l(y,y)))}}catch(x){m=!0,h=x}finally{try{b||null==g.return||g.return()}finally{if(m)throw h}}return i}({commands:c,parsedPaths:l,recentUrls:i,replRoot:o,rootArgs:e}),s?{}:function(e){var t=e.commands,r=e.rootArgs,n={};if(0===r.searchValue.length)return n;var a=!0,i=!1,o=void 0;try{for(var l,c=["get","post","put","delete","head","patch","options"][Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var s=l.value;if(s.startsWith(r.searchValue)){var u="Create a ".concat(s.toUpperCase()," request");n[s]={data:{curlType:"method",description:u,curl:{method:s},color:"green"},commands:t}}}}catch(d){i=!0,o=d}finally{try{a||null==c.return||c.return()}finally{if(i)throw o}}return n}({commands:c,rootArgs:e}),function(e){var t=e.rootArgs,r=e.onSelect,n=e.onGetCurl;if(t.relativeSearchDepth>0)return{};var a=qv(t);return a&&a.url?{go:{data:{type:"action",description:"Run the request!",color:"red",run:function(){r(a)}}},"get-curl":{data:{type:"action",description:"Returns the equivalent cURL request",color:"red",run:function(){n(a)}}}}:{}}({onSelect:t,rootArgs:e,onGetCurl:n}),u?{}:function(e){var t=e.rootArgs,r=e.commands;return 1===t.matchedAncestors.length?{}:{json:mg({commands:r,rootArgs:t})}}({commands:c,rootArgs:e}),bg({rootArgs:e,commands:c}),function(e){var t=e.onSetContext;if(e.rootArgs.ancestors.length>1)return{};var r=function(e){return{confirm:{data:{type:"action",description:"Click to confirm",color:"teal",run:function(){var r=qv(e);if(!r||!r.headers)return{};t({headers:r.headers})}}}}};return{set:{data:{description:"Set a value to context",color:"teal"},commands:function(e){return bg({rootArgs:e,commands:r})}}}}({onSetContext:r,rootArgs:e}));return d};return c}var gg=function(e){return{data:{type:"root"},commands:vg({onSelect:e.onSelect,onSetContext:e.onSetContext,onGetCurl:e.onGetCurl,recentUrls:e.recentUrls,replRoot:e.replRoot,parsedPaths:e.parsedPaths})}};function yg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xg(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function wg(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){xg(i,n,a,o,l,"next",e)}function l(e){xg(i,n,a,o,l,"throw",e)}o(void 0)}))}}function kg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){kg(e,t,r[t])}))}return e}function Zg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||Eg(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sg(e){return function(e){if(Array.isArray(e))return yg(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Eg(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Eg(e,t){if(e){if("string"===typeof e)return yg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yg(e,t):void 0}}function Og(e){var t,r=(0,Ie.Z)().container,n=(0,we.Z)(),a=(0,ke.Jfm)({variables:{id:n}}).data,i=function(){var e=wg(J().mark((function e(t){var n,a,i,o,l;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Kv(t),e.next=4,(n=r).exec.apply(n,Sg(a));case 4:return i=e.sent,o=i.output,l=i.error,e.abrupt("return",{output:o,error:l});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=Zg(ie.useState([]),2),l=o[0],c=o[1],s=Zg(ie.useState(null),2),u=s[0],d=s[1],f=Zg(ie.useState(null),2),p=f[0],b=f[1],m=Zg(ie.useState(null),2),h=m[0],v=m[1],g=Zg(ie.useState({}),2),y=g[0],x=g[1],w=Zg(ie.useState(null),2),k=w[0],j=w[1],Z=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];c((function(e){return Sg(new Set(Sg(e).concat(Sg(t.filter(Xv.Z)))))}))},S=function(){var e=wg(J().mark((function e(t){var r,n,a,o,l,c,s,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(null),b(null),j(null),A(!0),e.next=6,i(Yv([y,t]));case 6:if(!(r=e.sent).error&&r.output){e.next=11;break}return d(r),A(!1),e.abrupt("return");case 11:for(u in Z(t.url),n=(0,Mv.LZ)(r.output),a=n.body,o=n.headers,l=n.statusCode,c=n.statusMessage,s={},o)s[u.toLowerCase()]=o[u];b({body:a,headers:s,statusCode:l,statusMessage:c}),A(!1);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=ie.useCallback((function(e){var t={headers:jg({},y.headers,e.headers)};x(t)}),[y]);ie.useEffect((function(){var e;a&&"Repl"===(null===(e=a.repl)||void 0===e?void 0:e.__typename)&&v(a.repl.prodUrl)}),[a]);var O=Zg(ie.useState([]),1)[0],_=Zg(ie.useState(!1),2),C=_[0],A=_[1],I=gg({onSelect:S,onSetContext:E,onGetCurl:function(e){var t=Yv([y,e]);j(Kv(t).map((function(e){return e.includes(" ")?'"'.concat(e,'"'):e})).join(" ")),b(null),d(null)},recentUrls:l,replRoot:h||"",parsedPaths:O}),N=(null===p||void 0===p||null===(t=p.headers)||void 0===t?void 0:t["content-type"])||"",T=Zg(ie.useState(!1),2),P=T[0],R=T[1];return(0,ee.BX)("div",jg({},e,{className:"jsx-42911cb33d49da54 "+"jsx-".concat(Id.Q.__hash)+" cluicurl",children:[(0,ee.tZ)(Bv,{root:I,disableKeyboardShortcut:!0}),C&&(0,ee.tZ)($v,{}),k&&(0,ee.tZ)("div",{className:"jsx-42911cb33d49da54 "+"jsx-".concat(Id.Q.__hash)+" curl-req-container",children:(0,ee.tZ)("pre",{className:"jsx-42911cb33d49da54 "+"jsx-".concat(Id.Q.__hash),children:(0,ee.tZ)("code",{className:"jsx-42911cb33d49da54 "+"jsx-".concat(Id.Q.__hash),children:k})})}),(null===p||void 0===p?void 0:p.statusCode)&&(0,ee.BX)("div",{className:"jsx-42911cb33d49da54 "+"jsx-".concat(Id.Q.__hash),children:[(0,ee.BX)("div",{className:"jsx-42911cb33d49da54 "+"jsx-".concat(Id.Q.__hash)+" response-info",children:[(0,ee.BX)("div",{className:"jsx-42911cb33d49da54 "+"jsx-".concat(Id.Q.__hash)+" response-status",children:[(0,ee.tZ)("span",{className:"jsx-42911cb33d49da54 "+"jsx-".concat(Id.Q.__hash),children:p.statusCode})," ",(0,ee.tZ)("span",{className:"jsx-42911cb33d49da54 "+"jsx-".concat(Id.Q.__hash),children:function(){if(!(null===p||void 0===p?void 0:p.statusCode))return"";if(p.statusMessage)return p.statusMessage;try{return(0,Fv.BV)(p.statusCode)}catch(e){return""}}()})]}),(0,ee.BX)("div",{onClick:function(){return R((function(e){return!e}))},className:"jsx-42911cb33d49da54 "+"jsx-".concat(Id.Q.__hash)+" response-headers-button",children:[Object.keys(p.headers).length," headers"]})]}),P&&(0,ee.tZ)("div",{className:"jsx-42911cb33d49da54 "+"jsx-".concat(Id.Q.__hash)+" response-headers",children:Object.entries(p.headers).map((function(e){var t=Zg(e,2),r=t[0],n=t[1];return(0,ee.BX)("div",{className:"jsx-42911cb33d49da54 "+"jsx-".concat(Id.Q.__hash),children:[(0,ee.tZ)("span",{className:"jsx-42911cb33d49da54 "+"jsx-".concat(Id.Q.__hash)+" header-name",children:r}),":"," ",(0,ee.tZ)("span",{className:"jsx-42911cb33d49da54 "+"jsx-".concat(Id.Q.__hash)+" header-value",children:n})]})}))})]}),u&&(0,ee.tZ)(Jv,jg({},u)),N.includes("text/html")&&(0,ee.tZ)(Qv,{html:p.body}),N.includes("application/json")&&(0,ee.tZ)(ng,{jsonString:p.body}),(0,ee.tZ)(re(),{id:Id.Q.__hash,children:Id.Q}),(0,ee.tZ)(re(),{id:"42911cb33d49da54",children:".cluicurl.jsx-42911cb33d49da54{overflow:scroll}.cluicurl.jsx-42911cb33d49da54 .input-row{z-index:2!important}.cluicurl.jsx-42911cb33d49da54 .menu{z-index:1!important}.curl-req-container.jsx-42911cb33d49da54{padding:var(--space-16);background:var(--background-higher)}.response-info.jsx-42911cb33d49da54{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:var(--space-16)var(--space-24);background-color:var(--background-root);font-family:var(--font-family-code);color:var(--foreground-default);border-bottom:1px solid var(--outline-dimmest);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.response-status.jsx-42911cb33d49da54{font-weight:800}.response-headers.jsx-42911cb33d49da54{font-family:var(--font-family-code);font-size:var(--font-size-small);padding:var(--space-24);color:var(--foreground-default)}.response-headers-button.jsx-42911cb33d49da54{font-weight:100;background:var(--background-higher);padding:var(--space-4);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);cursor:pointer}.header-name.jsx-42911cb33d49da54{font-weight:var(--font-weight-bold)}.header-value.jsx-42911cb33d49da54{font-weight:var(--font-weight-regular)}"})]}))}var _g=r(34837),Cg=r.n(_g),Ag=r(67952),Ig=r(51409);function Ng(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Tg(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function Pg(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Tg(i,n,a,o,l,"next",e)}function l(e){Tg(i,n,a,o,l,"throw",e)}o(void 0)}))}}function Rg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ng(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ng(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lg(e){var t=ie.useRef(null),r=ie.useRef(null),n=(0,Ie.Z)().fs,a=(0,Er.Z)(),i=(0,qt.Z)(),o=i.showError,l=i.showConfirm,c=(0,Ga.Z)(),s=Rg(ie.useState(!1),2),u=s[0],d=s[1],f=(0,Ei.Z)("flag-pedit-multiplayer"),p=(0,fl.Z)((function(){var e=t.current;if(!e)return null;e.width=e.offsetWidth,e.height=e.offsetHeight;var r=e.getContext("2d");r&&(r.imageSmoothingEnabled=!1)}),{type:"debounce",wait:100});return ie.useEffect((function(){var e=function(){if(!u)throw new Error("Tried to export png but peditCtxRef was null");var e=window.prompt("Export as:");if(e){var t="".concat(e,".png"),r=u.curFrame().toPNG();n.writeFile(t,Pn.Z.from(r)).then((function(){l("Successfully exported to ".concat(t))}))}},i=!1;if(a&&t.current){var c=t.current,s=a,u=null,d=s.endsWith(".kbmsprite"),p=function(){};return f&&(p=n.watchFile(s,{onChange:function(e){var t=e.toString(),r=t&&JSON.parse(t);r&&u&&!i&&u.load(d?(0,Ig.C)(r):r)}})),function(){b.apply(this,arguments)}(),function(){i=!0,u&&(u.cleanUp(),u=null),r.current&&(r.current=null),p()}}function b(){return(b=Pg(J().mark((function t(){var a,l,f;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.readFile(s);case 2:if(a=t.sent,!i){t.next=5;break}return t.abrupt("return");case 5:if(!a.error){t.next=8;break}return o("failed to read ".concat(s)),t.abrupt("return");case 8:l=a.content.toString(),f=l&&JSON.parse(l),c.width=c.offsetWidth,c.height=c.offsetHeight,(u=Cg()(f?f.fromKaboom?{canvas:c,width:f.width,height:f.height}:{canvas:c,data:d?(0,Ig.C)(f):f}:{canvas:c,width:64,height:64})).on("change",m),u.on("save",m),u.on("export",e),r.current=u.save,c.focus();case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(){return h.apply(this,arguments)}function h(){return(h=Pg(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=2;break}return e.abrupt("return");case 2:if(u){e.next=4;break}throw new Error("Expected peditCtx");case 4:if(t=u.save(),!d){e.next=9;break}return e.next=8,(0,Ig.u)(t);case 8:t=e.sent;case 9:return e.next=11,n.writeFile(s,Pn.Z.from(JSON.stringify(t)));case 11:e.sent.error&&i&&o("Failed to save ".concat(s,", please try again"));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),[n,a,t]),(0,ee.BX)("div",{style:e.style,className:re().dynamic([["9c48df7359622be1",[c?"0 3px 0 3px ".concat(c):"0"]]])+" pedit",children:[(0,ee.tZ)(re(),{id:"9c48df7359622be1",dynamic:[c?"0 3px 0 3px ".concat(c):"0"],children:".pedit.__jsx-style-dynamic-selector{width:100%;height:100%;position:relative;z-index:3;-webkit-box-shadow:".concat(c?"0 3px 0 3px ".concat(c):"0",";-moz-box-shadow:").concat(c?"0 3px 0 3px ".concat(c):"0",";box-shadow:").concat(c?"0 3px 0 3px ".concat(c):"0","}canvas.__jsx-style-dynamic-selector{width:100%;height:100%;outline:none;position:absolute;top:0;left:0}.upgrade-button.__jsx-style-dynamic-selector{position:absolute;bottom:0;left:0;z-index:100;padding:var(--space-4);border:solid 2px var(--foreground-default);background:var(--background-default);font-weight:700;outline:none}.upgrade-button.__jsx-style-dynamic-selector:hover{cursor:pointer;background:var(--background-higher)}.upgrade-modal.__jsx-style-dynamic-selector{background:var(--background-default);padding:var(--space-32)}")}),(0,ee.tZ)("canvas",{ref:function(e){t.current=e,p(e)},tabIndex:0,className:re().dynamic([["9c48df7359622be1",[c?"0 3px 0 3px ".concat(c):"0"]]])},a),a&&a.endsWith(".kbmsprite")&&(0,ee.tZ)("button",{onClick:function(){return d(!0)},className:re().dynamic([["9c48df7359622be1",[c?"0 3px 0 3px ".concat(c):"0"]]])+" upgrade-button",children:"Upgrade"}),(0,ee.tZ)(It.Z,{isOpen:u,onRequestClose:function(){return d(!1)},children:(0,ee.tZ)(Ag.Z,{prompt:"Upgrade to '.pedit'?",desc:"You're using '.kbmsprite' which is recently deprecated. Do you want to upgrade to the new '.pedit' format? (It'll create a new '.pedit' file with the same content. If you're using it with Kaboom, the new '.pedit' format won't work with kaboom before v0.4.0)",onCancel:function(){return d(!1)},onConfirm:function(){if(r.current)if(a){var e=a.replace(/\.kbmsprite$/,".pedit"),t=Pn.Z.from(JSON.stringify(r.current()));n.writeFile(e,t).then((function(t){t.error?o("Failed to write to ".concat(e)):l("Successfully written to ".concat(e))})),d(!1)}else o("failed to get active file");else o("Please try again after the file loads")}})})]})}function Dg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ug(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Dg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bg(e){var t=zg(ie.useState(e),2),r=t[0],n=t[1];return[r,n,function(e){var t=null;switch(e.currentTarget.type){case"checkbox":t=e.currentTarget.checked;break;case"number":case"range":t=Number(e.currentTarget.value);break;default:t=e.currentTarget.value}n(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ug(e,t,r[t])}))}return e}({},r,Ug({},e.currentTarget.name,t)))}]}var Mg=r(50558);var Fg=function(e){var t=e.title,r=e.sub,n=void 0!==r&&r,a=e.actions,i=void 0===a?[]:a;return(0,ee.BX)(ye.Ug,{justify:"space-between",children:[(0,ee.tZ)(re(),{id:"682b7b2d26f48364",children:".section-header-action.jsx-682b7b2d26f48364{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:var(--space-24);height:var(--space-24);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);color:var(--foreground-dimmer)}.section-header-action.jsx-682b7b2d26f48364:hover{background:var(--background-higher);cursor:pointer}"}),(0,ee.tZ)(Ne.Z,{level:n?5:4,children:t}),(0,ee.tZ)(ye.Ug,{spacing:"4px",align:"center",children:i&&i.map((function(e,t){return(0,ee.tZ)("div",{onClick:e.action,className:"jsx-682b7b2d26f48364 section-header-action",children:e.icon},t)}))})]})};function Xg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Vg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||Hg(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gg(e){return function(e){if(Array.isArray(e))return Xg(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Hg(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hg(e,t){if(e){if("string"===typeof e)return Xg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xg(e,t):void 0}}var Wg,Kg=function(e){var t=e.fileDrag,r=e.children,n=Vg(ie.useState(!1),2),a=n[0],i=n[1],o=ie.useRef(0);return(0,ee.BX)("div",{onDragEnter:function(e){if(t){e.preventDefault(),e.stopPropagation();var r=!0;if(e.dataTransfer.items&&e.dataTransfer.items.length>0){if(t.accept)for(var n=e.dataTransfer.items,a=0;a<n.length;a++){var l=n[a];t.accept.includes(l.type)||(r=!1)}r&&(i(!0),o.current++)}}},onDragLeave:function(e){t&&(e.preventDefault(),e.stopPropagation(),o.current--,0===o.current&&i(!1))},onDrop:function(e){t&&(e.preventDefault(),e.stopPropagation(),o.current=0,i(!1),Gg(e.dataTransfer.files).filter((function(e){return t.accept.includes(e.type)})).forEach(t.onDrop))},className:"jsx-68ea6c6d36b196a3 section",children:[(0,ee.tZ)(re(),{id:"68ea6c6d36b196a3",children:".section.jsx-68ea6c6d36b196a3{position:relative;width:100%}.dragfilter.jsx-68ea6c6d36b196a3{position:absolute;width:100%;height:100%;top:0;left:0;background:var(--accent-primary-default);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);opacity:.2}.dragfilter.hidden.jsx-68ea6c6d36b196a3{display:none!important}"}),r,(0,ee.tZ)("div",{className:"jsx-68ea6c6d36b196a3 "+(At()("dragfilter",{hidden:!a})||"")})]})},qg=["0.5.0","0.4.1","0.3.0","0.2.0","0.1.0","0.0.0","dev"];function Yg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $g(e){return function(e){if(Array.isArray(e))return Yg(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Yg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yg(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qg(e){return function(t){for(var r in e)t.key===r&&e[r](t)}}function Jg(e,t){Wg||(Wg=document.createElement("input")).setAttribute("type","file"),Wg.setAttribute("accept",t.join(","));var r=function(){Wg.files&&($g(Wg.files).forEach(e),Wg.removeEventListener("change",r))};Wg.addEventListener("change",r),Wg.click()}function ey(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ry(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ty(e,t,r[t])}))}return e}function ny(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||iy(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ay(e){return function(e){if(Array.isArray(e))return ey(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||iy(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iy(e,t){if(e){if("string"===typeof e)return ey(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ey(e,t):void 0}}var oy=function(e){var t,r=e.gameConf,n=e.setGameConf,a=(0,Ie.Z)().fs,i=ny(ie.useState(!1),2),o=i[0],l=i[1],c=(0,Ta.Z)({path:"scenes",initialExpanded:!0,fs:a}),s=[];if(c.children){var u=!0,d=!1,f=void 0;try{for(var p,b=c.children[Symbol.iterator]();!(u=(p=b.next()).done);u=!0){var m=p.value;m.type===Or.Tv.File&&s.push((0,_r.eb)(m.filename))}}catch(h){d=!0,f=h}finally{try{u||null==b.return||b.return()}finally{if(d)throw f}}}return(0,ee.BX)(Kg,{children:[(0,ee.tZ)(Fg,{title:"Kaboom",actions:[{icon:(0,ee.tZ)(jf.Z,{rotate:o?0:-90}),action:function(){return l(!o)}}]}),o&&(0,ee.tZ)("div",{className:"box",children:(0,ee.BX)(ye.gC,{spacing:1,children:[(0,ee.BX)(ye.Ug,{spacing:1,align:"center",children:[(0,ee.tZ)(ge.Z,{size:"small",foreground:"2",children:"Start Scene"}),(0,ee.tZ)("select",{name:"startScene",value:r.startScene,onChange:function(e){n(ry({},r,{startScene:e.currentTarget.value}))},children:s.map((function(e){return(0,ee.tZ)("option",{value:e,children:e},e)}))})]}),(0,ee.BX)(ye.Ug,{spacing:1,align:"center",children:[(0,ee.tZ)(ge.Z,{size:"small",foreground:"2",children:"Full Screen"}),(0,ee.tZ)(Mg.Z,{isOn:r.fullscreen,onChange:function(e){n(ry({},r,{fullscreen:e.target.checked}))}})]}),!r.fullscreen&&(0,ee.BX)(ye.Ug,{spacing:1,wrap:"nowrap",children:[(0,ee.tZ)(Qt.ZP,{label:"Width",name:"width",value:r.width,onChange:function(e){n(ry({},r,{width:Number(e.target.value)}))}}),(0,ee.tZ)(Qt.ZP,{label:"Height",name:"height",value:r.height,onChange:function(e){n(ry({},r,{height:Number(e.target.value)}))}})]}),(0,ee.BX)(ye.Ug,{spacing:1,align:"center",children:[(0,ee.tZ)(ge.Z,{size:"small",foreground:"2",children:"Scale"}),(0,ee.tZ)(ve.Z,{size:"medium",onClick:function(){n(ry({},r,{scale:Math.max(1,r.scale-1)}))},children:"-"}),(0,ee.tZ)(ge.Z,{size:"medium",foreground:"1",fontWeight:"medium",children:r.scale}),(0,ee.tZ)(ve.Z,{size:"medium",onClick:function(){n(ry({},r,{scale:Math.min(4,r.scale+1)}))},children:"+"})]}),(0,ee.BX)(ye.Ug,{spacing:1,align:"center",children:[(0,ee.tZ)(ge.Z,{size:"small",foreground:"2",children:"Clear Color"}),(0,ee.tZ)(Mg.Z,{isOn:null!==r.clearColor,onChange:function(e){n(ry({},r,{clearColor:e.target.checked?[0,0,0,1]:null}))}}),(0,ee.tZ)("input",{type:"color",value:r.clearColor?(t=r.clearColor,"#"+((1<<24)+(~~(255*t[0])<<16)+(~~(255*t[1])<<8)+~~(255*t[2])).toString(16).slice(1)):void 0,onChange:function(e){var t=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?t.slice(1).map((function(e){return parseInt(e,16)/255})):null}(e.target.value);t&&n(ry({},r,{clearColor:ay(t).concat([1])}))}})]}),(0,ee.BX)(ye.Ug,{spacing:1,align:"center",children:[(0,ee.tZ)(ge.Z,{size:"small",foreground:"2",children:"Debug"}),(0,ee.tZ)(Mg.Z,{isOn:r.debug,onChange:function(e){n(ry({},r,{debug:e.target.checked}))}})]}),(0,ee.BX)(ye.Ug,{spacing:1,align:"center",children:[(0,ee.tZ)(ge.Z,{size:"small",foreground:"2",children:"Version"}),(0,ee.tZ)("select",{name:"version",value:r.version,onChange:function(e){n(ry({},r,{version:e.currentTarget.value}))},children:qg.map((function(e){return(0,ee.tZ)("option",{value:e,children:e},e)}))})]})]})})]})},ly=r(91508);function cy(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return cy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cy(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var uy=function(e){var t=e.isActive,r=e.name,n=e.icon,a=e.options,i=e.onClick,o=e.onRename,l=sy(ie.useState(!1),2),c=l[0],s=l[1],u=sy(ie.useState(null),2),d=u[0],f=u[1],p=(0,Ad.Z)((function(){s(!1)}),[]),b=(0,Ad.Z)((function(){f(null)}),[]);return ie.useEffect((function(){b.current&&null!==d&&b.current.focus()}),[b,d]),(0,ee.BX)("div",{onClick:i,className:"jsx-cfaca0a0df9f2f51 "+(At()("entry",{active:t&&null===d})||""),children:[(0,ee.tZ)(re(),{id:"cfaca0a0df9f2f51",children:".entry.jsx-cfaca0a0df9f2f51{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8);color:var(--foreground-dimmer);position:relative}.entry.active.jsx-cfaca0a0df9f2f51{background:var(--accent-primary-default)!important;color:var(--white)!important;font-weight:var(--font-weight-medium)!important}.entry.jsx-cfaca0a0df9f2f51:hover{color:var(--foreground-default);background:var(--background-higher);cursor:pointer}.options-icon.jsx-cfaca0a0df9f2f51{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:var(--space-16);height:var(--space-16);opacity:0;color:var(--foreground-dimmest)}.options-icon.jsx-cfaca0a0df9f2f51:hover{color:var(--foreground-dimmest)}.options-icon.active.jsx-cfaca0a0df9f2f51{opacity:1!important;color:var(--white)!important}.entry.jsx-cfaca0a0df9f2f51:hover .options-icon.jsx-cfaca0a0df9f2f51{opacity:1}.options-box.jsx-cfaca0a0df9f2f51{position:absolute;top:var(--space-32);right:var(--space-16);padding:var(--space-4);background:var(--background-default);border:1px solid var(--outline-dimmest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-subhead-default);font-weight:var(--font-weight-regular)!important;z-index:500}.option.jsx-cfaca0a0df9f2f51{padding:var(--space-8);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);color:var(--foreground-default)}.option.danger.jsx-cfaca0a0df9f2f51{color:var(--accent-negative-default)}.option.jsx-cfaca0a0df9f2f51:hover{background:var(--background-higher)}.option.danger.jsx-cfaca0a0df9f2f51:hover{background:var(--accent-negative-default);color:var(--white)}"}),(0,ee.BX)(ye.Ug,{spacing:1,align:"center",children:[n,null===d?(0,ee.tZ)("p",{className:"jsx-cfaca0a0df9f2f51",children:r}):(0,ee.tZ)(Qt.ZP,{ref:b,value:d,onChange:function(e){f(e.currentTarget.value)},onKeyDown:Qg({Escape:function(){f(null)},Enter:function(){o&&d&&o(d),f(null)}})})]}),a&&a.length>0&&(0,ee.tZ)("div",{onClick:function(e){e.stopPropagation(),s(!c)},className:"jsx-cfaca0a0df9f2f51 "+(At()("options-icon",{active:t})||""),children:(0,ee.tZ)(ly.Z,{})}),a&&a.length>0&&c&&(0,ee.tZ)("div",{ref:p,onKeyDown:Qg({Escape:function(){s(!1)}}),className:"jsx-cfaca0a0df9f2f51 options-box",children:a.map((function(e){return e?(0,ee.tZ)("div",{onClick:function(t){t.stopPropagation(),s(!1),e.action(),"rename"===e.name&&f(r)},className:"jsx-cfaca0a0df9f2f51 "+(At()("option",{danger:e.danger})||""),children:e.name},e.name):null}))})]})};function dy(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return dy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dy(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function py(e){var t=e.close,r=e.entries,n=(0,Ie.Z)(),a=n.fs,i=n.session,o=(0,Ad.Z)(t,[]),l=(0,qt.Z)().showError,c=fy(Bg({name:""}),3),s=c[0],u=c[2];return ie.useEffect((function(){o.current&&o.current.focus()}),[o]),(0,ee.tZ)(Qt.ZP,{ref:o,name:"name",onChange:u,onKeyDown:Qg({Escape:t,Enter:function(){var e="".concat(s.name,".js"),n="scenes/".concat(e);r.includes(e)?l("scene '".concat(s.name,"' already exists")):(a.writeFile(n,Pn.Z.from("")).then((function(){i.openFile(n)})),t())}})})}var by=function(e){var t=e.gameConf,r=(0,Ie.Z)(),n=r.fs,a=r.session,i=(0,Er.Z)(),o=fy(ie.useState(!1),2),l=o[0],c=o[1],s=(0,qt.Z)().showError,u=fy(ie.useState(null),2),d=u[0],f=u[1],p=((0,Ta.Z)({path:"scenes",initialExpanded:!0,fs:n}).children||[]).filter((function(e){return e.type===Or.Tv.File})).map((function(e){return e.filename})).sort();return(0,ee.BX)(Kg,{fileDrag:{accept:["text/javascript"],onDrop:function(e){var t="scenes/".concat(e.name);p.includes(t)?s("scene '".concat((0,_r.eb)(e.name),"' already exists")):e.text().then((function(e){n.writeFile(t,Pn.Z.from(e))}))}},children:[(0,ee.tZ)(Fg,{sub:!0,title:"Scenes",actions:[{icon:(0,ee.tZ)($t.Z,{}),action:function(){return c(!0)}}]}),(0,ee.tZ)("div",{children:p.map((function(e){var r="scenes/".concat(e),o=(0,_r.eb)(e),l=[{name:"rename",action:function(){}}];return p.length>1&&l.push({name:"delete",action:function(){return f(r)},danger:!0}),(0,ee.tZ)(uy,{isActive:r===i,onClick:function(){return a.openFile(r)},onRename:function(e){n.moveFile(r,"scenes/".concat(e,".js")).then((function(e){e.error&&s("failed to rename")}))},name:o,icon:t.startScene===o&&(0,ee.tZ)(Cu.Z,{}),options:l},o)}))}),l&&(0,ee.tZ)(py,{entries:p,close:function(){return c(!1)}}),d&&(0,ee.tZ)(It.Z,{isOpen:Boolean(d),onRequestClose:function(){return f(null)},children:(0,ee.tZ)(Ag.Z,{danger:!0,prompt:"Delete scene '".concat((0,_r.eb)(d),"' ?"),desc:"Are you sure? This cannot be undone.",onCancel:function(){return f(null)},onConfirm:function(){n.deleteFile(d),f(null)}})})]})},my=r(90860),hy=r(52620),vy=r(54098),gy=r.n(vy);function yy(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return yy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yy(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var wy=function(e){var t=e.kind,r=e.renderItem,n=e.onRequestClose,a=e.onAdd,i=function(e){var r="".concat(m,"/").concat(e);gy()(r).then((function(e){return e.arrayBuffer()})).then((function(i){var o="".concat(t,"/").concat(e);l.writeFile(o,Pn.Z.from(i)).then((function(t){if(t.error)throw new Error(t.error);c.openFile(o),a&&a(e,r)})),n()})).catch(h)},o=(0,Ie.Z)(),l=o.fs,c=o.session,s=xy(ie.useState([]),2),u=s[0],d=s[1],f=xy(ie.useState(""),2),p=f[0],b=f[1],m="https://kaboomjs.com/assets/".concat(t),h=(0,qt.Z)().showError;return ie.useEffect((function(){gy()("".concat(m,"?fmt=json")).then((function(e){return e.json()})).then((function(e){return d(e)})).catch(h)}),[d,h,m]),(0,ee.BX)("div",{className:"jsx-d616aed56d26af98 assets",children:[(0,ee.BX)(ye.gC,{spacing:2,children:[(0,ee.tZ)(Ne.Z,{level:3,children:"Assets Lib (beta)"}),0===u.length?(0,ee.tZ)(ge.Z,{foreground:2,children:"Loading..."}):(0,ee.BX)(ee.HY,{children:[(0,ee.tZ)(Qt.ZP,{large:!0,label:"Search",onChange:function(e){b(e.target.value)}}),(0,ee.tZ)("div",{className:"jsx-d616aed56d26af98 box",children:u.filter((function(e){return!p||e.includes(p)})).map((function(e){return r({name:e,url:"".concat(m,"/").concat(e),add:function(){return i(e)}})}))}),(0,ee.tZ)(ve.Z,{size:"small",onClick:function(){u.length>0&&i(u[Math.floor(Math.random()*u.length)])},children:"I'm Feeling Lucky"})]})]}),(0,ee.tZ)(re(),{id:"d616aed56d26af98",children:".assets.jsx-d616aed56d26af98{padding:var(--space-24)}.box.jsx-d616aed56d26af98{width:100%;height:320px;overflow-x:hidden;overflow-y:scroll}"})]})};function ky(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jy(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function Zy(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Zy(e,t,r[t])}))}return e}function Ey(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ky(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ky(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oy(e){var t=e.url,r=e.add;return(0,ee.BX)(ee.HY,{children:[(0,ee.tZ)("img",{src:t,loading:"lazy",onClick:r,className:"jsx-4ad892a0258c4ced entry"}),(0,ee.tZ)(re(),{id:"4ad892a0258c4ced",children:".entry.jsx-4ad892a0258c4ced{padding:var(--space-16);height:120px;-ms-interpolation-mode:nearest-neighbor;image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:-o-pixelated;image-rendering:pixelated;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.entry.jsx-4ad892a0258c4ced:hover{cursor:pointer;background:var(--background-root)}"})]})}function _y(e){var t=e.close,r=e.entries,n=(0,Ie.Z)(),a=n.fs,i=n.session,o=(0,Ad.Z)(t,[]),l=ie.useRef(null),c=(0,qt.Z)().showError,s=Ey(Bg({name:"",width:0,height:0}),3),u=s[0],d=s[2];ie.useEffect((function(){l.current&&l.current.focus()}),[l]);var f=function(){var e=u.width,n=u.height;if(0!==u.name.length)if(isNaN(e)||e<=0||e>256)c("only supports sprites smaller than 256x256 yet");else if(isNaN(n)||n<=0||n>256)c("only supports sprites smaller than 256x256 yet");else{var o="".concat(u.name,".kbmsprite"),l="sprites/".concat(o);r.includes(o)?c("sprite '".concat(u.name,"' already exists")):(a.writeFile(l,Pn.Z.from(JSON.stringify({frames:[{pixels:Array(u.width*u.height*4).fill(0),width:u.width,height:u.height}],width:u.width,height:u.height}))).then((function(){i.openFile(l)})),t())}else c("invalid 'name'")};return(0,ee.BX)("div",{ref:o,onKeyDown:Qg({Escape:t,Enter:f}),className:"jsx-eaec5d5c52c23637 root",children:[(0,ee.tZ)(re(),{id:"eaec5d5c52c23637",children:".root.jsx-eaec5d5c52c23637{background:var(--background-root);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);margin:var(--space-8)auto;width:-webkit-calc(100%);width:-moz-calc(100%);width:calc(100%);padding:var(--space-16)}"}),(0,ee.BX)(ye.gC,{spacing:1,children:[(0,ee.tZ)(Qt.ZP,{label:"Name",name:"name",large:!0,ref:l,onChange:d}),(0,ee.BX)(ye.Ug,{spacing:1,wrap:"nowrap",children:[(0,ee.tZ)(Qt.ZP,{label:"Width",name:"width",large:!0,onChange:d}),(0,ee.tZ)(Qt.ZP,{label:"Height",name:"height",large:!0,onChange:d})]}),(0,ee.BX)(ye.Ug,{spacing:1,children:[(0,ee.tZ)(ve.Z,{size:"medium",onClick:t,children:"Cancel"}),(0,ee.tZ)(ve.Z,{size:"medium",color:"primary",onClick:f,children:"Create"})]})]})]})}var Cy=function(){var e=(0,Ie.Z)(),t=e.fs,r=e.session,n=(0,qt.Z)().showError,a=(0,Er.Z)(),i=Ey(ie.useState(!1),2),o=i[0],l=i[1],c=Ey(ie.useState(!1),2),s=c[0],u=c[1],d=Ey(ie.useState(null),2),f=d[0],p=d[1],b=Ey(ie.useState({}),2),m=b[0],h=b[1],v=ie.useCallback((function(e){var r=function(){var r,n=(r=J().mark((function r(){var n,a,i,o,l,c,s,u,d;return J().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n="sprites/".concat(e),r.next=3,t.stat(n);case 3:if((a=r.sent).exists){r.next=7;break}return m[e]&&h((function(t){var r=Sy({},t);return delete r[e],r})),r.abrupt("return");case 7:if(i=a.lastModified.getTime(),!m[e]||m[e].lastMod!==i){r.next=10;break}return r.abrupt("return");case 10:return r.next=12,t.readFile(n);case 12:if(!(o=r.sent).error){r.next=15;break}return r.abrupt("return");case 15:e.endsWith(".kbmsprite")?(l=o.content.toString(),c=JSON.parse(l),h((function(t){return Sy({},t,Zy({},e,{lastMod:i,img:c.preview}))}))):e.endsWith("pedit")?(s=o.content.toString(),u=JSON.parse(s),h((function(t){return Sy({},t,Zy({},e,{lastMod:i,img:u.frames[0]}))}))):(d=(0,_r.yC)(n))&&h((function(t){return Sy({},t,Zy({},e,{lastMod:i,img:"data:".concat(d,";base64,").concat(o.content.toString("base64"))}))}));case 16:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,a){var i=r.apply(e,t);function o(e){jy(i,n,a,o,l,"next",e)}function l(e){jy(i,n,a,o,l,"throw",e)}o(void 0)}))});return function(){return n.apply(this,arguments)}}();return r(),m[e]?m[e].img:null}),[m,t]),g=((0,Ta.Z)({path:"sprites",initialExpanded:!0,fs:t}).children||[]).filter((function(e){return e.type===Or.Tv.File})).map((function(e){return e.filename})).sort(),y=["image/png","image/jpeg",".pedit",".kbmsprite"],x=function(e){var r="sprites/".concat(e.name);g.includes(r)?n("sprite '".concat((0,_r.eb)(e.name),"' already exists")):e.arrayBuffer().then((function(e){t.writeFile(r,Pn.Z.from(e))}))},w=[{icon:(0,ee.tZ)(my.Z,{}),action:function(){return u(!0)}},{icon:(0,ee.tZ)(hy.Z,{}),action:function(){return Jg(x,y)}},{icon:(0,ee.tZ)($t.Z,{}),action:function(){return l(!0)}}];return(0,ee.BX)(Kg,{fileDrag:{accept:y,onDrop:x},children:[(0,ee.tZ)(Fg,{sub:!0,title:"Sprites",actions:w}),(0,ee.tZ)("div",{className:"jsx-286709118fe5858",children:g.map((function(e){var i="sprites/".concat(e),o=(0,_r.eb)(e),l=v(e);return(0,ee.tZ)(uy,{isActive:i===a,onClick:function(){return r.openFile(i)},onRename:function(r){t.moveFile(i,"sprites/".concat(r,".").concat((0,_r.r6)(e))).then((function(e){e.error&&n("failed to rename")}))},icon:(0,ee.tZ)("div",{className:"jsx-286709118fe5858 preview-img",children:l&&(0,ee.tZ)("img",{src:l,className:"jsx-286709118fe5858"})}),name:o,options:[{name:"rename",action:function(){}},{name:"delete",action:function(){return p(i)},danger:!0}]},o)}))}),o&&(0,ee.tZ)(_y,{entries:g,close:function(){return l(!1)}}),f&&(0,ee.tZ)(It.Z,{isOpen:Boolean(f),onRequestClose:function(){return p(null)},children:(0,ee.tZ)(Ag.Z,{danger:!0,prompt:"Delete sprite '".concat((0,_r.eb)(f),"' ?"),desc:"Are you sure? This cannot be undone.",onCancel:function(){return p(null)},onConfirm:function(){t.deleteFile(f),p(null)}})}),(0,ee.tZ)(It.Z,{isOpen:s,onRequestClose:function(){return u(!1)},children:(0,ee.tZ)(wy,{kind:"sprites",renderItem:Oy,onRequestClose:function(){return u(!1)}})}),(0,ee.tZ)(re(),{id:"286709118fe5858",children:".preview-img.jsx-286709118fe5858{width:var(--space-32);height:var(--space-32);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow:hidden}.preview-img.jsx-286709118fe5858 img.jsx-286709118fe5858{width:100%;-ms-interpolation-mode:nearest-neighbor;image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:-o-pixelated;image-rendering:pixelated;image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:crisp-edges}"})]})};function Ay(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Iy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ay(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ay(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ny(e){var t=e.name,r=e.url,n=e.add;return(0,ee.BX)(ye.Ug,{justify:"space-between",align:"center",children:[(0,ee.BX)(ye.gC,{spacing:1,children:[(0,ee.tZ)(ge.Z,{children:t}),(0,ee.tZ)("audio",{src:r,controls:!0})]}),(0,ee.tZ)(ve.Z,{onClick:n,children:"Import"})]})}var Ty=function(){var e=(0,Ie.Z)(),t=e.fs,r=e.session,n=(0,Er.Z)(),a=(0,qt.Z)().showError,i=Iy(ie.useState(null),2),o=i[0],l=i[1],c=Iy(ie.useState(!1),2),s=c[0],u=c[1],d=((0,Ta.Z)({path:"sounds",initialExpanded:!0,fs:t}).children||[]).filter((function(e){return e.type===Or.Tv.File})).map((function(e){return e.filename})).sort(),f=["audio/ogg","audio/mpeg","audio/wav"],p=function(e){var r="sounds/".concat(e.name);d.includes(r)?a("sound '".concat((0,_r.eb)(e.name),"' already exists")):e.arrayBuffer().then((function(e){t.writeFile(r,Pn.Z.from(e))}))},b=[{icon:(0,ee.tZ)(my.Z,{}),action:function(){return u(!0)}},{icon:(0,ee.tZ)(hy.Z,{}),action:function(){return Jg(p,f)}}];return(0,ee.BX)(Kg,{fileDrag:{accept:f,onDrop:p},children:[(0,ee.tZ)(Fg,{sub:!0,title:"Sounds",actions:b}),(0,ee.tZ)("div",{children:d.map((function(e){var i=(0,_r.eb)(e),o="sounds/".concat(e);return(0,ee.tZ)(uy,{isActive:o===n,onClick:function(){return r.openFile(o)},onRename:function(r){t.moveFile(o,"sounds/".concat(r,".").concat((0,_r.r6)(e))).then((function(e){e.error&&a("failed to rename")}))},name:i,options:[{name:"rename",action:function(){}},{name:"delete",action:function(){return l(o)},danger:!0}]},i)}))}),o&&(0,ee.tZ)(It.Z,{isOpen:Boolean(o),onRequestClose:function(){return l(null)},children:(0,ee.tZ)(Ag.Z,{danger:!0,prompt:"Delete sound '".concat((0,_r.eb)(o),"' ?"),desc:"Are you sure? This cannot be undone.",onCancel:function(){return l(null)},onConfirm:function(){t.deleteFile(o),l(null)}})}),(0,ee.tZ)(It.Z,{isOpen:s,onRequestClose:function(){return u(!1)},children:(0,ee.tZ)(wy,{kind:"sounds",renderItem:Ny,onRequestClose:function(){return u(!1)},onAdd:function(e,t){return new window.Audio(t).play()}})})]})},Py=r(58646);function Ry(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ly(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ly(e,t,r[t])}))}return e}function Uy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ry(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ry(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var zy=function(e){var t=e.wid,r=e.debugState,n=e.version,a=e.setDebugState,i=e.handleDebugStateInput,o=(0,rt.I0)(),l=Uy(ie.useState(!1),2),c=l[0],s=l[1],u=Uy(ie.useState(!1),2),d=u[0],f=u[1],p=(0,Sl.Z)(),b=ie.useCallback((function(e){p.current&&o({type:"EVAL_CODE",wid:t,clean:!1,silent:!0,code:e})}),[o,t,p]),m=(0,Py.H)(n,"0.3.0"),h=(0,Py.H)(n,"0.4.0"),v=(0,Py.H)(n,"0.5.0"),g=v?"debug":h?"dbg()":"kaboom.debug";return ie.useEffect((function(){m||b("pause(".concat(c,")"))}),[n,b,c]),ie.useEffect((function(){m&&b("".concat(g,".paused = ").concat(r.paused?"true":"false"))}),[n,b,r.paused]),ie.useEffect((function(){b("".concat(g,".showArea = ").concat(r.showArea?"true":"false"))}),[b,r.showArea]),ie.useEffect((function(){b("".concat(g,".hoverInfo = ").concat(r.hoverInfo?"true":"false"))}),[b,r.hoverInfo]),ie.useEffect((function(){b("".concat(g,".timeScale = ").concat(r.timeScale))}),[b,r.timeScale]),(0,ee.BX)(Kg,{children:[(0,ee.tZ)(Fg,{sub:!0,title:"Debug",actions:[{icon:(0,ee.tZ)(jf.Z,{rotate:d?0:-90}),action:function(){return f(!d)}}]}),d&&(0,ee.tZ)("div",{className:"box",children:(0,ee.BX)(ye.gC,{spacing:1,children:[(0,ee.tZ)(ve.Z,{size:"medium",onClick:function(){m?a(Dy({},r,{paused:!r.paused})):s(!c)},children:(m?r.paused:c)?"Unpause":"Pause"}),(0,ee.tZ)(ve.Z,{size:"medium",onClick:function(){o({type:"EVAL_CODE",wid:t,clean:!1,silent:!0,code:v?"debug.stepFrame()":"stepFrame()"})},children:"Step Frame"}),(0,ee.BX)(ye.Ug,{spacing:1,align:"center",children:[(0,ee.tZ)(ge.Z,{size:"small",foreground:"2",children:"Show Area"}),(0,ee.tZ)(Mg.Z,{isOn:r.showArea,onChange:function(e){a(Dy({},r,{showArea:e.currentTarget.checked}))}})]}),(0,ee.BX)(ye.Ug,{spacing:1,align:"center",children:[(0,ee.tZ)(ge.Z,{size:"small",foreground:"2",children:"Hover Info"}),(0,ee.tZ)(Mg.Z,{isOn:r.hoverInfo,onChange:function(e){a(Dy({},r,{hoverInfo:e.currentTarget.checked}))}})]}),(0,ee.tZ)(ge.Z,{size:"small",foreground:"2",children:"Time Scale"}),(0,ee.BX)(ye.Ug,{spacing:1,wrap:"nowrap",children:[(0,ee.tZ)("input",{type:"range",name:"timeScale",min:"0",max:"2",value:r.timeScale,step:"0.25",onChange:i}),(0,ee.tZ)(ge.Z,{size:"small",foreground:"1",children:r.timeScale})]})]})})]})},By=[{title:"Building Asteroids in Kaboom.js",url:"https://docs.replit.com/tutorials/23-build-asteroids-with-kaboom",img:"https://docs.replit.com/images/tutorials/23-asteroids-kaboom/asteroids-game.gif"},{title:"Building Snake in Kaboom.js",url:"https://docs.replit.com/tutorials/21-build-snake-with-kaboom",img:"https://docs.replit.com/images/tutorials/21-snake-kaboom/updated-graphic.gif"},{title:"Build a Space Shooter with Kaboom.js",url:"https://docs.replit.com/tutorials/24-build-space-shooter-with-kaboom",img:"https://docs.replit.com/images/tutorials/24-space-shooter-kaboom/gameplay.gif"}];function My(e){return(0,ee.BX)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"jsx-f3d930069e5caa69 entry",children:[(0,ee.tZ)("img",{src:e.img,className:"jsx-f3d930069e5caa69 img"}),(0,ee.tZ)(ge.Z,{children:e.title}),(0,ee.tZ)(re(),{id:"f3d930069e5caa69",children:".entry.jsx-f3d930069e5caa69{width:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-16);display:block}.entry.jsx-f3d930069e5caa69:hover{text-decoration:none;background:var(--background-root)}.entry.jsx-f3d930069e5caa69:focus{text-decoration:none}.img.jsx-f3d930069e5caa69{width:100%;height:120px;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}"})]})}var Fy=function(){return(0,ee.BX)("div",{className:"jsx-deb6d4daa34ff5f5 tutorials",children:[(0,ee.tZ)(Ne.Z,{level:4,children:"Kaboom Tutorials"}),(0,ee.tZ)("div",{className:"jsx-deb6d4daa34ff5f5 entries",children:By.map(My)}),(0,ee.tZ)(re(),{id:"deb6d4daa34ff5f5",children:".tutorials.jsx-deb6d4daa34ff5f5{padding:var(--space-32);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.entries.jsx-deb6d4daa34ff5f5{margin-top:var(--space-16);display:grid;grid-template-columns:repeat(2,auto)}"})]})};function Xy(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Vy(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function Gy(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Xy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xy(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Wy=Io(["KABOOM_RUN_COMPLETE"]),Ky=Wy.receiver,qy=Wy.useReceiver;function Yy(e){var t=e.wid,r=(0,rt.I0)(),n=(0,Ie.Z)().fs,a=(0,qt.Z)().showError,i=(0,Sl.Z)(),o=Hy(ie.useState(!1),2),l=o[0],c=o[1];r({type:"LOAD_FILE",wid:t,path:"scenes/main.js"});var s=qg[0],u=Hy(ie.useState({fullscreen:!0,width:240,height:240,scale:2,startScene:"main",debug:!0,clearColor:null,version:s}),2),d=u[0],f=u[1],p=Hy(Bg({showArea:!1,hoverInfo:!1,timeScale:1,paused:!1}),3),b=p[0],m=p[1],h=p[2];return ie.useEffect((function(){var e=function(){var e,t=(e=J().mark((function e(){var t,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.readFile("conf.json");case 2:if((t=e.sent)&&!t.error){e.next=6;break}return a("failed to read conf.json"),e.abrupt("return");case 6:(r=JSON.parse(t.content.toString())).version||(r.version=s),"master"===r.version&&(r.version="0.0.0"),f(r);case 10:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Vy(i,n,a,o,l,"next",e)}function l(e){Vy(i,n,a,o,l,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();e()}),[]),ie.useEffect((function(){i.current&&n.writeFile("conf.json",Pn.Z.from(JSON.stringify(d))).then((function(e){e.error&&a("failed to write config")}))}),[d]),qy((function(e){if("KABOOM_RUN_COMPLETE"===e.action.type){var n="\nkaboom.debug.showArea = ".concat(b.showArea,";\nkaboom.debug.hoverInfo = ").concat(b.hoverInfo,";\nkaboom.debug.timeScale = ").concat(b.timeScale,";\n");r({type:"EVAL_CODE",wid:t,clean:!1,code:n,silent:!0})}})),(0,ee.BX)("div",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Gy(e,t,r[t])}))}return e}({},e,{className:"jsx-15522bd5f5265180 kaboom",children:[(0,ee.BX)(ye.gC,{spacing:1,children:[(0,ee.tZ)(oy,{gameConf:d,setGameConf:f}),(0,ee.tZ)(by,{gameConf:d}),(0,ee.tZ)(Cy,{}),(0,ee.tZ)(Ty,{}),(0,ee.tZ)(zy,{wid:t,version:d.version,debugState:b,setDebugState:m,handleDebugStateInput:h}),(0,ee.tZ)(ve.Z,{fullWidth:!1,onClick:function(){return c(!0)},children:"Tutorials"}),(0,ee.tZ)(It.Z,{isOpen:l,onRequestClose:function(){return c(!1)},children:(0,ee.tZ)(Fy,{})})]}),(0,ee.tZ)(re(),{id:"15522bd5f5265180",children:'.kaboom.jsx-15522bd5f5265180{color:var(--foreground-default);background:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:var(--space-8);-webkit-border-top-right-radius:var(--border-radius-4);-moz-border-radius-topright:var(--border-radius-4);border-top-right-radius:var(--border-radius-4);-webkit-border-bottom-right-radius:var(--border-radius-4);-moz-border-radius-bottomright:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;overflow-y:scroll;width:100%}.kaboom.jsx-15522bd5f5265180>*.jsx-15522bd5f5265180{margin-bottom:var(--space-8)}.kaboom.jsx-15522bd5f5265180:last-child{margin-bottom:0}.kaboom.jsx-15522bd5f5265180 .box{padding:var(--space-8)}.kaboom.jsx-15522bd5f5265180 select{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;background:var(--background-higher);border:1px solid var(--outline-dimmest);padding:var(--space-8);color:var(--foreground-default);font-size:var(--font-size-subhead-default);font-weight:var(--font-weight-medium);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.kaboom.jsx-15522bd5f5265180 select:hover{background-color:var(--background-higher);cursor:pointer}.kaboom.jsx-15522bd5f5265180 select:focus{outline:none}.kaboom.jsx-15522bd5f5265180 input[type="range"]{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;background:var(--background-higher);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);height:var(--space-8)}.kaboom.jsx-15522bd5f5265180 input[type="range"]:focus{outline:none}.kaboom.jsx-15522bd5f5265180 input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none;background:var(--foreground-dimmest);width:var(--space-16);height:var(--space-16);-webkit-border-radius:var(--space-8);-moz-border-radius:var(--space-8);border-radius:var(--space-8)}.tut-btn.jsx-15522bd5f5265180{margin-top:var(--space-8);padding:0 var(--space-8)}'})]}))}var $y=r(76529);var Qy=function(e){var t=e.title,r=e.sub,n=void 0!==r&&r,a=e.actions,i=void 0===a?[]:a;return(0,ee.BX)(ye.Ug,{justify:"space-between",align:"center",children:[(0,ee.tZ)(re(),{id:"fd8117a15303f4ca",children:".header-action.jsx-fd8117a15303f4ca{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:var(--space-24);height:var(--space-24);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);color:var(--foreground-dimmer)}.header-action.jsx-fd8117a15303f4ca:hover{background:var(--background-higher);cursor:pointer}"}),(0,ee.tZ)(Ne.Z,{level:n?5:4,children:t}),(0,ee.tZ)(ye.Ug,{spacing:"4px",align:"center",children:i&&i.map((function(e,t){return(0,ee.tZ)("div",{onClick:e.action,className:"jsx-fd8117a15303f4ca header-action",children:e.icon},t)}))})]})};function Jy(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ex(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||rx(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tx(e){return function(e){if(Array.isArray(e))return Jy(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rx(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rx(e,t){if(e){if("string"===typeof e)return Jy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jy(e,t):void 0}}var nx=function(e){var t=e.fileDrag,r=e.children,n=ex(ie.useState(!1),2),a=n[0],i=n[1],o=ie.useRef(0);return(0,ee.BX)("div",{onDragEnter:function(e){if(t){e.preventDefault(),e.stopPropagation();var r=!0;if(e.dataTransfer.items&&e.dataTransfer.items.length>0){if(t.accept)for(var n=e.dataTransfer.items,a=0;a<n.length;a++){var l=n[a];t.accept.includes(l.type)||(r=!1)}r&&(i(!0),o.current++)}}},onDragLeave:function(e){t&&(e.preventDefault(),e.stopPropagation(),o.current--,0===o.current&&i(!1))},onDrop:function(e){t&&(e.preventDefault(),e.stopPropagation(),o.current=0,i(!1),tx(e.dataTransfer.files).filter((function(e){return t.accept.includes(e.type)})).forEach(t.onDrop))},className:"jsx-68ea6c6d36b196a3 section",children:[(0,ee.tZ)(re(),{id:"68ea6c6d36b196a3",children:".section.jsx-68ea6c6d36b196a3{position:relative;width:100%}.dragfilter.jsx-68ea6c6d36b196a3{position:absolute;width:100%;height:100%;top:0;left:0;background:var(--accent-primary-default);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);opacity:.2}.dragfilter.hidden.jsx-68ea6c6d36b196a3{display:none!important}"}),r,(0,ee.tZ)("div",{className:"jsx-68ea6c6d36b196a3 "+(At()("dragfilter",{hidden:!a})||"")})]})};function ax(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ix(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ax(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ax(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ox,lx=function(){var e=(0,Ie.Z)().session,t=ix(ie.useState(!1),2),r=t[0],n=t[1];return(0,ee.BX)(nx,{children:[(0,ee.tZ)(Qy,{title:"Kaboom",actions:[{icon:(0,ee.tZ)(jf.Z,{rotate:r?0:-90}),action:function(){return n(!r)}}]}),r&&(0,ee.BX)(ye.gC,{spacing:1,children:[(0,ee.tZ)("div",{}),(0,ee.tZ)(ve.Z,{Icon:cm.Z,size:"small",onClick:function(){return e.openFile("template.html")},children:"Edit HTML Template"})]})]})};function cx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sx(e){return function(e){if(Array.isArray(e))return cx(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return cx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cx(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ux(e){return function(t){for(var r in e)t.key===r&&e[r](t)}}function dx(e,t){ox||(ox=document.createElement("input")).setAttribute("type","file"),ox.setAttribute("accept",t.join(","));var r=function(){ox.files&&(sx(ox.files).forEach(e),ox.removeEventListener("change",r))};ox.addEventListener("change",r),ox.click()}function fx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function px(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return fx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fx(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var bx=function(e){var t=e.isActive,r=e.name,n=e.icon,a=e.options,i=e.onClick,o=e.onRename,l=px(ie.useState(!1),2),c=l[0],s=l[1],u=px(ie.useState(null),2),d=u[0],f=u[1],p=(0,Ad.Z)((function(){s(!1)}),[]),b=(0,Ad.Z)((function(){f(null)}),[]);return ie.useEffect((function(){b.current&&null!==d&&b.current.focus()}),[b,d]),(0,ee.BX)("div",{onClick:i,className:"jsx-103c0085cc983ea1 "+(At()("entry",{active:t&&null===d})||""),children:[(0,ee.BX)(ye.Ug,{spacing:1,align:"center",children:[n,null===d?(0,ee.tZ)("p",{className:"jsx-103c0085cc983ea1",children:r}):(0,ee.tZ)(Qt.ZP,{ref:b,value:d,onChange:function(e){f(e.currentTarget.value)},onKeyDown:ux({Escape:function(){f(null)},Enter:function(){o&&d&&o(d),f(null)}})})]}),a&&a.length>0&&(0,ee.tZ)("div",{onClick:function(e){e.stopPropagation(),s(!c)},className:"jsx-103c0085cc983ea1 "+(At()("options-icon",{active:t})||""),children:(0,ee.tZ)(ly.Z,{})}),a&&a.length>0&&c&&(0,ee.tZ)("div",{ref:p,onKeyDown:ux({Escape:function(){s(!1)}}),className:"jsx-103c0085cc983ea1 options-box",children:a.map((function(e){return e?(0,ee.tZ)("div",{onClick:function(t){t.stopPropagation(),s(!1),e.action(),"Rename"===e.name&&f(r)},className:"jsx-103c0085cc983ea1 "+(At()("option",{danger:e.danger})||""),children:e.name},e.name):null}))}),(0,ee.tZ)(re(),{id:"103c0085cc983ea1",children:".entry.jsx-103c0085cc983ea1{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8);color:var(--foreground-dimmer);position:relative}.entry.active.jsx-103c0085cc983ea1{background:var(--accent-primary-default)!important;color:var(--white)!important;font-weight:var(--font-weight-medium)!important}.entry.jsx-103c0085cc983ea1:hover{color:var(--foreground-default);background:var(--background-higher);cursor:pointer}.options-icon.jsx-103c0085cc983ea1{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:var(--space-16);height:var(--space-16);opacity:0;color:var(--foreground-dimmest)}.options-icon.jsx-103c0085cc983ea1:hover{color:var(--foreground-dimmest)}.options-icon.active.jsx-103c0085cc983ea1{opacity:1!important;color:var(--white)!important}.entry.jsx-103c0085cc983ea1:hover .options-icon.jsx-103c0085cc983ea1{opacity:1}.options-box.jsx-103c0085cc983ea1{position:absolute;top:var(--space-32);right:var(--space-16);padding:var(--space-4);background:var(--background-default);border:1px solid var(--outline-dimmest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-subhead-default);font-weight:var(--font-weight-regular)!important;z-index:500}.option.jsx-103c0085cc983ea1{padding:var(--space-8);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);color:var(--foreground-default)}.option.danger.jsx-103c0085cc983ea1{color:var(--accent-negative-default)}.option.jsx-103c0085cc983ea1:hover{background:var(--background-higher)}.option.danger.jsx-103c0085cc983ea1:hover{background:var(--accent-negative-default);color:var(--white)}"})]})};function mx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return mx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mx(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vx(e){var t=e.close,r=e.entries,n=(0,Ie.Z)(),a=n.fs,i=n.session,o=(0,Ad.Z)(t,[]),l=(0,qt.Z)().showError,c=hx(Bg({name:""}),3),s=c[0],u=c[2];return ie.useEffect((function(){o.current&&o.current.focus()}),[o]),(0,ee.tZ)(Qt.ZP,{ref:o,name:"name",onChange:u,onKeyDown:ux({Escape:t,Enter:function(){var e="".concat(s.name,".js"),n="code/".concat(e);r.includes(e)?l("file '".concat(s.name,"' already exists")):(a.writeFile(n,Pn.Z.from("")).then((function(){i.openFile(n)})),t())}})})}var gx=function(){var e=(0,Ie.Z)(),t=e.fs,r=e.session,n=(0,Er.Z)(),a=hx(ie.useState(!1),2),i=a[0],o=a[1],l=(0,qt.Z)().showError,c=hx(ie.useState(null),2),s=c[0],u=c[1],d=((0,Ta.Z)({path:"code",initialExpanded:!0,fs:t}).children||[]).filter((function(e){return e.type===Or.Tv.File})).map((function(e){return e.filename})).sort();return(0,ee.BX)(nx,{fileDrag:{accept:["text/javascript"],onDrop:function(e){var r="code/".concat(e.name);d.includes(r)?l("scene '".concat((0,_r.eb)(e.name),"' already exists")):e.text().then((function(e){t.writeFile(r,Pn.Z.from(e))}))}},children:[(0,ee.tZ)(Qy,{sub:!0,title:"Code",actions:[{icon:(0,ee.tZ)($t.Z,{}),action:function(){return o(!0)}}]}),(0,ee.tZ)(su.Z,{height:"4px"}),(0,ee.tZ)("div",{children:d.map((function(e){var a="code/".concat(e),i=(0,_r.eb)(e),o=[{name:"Rename",action:function(){}}];return"main"!==i&&o.push({name:"Delete",action:function(){return u(a)},danger:!0}),(0,ee.tZ)(bx,{isActive:a===n,onClick:function(){return r.openFile(a)},onRename:function(e){t.moveFile(a,"code/".concat(e,".js")).then((function(e){e.error&&l("failed to rename")}))},name:i,options:o},i)}))}),i&&(0,ee.tZ)(vx,{entries:d,close:function(){return o(!1)}}),s&&(0,ee.tZ)(It.Z,{isOpen:Boolean(s),onRequestClose:function(){return u(null)},children:(0,ee.tZ)(Ag.Z,{danger:!0,prompt:"Delete scene '".concat((0,_r.eb)(s),"' ?"),desc:"Are you sure? This cannot be undone.",onCancel:function(){return u(null)},onConfirm:function(){t.deleteFile(s),u(null)}})})]})};function yx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return yx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yx(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var wx=function(e){var t=e.kind,r=e.renderItem,n=e.onRequestClose,a=e.onAdd,i=function(e){var r="".concat(m,"/").concat(e);gy()(r).then((function(e){return e.arrayBuffer()})).then((function(i){var o="".concat(t,"/").concat(e);l.writeFile(o,Pn.Z.from(i)).then((function(t){if(t.error)throw new Error(t.error);c.openFile(o),a&&a(e,r)})),n()})).catch((function(){return h("Failed to fetch ".concat(e))}))},o=(0,Ie.Z)(),l=o.fs,c=o.session,s=xx(ie.useState([]),2),u=s[0],d=s[1],f=xx(ie.useState(""),2),p=f[0],b=f[1],m="https://kaboomjs.com/".concat(t),h=(0,qt.Z)().showError;return ie.useEffect((function(){gy()("https://kaboomjs.com/api/assets/".concat(t)).then((function(e){return e.json()})).then((function(e){return d(e)})).catch((function(){return h("Failed to fetch assets lib listing")}))}),[d,h,m]),(0,ee.BX)("div",{className:"jsx-d616aed56d26af98 assets",children:[(0,ee.BX)(ye.gC,{spacing:2,children:[(0,ee.tZ)(Ne.Z,{level:3,children:"Assets Lib (beta)"}),0===u.length?(0,ee.tZ)(ge.Z,{foreground:2,children:"Loading..."}):(0,ee.BX)(ee.HY,{children:[(0,ee.tZ)(Qt.ZP,{large:!0,label:"Search",onChange:function(e){b(e.target.value)}}),(0,ee.tZ)("div",{className:"jsx-d616aed56d26af98 box",children:u.filter((function(e){return!p||e.includes(p)})).map((function(e){return(0,ee.tZ)(ie.Fragment,{children:r({name:e,url:"".concat(m,"/").concat(e),add:function(){return i(e)}})},e)}))}),(0,ee.tZ)(ve.Z,{size:"small",onClick:function(){u.length>0&&i(u[Math.floor(Math.random()*u.length)])},children:"I'm Feeling Lucky"})]})]}),(0,ee.tZ)(re(),{id:"d616aed56d26af98",children:".assets.jsx-d616aed56d26af98{padding:var(--space-24)}.box.jsx-d616aed56d26af98{width:100%;height:320px;overflow-x:hidden;overflow-y:scroll}"})]})};function kx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jx(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function Zx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Zx(e,t,r[t])}))}return e}function Ex(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||_x(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ox(e){return function(e){if(Array.isArray(e))return kx(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_x(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _x(e,t){if(e){if("string"===typeof e)return kx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kx(e,t):void 0}}function Cx(e){var t=e.url,r=e.add;return(0,ee.BX)(ee.HY,{children:[(0,ee.tZ)("img",{src:t,loading:"lazy",onClick:r,className:"jsx-4ad892a0258c4ced entry"}),(0,ee.tZ)(re(),{id:"4ad892a0258c4ced",children:".entry.jsx-4ad892a0258c4ced{padding:var(--space-16);height:120px;-ms-interpolation-mode:nearest-neighbor;image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:-o-pixelated;image-rendering:pixelated;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.entry.jsx-4ad892a0258c4ced:hover{cursor:pointer;background:var(--background-root)}"})]})}function Ax(e){var t=e.close,r=e.entries,n=(0,Ie.Z)(),a=n.fs,i=n.session,o=(0,Ad.Z)(t,[]),l=ie.useRef(null),c=(0,qt.Z)().showError,s=Ex(ie.useState({name:"",width:32,height:32}),2),u=s[0],d=s[1];ie.useEffect((function(){l.current&&l.current.focus()}),[l]);var f=function(){if(0!==u.name.length){var e=u.width,n=u.height;if(isNaN(e)||isNaN(n)||e<=0||n<=0)c("invalid width / height!");else if(e>256||n>256)c("only supports sprites smaller than 256x256 yet");else{var o="".concat(u.name,".pedit"),l="sprites/".concat(o);r.includes(o)?c("sprite '".concat(u.name,"' already exists")):(a.writeFile(l,Pn.Z.from(JSON.stringify({fromKaboom:!0,width:u.width,height:u.height}))).then((function(){i.openFile(l)})),t())}}else c("invalid 'name'")};return(0,ee.BX)("div",{ref:o,onKeyDown:ux({Escape:t,Enter:f}),className:"jsx-a1d2f6333860f5ac dialog",children:[(0,ee.BX)(ye.gC,{spacing:1,children:[(0,ee.tZ)(Qt.ZP,{label:"Name",name:"name",large:!0,ref:l,value:u.name,onChange:function(e){d(Sx({},u,{name:e.target.value}))}}),(0,ee.BX)(ye.Ug,{spacing:1,wrap:"nowrap",children:[(0,ee.tZ)(Qt.ZP,{label:"Width",name:"width",large:!0,value:u.width,onChange:function(e){return d(Sx({},u,{width:parseInt(e.target.value,10)||0}))}}),(0,ee.tZ)(Qt.ZP,{label:"Height",name:"height",large:!0,value:u.height,onChange:function(e){return d(Sx({},u,{height:parseInt(e.target.value,10)||0}))}})]}),(0,ee.BX)(ye.Ug,{spacing:1,children:[(0,ee.tZ)(ve.Z,{size:"medium",onClick:t,children:"Cancel"}),(0,ee.tZ)(ve.Z,{size:"medium",color:"primary",onClick:f,children:"Create"})]})]}),(0,ee.tZ)(re(),{id:"a1d2f6333860f5ac",children:".dialog.jsx-a1d2f6333860f5ac{background:var(--background-root);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);margin:var(--space-8)auto;width:-webkit-calc(100%);width:-moz-calc(100%);width:calc(100%);padding:var(--space-16)}"})]})}var Ix=function(){var e=(0,Ie.Z)(),t=e.fs,r=e.session,n=(0,qt.Z)().showError,a=(0,Er.Z)(),i=Ex(ie.useState(!1),2),o=i[0],l=i[1],c=Ex(ie.useState(!1),2),s=c[0],u=c[1],d=Ex(ie.useState(null),2),f=d[0],p=d[1],b=Ex(ie.useState({}),2),m=b[0],h=b[1],v=(0,uu.Z)(),g=ie.useCallback((function(e){var r=function(){var r,n=(r=J().mark((function r(){var n,a,i,o,l,c,s;return J().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n="sprites/".concat(e),r.next=3,t.stat(n);case 3:if((a=r.sent).exists){r.next=7;break}return m[e]&&h((function(t){var r=Sx({},t);return delete r[e],r})),r.abrupt("return");case 7:if(i=a.lastModified.getTime(),!m[e]||m[e].lastMod!==i){r.next=10;break}return r.abrupt("return");case 10:return r.next=12,t.readFile(n);case 12:if(!(o=r.sent).error){r.next=15;break}return r.abrupt("return");case 15:e.endsWith("pedit")?(l=o.content.toString(),(c=JSON.parse(l)).fromKaboom||h((function(t){return Sx({},t,Zx({},e,{lastMod:i,img:c.frames[0]}))}))):(s=(0,_r.yC)(n))&&h((function(t){return Sx({},t,Zx({},e,{lastMod:i,img:"data:".concat(s,";base64,").concat(o.content.toString("base64"))}))}));case 16:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,a){var i=r.apply(e,t);function o(e){jx(i,n,a,o,l,"next",e)}function l(e){jx(i,n,a,o,l,"throw",e)}o(void 0)}))});return function(){return n.apply(this,arguments)}}();return r(),m[e]?m[e].img:null}),[m,t]),y=((0,Ta.Z)({path:"sprites",initialExpanded:!0,fs:t}).children||[]).filter((function(e){return e.type===Or.Tv.File})).map((function(e){return e.filename})).sort(),x=["image/png","image/jpeg",".pedit"],w=function(e){var r="sprites/".concat(e.name);if(y.includes(r))return n("sprite '".concat((0,_r.eb)(e.name),"' already exists"));e.arrayBuffer().then((function(e){t.writeFile(r,Pn.Z.from(e))}))},k=[{icon:(0,ee.tZ)(my.Z,{}),action:function(){return u(!0)}},{icon:(0,ee.tZ)(hy.Z,{}),action:function(){return dx(w,x)}},{icon:(0,ee.tZ)($t.Z,{}),action:function(){return l(!0)}}];return(0,ee.BX)(nx,{fileDrag:{accept:x,onDrop:w},children:[(0,ee.tZ)(Qy,{sub:!0,title:"Sprites",actions:k}),(0,ee.tZ)(su.Z,{height:"4px"}),(0,ee.tZ)("div",{className:"jsx-286709118fe5858",children:y.map((function(e){var i="sprites/".concat(e),o=(0,_r.r6)(e),l=(0,_r.eb)(e),c=g(e),s=v?[{name:"Insert load code",action:function(){var e="".concat("pedit"===o?"loadPedit":"loadSprite","(").concat(JSON.stringify(l),", ").concat(JSON.stringify(i),");");v({code:e})}}]:[];return(0,ee.tZ)(bx,{isActive:i===a,onClick:function(){return r.openFile(i)},onRename:function(e){t.moveFile(i,"sprites/".concat(e,".").concat(o)).then((function(e){e.error&&n("failed to rename")}))},icon:(0,ee.tZ)("div",{className:"jsx-286709118fe5858 preview-img",children:c&&(0,ee.tZ)("img",{src:c,className:"jsx-286709118fe5858"})}),name:l,options:Ox(s).concat([{name:"Rename",action:function(){}},{name:"Delete",action:function(){return p(i)},danger:!0}])},l)}))}),o&&(0,ee.tZ)(Ax,{entries:y,close:function(){return l(!1)}}),f&&(0,ee.tZ)(It.Z,{isOpen:Boolean(f),onRequestClose:function(){return p(null)},children:(0,ee.tZ)(Ag.Z,{danger:!0,prompt:"Delete sprite '".concat((0,_r.eb)(f),"' ?"),desc:"Are you sure? This cannot be undone.",onCancel:function(){return p(null)},onConfirm:function(){t.deleteFile(f),p(null)}})}),(0,ee.tZ)(It.Z,{isOpen:s,onRequestClose:function(){return u(!1)},children:(0,ee.tZ)(wx,{kind:"sprites",renderItem:Cx,onRequestClose:function(){return u(!1)}})}),(0,ee.tZ)(re(),{id:"286709118fe5858",children:".preview-img.jsx-286709118fe5858{width:var(--space-32);height:var(--space-32);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow:hidden}.preview-img.jsx-286709118fe5858 img.jsx-286709118fe5858{width:100%;-ms-interpolation-mode:nearest-neighbor;image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:-o-pixelated;image-rendering:pixelated;image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:crisp-edges}"})]})};function Nx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Tx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||Rx(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Px(e){return function(e){if(Array.isArray(e))return Nx(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Rx(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rx(e,t){if(e){if("string"===typeof e)return Nx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nx(e,t):void 0}}function Lx(e){var t=e.name,r=e.url,n=e.add;return(0,ee.BX)(ye.Ug,{justify:"space-between",align:"center",children:[(0,ee.BX)(ye.gC,{spacing:1,children:[(0,ee.tZ)(ge.Z,{children:t}),(0,ee.tZ)("audio",{src:r,controls:!0})]}),(0,ee.tZ)(ve.Z,{onClick:n,children:"Import"})]})}var Dx=function(){var e=(0,Ie.Z)(),t=e.fs,r=e.session,n=(0,Er.Z)(),a=(0,qt.Z)().showError,i=Tx(ie.useState(null),2),o=i[0],l=i[1],c=Tx(ie.useState(!1),2),s=c[0],u=c[1],d=(0,uu.Z)(),f=((0,Ta.Z)({path:"sounds",initialExpanded:!0,fs:t}).children||[]).filter((function(e){return e.type===Or.Tv.File})).map((function(e){return e.filename})).sort(),p=["audio/ogg","audio/mpeg","audio/wav"],b=function(e){var r="sounds/".concat(e.name);if(f.includes(r))return a("sound '".concat((0,_r.eb)(e.name),"' already exists"));e.arrayBuffer().then((function(e){t.writeFile(r,Pn.Z.from(e))}))},m=[{icon:(0,ee.tZ)(my.Z,{}),action:function(){return u(!0)}},{icon:(0,ee.tZ)(hy.Z,{}),action:function(){return dx(b,p)}}];return(0,ee.BX)(nx,{fileDrag:{accept:p,onDrop:b},children:[(0,ee.tZ)(Qy,{sub:!0,title:"Sounds",actions:m}),(0,ee.tZ)(su.Z,{height:"4px"}),(0,ee.tZ)("div",{children:f.map((function(e){var i=(0,_r.eb)(e),o="sounds/".concat(e),c=d?[{name:"Insert load code",action:function(){return d({code:"loadSound(".concat(JSON.stringify(i),", ").concat(JSON.stringify(o),");")})}}]:[];return(0,ee.tZ)(bx,{isActive:o===n,onClick:function(){return r.openFile(o)},onRename:function(r){t.moveFile(o,"sounds/".concat(r,".").concat((0,_r.r6)(e))).then((function(e){e.error&&a("failed to rename")}))},name:i,options:Px(c).concat([{name:"Rename",action:function(){}},{name:"Delete",action:function(){return l(o)},danger:!0}])},i)}))}),o&&(0,ee.tZ)(It.Z,{isOpen:Boolean(o),onRequestClose:function(){return l(null)},children:(0,ee.tZ)(Ag.Z,{danger:!0,prompt:"Delete sound '".concat((0,_r.eb)(o),"' ?"),desc:"Are you sure? This cannot be undone.",onCancel:function(){return l(null)},onConfirm:function(){t.deleteFile(o),l(null)}})}),(0,ee.tZ)(It.Z,{isOpen:s,onRequestClose:function(){return u(!1)},children:(0,ee.tZ)(wx,{kind:"sounds",renderItem:Lx,onRequestClose:function(){return u(!1)},onAdd:function(e,t){return new window.Audio(t).play()}})})]})},Ux=r(19826);function zx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Bx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return zx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zx(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mx(e){var t=e.file,r=e.name,n=(0,Ie.Z)().session,a=Xa()===t;return(0,ee.BX)("div",{onClick:function(){n.setPreviewedFile(null),n.setPreviewedFile(t)},className:"jsx-148e6ca45d3ccd5a entry",children:[(0,ee.BX)(ye.Ug,{spacing:1,align:"center",children:[a?(0,ee.tZ)(Qe.Z,{}):(0,ee.tZ)(Ux.Z,{}),(0,ee.tZ)(ge.Z,{foreground:a?1:2,fontWeight:a?"medium":"regular",children:null!==r&&void 0!==r?r:(0,_r.eb)(t)})]}),(0,ee.tZ)(re(),{id:"148e6ca45d3ccd5a",children:".entry.jsx-148e6ca45d3ccd5a{cursor:pointer}"})]})}var Fx=function(){var e=Bx(ie.useState(!0),2),t=e[0],r=e[1],n=Bx(ie.useState(!1),2),a=n[0],i=n[1],o=(0,Ie.Z)().fs,l=(0,rt.I0)(),c=Df(),s=(0,Ta.Z)({path:"learn",initialExpanded:!0,fs:o});ie.useEffect((function(){var e=!1;return o.stat("README.md").then((function(t){e||t.exists&&(i(!0),l({wid:c,type:"LOAD_FILE",path:"README.md"}))})),function(){e=!0}}),[]);var u=(s.children||[]).filter((function(e){return e.type===Or.Tv.File&&e.filename.endsWith(".md")})).map((function(e){return e.filename})).sort();return ie.useEffect((function(){u.forEach((function(e){l({wid:c,type:"LOAD_FILE",path:"learn/".concat(e)})}))}),[u]),(0,ee.BX)(nx,{children:[(0,ee.tZ)(Qy,{sub:!0,title:"Learn",actions:[{icon:(0,ee.tZ)(jf.Z,{rotate:t?0:-90}),action:function(){return r(!t)}}]}),t&&(0,ee.BX)(ye.gC,{spacing:1,children:[(0,ee.tZ)("div",{}),a&&(0,ee.tZ)(Mx,{name:"Intro",file:"README.md"}),u.map((function(e){return(0,ee.tZ)(Mx,{file:"learn/".concat(e)},e)}))]})]})};function Xx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Vx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Xx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xx(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hx(e){var t=Gx(ie.useState(!1),2),r=t[0],n=t[1];return(0,ee.BX)("div",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Vx(e,t,r[t])}))}return e}({},e,{className:"jsx-ea8bf160b3a7c960 kaboom",children:[(0,ee.BX)(ye.gC,{spacing:1,children:[(0,ee.tZ)(lx,{}),(0,ee.tZ)(gx,{}),(0,ee.tZ)(Ix,{}),(0,ee.tZ)(Dx,{}),(0,ee.tZ)(Fx,{}),(0,ee.tZ)("div",{className:"jsx-ea8bf160b3a7c960"}),(0,ee.tZ)(ve.Z,{Icon:Dh.Z,size:"small",onClick:function(){return window.open("https://kaboomjs.com")},children:"Docs"}),(0,ee.tZ)(ve.Z,{Icon:Dh.Z,size:"small",onClick:function(){return window.open("https://kaboomjs.com/play")},children:"Examples"}),(0,ee.tZ)(ve.Z,{Icon:$y.Z,size:"small",onClick:function(){return n(!0)},children:"What's new"})]}),(0,ee.tZ)(It.Z,{isOpen:r,onRequestClose:function(){return n(!1)},children:(0,ee.tZ)(Et.Z,{css:[Ze.l0.colWithGap(16),Ze.l0.p(32)],children:(0,ee.tZ)(jl.Z,{children:'\n# New Kaboom Workspace\n\n- **No weird delay when run after editing.** Just press Cmd + S to refresh webview and quickly iterate!\n- **Helpful error reporting.** No need to go into browser console every time. The kaboom console displays your errors nicely.\n- **Support NPM packages and typescript by default.** Kaboom dev server builds your code with esbuild on the fly.\n- **Replit DB and Auth integration.** Make a score board even multiplayer with DB and Auth!\n- **In editor tutorial.** The template comes with a nice intro tutorial which you can learn and code along.\n- **Autocomplete.** Updated kaboom lib comes with detailed jsdoc for every function. No need to pull your hair out to figure out how certain functions work!\n- **HTML template.** Easily customize the html for your game.\n- **Total control over which version of Kaboom you use.** it\'s managed by NPM.\n- **Assets Library** Grab some quick assets to test out a game idea.\n- **Transparent dev server.** The dev server scripts are just in the repl, customize them or toss them out if you want to. Or turn it into a multiplayer game server!\n- **New library version** The template comes with kaboom2000 (beta), with bunch of [new stuff and improvements](https://github.com/replit/kaboom/blob/master/CHANGELOG.md)\n\n## Migration Guide\n\n- The kaboom template now will not generate the initializing and assets loading code (`kaboom()`, `loadSprite()` etc.) for you, allowing more customized setup, and making it more portable with using kaboom outside replit.\n\n```js\nimport kaboom from "kaboom";\n\n// initialize context\nkaboom();\n\n// load assets\nloadSprite("bean", "sprites/bean.png");\nloadSound("coin", "sounds/coin.mp3");\n\n// the rest is the same\nconst player = add([\n\tsprite("bean"),\n\tarea(),\n]);\n```\n\nFor easier assets loading, use the "Insert load code" option in the asset entry option menu.\n\n- The template by default is running `kaboom@next`, which is currently the beta version of kaboom2000. It contains breaking changes, all listed in [CHANGELOG.md](https://github.com/replit/kaboom/blob/master/CHANGELOG.md). If you don\'t feel like migrating now, you can always `npm install kaboom@5.1`\n'})})}),(0,ee.tZ)(re(),{id:"ea8bf160b3a7c960",children:".kaboom.jsx-ea8bf160b3a7c960{background:var(--background-default);padding:var(--space-8);-webkit-border-top-right-radius:var(--border-radius-4);-moz-border-radius-topright:var(--border-radius-4);border-top-right-radius:var(--border-radius-4);-webkit-border-bottom-right-radius:var(--border-radius-4);-moz-border-radius-bottomright:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);overflow-y:scroll;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}"})]}))}var Wx=r(8132),Kx={styles:(0,ee.tZ)(re(),{id:"223f8ac8383e5040",children:"*.jsx-223f8ac8383e5040{max-width:100%}"}),className:"jsx-223f8ac8383e5040"};function qx(e){var t=e.children;return(0,ee.BX)("div",{className:"jsx-f9a53312d33ef027 enveditor",children:[(0,ee.BX)(ye.gC,{spacing:2,align:"stretch",justify:"center",className:Kx.className,children:[(0,ee.BX)(ye.gC,{spacing:1,align:"stretch",justify:"center",className:Kx.className,children:[(0,ee.tZ)(Ne.Z,{truncate:!0,level:4,children:"Secrets"}),(0,ee.tZ)(ge.Z,{truncate:!0,size:"small",foreground:"2",children:"System environment variables"})]}),t]}),Kx.styles,(0,ee.tZ)(re(),{id:"f9a53312d33ef027",children:".enveditor.jsx-f9a53312d33ef027{height:100%;width:100%;-webkit-border-top-right-radius:var(--border-radius-4);-moz-border-radius-topright:var(--border-radius-4);border-top-right-radius:var(--border-radius-4);background-color:var(--background-default);padding:var(--space-8);overflow:auto}"})]})}function Yx(){var e=(0,Ie.Z)().fs;return(0,ee.tZ)(qx,{children:(0,ee.tZ)(Wx.Z,{fs:e})})}var $x=r(6763);function Qx(e){return(0,ee.BX)(ee.HY,{children:[(0,ee.tZ)(Ne.Z,{truncate:!0,level:5,children:"Call stack"}),(0,ee.tZ)(ye.gC,{align:"stretch",constrainWidth:!0,children:e.frames.map((function(t){return(0,ee.tZ)(Jx,{frame:t,onClick:e.onFrameClick},t.id)}))})]})}function Jx(e){var t,r,n=e.frame,a=e.onClick,i=null===(t=n.source)||void 0===t?void 0:t.name,o=null===(r=n.source)||void 0===r?void 0:r.path,l=i&&(0,$x.om)(i),c=o&&(0,$x.om)(o),s=o&&(0,$x.IT)(o);return(0,ee.BX)(ee.HY,{children:[(0,ee.BX)("div",{onClick:function(){return s&&a(s,n.line)},className:"jsx-c66d0af1ad52f929 frame",children:[(0,ee.tZ)("div",{className:"jsx-c66d0af1ad52f929 label name",children:n.name}),(0,ee.BX)("div",{className:"jsx-c66d0af1ad52f929 label path",children:[(0,ee.tZ)("span",{className:"jsx-c66d0af1ad52f929 line",children:n.line}),l||c||i||o]})]}),(0,ee.tZ)(re(),{id:"c66d0af1ad52f929",children:".frame.jsx-c66d0af1ad52f929{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;max-width:100%;height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-small);font-family:var(--font-family-code)}.frame.jsx-c66d0af1ad52f929:hover{background-color:var(--background-higher);color:var(--foreground-default)}.label.jsx-c66d0af1ad52f929{font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8);overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}.name.jsx-c66d0af1ad52f929{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;background-color:var(--background-higher);padding:1px 2px;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.path.jsx-c66d0af1ad52f929{-webkit-flex:0 1 auto;-ms-flex:0 1 auto;flex:0 1 auto}.line.jsx-c66d0af1ad52f929{display:inline-block;margin-right:var(--space-8);background-color:var(--background-higher);padding:1px 2px;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}"})]})}function ew(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ew(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ew(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rw(e){var t=[],r=(0,Ei.Z)("flag-debugger-v2"),n=!0,a=!1,i=void 0;try{for(var o,l=e.breakpoints[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var c=tw(o.value,2),s=c[0],u=c[1],d=!0,f=!1,p=void 0;try{for(var b,m=u[Symbol.iterator]();!(d=(b=m.next()).done);d=!0){var h=b.value;t.push((0,ee.tZ)(nw,{breakpoint:h,file:s,line:h.line,verified:h.verified,supportsLogPoints:r,logMessage:h.logMessage,onClick:e.onBreakpointClick,onUpdate:e.onUpdate},"".concat(s,":").concat(h.line,":").concat(h.pid1Id,":").concat(h.dapId)))}}catch(v){f=!0,p=v}finally{try{d||null==m.return||m.return()}finally{if(f)throw p}}}}catch(v){a=!0,i=v}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return(0,ee.BX)(ee.HY,{children:[(0,ee.tZ)(Ne.Z,{truncate:!0,level:5,children:"Breakpoints"}),t.length>0?(0,ee.tZ)(ye.gC,{align:"stretch",constrainWidth:!0,children:t}):(0,ee.BX)(ge.Z,{size:"xsmall",foreground:2,children:["To start, add a breakpoint ",(0,ee.tZ)("span",{className:"jsx-223474dbb82a953c breakpoint"})," by clicking on the line number.",(0,ee.tZ)(re(),{id:"223474dbb82a953c",children:".breakpoint.jsx-223474dbb82a953c{display:inline-block;background-color:var(--accent-primary-default);-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:8px;height:8px}"})]})]})}function nw(e){var t=e.breakpoint,r=e.file,n=e.line,a=e.verified,i=e.supportsLogPoints,o=e.logMessage,l=e.onClick,c=e.onUpdate,s=(0,$x.om)(r),u=tw(ie.useState(Boolean(o)),2),d=u[0],f=u[1],p=tw(ie.useState(null!==o&&void 0!==o?o:""),2),b=p[0],m=p[1];return(0,ee.BX)(ee.HY,{children:[(0,ee.BX)(ye.gC,{spacing:1,align:"stretch",children:[(0,ee.BX)("div",{className:"jsx-dc2453dcc3d392c8 breakpoint",children:[(0,ee.BX)("div",{onClick:function(){l(r,n)},className:"jsx-dc2453dcc3d392c8 frame",children:[(0,ee.tZ)("div",{className:"jsx-dc2453dcc3d392c8 "+(At()("circle",{verified:a})||"")}),(0,ee.tZ)("div",{className:"jsx-dc2453dcc3d392c8 line",children:n}),(0,ee.tZ)("div",{className:"jsx-dc2453dcc3d392c8 location",children:(0,ee.tZ)("span",{className:"jsx-dc2453dcc3d392c8 path",children:s||r})})]}),i&&(0,ee.tZ)(jf.Z,{size:16,className:"chevron",rotate:d?180:0,onClick:function(){return f(!d)}})]}),d&&(0,ee.BX)(ye.gC,{spacing:1,align:"stretch",children:[(0,ee.tZ)(Qt.ZP,{label:"log message",name:"logMessage",value:b,onChange:function(e){return m(e.currentTarget.value)},spellCheck:!1}),(0,ee.tZ)(ve.Z,{onClick:function(){return c({breakpoint:t,logMessage:b})},children:"Save"})]})]}),(0,ee.tZ)(re(),{id:"dc2453dcc3d392c8",children:".breakpoint.jsx-dc2453dcc3d392c8{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;max-width:100%;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.frame.jsx-dc2453dcc3d392c8{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-default)}.frame.jsx-dc2453dcc3d392c8:hover{background-color:var(--background-higher);color:var(--foreground-default)}.circle.jsx-dc2453dcc3d392c8{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;background-color:var(--accent-primary-default);-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:11px;height:11px;margin-left:var(--space-8);margin-right:var(--space-8);opacity:.5}.verified.jsx-dc2453dcc3d392c8{opacity:1}.line.jsx-dc2453dcc3d392c8{font-family:var(--font-family-code);background-color:var(--background-higher);padding:1px 2px;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.location.jsx-dc2453dcc3d392c8{font-family:var(--font-family-code);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0;font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8)}.path.jsx-dc2453dcc3d392c8{overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}.chevron.jsx-dc2453dcc3d392c8{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;padding:var(--space-16)}"})]})}function aw(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function iw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return aw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aw(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ow(e){var t=iw(ie.useState(!1),2),r=t[0],n=t[1],a=[],i=[];if(e.variables.length>0){var o=e.variables[0].parentVariableReference,l=!0,c=!1,s=void 0;try{for(var u,d=e.variables[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;f.parentVariableReference===o?a.push(f):i.push(f)}}catch(p){c=!0,s=p}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}return(0,ee.BX)(ee.HY,{children:[(0,ee.tZ)(Ne.Z,{truncate:!0,level:5,children:"Variables"}),(0,ee.BX)(ye.gC,{align:"stretch",constrainWidth:!0,children:[a.map((function(t){return(0,ee.tZ)(lw,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)})),i.length>0&&(0,ee.BX)(ee.HY,{children:[(0,ee.BX)(ve.Z,{filled:!1,border:!1,onClick:function(){return n((function(e){return!e}))},children:["See ",r?"Less":"More"]}),r&&i.map((function(t){return(0,ee.tZ)(lw,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)}))]})]})]})}function lw(e){var t=e.depth,r=e.variable,n=e.client,a=iw(ie.useState(!1),2),i=a[0],o=a[1],l=iw(ie.useState([]),2),c=l[0],s=l[1];return ie.useEffect((function(){i&&n.fetchVariables(r.variablesReference).then((function(e){return s(e)}),(function(){return o(!1)}))}),[i,n,r.variablesReference]),(0,ee.BX)(ee.HY,{children:[(0,ee.BX)("div",{onClick:function(){r.variablesReference>0&&o((function(e){return!e}))},className:re().dynamic([["9fc0008b41b19bc3",[i?0:-90,t]]])+" variable",children:[(0,ee.tZ)("div",{className:re().dynamic([["9fc0008b41b19bc3",[i?0:-90,t]]])+" gutter",children:r.variablesReference>0?(0,ee.tZ)("div",{className:re().dynamic([["9fc0008b41b19bc3",[i?0:-90,t]]])+" chevron",children:(0,ee.tZ)(jf.Z,{})}):null}),(0,ee.BX)("div",{className:re().dynamic([["9fc0008b41b19bc3",[i?0:-90,t]]])+" label",children:[r.name,r.type&&(0,ee.BX)("span",{className:re().dynamic([["9fc0008b41b19bc3",[i?0:-90,t]]])+" type",children:[" ",r.type]}),""!==r.value&&": "]}),(0,ee.tZ)("div",{className:re().dynamic([["9fc0008b41b19bc3",[i?0:-90,t]]])+" label value",children:r.value})]}),i?(0,ee.tZ)(ye.gC,{align:"stretch",constrainWidth:!0,children:c.map((function(e){return(0,ee.tZ)(lw,{depth:t+1,variable:e,client:n},e.parentVariableReference+"/"+e.name)}))}):null,(0,ee.tZ)(re(),{id:"9fc0008b41b19bc3",dynamic:[i?0:-90,t],children:".chevron.__jsx-style-dynamic-selector{-webkit-transform:rotate(".concat(i?0:-90,"deg);-moz-transform:rotate(").concat(i?0:-90,"deg);-ms-transform:rotate(").concat(i?0:-90,"deg);-o-transform:rotate(").concat(i?0:-90,"deg);transform:rotate(").concat(i?0:-90,"deg);-webkit-transition:.1s -webkit-transform;-moz-transition:.1s -moz-transform;-o-transition:.1s -o-transform;transition:.1s -webkit-transform;transition:.1s -moz-transform;transition:.1s -o-transform;transition:.1s transform}.gutter.__jsx-style-dynamic-selector{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;width:var(--space-16);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.variable.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;max-width:100%;height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-default);padding-left:-webkit-calc(").concat(t," *var(--space-16));padding-left:-moz-calc(").concat(t," *var(--space-16));padding-left:calc(").concat(t," *var(--space-16));font-family:var(--font-family-code)}.variable.__jsx-style-dynamic-selector:hover{background-color:var(--background-higher);color:var(--foreground-default)}.label.__jsx-style-dynamic-selector{font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8);overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto}.type.__jsx-style-dynamic-selector{opacity:.5}.value.__jsx-style-dynamic-selector{text-align:right;-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1}")})]})}function cw(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sw(e){return(0,ee.tZ)(Oe.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){cw(e,t,r[t])}))}return e}({},e,{children:(0,ee.tZ)("path",{d:"M11 7L6 12L11 17M18 7L13 12L18 17",strokeLinecap:"round",strokeLinejoin:"round"})}))}var uw=r(64396),dw=r(6407);function fw(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pw(e){return(0,ee.tZ)(Oe.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){fw(e,t,r[t])}))}return e}({},e,{children:(0,ee.tZ)("path",{d:"M14 9L9 4M9 4L4 9M9 4L9 16C9 17.0609 9.42143 18.0783 10.1716 18.8284C10.9217 19.5786 11.9391 20 13 20L20 20",strokeLinecap:"round",strokeLinejoin:"round"})}))}var bw=r(63051),mw=r(61036),hw=r(1517);function vw(e){var t=e.client,r=(0,fn.Z)(null===t||void 0===t?void 0:t.state),n=(0,fn.Z)(null===t||void 0===t?void 0:t.supportsStepBack);return(0,ee.BX)(Et.Z,{css:Ze.l0.rowWithGap(2),children:[n&&(0,ee.BX)(ee.HY,{children:[(0,ee.tZ)(Kr.Z,{size:40,disabled:!t||"paused"!==r,onClick:function(){return null===t||void 0===t?void 0:t.reverseContinue()},alt:"Last Breakpoint",tooltipText:"Last Breakpoint",tooltipPlacement:"bottom",children:(0,ee.tZ)(sw,{})}),(0,ee.tZ)(Kr.Z,{size:40,disabled:!t||"paused"!==r,onClick:function(){return null===t||void 0===t?void 0:t.back()},alt:"Step Back",tooltipText:"Step Back",tooltipPlacement:"bottom",children:(0,ee.tZ)(uw.Z,{})})]}),(0,ee.tZ)(yw,{stop:function(){return null===t||void 0===t?void 0:t.stop()},start:function(){return null===t||void 0===t?void 0:t.start()},state:r}),(0,ee.tZ)(Kr.Z,{size:40,disabled:!t||"paused"!==r,onClick:function(){return null===t||void 0===t?void 0:t.next()},alt:"Next Step",tooltipText:"Next Step",tooltipPlacement:"bottom",children:(0,ee.tZ)(bw.Z,{})}),(0,ee.tZ)(Kr.Z,{size:40,disabled:!t||"paused"!==r,onClick:function(){return null===t||void 0===t?void 0:t.skip()},alt:"Skip Step",tooltipText:"Skip Step",tooltipPlacement:"bottom",children:(0,ee.tZ)(pw,{rotate:90})}),(0,ee.tZ)(Kr.Z,{size:40,disabled:!t||"paused"!==r,onClick:function(){return null===t||void 0===t?void 0:t.continue()},alt:"Next Breakpoint",tooltipText:"Next Breakpoint",tooltipPlacement:"bottom",children:(0,ee.tZ)(mw.Z,{})})]})}var gw=(0,Ep.F4)({"0%":{opacity:.2},"50%":{opacity:1},"100%":{opacity:.2}});function yw(e){var t=e.state,r=e.start,n=e.stop;return"terminated"===t?(0,ee.tZ)(Kr.Z,{css:Ze.l0.color.accentPrimaryDefault,size:40,onClick:r,alt:"Run",tooltipText:"Run",tooltipPlacement:"bottom",children:(0,ee.tZ)(Cu.Z,{filled:!0})}):"stopping"===t||null===t?(0,ee.tZ)(Kr.Z,{size:40,disabled:!0,alt:"Loading",tooltipText:"Loading",tooltipPlacement:"bottom",children:(0,ee.tZ)(hw.Z,{})}):(0,ee.tZ)(Kr.Z,{css:"initializing"===t||"preinitializing"===t?[Ze.l0.color.foregroundDimmer,{animationName:gw.toString(),animationDuration:"2s",animationIterationCount:"infinite"}]:Ze.l0.color.accentPrimaryDefault,size:40,onClick:n,alt:"Stop",tooltipText:"Stop",tooltipPlacement:"bottom",children:(0,ee.tZ)(dw.Z,{filled:!0})})}function xw(e){var t=e.children;return(0,ee.BX)(pn.Z,{background:"default",css:[Ze.l0.height("100%"),Ze.l0.width("100%"),Ze.l0.p(8),Ze.l0.overflow("auto"),{borderTopRightRadius:Ze.TV.borderRadius4}],children:[(0,ee.BX)(ye.gC,{spacing:2,align:"stretch",justify:"center",constrainWidth:!0,children:[(0,ee.BX)(ye.Ug,{spacing:1,align:"center",justify:"space-between",constrainWidth:!0,children:[(0,ee.tZ)(Ne.Z,{truncate:!0,level:4,children:"Debugger"}),(0,ee.tZ)(Op.Z,{link:"https://replit.com/support"})]}),(0,ee.tZ)("a",{href:"https://replit.com/support",target:"_blank",rel:"noopener noreferrer",className:"jsx-ffa04cbdbbf3badd",children:"Send feedback"}),t]}),(0,ee.tZ)(re(),{id:"ffa04cbdbbf3badd",children:"a.jsx-ffa04cbdbbf3badd{font-size:var(--font-size-default);color:var(--accent-primary-default);font-weight:var(--font-weight-medium)}"})]})}function ww(e){var t=e.wid,r=(0,Ie.Z)().debuggest,n=(0,fn.Z)(r.mainClient),a=(0,fn.Z)(n?n.state:null),i=(0,fn.Z)(n?n.stackFrames:null),o=(0,fn.Z)(n?n.variables:null),l=(0,fn.Z)(n?n.breakpoints:null),c=(0,rt.I0)(),s=ie.useCallback((function(e,r){var n=(0,$x.om)(e);n&&c({type:"OPEN_DEEP_LINK",path:n,line:r,wid:t})}),[c,t]);return(0,ee.BX)(xw,{children:[(0,ee.tZ)(vw,{client:n}),l&&(0,ee.tZ)(rw,{breakpoints:l,onBreakpointClick:s,onUpdate:function(e){var t=e.breakpoint,r=e.logMessage;n&&t.pid1Id&&n.updateBreakpoint(t.pid1Id,{logMessage:r})}}),o&&n&&"paused"===a&&(0,ee.tZ)(ow,{client:n,variables:o}),i&&"paused"===a&&(0,ee.tZ)(Qx,{frames:i,onFrameClick:s}),n&&(0,ee.tZ)("div",{className:"jsx-98cfff378e1e6f5f logs-button",children:(0,ee.tZ)(ve.Z,{size:"small",onClick:function(){return function(e){if("undefined"===typeof Blob)return;var t=new Blob([e],{type:"text/plain"}),r=document.createElement("a");r.download="debugger-logs.txt",r.href=URL.createObjectURL(t),r.dataset.downloadurl=["text/plain",r.download,r.href].join(":"),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),setTimeout((function(){URL.revokeObjectURL(r.href)}),1500)}(n.getDebugLogs())},children:"Download Logs"})}),(0,ee.tZ)(re(),{id:"98cfff378e1e6f5f",children:".instructions.jsx-98cfff378e1e6f5f{height:var(--space-16)}.logs-button.jsx-98cfff378e1e6f5f{position:absolute;bottom:var(--space-8);right:var(--space-8)}"})]})}var kw=r(79744);function jw(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Zw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return jw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jw(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sw(){var e=(0,Ie.Z)().session,t=Zw(ie.useState(e.getPreviewedYoutubeVideo()),2),r=t[0],n=t[1];return ie.useEffect((function(){return n(e.getPreviewedYoutubeVideo()),e.onPreviewedYoutubeVideoChanged(n)}),[e]),r}function Ew(e){var t=e.video,r=e.onClick,n=Sw(),a=t.videoId===n;return(0,ee.BX)("div",{onClick:function(){return r(t.videoId)},className:"jsx-f538bf5ab9a96640 "+(At()("youtube-video",{"is-selected":a})||""),children:[(0,ee.BX)("div",{className:"jsx-f538bf5ab9a96640 thumbnail-container",children:[(0,ee.tZ)(kw.Z,{width:"320px",height:"180px",src:t.thumbnail,alt:t.title}),(0,ee.tZ)("span",{className:"jsx-f538bf5ab9a96640 duration",children:t.duration})]}),(0,ee.BX)(ye.gC,{children:[(0,ee.tZ)(Ne.Z,{level:3,className:"yt-video-title",children:t.title}),(0,ee.BX)(ye.Ug,{children:[(0,ee.BX)(ge.Z,{className:"yt-video-views",children:[t.viewCount," views"]}),(0,ee.tZ)(ge.Z,{className:"yt-video-published-at",children:t.publishedAt})]})]}),(0,ee.tZ)(re(),{id:"f538bf5ab9a96640",children:'.youtube-video.jsx-f538bf5ab9a96640{font-family:Roboto,Arial,sans-serif;margin:0 8px 20px 8px;position:relative;max-width:320px;min-width:260px;width:100%;cursor:pointer}.is-selected.jsx-f538bf5ab9a96640,.youtube-video.jsx-f538bf5ab9a96640:hover{background-color:var(--background-root)}.thumbnail-container.jsx-f538bf5ab9a96640{position:relative}.duration.jsx-f538bf5ab9a96640{position:absolute;bottom:3px;right:0;font-family:Roboto,Arial,sans-serif;font-weight:500;font-size:12px;line-height:12px;display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:4px;background-color:rgba(0,0,0,.8);color:#fff;padding:3px 4px;height:12px;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;letter-spacing:.35px;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box}.youtube-video.jsx-f538bf5ab9a96640 .yt-video-title{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;max-height:40px;font-family:Roboto,Arial,sans-serif;color:#030303;font-weight:500;font-size:14px;white-space:normal;-o-text-overflow:ellipsis;text-overflow:ellipsis;line-height:20px;letter-spacing:.25px;margin:6px 0;overflow:hidden}.youtube-video.jsx-f538bf5ab9a96640 .yt-video-views::after{content:"\u2022";margin:0 4px}.youtube-video.jsx-f538bf5ab9a96640 .yt-video-views,.youtube-video.jsx-f538bf5ab9a96640 .yt-video-published-at{color:#606060;font-family:Roboto,Arial,sans-serif;font-size:14px;font-weight:400;line-height:18px}.replit-ui-theme-root.dark .yt-video-views,.replit-ui-theme-root.dark .yt-video-published-at{color:#aaa}.replit-ui-theme-root.dark .yt-video-title{color:#fff}'})]})}function Ow(){var e,t=(0,Ie.Z)().session,r=(0,we.Z)(),n=(0,ke.Jge)({variables:{replId:r}}),a=n.data,i=n.error,o=n.loading,l=(null===a||void 0===a?void 0:a.sampleYoutubeVideos)||[];return(0,ee.BX)("div",{className:"jsx-e11b294abf24e8ec youtube-plugin",children:[i?null:(0,ee.tZ)(ye.gC,{className:"heading-container",align:"center",justify:"center",children:(0,ee.tZ)(Ne.Z,{level:3,children:"Recommended Tutorials"})}),l.map((function(e){return(0,ee.tZ)(Ew,{video:e,onClick:function(n){var i;if(n!==t.getPreviewedYoutubeVideo()){if("Repl"!==(null===a||void 0===a||null===(i=a.repl)||void 0===i?void 0:i.__typename))throw new Error("Expected repl from graph");var o=a.repl,l=o.language,c=o.title;(0,ft.j)(ft.U3.YOUTUBE_VIDEO_SELECTED,{video:e.title,replId:r,language:l,replTitle:c}),t.setPreviewedYoutubeVideo(n)}else t.setPreviewedYoutubeVideo(null)}},e.videoId)})),o||"Repl"!==(null===a||void 0===a||null===(e=a.repl)||void 0===e?void 0:e.__typename)?(0,ee.tZ)("div",{className:"jsx-e11b294abf24e8ec spinner-container",children:(0,ee.tZ)(Nt.Z,{style:{margin:"10px auto",width:"35px",height:"35px"}})}):null,i?(0,ee.tZ)(ye.gC,{className:"error-container",align:"center",justify:"center",children:(0,ee.tZ)(ge.Z,{className:"error-text",children:"Something went wrong trying to load videos. Please refresh and try again."})}):null,(0,ee.tZ)(re(),{id:"e11b294abf24e8ec",children:".youtube-plugin.jsx-e11b294abf24e8ec{background-color:var(--background-default);overflow-y:auto;height:100%;width:100%}.youtube-plugin.jsx-e11b294abf24e8ec .heading-container{width:100%;max-width:320px;margin:var(--space-8)}.youtube-plugin.jsx-e11b294abf24e8ec .spinner-container.jsx-e11b294abf24e8ec{width:100%;max-width:320px}.youtube-plugin.jsx-e11b294abf24e8ec .error-container{margin:var(--space-8)}.youtube-plugin.jsx-e11b294abf24e8ec .error-text{color:var(--accent-negative-default)}"})]})}function _w(e){var t=e.id,r="".concat("https://www.youtube.com/embed/").concat(t,"?rel=0");return(0,ee.BX)("div",{className:"jsx-56e997b54299e005 embed",children:[(0,ee.tZ)("iframe",{src:r,frameBorder:"0",className:"jsx-56e997b54299e005 iframe"}),(0,ee.tZ)(re(),{id:"56e997b54299e005",children:".embed.jsx-56e997b54299e005{position:relative;padding:var(--space-8);width:100%;height:100%;overflow:hidden}.iframe.jsx-56e997b54299e005{width:100%;height:100%}"})]})}function Cw(){var e=Sw(),t=(0,Ie.Z)().session;return(0,ee.BX)("div",{className:"jsx-59c8384182ab4fcb youtube-preview-plugin",children:[e?(0,ee.BX)(ee.HY,{children:[(0,ee.tZ)(_w,{id:e}),(0,ee.tZ)("div",{"aria-label":"Close","data-microtip-position":"left",role:"tooltip",className:"jsx-59c8384182ab4fcb close-button",children:(0,ee.tZ)(ve.Z,{Icon:Yt.Z,border:!0,filled:!0,onClick:function(){return t.setPreviewedYoutubeVideo(null)}})})]}):(0,ee.tZ)("div",{className:"jsx-59c8384182ab4fcb loading",children:(0,ee.tZ)(Nt.Z,{style:{margin:"10px auto",width:"35px",height:"35px"}})}),(0,ee.tZ)(re(),{id:"59c8384182ab4fcb",children:".youtube-preview-plugin.jsx-59c8384182ab4fcb{background-color:var(--background-default);height:100%;width:100%}.youtube-preview-plugin.jsx-59c8384182ab4fcb:hover .close-button.jsx-59c8384182ab4fcb{opacity:1}.loading.jsx-59c8384182ab4fcb{width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center}.close-button.jsx-59c8384182ab4fcb{position:absolute;top:var(--space-8);right:var(--space-8);cursor:pointer;-webkit-transition:.2s;-moz-transition:.2s;-o-transition:.2s;transition:.2s;opacity:0}"})]})}var Aw=r(45421),Iw=r(88262),Nw=r(17875);function Tw(e){var t=e.wid,r=(0,rt.I0)(),n=(0,Ie.Z)().lsp,a=(0,ro.Z)(),i=(0,Er.Z)();ie.useEffect((function(){n.start()}),[n]);var o=ie.useMemo((function(){if(null===a||void 0===a?void 0:a.language){var e=a.language;return(0,Zi.Z)((function(r){(0,ft.j)(ft.U3.WS_TYPED,{wid:t,fileExt:r,language:e,isMobile:(0,oe.isMobile)({tablet:!1})})}),6e4)}}),[a,t]);return i?(0,Aw.V)(i)!==Aw.D.Code&&(0,Aw.V)(i)!==Aw.D.Markdown?null:(0,ee.tZ)(Nw.Z,{filePath:i,autoFocus:!(0,Iw.Z)(),onType:o,onRun:function(){r({type:ht.OF,wid:t})}}):(0,ee.BX)("div",{className:"jsx-39c62ad362f87716 empty",children:[(0,ee.tZ)("div",{className:"jsx-39c62ad362f87716",children:"no file opened"}),(0,ee.tZ)(re(),{id:"39c62ad362f87716",children:".empty.jsx-39c62ad362f87716{height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;justify-content:center}"})]})}var Pw=r(57171);function Rw(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Rw(e,t,r[t])}))}return e}var Dw={};function Uw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dw,t=arguments.length>1?arguments[1]:void 0;return"REPL_UPDATED"===t.type?Lw({},e,t.updates,{config:Lw({},e.config,t.updates.config)}):e}var zw=r(60527),Bw=r(97930),Mw=r(9440);function Fw(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function Xw(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Fw(i,n,a,o,l,"next",e)}function l(e){Fw(i,n,a,o,l,"throw",e)}o(void 0)}))}}function Vw(e,t){return Gw.apply(this,arguments)}function Gw(){return(Gw=Xw(J().mark((function e(t,r){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=function(a){r(a)&&(t.off("command",n),e(a))};t.on("command",n)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hw(e){var t=e.wid,r=e.pud;return function(){var e=Xw(J().mark((function e(n,a){var i,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(0,kt.Z)(a(),t,r,"goval").govalRunState,o=n(fk({wid:t,pud:r,name:"shellrunner",service:"shellrun2"})),!i.shellrunner){e.next=6;break}return o.send({clear:{}}),e.next=6,Vw(o,(function(e){return"state"===e.body}));case 6:return o.send({runMain:{}}),e.next=9,Vw(o,(function(e){return"state"===e.body}));case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}function Ww(e){var t=e.wid,r=e.pud,n=e.input;return function(e){e(fk({wid:t,pud:r,name:"shellrunner",service:"shellrun2"})).send({input:n})}}function Kw(e){var t=e.wid,r=e.pud,n=e.cmd;return function(e){switch(n.body){case"input":return void e((0,ht.yY)({wid:t,message:n.input,type:"output",raw:!0}));case"output":return void e((0,ht.yY)({wid:t,message:n.output,type:"output",raw:!0}));case"state":return void(n.state===si.api.State.Stopped?e({type:nk,wid:t,pud:r}):(e({type:"CLEAR_CONSOLE",wid:t,pud:r}),e({type:rk,wid:t})));default:st.Tb(new Error("Unknown run command ".concat(n.body,". Expected output or state")))}}}var qw=r(53572);function Yw(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function $w(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Yw(i,n,a,o,l,"next",e)}function l(e){Yw(i,n,a,o,l,"throw",e)}o(void 0)}))}}function Qw(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Qw(e,t,r[t])}))}return e}var ek="REGISTER_GOVAL_CHANNEL_HANDLE",tk="REGISTER_CLEAR_NETWORK_LISTENERS_HANDLE",rk="SHELLRUNNER_STARTED",nk="SHELLRUNNER_ENDED",ak="PACKAGER_STARTED",ik="PACKAGER_ENDED",ok="OPTIMISTIC_RUN_STARTED",lk="OPTIMISTIC_RUN_ENDED";function ck(e){var t=e.wid,r=e.pud,n=e.prefetchedConnectionMetadata;return function(){var e=$w(J().mark((function e(a,i){var o,l,c,s,u,d,f,p,b,m,h,v,g;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(0,kt.Z)(i(),t,r,"goval"),l=o.clientHandle,c=o.repl,s=o.workspaceMounted,o.didDispatchLoadingStarted||a({type:"LOADING_GOVAL_STARTED",wid:t}),s){e.next=4;break}return e.abrupt("return");case 4:return a(dk({wid:t,pud:r})),u=ci.Z.safeGet(l),d=null,f=function(e){1===e&&(d=a((0,pe.P)({content:"Failed to connect, retrying",type:"error",time:null})))},u.getChannel(0).on("command",(function(e){switch(e.body){case"bootStatus":if(!e.bootStatus)return;return e.bootStatus.stage||(e.bootStatus.stage=si.api.BootStatus.Stage.HANDSHAKE),void a(Jw({type:"UPDATE_ENGINE_LOAD_STATUS",wid:t},e.bootStatus));case"portOpen":if(!e.portOpen)throw new Error("portOpen only handles portOpen commands");var n=e.portOpen,i=n.forwarded,o=n.port;if(!i)return;if(5901===o)return;return void a({type:"PORT_OPEN",wid:t,port:o});case"protocolError":var l,c=(null===(l=e.protocolError)||void 0===l?void 0:l.text)||"protocol error";a({type:"BSOD",wid:t,crasherPud:r,originalError:c});var s=new Error("protocol error"),u={pluginType:"goval"},d={message:c};st.Tb(s,{tags:u,extra:d}),(0,Bw.Q)(s,{tags:u,extras:d});break;case"toast":if(!e.toast)return;var f,p=e.toast.text;if(p&&p.startsWith("PANIC:"))return f=/tried to attach(.*)multiple times/.test(p)?new Error("tried to attach to ot multiple times"):new Error(p?"goval panic":"goval panic with no message"),st.$e((function(e){e.setTag("source","goval"),p&&e.setExtra("message",p),st.Tb(f)})),void a((0,pe.P)({content:"We ran into an internal error, reloading your connection.",type:"error",time:5e3}));a((0,pe.P)({content:p||"The server tried to say something but had no words",type:"error",time:1e4}))}})),p=(0,kt.Z)(i(),t,r,"goval").gurl,b=(0,zw.t)(p),m=Boolean(i().user.userInfo.isLoggedIn),h=function(){var e=(0,kt.Z)(i(),t,r,"goval").clientHandle;return ci.Z.safeGet(e)!==u},e.next=16,(0,qw.u)();case 16:return e.next=18,(0,zw.Z)({client:u,repl:c,shouldAbort:h,onRetry:f,overrideClusterMetadata:b,prefetchedConnectionMetadata:n,isLoggedIn:m});case 18:if(d&&a((0,pe.S)(d)),!h()){e.next=21;break}return e.abrupt("return");case 21:a((0,pe.P)({content:"Connected!",time:1500,type:"confirm"})),Math.random()>.99&&u.startPing(),"goval"===me().get(c.language).engine&&a(fk({wid:t,pud:r,name:"shellrunner",service:"shellrun2"})),a(uk({wid:t,pud:r})),a({type:"LOADING_GOVAL_COMPLETE",wid:t}),v=u.getToken(),g=(0,Hl.d)(v),a({type:"SET_VNC_URL",wid:t,vncUrl:g}),window.lastGovalTokenMeta=(0,Hl.h)(v),a({wid:t,type:"GOVAL_TOKEN",token:v}),u.on("close",(function(e){var n=e.closeReason;window.disconnectedTaint=!0,n===Pw.KU.ClientCloseReason.Disconnected&&(window.unexpecteddisconnectTaint=!0,a(sk({wid:t,pud:r})),a(ck({wid:t,pud:r})))}));case 32:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}function sk(e){var t=e.wid,r=e.pud,n=e.keepNetworkHandler,a=void 0!==n&&n;return function(e,n){var i=(0,kt.Z)(n(),t,r,"goval"),o=i.clientHandle,l=i.clearNetworkListenersHandle,c=i.didDispatchLoadingStarted;if(e({type:"RESET_GOVAL",wid:t,pud:r}),e(bk({wid:t,pud:r})),c||e({type:"LOADING_GOVAL_STARTED",wid:t}),null!=o){var s=ci.Z.get(o);null!=s&&(s.close(),!a&&l&&ci.Z.safeGet(l)())}}}function uk(e){var t=e.wid,r=e.pud;return function(e){var n=null,a=function(){o(),st.n_({category:"redux",message:"onlineHandler fired. starting connection"}),e(ck({wid:t,pud:r})),null!=n&&(e((0,pe.S)(n)),n=null)},i=function(){n=e((0,pe.P)({content:"Offline: trying to connect",type:"error",time:null})),st.n_({category:"redux",message:"offlineHandler fired. closing connection"}),e(sk({wid:t,pud:r,keepNetworkHandler:!0}))};window.addEventListener("online",a),window.addEventListener("offline",i);var o=function(){window.removeEventListener("online",a),window.removeEventListener("offline",i)};e({type:tk,wid:t,clearNetworkListenersHandle:ci.Z.getHandle(o)})}}function dk(e){var t=e.wid,r=e.pud;return function(e,n){var a=(0,kt.Z)(n(),t,r,"goval").clientHandle;if(a){var i=ci.Z.get(a);if(i){var o=!0;if(i.setDebugFunc((function(a){switch(a.type){case"breadcrumb":return void st.n_({category:"crosis",message:a.message,data:a.data});case"ping":var i=ft.U3.GOVAL2_PING;return o&&(i=ft.U3.GOVAL2_FIRST_PING,o=!1),void lt.kg.info(i,{latency:a.latency});case"log":if(!(0,kt.Z)(n(),t,r,"goval").adminLogs)return;e({type:"CROSIS_ADMIN_LOG",wid:t,dir:a.log.direction,cmd:a.log.cmd,timestamp:window.performance.now()})}})),(0,kt.Z)(n(),t,r,"goval").adminLogs&&(window.crosisclient=i),ue.default.query.vcr){var l,c=i.getChannel(0);c.on("command",(function(e){"VCRLog"===e.body&&l&&e.VCRLog&&l(e.VCRLog)})),c.send({startVCR:{}});var s=function(){var e=$w(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.send({readVCR:{}}),e.abrupt("return",new Promise((function(e){return l=e})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=$w(J().mark((function e(){var t,r,n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:if((t=e.sent.logfile)&&t.content&&t.path){e.next=5;break}return e.abrupt("return");case 5:r=JSON.stringify({timestamp:"0",direction:"IN",command:{auth:{token:i.getToken()}}}),(n=document.createElement("a")).setAttribute("href","data:text/plain;charset=utf-8,"+encodeURI(r+"\n"+new TextDecoder("utf-8").decode(t.content))),n.setAttribute("download",t.path),document.body.appendChild(n),n.click(),document.body.removeChild(n);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();window.vcr={read:s,download:u}}}}}}function fk(e){var t=e.wid,r=e.pud,n=e.name,a=e.service;return function(e,i){var o=(0,kt.Z)(i(),t,r,"goval").channels[a];return null==o?e(function(e){var t=e.wid,r=e.pud,n=e.name,a=e.service;return function(e,i){var o=(0,kt.Z)(i(),t,r,"goval").clientHandle,l=ci.Z.safeGet(o).openChannel({name:n,service:a});void 0!==n&&e({type:ek,wid:t,channelHandle:ci.Z.getHandle(l),service:a});var c=pk(a);return l.on("command",(function(n){"toast"===n.body&&n.toast?e((0,pe.P)({content:n.toast.text||"The server tried to say something but had no words",type:"error",time:1e4})):e(c({wid:t,pud:r,cmd:n}))})),l}}({wid:t,pud:r,name:n,service:a})):ci.Z.safeGet(o)}}var pk=function(e){if("shellrun2"===e)return Kw;throw new Error("Can't handle command. Unknown service: ".concat(e))};function bk(e){var t=e.wid,r=e.pud;return function(e,n){var a=(0,kt.Z)(n(),t,r,"goval"),i=a.govalRunState,o=a.runstate,l=Object.values(i).includes(!0);"idle"===o&&l?e({type:"EVAL_STARTED",wid:t}):"idle"===o||l||e({type:"EVAL_ENDED",wid:t})}}function mk(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function hk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){hk(e,t,r[t])}))}return e}function gk(e,t,r){switch(r.type){case ht.zT:return sk({wid:e,pud:t});case"GOVAL_CONNECT":case"USE_CUSTOM_TOKEN":case"SET_CUSTOM_GURL":return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e,r){var n=!0,a=!1,i=void 0;try{for(var o,l=t[Symbol.iterator]();!(n=(o=l.next()).done);n=!0)(0,o.value)(e,r)}catch(c){a=!0,i=c}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}}}(sk({wid:e,pud:t}),ck({wid:e,pud:t,prefetchedConnectionMetadata:r.customConnectionMetadata}));case"REPL_UPDATED":return function(n){r.updates&&0!==Object.keys(r.updates).length&&(r.updates.id||r.updates.title||r.updates.isOwner||r.updates.slug||r.updates.userId||r.updates.language)&&(n(sk({wid:e,pud:t})),n(ck({wid:e,pud:t})))};case ht.eJ:return function(e){var t=e.wid,r=e.pud,n=e.rows,a=e.cols;return function(e){e(fk({wid:t,pud:r,name:"shellrunner",service:"shellrun2"})).send({resizeTerm:{cols:a,rows:n}})}}({wid:e,pud:t,rows:r.rows,cols:r.cols});case"RUN_REPL":return function(e){var t=e.wid,r=e.pud;return function(){var e=$w(J().mark((function e(n,a){var i,o,l,c,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a().services,o=(0,kt.Z)(a(),t,r,"goval").repl,l=lt.kg.timeStart({language:o.language}),"goval"===me().get(o.language).engine){e.next=5;break}return e.abrupt("return");case 5:return n({type:"CLEAR_CONSOLE",wid:t,pud:r}),n({type:"EVAL_SETUP",wid:t}),n({type:ok,wid:t}),c=function(){return!(0,kt.Z)(a(),t,r,"goval").govalRunState.optimisticState},e.next=11,i.fs.flush();case 11:if(l("prerun flush finished"),!c()){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,(0,Mw.Z)(i.container,i.dotReplit);case 16:if(!e.sent){e.next=25;break}return e.next=19,i.packager.installPackages();case 19:if((s=e.sent)&&i.fs.persist(),l("prerun packager install finished",{success:s}),s){e.next=25;break}return n({type:lk,wid:t}),e.abrupt("return");case 25:if(!c()){e.next=27;break}return e.abrupt("return");case 27:return e.next=29,n(Hw({wid:t,pud:r}));case 29:n({type:lk,wid:t}),l("run finished");case 31:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}({wid:e,pud:t});case ht.aq:return function(e){var t=e.wid,r=e.pud;return function(){var e=$w(J().mark((function e(n,a){var i,o,l;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(0,kt.Z)(a(),t,r,"goval"),o=i.repl,l=i.govalRunState,"goval"===me().get(o.language).engine){e.next=3;break}return e.abrupt("return");case 3:if(l.packager&&n((0,ht.yY)({wid:t,message:"\n\nReplit: Packaging cannot be stopped, please wait...\n\n",type:"error",raw:!1})),n({type:lk,wid:t}),l.shellrunner){e.next=7;break}return e.abrupt("return");case 7:n(fk({wid:t,pud:r,name:"shellrunner",service:"shellrun2"})).send({clear:{}});case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}({wid:e,pud:t});case"CONSOLE_INPUT":return function(){var n,a=(n=J().mark((function n(a,i){var o;return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=(0,kt.Z)(i(),e,t,"goval").repl,"goval"===me().get(o.language).engine){n.next=3;break}return n.abrupt("return");case 3:a(Ww({wid:e,pud:t,input:r.input}));case 4:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(r,a){var i=n.apply(e,t);function o(e){mk(i,r,a,o,l,"next",e)}function l(e){mk(i,r,a,o,l,"throw",e)}o(void 0)}))});return function(e,t){return a.apply(this,arguments)}}();case rk:case nk:case ak:case ik:case ok:case lk:return bk({wid:e,pud:t});default:return null}}function yk(){return{clientHandle:ci.Z.getHandle(new Pw.KU),didDispatchLoadingStarted:!1,workspaceMounted:!1,channels:{},clearNetworkListenersHandle:null,govalRunState:{shellrunner:!1,packager:!1,optimisticState:!1},adminLogs:!1,gurl:"wss://eval.replit.com"}}var xk=(0,vt.$)({primary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yk(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ht.qg:return vk({},e,t.initialState);case"GOVAL_CONNECT":return vk({},yk(),{workspaceMounted:!0,gurl:e.gurl,adminLogs:e.adminLogs});case"RESET_GOVAL":return vk({},yk(),{workspaceMounted:e.workspaceMounted,gurl:e.gurl,adminLogs:e.adminLogs});case"LOADING_GOVAL_STARTED":return vk({},e,{didDispatchLoadingStarted:!0});case"LOADING_GOVAL_COMPLETED":return vk({},e,{didDispatchLoadingStarted:!1});case ht.zT:return vk({},e,{workspaceMounted:!1});case tk:return vk({},e,{clearNetworkListenersHandle:t.clearNetworkListenersHandle});case ek:return vk({},e,{channels:vk({},e.channels,hk({},t.service,t.channelHandle))});case"SET_CUSTOM_GURL":return vk({},e,{gurl:t.gurl});case rk:return vk({},e,{govalRunState:vk({},e.govalRunState,{shellrunner:!0})});case nk:return vk({},e,{govalRunState:vk({},e.govalRunState,{shellrunner:!1})});case ak:return vk({},e,{govalRunState:vk({},e.govalRunState,{packager:!0})});case ik:return vk({},e,{govalRunState:vk({},e.govalRunState,{packager:!1})});case ok:return vk({},e,{govalRunState:vk({},e.govalRunState,{optimisticState:!0})});case lk:return vk({},e,{govalRunState:vk({},e.govalRunState,{optimisticState:!1})});case"START_CROSIS_ADMIN_LOGS":return vk({},e,{adminLogs:!0});default:return e}},repl:Uw,runstate:gt.Z});var wk=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.get=function(e,t){var r,n,a;try{r=sessionStorage.getItem(e)}catch(i){}if(null===r||void 0===r)return null;try{n=JSON.parse(r)}catch(o){}return null===n||void 0===n?null:"array"!==t||Array.isArray(n)?t&&("undefined"===typeof n?"undefined":(a=n)&&"undefined"!==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a)!==t?null:n:null},e.set=function(e,t){try{sessionStorage.setItem(e,JSON.stringify(t))}catch(r){}},e.remove=function(e){try{sessionStorage.removeItem(e)}catch(t){}},e.keys=function(){try{return Object.keys(sessionStorage)}catch(e){return[]}},e}();function kk(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function jk(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){kk(i,n,a,o,l,"next",e)}function l(e){kk(i,n,a,o,l,"throw",e)}o(void 0)}))}}function Zk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Sk="session_id_achv_track";function Ek(){return(Ek=jk(J().mark((function e(t){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Si.l.query({query:ke.koB,variables:{replId:t}});case 2:return r=e.sent.data,e.abrupt("return","Repl"===r.repl.__typename?{language:r.repl.language,title:r.repl.title}:{language:"",title:""});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ok(e,t,r,n,a){var i="string"===typeof e.path?(0,_r.r6)(e.path):null;switch(e.type){case"TRACK_WS_EVENT":var o=ft.j;e.trackOnce&&(o=ft.Cn),o(ft.U3[e.eventKey],function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Zk(e,t,r[t])}))}return e}({wid:t,language:r,isMobile:(0,oe.isMobile)({tablet:!1})},e.properties));break;case"RUN_REPL":(0,ft.j)(ft.U3.PROJECT_RAN,{wid:t,language:r,replId:n,replTitle:a});break;case"CONSOLE_INPUT":"\r"===e.input&&(0,ft.j)(ft.U3.CONSOLE_EVALED,{wid:t,language:r});break;case"STOP_EVAL":(0,ft.j)(ft.U3.WS_EVAL_STOPPED,{wid:t,language:r});break;case"CREATE_FILE":e.isRecreation||(0,ft.j)(ft.U3.PROJECT_MODE_FILE_CREATED,{wid:t,language:r,extension:i});break;case"OPEN_FILE":e.newTab&&(0,ft.j)(ft.U3.FILE_HEADER_TAB_OPENED,{wid:t,language:r,newTab:e.newTab,extension:i}),e.tabIndex&&(0,ft.j)(ft.U3.FILE_HEADER_TAB_REPLACED,{wid:t,language:r,tabIndex:e.tabIndex});break;case"MOVE_FILE":(0,ft.j)(ft.U3.WS_FILE_RENAMED,{wid:t,language:r,extension:i});break;case"DELETE_FILE":(0,ft.j)(ft.U3.WS_FILE_DELETED,{wid:t,language:r,extension:i});break;case"UPLOAD_FILE":if(!e.path||"readme.md"!==e.path.toLowerCase())break;(0,ft.j)(ft.U3.README_CREATED,{wid:t,language:r});break;case"CLOSE_HEADER_TAB":(0,ft.j)(ft.U3.FILE_HEADER_TAB_CLOSED,{wid:t,language:r});break;case"SET_SPLIT_POSITION":(0,ft.j)(ft.U3.WS_LAYOUT_CHANGED,{wid:t,language:r});break;case"SET_GIT_SIDEBAR_VISIBILITY":e.isSidebarVisible&&(0,ft.j)(ft.U3.GIT_CLIENT_SIDEBAR_OPENED,{language:r,wid:t})}}var _k=Io(),Ck=_k.receiver,Ak=_k.useReceiver;function Ik(){var e=(0,we.Z)(),t=(0,Ei.Z)("flag-achievements-v0"),r=(0,rt.v9)((function(e){return e.user.userInfo}));return Ak((function(n){var a=n.action,i=n.wid;if("WS_TYPED"===a.eventKey&&t&&r.isLoggedIn){var o=(new Date).toJSON().substring(0,10),l="".concat(r.id,"_").concat(o);wk.get(Sk)!==l&&(wk.set(Sk,l),Si.l.mutate({mutation:ke.v79,variables:{userId:r.id,event:"WS_TYPED"}}))}return a.type,function(e){return Ek.apply(this,arguments)}(e).then((function(t){Ok(a,i,t.language,e,t.title)})),null})),null}var Nk=(0,vt.$)({preferences:Uc,repl:Uw,files:Wo,workingDirectory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return"UPDATE_WORKING_DIRECTORY"===t.type?t.path:e},runstate:gt.Z});function Tk(e,t,r){return"LOAD_PLUGIN"===r.type?function(n,a){var i=(0,kt.Z)(a(),e,t,"infoprovider"),o=i.preferences,l=i.repl,c=i.files,s=i.workingDirectory,u=i.runstate;o!==Dc&&n({type:"UPDATE_WORKSPACE_PREFERENCES",wid:e,pud:r.pluginPud,updates:o}),l!==Dw&&n({type:"REPL_UPDATED",wid:e,pud:r.pluginPud,updates:l}),""!==s&&n({type:"UPDATE_WORKING_DIRECTORY",wid:e,pud:r.pluginPud,path:s}),c!==Ho&&Object.keys(c).forEach((function(t){n({type:"CREATE_FILE",wid:e,pud:r.pluginPud,path:t,file:c[t]})})),u!==gt.Q&&n({type:"SET_RUN_STATE",wid:e,pud:t,runstate:u})}:null}function Pk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Pk(e,t,r[t])}))}return e}function Lk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loadingReplbox:!1,loadingGoval:!1,loadingEngine:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ht.qg:return Rk({},e,t.initialState);case ht.FG:return Rk({},e,{loadingEngine:!1});case ht.hq:return Rk({},e,{loadingEngine:!0});case"LOADING_REPLBOX_STARTED":return Rk({},e,{loadingReplbox:!0});case"LOADING_REPLBOX_ENDED":return Rk({},e,{loadingReplbox:!1});case"LOADING_GOVAL_STARTED":return Rk({},e,{loadingGoval:!0});case"LOADING_GOVAL_COMPLETE":return Rk({},e,{loadingGoval:!1});default:return e}}function Dk(e,t,r){switch(r.type){case"LOADING_REPLBOX_STARTED":case"LOADING_GOVAL_STARTED":return function(r,n){(0,kt.Z)(n(),e,t,"loadingresolver").loadingEngine||r({type:ht.hq,wid:e})};case"LOADING_REPLBOX_ENDED":case"LOADING_GOVAL_COMPLETE":return function(r,n){var a=(0,kt.Z)(n(),e,t,"loadingresolver"),i=a.loadingEngine,o=a.loadingGoval,l=a.loadingReplbox;i&&!1===o&&!1===l&&r({type:ht.FG,wid:e})};default:return null}}var Uk=r(32310);function zk(){var e=(0,Ie.Z)(),t=e.fs,r=e.broadcast,n=e.presence,a=(0,Er.Z)();return a?(0,ee.BX)("div",{className:"jsx-1d0319ea07f25657 draw",children:[(0,ee.tZ)(Uk.Z,{fs:t,broadcast:r,presence:n,filePath:a}),(0,ee.tZ)(re(),{id:"1d0319ea07f25657",children:".draw.jsx-1d0319ea07f25657{position:relative;height:100%;width:100%;z-index:3}.excalidraw canvas{-webkit-border-radius:var(--border-radius-4)!important;-moz-border-radius:var(--border-radius-4)!important;border-radius:var(--border-radius-4)!important}"})]}):null}function Bk(e){!function(e){e.register("goval",W),e.register("analytics",K),e.register("infoprovider",q),e.register("loadingresolver",Y),e.register("draw",$)}(e),e.register("runflow",_),e.register("header",n),e.register("config",a),e.register("sidenav",i),e.register("filetree",o),e.register("fileheader",l),e.register("terminal2",c),e.register("console",Ui),e.register("replboxconsole",s),e.register("floatingrun",u),e.register("help",d),e.register("packager",f),e.register("mediaview",p),e.register("preferences",b),e.register("git",ao),e.register("replboxdisplay2",m),e.register("snack",h),e.register("vnc",v),e.register("webview",g),e.register("fileviewercontroller",y),e.register("markdownviewer",x),e.register("instructionsviewer2",w),e.register("adminpanel",k),e.register("blank",j),e.register("lock",Z),e.register("hackerupgradeprompt",S),e.register("desktoplayout",E),e.register("audio",O),e.register("deeplink",C),e.register("browsernotifications",A),e.register("database",I),e.register("commandbar",N),e.register("annotations",T),e.register("shell",P),e.register("autograder",R),e.register("unittests",L),e.register("educationpane",D),e.register("cluicurl",U),e.register("pedit",z),e.register("kaboombar",B),e.register("kaboombar2",M),e.register("enveditor",F),e.register("debugpanel",X),e.register("youtube",V),e.register("youtubepreview",G),e.register("codemirror",H)}var Mk=r(56928),Fk=r(22175),Xk=r(17221),Vk=r(50348);var Gk=r(59936),Hk=r(91449),Wk=r(81544);function Kk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Kk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kk(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yk(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function $k(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Yk(i,n,a,o,l,"next",e)}function l(e){Yk(i,n,a,o,l,"throw",e)}o(void 0)}))}}function Qk(){return(Qk=$k(J().mark((function e(t){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Si.l){e.next=2;break}throw new Error("Expected Apollo client");case 2:return e.next=4,Si.l.query({query:ke.UxF,variables:{id:t}});case 4:return r=e.sent.data,e.abrupt("return","Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl.title:null);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jk(e){var t=(0,Ie.Z)(),r=t.container,n=t.presence,a=e.wid;ie.useEffect((function(){var e=n.onUserJoin((function(t){var n,a=null===(n=r.getContext())||void 0===n?void 0:n.repl;if(a){var i=t.username;return function(e){return Qk.apply(this,arguments)}(a.id).then((function(e){e&&ru({title:"",body:"".concat(i," joined ").concat(e),tag:"".concat(a.id,"-").concat(i,"-joined"),iconByUsername:i,cacheDuration:9e5})})),function(){e()}}}))}),[a,n,r,e])}var ej=r(28566);var tj=r(56700);function rj(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function nj(e){var t=ie.useRef(""),r=(0,Ie.Z)().container,n=e.wid,a=e.store.dispatch;ie.useEffect((function(){return r.onConnectionStateChanged(function(){var e,i=(e=J().mark((function e(i){var o,l,c,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i===tj.e.CONNECTED){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,r.exec("pwd");case 4:if(o=e.sent.output){e.next=7;break}return e.abrupt("return");case 7:""===t.current&&(c=null===(l=r.getContext())||void 0===l?void 0:l.repl)&&(t.current="/home/runner/".concat(c.slug)),(s=o.replace("\n",""))!==t.current&&(a({type:"UPDATE_WORKING_DIRECTORY",wid:n,path:s}),t.current=s);case 10:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){rj(i,n,a,o,l,"next",e)}function l(e){rj(i,n,a,o,l,"throw",e)}o(void 0)}))});return function(e){return i.apply(this,arguments)}}())}),[r,a,n])}function aj(e,t){var r=".cursor-".concat(oj(e)," {\n  position: relative;\n  background-color: var(--accent-primary-strongest);\n  border-left: 2px solid ").concat(t,";\n  pointer-events: none;\n}\n.selection-").concat(oj(e)," {\n  position: relative;\n  background-color: ").concat(t,";\n  opacity: 0.2;\n  pointer-events: none;\n}\n.cursor-tag-").concat(oj(e),'::after {\n  content: "').concat(e,'";\n  position: relative;\n  bottom: calc(100% - 4px);\n  left: -2px;\n  background-color: ').concat(t,";\n  color: white;\n  z-index: 10;\n  padding: 1px;\n  border-radius: 3px;\n  pointer-events: none;\n  animation: fadeOut 2s ease-in forwards;\n}\n\n@keyframes fadeOut {\n  0% {opacity: 1;}\n  100% {opacity: 0;} \n}\n"),n=document.createElement("style");n.type="text/css",n.id=ij(e),n.appendChild(document.createTextNode(r)),document.head&&document.head.appendChild(n)}function ij(e){return"".concat(e,"-multiplayer-cursor-style")}function oj(e){return e.replace(/_/g,"-")}function lj(e){var t=(0,Ie.Z)(),r=t.presence,n=t.session;ie.useEffect((function(){var e=!1,t=r.onActiveUsersChange((function(t){e?e=!1:t.forEach((function(e){aj(e.username,e.color)}))})),n=r.onUserJoin((function(t){var r=t.username,n=t.color;e=!0,aj(r,n)})),a=r.onUserLeave((function(t){e=!0,function(e){var t=document.getElementById(ij(e));document.head&&t&&document.head.removeChild(t)}(t.username)}));return function(){t(),n(),a()}}),[e,r,n])}function cj(e){var t=e.wid,r=e.store.dispatch,n=(0,Ie.Z)(),a=n.debuggest,i=n.dotReplit,o=(0,we.Z)(),l=(0,ke.sjq)({variables:{replId:o}}).data,c="Repl"===(null===l||void 0===l?void 0:l.repl.__typename)?l.repl:null,s=function(e){var t=e.repl,r=e.dotReplit,n=e.debuggest;return(0,ie.useEffect)((function(){if(t){if(!t.lang.hasDAP)return r.watch((function(e){var t;e.error||(null===(t=e.config.debugger)||void 0===t?void 0:t.support)&&n.connect()}));n.connect()}}),[t,n]),(0,fn.Z)(n.mainClient)}({debuggest:a,dotReplit:i,repl:c});!function(e){(0,ie.useEffect)((function(){if(e){var t=e.onStarted((function(e){(0,ft.j)(ft.U3.DEBUGGER_STARTED,{joined:e})})),r=e.onPaused((function(e){(0,ft.j)(ft.U3.DEBUGGER_PAUSED,{reason:e})})),n=e.onBreakpoint((function(t){(0,ft.j)(ft.U3.DEBUGGER_BREAKPOINT_TOGGLED,{action:t,state:e.state.current})}));return function(){t(),r(),n()}}}),[e])}(s),function(e,t){var r,n=t.onOutput,a=t.onOpenFile,i=(0,Xu.Z)(n),o=(0,Xu.Z)(a);(0,ie.useEffect)((function(){if(e)return e.onOutput((function(e){i.current(e)}))}),[e]);var l=(0,fn.Z)(e?e.stackFrames:null),c=null===l||void 0===l?void 0:l[0],s=null===c||void 0===c||null===(r=c.source)||void 0===r?void 0:r.path,u=null===c||void 0===c?void 0:c.line;(0,ie.useEffect)((function(){if(s&&u&&e){var t=(0,$x.om)(s);t?o.current({path:t,line:u}):e.stepOut()}}),[e,s,u])}(s,{onOpenFile:function(e){var n=e.path,a=e.line;r({type:"OPEN_DEEP_LINK",path:n,line:a,wid:t})},onOutput:function(e){r((0,ht.yY)({wid:t,message:e,type:"",raw:!1}))}}),(0,ie.useEffect)((function(){s&&c&&function(e){var t=e.ws,r=e.sideNavIndex,n=t.store,a=n.dispatch,i=(0,n.getState)().plugins,o="debugpanel",l="debugpanel";Object.values(i).find((function(e){return e.type===l}))||(a({type:"LOAD_PLUGIN",pluginPud:o,pluginType:l,title:"debugpanel"}),a({type:"ADD_SIDE_NAV_ITEM",index:r,navItem:{pud:o,pluginType:l,tooltip:"Debugger",svg:"Debugger"}}))}({ws:e,sideNavIndex:c.lang.hasGit?2:1})}),[s,c,e])}var sj=r(68618),uj=r(63431),dj=r(25108);function fj(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function pj(e){var t,r,n=(0,we.Z)(),a=(0,Ie.Z)().fs,i=(0,ke.t8A)({variables:{id:n}}).data,o=e.wid,l=e.store.dispatch,c="Repl"===(null===i||void 0===i?void 0:i.repl.__typename)?i.repl:null,s="CurrentUser"===(null===i||void 0===i||null===(t=i.currentUser)||void 0===t?void 0:t.__typename)?i.currentUser:null,u="Repl"===(null===i||void 0===i?void 0:i.repl.__typename)&&i.repl.isModelSolutionFork,d=u?c&&(null===(r=c.origin)||void 0===r?void 0:r.origin):c&&c.origin||null,f=(0,Wk.b)("Repl"===(null===d||void 0===d?void 0:d.__typename)?{repl:d,currentUser:s||void 0}:null);ie.useEffect((function(){c&&s&&c.isProject&&a.stat(".lesson").then((function(e){e.exists||a.createDir(".lesson")}))}),[a,s,c]),ie.useEffect((function(){if(c&&(c.isProjectFork||u)&&d&&f){var e=(0,Zh.Z)({onUnrecoverableError:function(e){dj.error(e),st.$e((function(t){t.setTag("curriculum-authoring",!0),t.setExtra("originId",d.id),st.Tb(e)}))}}),t=(0,sj.Z)({container:e});e.connect({context:f,fetchConnectionMetadata:function(){return(0,uj.Z)({url:"/data/repls/".concat(c.id,"/get_repl_origin_guest_connection_metadata")})}});var r=e.onConnectionStateChanged(function(){var n,i=(n=J().mark((function n(i){var c;return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i!==tj.e.CONNECTED){n.next=22;break}return r(),n.prev=2,n.next=5,a.copyDirFromRemote(".lesson",".lesson",t);case 5:if(!(c=n.sent).error){n.next=10;break}st.$e((function(e){e.setTag("curriculum-authoring",!0),e.setExtra("originId",d.id),st.Tb({message:"Error copying lesson: ".concat(c.error)})})),n.next=14;break;case 10:return n.next=12,a.stat(".lesson/instructions.md");case 12:n.sent.exists&&l({type:"ADD_INSTRUCTIONS2_TAB",wid:o});case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(2),st.$e((function(e){e.setTag("curriculum-authoring",!0),st.Tb(n.t0)}));case 19:return n.prev=19,e.destroy(),n.finish(19);case 22:case"end":return n.stop()}}),n,null,[[2,16,19,22]])})),function(){var e=this,t=arguments;return new Promise((function(r,a){var i=n.apply(e,t);function o(e){fj(i,r,a,o,l,"next",e)}function l(e){fj(i,r,a,o,l,"throw",e)}o(void 0)}))});return function(e){return i.apply(this,arguments)}}());return function(){return e.destroy()}}}),[o,a,f,c,l,d,u])}function bj(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function mj(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){bj(i,n,a,o,l,"next",e)}function l(e){bj(i,n,a,o,l,"throw",e)}o(void 0)}))}}function hj(e){return vj.apply(this,arguments)}function vj(){return(vj=mj(J().mark((function e(t){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getConfig();case 2:return r=e.sent,e.abrupt("return",!r.error&&"kaboom"===r.config.language);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gj(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function yj(e){var t=e.wid,r=e.store.dispatch,n=(0,Ie.Z)(),a=n.session,i=n.fs,o=(0,Ie.Z)().dotReplit,l=(0,Ei.Z)("flag-readme-preview");ie.useEffect((function(){var e=function(){var e,n=(e=J().mark((function e(){var n,c,s,u,d,f,p,b;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hj(o);case 2:return n=e.sent,e.next=5,i.readDir(Va.Q);case 5:if(c=e.sent,(n||l)&&!c.error){e.next=8;break}return e.abrupt("return");case 8:s=!0,u=!1,d=void 0,e.prev=9,f=c.children[Symbol.iterator]();case 11:if(s=(p=f.next()).done){e.next=20;break}if(!(b=p.value).filename.toLowerCase().includes("readme")){e.next=17;break}return r({type:"LOAD_FILE",path:b.filename,wid:t}),a.setPreviewedFile(b.filename),e.abrupt("break",20);case 17:s=!0,e.next=11;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(9),u=!0,d=e.t0;case 26:e.prev=26,e.prev=27,s||null==f.return||f.return();case 29:if(e.prev=29,!u){e.next=32;break}throw d;case 32:return e.finish(29);case 33:return e.finish(26);case 34:case"end":return e.stop()}}),e,null,[[9,22,26,34],[27,,29,33]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){gj(i,n,a,o,l,"next",e)}function l(e){gj(i,n,a,o,l,"throw",e)}o(void 0)}))});return function(){return n.apply(this,arguments)}}();e()}),[t,r,a,i,o,l])}function xj(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function wj(e){var t=e.wid,r=e.store.dispatch,n=(0,Ie.Z)(),a=n.session,i=n.dotReplit;ie.useEffect((function(){var t=function(){var t,r=(t=J().mark((function t(){var r,n;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,hj(i);case 2:if(r=t.sent,n="kaboombar2",r){t.next=6;break}return t.abrupt("return");case 6:e.store.getState().plugins[n]||e.store.dispatch({type:"LOAD_PLUGIN",pluginType:"kaboombar2",pluginPud:n,title:"kaboombar2"}),e.store.dispatch({type:"ADD_SIDE_NAV_ITEM",index:0,navItem:{pud:n,pluginType:"kaboombar2",tooltip:"Kaboom",icon:ze}}),e.store.dispatch({type:"OPEN_SIDE_NAV_ITEM",navItem:{pud:n}});case 9:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function o(e){xj(i,n,a,o,l,"next",e)}function l(e){xj(i,n,a,o,l,"throw",e)}o(void 0)}))});return function(){return r.apply(this,arguments)}}();t()}),[t,r,a,i])}var kj=r(68906),jj=r(76871);function Zj(e){var t=e.ws,r=e.user,n=e.isOwner;!function(e){var t=e.customConnectionMetadata,r=(0,Ie.Z)().container,n=(0,we.Z)(),a=qk(ie.useState(null),2),i=a[0],o=a[1],l=(0,ke.SPw)({variables:{id:n}}),c=l.data,s=l.loading;ie.useEffect((function(){(0,rc.Z)().then((function(e){o((0,zw.t)(e))}))}),[o]),ie.useEffect((function(){return function(){r.destroy()}}),[r]);var u=(0,Wk.b)("Repl"===(null===c||void 0===c?void 0:c.repl.__typename)?{repl:c.repl,currentUser:c.currentUser||void 0}:null);ie.useEffect((function(){if(!s&&null!==i&&u){var e=r.client().addDebugFunc((function(e){if("breadcrumb"===e.type){st.n_({category:"crosisV6",message:e.message,data:e.data});var t={data:e.data,message:e.message,replId:u.repl.id,language:u.repl.language};switch(e.message){case"connecting":(0,ft.j)(ft.U3.CROSIS_CONNECTION_ATTEMPTED,t);break;case"error":(0,ft.j)(ft.U3.CROSIS_ERROR,t);break;case"connect timeout":(0,ft.j)(ft.U3.CROSIS_CONNECTION_TIMEOUT,t);break;case"retrying":(0,ft.j)(ft.U3.CROSIS_CONNECTION_RETRYING,t);break;case"reconnecting":(0,ft.j)(ft.U3.CROSIS_CONNECTION_RECONNECTING,t);break;case"connect failed":(0,ft.j)(ft.U3.CROSIS_CONNECTION_FAILED,t);break;case"falling back to polling":(0,ft.j)(ft.U3.CROSIS_CONNECTION_FALLING_BACK_TO_POLLING,t)}}}));return r.connect({overrideClusterMetadata:i,customConnectionMetadata:t,context:u}),function(){e()}}}),[r,i,s,u,t])}({customConnectionMetadata:e.customConnectionMetadata}),function(e){var t=(0,Ie.Z)().packager,r=e.wid,n=e.store.dispatch,a=function(e){n((0,ht.yY)({wid:r,message:e,type:"",raw:!1}))},i=function(){n((0,ht.yY)({wid:r,message:"\n\nReplit: Package operation failed.\n\n",type:"error",raw:!1}))},o=function(e){if(e)return n({type:"PACKAGER_STARTED",wid:r}),void n((0,ht.yY)({wid:r,message:"\n\nReplit: Updating package configuration\n\n",type:"",raw:!1}));n({type:"PACKAGER_ENDED",wid:r})};ie.useEffect((function(){var e=t.onOutput(a),r=t.onError(i),n=t.onStateChanged(o);return function(){e(),r(),n()}}),[])}(t),Jk(t),function(e){var t=e.wid,r=e.store.dispatch,n=(0,we.Z)(),a=(0,ke.dtd)({variables:{id:n}}),i=a.data,o=a.loading;ie.useEffect((function(){!o&&i&&"Repl"===i.repl.__typename&&i.repl.permissions.length&&r({type:"REQUEST_NOTIFICATION_PERMS",wid:t})}),[i,r,t,e,o])}(t),function(){var e=(0,Ie.Z)().presence;ie.useEffect((function(){return e.onFollowingUsersChanged((function(e){var t=e.followingUsers,r=e.type,n=t.length;"follow"===r?(0,ft.j)(ej.events.REMOTE_USER_CURSOR_FOLLOWED,{numFollowers:n}):(0,ft.j)(ej.events.REMOTE_USER_CURSOR_UNFOLLOWED,{numFollowers:n})}))}),[e])}(),nj(t),lj(t.wid),function(){var e=(0,Ie.Z)().presence,t=(0,we.Z)(),r=(0,ke.al4)({variables:{id:t}}),n=r.data,a=r.loading,i=r.error;ie.useEffect((function(){if(!a)if(i)st.Tb(i);else if(n&&"Repl"===n.repl.__typename){var t=n.currentUser,r=n.repl;if(r.isProjectFork&&r.owner&&"Team"===r.owner.__typename){var o=r.owner.id;if(null===t||void 0===t?void 0:t.teams.some((function(e){var t=e.id,r=e.isAdmin;return t===o&&r})))return e.onActiveUsersChange((function(e){e.length>1&&(0,ft.Cn)(ej.events.TEAMS_ADMIN_STUDENT_MULTIPLAYER,{replId:r.id,language:r.language,url:r.url,teamId:o})}))}}}),[e,n,a,t,i])}(),function(){var e,t,r=(0,we.Z)(),n=(0,ke.igq)({variables:{replId:r}}).data,a=(null===n||void 0===n||null===(e=n.currentUser)||void 0===e?void 0:e.hasReplConnectionSub)&&"Repl"===n.repl.__typename&&"Team"===(null===(t=n.repl.owner)||void 0===t?void 0:t.__typename),i=(0,Vk.Z)();(0,ke.LSc)({variables:{replId:r},skip:!a||i!==Zh.e.CONNECTED})}(),cj(t),function(){var e=(0,Er.Z)(),t=(0,Ie.Z)().presence;ie.useEffect((function(){t.updateOpenFile(e)}),[e,t])}(),function(e){var t=(0,Ie.Z)(),r=t.presence,n=t.session,a=(0,Ha.Z)(),i=e.wid,o=e.store.dispatch;ie.useEffect((function(){if(a){var e=n.getActiveFile();e===r.getActiveFileForUser(a.id)&&o({type:"SCROLL_TO_FOLLOWED_USERS_CURSOR",wid:i,path:e})}}),[i,a,o,r,n])}(t),function(e){var t=(0,Ie.Z)(),r=t.container,n=t.session,a=e.wid,i=e.store.dispatch;ie.useEffect((function(){return r.onConnectionStateChanged((function(e){if(e===tj.e.CONNECTED){var t=n.getActiveFile(),r=n.getPreviewedFile();r&&t!==r&&i({type:"LOAD_FILE",path:r,wid:a})}}))}),[r,n,i,a])}(t),function(){var e=(0,Ie.Z)(),t=e.presence,r=e.session;ie.useEffect((function(){var e=function(){if("visible"===document.visibilityState){var e=r.getActiveFile()||null;t.updateSessionTimestamp(),t.updateOpenFile(e)}};return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}}),[t,r])}(),function(){var e=(0,Ie.Z)(),t=e.session,r=e.presence;ie.useEffect((function(){return r.onUserOpenedFile((function(e){var n=e.file,a=e.user,i=r.getFollowedUser();i&&a.username===i.username&&n&&t.openFile(n)}))}),[r,t])}(),function(){var e=(0,Ie.Z)().session,t=(0,we.Z)(),r=(0,ke.eX4)({variables:{replId:t}}).data,n="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl:null;ie.useEffect((function(){var t;n&&(null===(t=n.templateInfo)||void 0===t?void 0:t.label.includes("Nix"))&&e.setAreHiddenFilesVisible(!0)}),[e,n])}(),pj(t),function(e){var t=e.store.dispatch,r=Sw(),n=(0,ue.useRouter)(),a=Boolean(n.query.lite)||Boolean(n.query.embed);ie.useEffect((function(){if(!a){var n=e.wid,i=e.store.getState(),o=i.layout,l=i.plugins,c="youtubepreview",s=bt.PP(o,l,c);if(r){if(!s){var u=bt.PP(o,l,"shell");if(!u)throw new Error("Expected shell path");var d=bt.Il(bt.Il(u)),f=bt.$T(o,c,"below",d),p=f.path,b=f.to;t({type:"UPDATE_LAYOUT",wid:n,path:p,to:b})}}else{if(!s)return;var m=bt.Od(o,c),h=m.path,v=m.to;t({type:"UPDATE_LAYOUT",wid:n,path:h,to:v})}}}),[r,t,e,a])}(t),function(e){var t=(0,Ki.x)();ie.useEffect((function(){var r="packager";(null===t||void 0===t?void 0:t.packageSearch)?(e.store.getState().plugins.packager||e.store.dispatch({type:"LOAD_PLUGIN",pluginType:"packager",pluginPud:r,title:"packages"}),e.store.dispatch({type:"ADD_SIDE_NAV_ITEM",index:2,navItem:{pud:r,pluginType:"packager",tooltip:"Packages",svg:"Packages"}})):e.store.dispatch({type:"REMOVE_SIDE_NAV_ITEM",navItemPud:r})}),[t,e])}(t),yj(t),wj(t),(0,Gk.Z)();var a=(0,Hk.Z)();return ie.useEffect((function(){var e=function(e){"s"===e.key&&(0,di.jh)(e)&&e.preventDefault()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),function(){var e=(0,Ie.Z)().container,t=(0,Ei.Z)("flag-seccomp-port-detection");ie.useEffect((function(){if(t)return e.openChannel({service:"replnet",name:"replnet"},(function(){}))}),[e,t])}(),(0,kj.Z)({workspaceType:"desktop"}),(0,jj.Z)(),function(e,t,r){var n=(0,we.Z)(),a=!e||!e.isLoggedIn;(0,ke.Vgw)({skip:a||t,variables:{replId:n},onSubscriptionData:function(e){var t;!1===(null===(t=e.subscriptionData.data)||void 0===t?void 0:t.currentUserCanWrite)&&(r(!0),window.location.reload())}})}(r,n,a),null}function Sj(e){var t=e.stacked,r=e.lite;return(0,ee.BX)("div",{className:re().dynamic([["5ea97d72a5e5aa54",[r?0:"var(--space-8)",r?0:"var(--space-8)",r?"calc(-1*var(--space-8))":0,r?0:"var(--space-8)",r?0:"var(--space-8)"]]])+" "+(At()("root",{stacked:t,lite:r})||""),children:[(0,ee.tZ)("div",{className:re().dynamic([["5ea97d72a5e5aa54",[r?0:"var(--space-8)",r?0:"var(--space-8)",r?"calc(-1*var(--space-8))":0,r?0:"var(--space-8)",r?0:"var(--space-8)"]]])+" header"}),(0,ee.tZ)("div",{className:re().dynamic([["5ea97d72a5e5aa54",[r?0:"var(--space-8)",r?0:"var(--space-8)",r?"calc(-1*var(--space-8))":0,r?0:"var(--space-8)",r?0:"var(--space-8)"]]])+" sidenav"}),(0,ee.tZ)("div",{className:re().dynamic([["5ea97d72a5e5aa54",[r?0:"var(--space-8)",r?0:"var(--space-8)",r?"calc(-1*var(--space-8))":0,r?0:"var(--space-8)",r?0:"var(--space-8)"]]])+" sidebar"}),(0,ee.BX)("div",{className:re().dynamic([["5ea97d72a5e5aa54",[r?0:"var(--space-8)",r?0:"var(--space-8)",r?"calc(-1*var(--space-8))":0,r?0:"var(--space-8)",r?0:"var(--space-8)"]]])+" content",children:[(0,ee.tZ)("div",{className:re().dynamic([["5ea97d72a5e5aa54",[r?0:"var(--space-8)",r?0:"var(--space-8)",r?"calc(-1*var(--space-8))":0,r?0:"var(--space-8)",r?0:"var(--space-8)"]]])+" file"}),(0,ee.tZ)("div",{className:re().dynamic([["5ea97d72a5e5aa54",[r?0:"var(--space-8)",r?0:"var(--space-8)",r?"calc(-1*var(--space-8))":0,r?0:"var(--space-8)",r?0:"var(--space-8)"]]])+" spacer"}),(0,ee.tZ)("div",{className:re().dynamic([["5ea97d72a5e5aa54",[r?0:"var(--space-8)",r?0:"var(--space-8)",r?"calc(-1*var(--space-8))":0,r?0:"var(--space-8)",r?0:"var(--space-8)"]]])+" output"})]}),(0,ee.tZ)(re(),{id:"5ea97d72a5e5aa54",dynamic:[r?0:"var(--space-8)",r?0:"var(--space-8)",r?"calc(-1*var(--space-8))":0,r?0:"var(--space-8)",r?0:"var(--space-8)"],children:'.root.__jsx-style-dynamic-selector{position:fixed;top:0;left:0;width:100%;height:100%;display:grid;grid-template-areas:"header header header header""sidenav sidebar content content";grid-template-columns:50px -webkit-calc(((100vw - 50px)*.15 - 3px))'.concat(r?0:"var(--space-8)"," 1fr;grid-template-columns:50px -moz-calc(((100vw - 50px)*.15 - 3px))").concat(r?0:"var(--space-8)"," 1fr;grid-template-columns:50px calc(((100vw - 50px)*.15 - 3px))").concat(r?0:"var(--space-8)"," 1fr;grid-gap:var(--space-8);grid-template-rows:auto 1fr;background-color:var(--background-root);padding-bottom:").concat(r?0:"var(--space-8)","}.header.__jsx-style-dynamic-selector{grid-area:header;height:60px;margin-bottom:").concat(r?"calc(-1*var(--space-8))":0,";background-color:var(--background-default);-webkit-box-shadow:var(--shadow-1);-moz-box-shadow:var(--shadow-1);box-shadow:var(--shadow-1);border-bottom:.5px solid var(--background-higher)}.sidenav.__jsx-style-dynamic-selector{width:50px;grid-area:sidenav;background-color:var(--background-default);margin-left:").concat(r?0:"var(--space-8)",";-webkit-border-top-left-radius:var(--border-radius-4);-moz-border-radius-topleft:var(--border-radius-4);border-top-left-radius:var(--border-radius-4);-webkit-border-bottom-left-radius:var(--border-radius-4);-moz-border-radius-bottomleft:var(--border-radius-4);border-bottom-left-radius:var(--border-radius-4)}.sidebar.__jsx-style-dynamic-selector{grid-area:sidebar;background-color:var(--background-default);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.content.__jsx-style-dynamic-selector{grid-area:content;position:relative;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding-right:").concat(r?0:"var(--space-8)",';-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.file.__jsx-style-dynamic-selector,.output.__jsx-style-dynamic-selector{height:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.file.__jsx-style-dynamic-selector{background-color:var(--background-default);width:-webkit-calc(50% + var(--space-8));width:-moz-calc(50% + var(--space-8));width:calc(50% + var(--space-8))}.output.__jsx-style-dynamic-selector{background-color:var(--background-root);width:50%}.spacer.__jsx-style-dynamic-selector{width:var(--space-8);height:var(--space-8)}.lite.__jsx-style-dynamic-selector .sidebar.__jsx-style-dynamic-selector{display:none}.lite.__jsx-style-dynamic-selector{grid-template-areas:"header header""sidenav content";grid-template-columns:50px 1fr;grid-template-rows:auto 1fr}.lite.__jsx-style-dynamic-selector .header.__jsx-style-dynamic-selector{height:40px}.stacked.__jsx-style-dynamic-selector .content.__jsx-style-dynamic-selector{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.stacked.__jsx-style-dynamic-selector .file.__jsx-style-dynamic-selector,.stacked.__jsx-style-dynamic-selector .output.__jsx-style-dynamic-selector{width:100%;height:50%}')})]})}function Ej(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Oj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ej(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ej(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var _j={overlimit:{title:"Multiplayer Limit Reached",body:"Repl reached its multiplayer limit. Please contact the owner."},notfound:{title:"Invite Link 404",body:"Multiplayer invite link not found. Please contact the owner."}};function Cj(e){var t=e.language,r=(0,ue.useRouter)().query,n=Oj(ie.useState(!1),2),a=n[0],i=n[1],o=null,l=me().get(t)?null:t;r.classroom_template?o={title:"Project Template",body:"This is the template that students will be given to fork. When you are finished, close this tab, go back to the classroom, and create the project."}:l?o={title:"Unsupported Language",body:(0,ee.BX)("div",{children:[(0,ee.tZ)("p",{children:"We encountered an internal error while loading your repl"}),(0,ee.tZ)("br",{}),(0,ee.BX)("p",{children:['The language "',l,"\" doesn't exist.",(0,ee.tZ)("br",{}),(0,ee.tZ)("br",{}),"You can still view your repl but many features may not work.",(0,ee.tZ)("br",{}),"Our engineers have been notified and we will have a fix for this soon."]})]})}:r.error&&(o=_j[r.error.toString()]||{title:"Error",body:"Somethng went wrong"});var c=!a&&Boolean(o);return(0,ee.tZ)(It.Z,{onRequestClose:function(){return i(!0)},isOpen:c,children:(0,ee.BX)("div",{className:re().dynamic([["3ae3c78bdf1904c5",[he.j.mobileMax]]])+" content",children:[(0,ee.tZ)(Ne.Z,{level:3,children:null===o||void 0===o?void 0:o.title}),null===o||void 0===o?void 0:o.body,(0,ee.tZ)("div",{className:re().dynamic([["3ae3c78bdf1904c5",[he.j.mobileMax]]]),children:(0,ee.tZ)(ve.Z,{children:"Continue"})}),(0,ee.tZ)(re(),{id:"3ae3c78bdf1904c5",dynamic:[he.j.mobileMax],children:".content.__jsx-style-dynamic-selector{color:var(--foreground-default);padding:var(--space-16);display:grid;grid-gap:var(--space-16)}@media screen and (min-width:".concat(he.j.mobileMax,"px){.content.__jsx-style-dynamic-selector{padding:var(--space-48)}}")})]})})}function Aj(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ij(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function Nj(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Ij(i,n,a,o,l,"next",e)}function l(e){Ij(i,n,a,o,l,"throw",e)}o(void 0)}))}}function Tj(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Tj(e,t,r[t])}))}return e}function Rj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||Dj(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lj(e){return function(e){if(Array.isArray(e))return Aj(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Dj(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dj(e,t){if(e){if("string"===typeof e)return Aj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Aj(e,t):void 0}}function Uj(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zj(e,t){var r=t.session,n=e.wid,a=e.store;r.onSessionStateChanged((function(e){var t=e.openFiles[e.activeTab],i=r.getPreviewedFile(),o=Boolean(i);t!==a.getState().activeFile&&a.dispatch({type:"OPEN_FILE",wid:n,path:t,session:!0}),t?o&&i!==t&&"md"===(0,_r.r6)(t)&&r.setPreviewedFile(t):a.dispatch(qo({wid:n}))})),r.onPreviewedFileChanged((function(e){e?a.dispatch({type:"ADD_MARKDOWN_TAB",wid:n}):a.dispatch({type:"REMOVE_MARKDOWN_TAB",wid:n})})),e.register("services",{receiver:function(e,t,a){return"OPEN_FILE"===a.type?function(){if(void 0!==a.path&&!a.session){var e=a.path,t=a.tabIndex,n=a.newTab;r.openFile(e,{tabIndex:t,newTab:n})}}:"MOVE_FILE"===a.type?function(){var e=a.path,t=a.to;r.moveFile(e,t)}:"DELETE_FILE"===a.type?function(){var e=a.path;r.deleteFile(e)}:"CLOSE_HEADER_TAB"===a.type?function(){var e=r.getState().openFiles.indexOf(a.path);r.closeTab(e)}:"UPDATE_FILE_CURSORS"===a.type?function(){var e=a.selections;if(e.length<0)throw new Error("Expected cursor selections");var t=e[0],n=t.rawPosition,i=t.position;r.setCursorPosition(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Uj(e,t,r[t])}))}return e}({},n,{offset:i}))}:"ADD_MARKDOWN_TAB"===a.type?function(e,t){var r=t().workspace[n],a=r.layout,i=r.plugins;if(!bt.PP(a,i,"markdownviewer")){var o=bt.PP(a,i,"shell");if(!o)throw new Error("Expected shell path");e({type:"NEW_TAB",path:bt.Il(bt.Il(o)),layout:{type:"pane",pud:"markdownviewer"},setActiveTab:!0,wid:n})}}:"ADD_INSTRUCTIONS2_TAB"===a.type?function(e,t){var r=t().workspace[n],a=r.layout,i=r.plugins;if(!bt.PP(a,i,"instructionsviewer2")){var o=bt.PP(a,i,"shell");if(!o)throw new Error("Expected shell path");e({type:"NEW_TAB",path:bt.Il(bt.Il(o)),layout:{type:"pane",pud:"instructionsviewer2"},setActiveTab:!0,wid:n})}}:"REMOVE_MARKDOWN_TAB"===a.type?function(e,t){var r=t().workspace[n],a=r.layout,i=r.plugins;if(bt.PP(a,i,"markdownviewer")){var o=bt.PP(a,i,"shell");if(!o)throw new Error("Expected shell path");e({type:"CLOSE_TAB",path:bt.Il(bt.Il(o)),tabPud:"markdownviewer",wid:n})}}:"ADD_CLUI_CURL_TAB"===a.type?function(e,t){if(!(0,ct.Z)(t().user.userInfo,"flag-cluicurl"))return null;var r=t().workspace[n],a=r.layout,i=r.plugins,o=bt.PP(a,i,"cluicurl");if(o)e({type:"SET_ACTIVE_TAB",path:bt.Il(bt.Il(o)),tabIndex:o[o.length-1],wid:n});else{var l=bt.PP(a,i,"shell");if(!l)throw new Error("Expected shell path");e({type:"NEW_TAB",path:bt.Il(bt.Il(l)),layout:{type:"pane",pud:"cluicurl"},setActiveTab:!0,wid:n})}}:null}}),e.register("fsreduxbridge",function(e){var t=e.fs,r={};return{receiver:function(e,n,a){return"UPLOAD_FILE"===a.type?function(){var r=Nj(J().mark((function r(n){var i;return J().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:"CREATE_FILE",wid:e,path:a.path}),r.next=3,t.writeFile(a.path,Pn.Z.from(a.content));case 3:if(!(i=r.sent.error)){r.next=7;break}return n({wid:e,type:"FILE_ERROR",path:a.path,error:i}),r.abrupt("return");case 7:n({wid:e,type:"LOAD_FILE",path:a.path});case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}():"OPEN_FILE"===a.type?function(t){a.path&&t({wid:e,type:"LOAD_FILE",path:a.path})}:"LOAD_FILE"===a.type?function(i,o){var l=(0,kt.Z)(o(),e,n,"fsreduxbridge"),c=l.files[a.path];if(c&&c.loaded)i({type:"FILE_CACHE_HIT",wid:e,path:a.path,file:{loaded:!0,path:a.path,content:Pn.Z.from(c.content)}});else if(!r[a.path])if(l.files[a.path]||i({type:"CREATE_FILE",wid:e,path:a.path,changeSource:"containerfs"}),l.filestate[a.path]!==ha.Loading&&i({type:"FILE_LOADING",wid:e,path:a.path}),(0,_r.Mb)(a.path)){var s=t.watchOtFile(a.path,{onReady:function(t){var n=t.initialContent,o=t.updateSelections,l=t.writeOps;r[a.path].writeOps=l,r[a.path].updateSelections=o,i({type:"FILE_LOADED",wid:e,path:a.path,file:{path:a.path,content:n,loaded:!0}})},onChange:function(t){var r=t.ops;i({wid:e,type:"OT_FILE_OP",path:a.path,changeSource:"containerfs",op:r})},onCursor:function(t){i({wid:e,type:"ADD_FILE_CURSOR",cursor:t,path:a.path})},onRemoveCursor:function(t){i({wid:e,type:"REMOVE_FILE_CURSOR",id:t,path:a.path})},onStatusChange:function(t){switch(t){case Or.KF.Dirty:return void i({wid:e,type:"FILE_DIRTY",path:a.path});case Or.KF.Syncing:if((0,kt.Z)(o(),e,n,"fsreduxbridge").filestate[a.path]===ha.Syncing)return;return void i({wid:e,type:"FILE_SYNCING",path:a.path});case Or.KF.Clean:i({wid:e,type:"FILE_CLEAN",path:a.path})}},onReconnectFail:function(t){r[a.path].onReconnect=t,i({type:"PROMPT_FILE_RECONNECT",wid:e,path:a.path})},onMoveOrDelete:function(t){switch(delete r[a.path],t.eventType){case Or.kS.Move:return void i({wid:e,type:"MOVE_FILE",path:a.path,to:t.to,changeSource:"containerfs"});case Or.kS.Delete:i({wid:e,type:"DELETE_FILE",path:a.path,changeSource:"containerfs"})}},onError:function(t,n){delete r[a.path],i({wid:e,type:"FILE_ERROR",path:a.path,error:n?ja.default.wrap(t).setExtras(n):t})}},!0);r[a.path]={dispose:s}}else{var u=!0,d=t.watchFile(a.path,{onChange:function(t){u?(u=!1,i({type:"FILE_LOADED",wid:e,path:a.path,file:{path:a.path,content:t,loaded:!0}})):i({type:"FILE_CACHE_HIT",wid:e,path:a.path,file:{loaded:!0,path:a.path,content:t}})},onMoveOrDelete:function(t){switch(delete r[a.path],t.eventType){case Or.kS.Move:return void i({wid:e,type:"MOVE_FILE",path:a.path,to:t.to,changeSource:"containerfs"});case Or.kS.Delete:i({wid:e,type:"DELETE_FILE",path:a.path,changeSource:"containerfs"})}},onError:function(t,n){delete r[a.path],i({wid:e,type:"FILE_ERROR",path:a.path,error:n?ja.default.wrap(t).setExtras(n):t})}});r[a.path]={dispose:d}}}:"OT_FILE_OP"===a.type?function(t){if("containerfs"!==a.changeSource){var n=r[a.path];if(!n)throw new Error("Expected file to be in watchedFiles");if(!n.writeOps)throw new Error("Expected writeOps function");n.writeOps(a.op),t({type:"FILE_OP_DONE",wid:e,path:a.path})}}:"UPDATE_FILE_CURSORS"===a.type?function(){var e=r[a.path];e&&e.updateSelections&&e.updateSelections(a.selections)}:"PERSIST_FILE"===a.type?function(){var r=Nj(J().mark((function r(i){var o,l,c;return J().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.persist({skipDebounce:Boolean(a.flush)});case 2:if(!r.sent.success){r.next=6;break}return i({type:"FILE_PERSISTED",wid:e}),r.abrupt("return");case 6:return r.next=8,t.persist();case 8:if(!(o=r.sent).success){r.next=12;break}return i({type:"FILE_PERSISTED",wid:e}),r.abrupt("return");case 12:i({type:"BSOD",wid:e,crasherPud:n,originalError:o.error}),l=new Error("snapshot error: "+o.error),c={source:"fsreduxbridge"},st.Tb(l,{tags:c}),(0,Bw.Q)(l,{tags:c});case 17:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}():"DOWNLOAD_FILE_CONTENT_REQUEST"===a.type?function(){var r=Nj(J().mark((function r(n){var i;return J().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.readFile(a.path);case 2:if(!(i=r.sent).error){r.next=6;break}return n({type:"DOWNLOAD_FILE_CONTENT_FAILURE",wid:e,path:a.path,error:i.error}),r.abrupt("return");case 6:n({type:"DOWNLOAD_FILE_CONTENT_SUCCESS",wid:e,path:a.path,content:i.content});case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}():"FILE_UNLOAD"===a.type?function(){r[a.path]&&(r[a.path].dispose(),delete r[a.path])}:"MOVE_FILE"===a.type||"DELETE_FILE"===a.type?function(t,r){if("containerfs"!==a.changeSource)throw new Error("Move file and delete file should only be dispatched by containerfs, use fs service instead.");if("MOVE_FILE"===a.type){var i,o=(0,kt.Z)(r(),e,n,"fsreduxbridge").filestate;i=Object.keys(o).includes(a.to)?[a.to]:(0,wa.GA)(o,a.to);var l=!0,c=!1,s=void 0;try{for(var u,d=i[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;t({type:"FILE_UNLOAD",wid:e,path:f})}}catch(p){c=!0,s=p}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}}:null},reducer:(0,vt.$)({primary:function(e,t){switch(t.type){case"FILE_RECONNECT_CHOSEN":return Pj({},e,{failedToReconnectFiles:e.failedToReconnectFiles.filter((function(e){return!t.paths.includes(e)}))});case"PROMPT_FILE_RECONNECT":return Pj({},e,{failedToReconnectFiles:Lj(new Set(Lj(e.failedToReconnectFiles).concat([t.path])))});default:return Pj({},e,{failedToReconnectFiles:e&&e.failedToReconnectFiles?e.failedToReconnectFiles:[]})}},files:Wo,filestate:Ca}),Component:function(e){var t=e.wid,n=e.pud,a=Rj((0,kt.J)(t,n,"fsreduxbridge"),1)[0].failedToReconnectFiles,i=Rj(ie.useState(!1),2),o=i[0],l=i[1],c=(0,rt.I0)(),s=function(){var e=Nj(J().mark((function e(i){var o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,ft.j)(ft.U3.FILE_RECONNECT_FALLBACK_CHOSEN,{choice:i}),l(!0),e.prev=2,e.next=5,Promise.all(a.map((function(e){var t=r[e];if(t){if(!t.onReconnect)throw new Error("Could not find onReconnect for failed to reconnect file");return t.onReconnect(i)}})));case 5:e.next=14;break;case 7:return e.prev=7,e.t0=e.catch(2),c({type:"BSOD",wid:t,crasherPud:n,originalError:e.t0}),o={source:"fsreduxbridge",bsod:"true"},st.Tb(e.t0,{tags:o}),(0,Bw.Q)(e.t0,{tags:o}),e.abrupt("return");case 14:c({wid:t,type:"FILE_RECONNECT_CHOSEN",paths:a}),l(!1);case 16:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();return(0,ee.tZ)(It.Z,{preventClose:!0,isOpen:Boolean(a.length),onRequestClose:function(){},children:(0,ee.BX)("div",{className:re().dynamic([["4adecb1885119401",[he.j.mobileMax]]])+" modal",children:[(0,ee.tZ)(Ne.Z,{level:3,children:"Contents diverged"}),(0,ee.tZ)(ge.Z,{children:"We had a hard time resolving differences between your content and server content while you were disconnected."}),o?(0,ee.tZ)(Nt.Z,{}):(0,ee.BX)(ee.HY,{children:[(0,ee.tZ)(ge.Z,{children:"What would you like to do?"}),(0,ee.BX)("div",{className:re().dynamic([["4adecb1885119401",[he.j.mobileMax]]])+" buttons",children:[(0,ee.tZ)(ve.Z,{onClick:function(){s("local")},color:"positive",children:"Choose my changes"}),(0,ee.tZ)(ve.Z,{onClick:function(){s("remote")},color:"negative",children:"Choose server changes"})]})]}),(0,ee.tZ)(re(),{id:"4adecb1885119401",dynamic:[he.j.mobileMax],children:".modal.__jsx-style-dynamic-selector{display:grid;padding:var(--space-32);grid-row-gap:var(--space-16)}.buttons.__jsx-style-dynamic-selector{display:grid;grid-row-gap:var(--space-16)}@media screen and (min-width:".concat(he.j.mobileMax,"px){.buttons.__jsx-style-dynamic-selector{grid-column-gap:var(--space-16);grid-auto-flow:column;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start}.buttons.__jsx-style-dynamic-selector button:first-child{-webkit-order:1;-ms-flex-order:1;order:1}}")})]})})}}}({fs:t.fs}))}var Bj=r(40079),Mj=r(29868),Fj=r(28747),Xj=r(38334);function Vj(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Gj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Vj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hj(e){var t=e.replId,r=e.isOpen,n=e.isLoggedIn,a=e.onRequestClose,i=Gj((0,Fj.Z)(),2),o=i[0],l=i[1].loading;return(0,ee.tZ)(It.Z,{isOpen:r,onRequestClose:a,preventClose:!0,children:n?(0,ee.BX)("div",{className:"jsx-8bfbc1c628664fc4 content",children:[(0,ee.BX)(ye.gC,{align:"center",spacing:4,children:[(0,ee.BX)(ye.gC,{align:"center",spacing:1,children:[(0,ee.tZ)(Ne.Z,{align:"center",level:1,children:"Fork & edit this repl"}),(0,ee.tZ)(ge.Z,{align:"center",size:"large",foreground:2,children:"You can edit this repl by creating your own copy of it"})]}),(0,ee.tZ)(ve.Z,{color:"primary",size:"large",filled:!0,Icon:Xj.Z,disabled:l,onClick:function(){l||o({originId:t,trackingData:{forkSource:"forkModal"}})},children:l?"Forking...":"Fork"})]}),(0,ee.tZ)(re(),{id:"8bfbc1c628664fc4",children:".content.jsx-8bfbc1c628664fc4{padding:var(--space-32)}"})]}):(0,ee.tZ)(Wc.Z,{title:"Sign up or log in to fork this repl",onSuccess:function(e){var r=e.isLogin;o({originId:t,trackingData:{forkSource:"forkModal",isSignup:!r}})},source:"fork"})})}var Wj=r(40606),Kj=r(91898),qj=r(24704);var Yj=r(71895),$j=r(25108);function Qj(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Jj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eZ(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,a)}function tZ(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){eZ(i,n,a,o,l,"next",e)}function l(e){eZ(i,n,a,o,l,"throw",e)}o(void 0)}))}}function rZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nZ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aZ(e){return aZ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},aZ(e)}function iZ(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sZ(e,t)}function oZ(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function lZ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){nZ(e,t,r[t])}))}return e}function cZ(e,t){return!t||"object"!==dZ(t)&&"function"!==typeof t?Jj(e):t}function sZ(e,t){return sZ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},sZ(e,t)}function uZ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Qj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var dZ=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function fZ(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=aZ(e);if(t){var a=aZ(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return cZ(this,r)}}var pZ=function(e){return JSON.parse(JSON.stringify(e))};function bZ(e){if(!Object.values(e.getState().plugins).find((function(e){return"adminpanel"===e.type}))){var t="adminpanel";e.dispatch({type:"LOAD_PLUGIN",pluginPud:t,pluginType:"adminpanel",title:"adminpanel"}),e.dispatch({type:"ADD_SIDE_NAV_ITEM",navItem:{pud:t,pluginType:"adminpanel",tooltip:"Crosis Logs",svg:"Alien"}})}}var mZ=function(e){iZ(r,e);var t=fZ(r);function r(){var e;return rZ(this,r),(e=t.apply(this,arguments)).state={forking:!1,isWorkspaceCrashed:!1,sentryEventId:null,isMounted:!1,showAuthOnForkPrompt:!1,serverConnectionMetadataUsed:!1,unreachable:!1},e.createNewWorkspace=function(){var t=!1,r=new pt.Z;r.injectServices(e.services),r.registerErrorHandler((function(r){var n=r.error,a=r.pluginType,i=r.pud,o=r.source;if(!t){t=!0,$j.error("Plugin with type ",a," and pud ",i," errored in ",o),$j.error(n);var l=null,c=null;if(oZ(n,ja.default)){l=n.extras;try{$j.log("CustomSentryError extra",JSON.stringify(n.extras))}catch(d){$j.log("CustomSentryError extra",n.extras)}c=n.tags,$j.log("CustomSentryError tags",n.tags)}var s=lZ({pluginType:a,workspaceSource:o,workspaceError:"true"},null!==c&&void 0!==c?c:{}),u=(0,Bw.Q)(n,{tags:s,extras:l||void 0});st.Tb(n,{tags:s,extra:l||void 0}),e.setState({isWorkspaceCrashed:!0,sentryEventId:u||null})}})),Bk(r),r.register("audio",O),r.register("bsoder",{receiver:function(t,n,a){"BSOD"===a.type&&(e.setState({isWorkspaceCrashed:!0,sentryEventId:a.sentryEventId||null}),r.store.dispatch({type:"WORKSPACE_WILL_UNMOUNT",wid:t}),a.crasherPud&&r.store.dispatch({type:"PLUGIN_BROKE",pud:a.crasherPud,message:"No message"}),a.originalError&&($j.error("".concat(a.crasherPud||"plugin"," crashed}")),$j.error(a.originalError)))}}),r.register("replforker",{receiver:function(t,r,n){return"OT_FILE_OP"===n.type&&"containerfs"!==n.changeSource&&!e.props.repl.isOwner&&e.setState({showAuthOnForkPrompt:!0}),null}}),r.register("replupdater",{receiver:function(t,r,n){if("REQUEST_REPL_UPDATE"===n.type){var a=Jj(e);return function(){var e=tZ(J().mark((function e(r){var i,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=a.props.repl,o=i.id,i.isOwner||st.$e((function(e){e.setExtra("updates",n.updates),st.Tb(new Error("Trying to update repl without perms"))})),a.props.updateRepl(o,n.updates),r({wid:t,type:"REPL_UPDATED",updates:n.updates}),n.refresh&&window.location.replace(window.location.pathname);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}return"REPL_UPDATED"===n.type?function(){e.props.updateReplSuccess(lZ({},e.props.repl,n.updates))}:null}}),zj(r,e.services);var n=e.props,a=n.repl,i=n.user,o=n.router,l=n.showShareToTalkPromo,c=n.shouldShowMPInviteTour,s=n.shouldShowEducationPane,u=n.shouldShowAutograderPane,d=n.shouldShowUnitTestPane,f=n.shouldShowYoutubePane;r.yikesInjectStore(e.props.reduxStore);var p=(0,oe.isMobile)({ua:window.navigator.userAgent,tablet:!0});window.mobileTaint=p,window.anonTaint=!i.isLoggedIn;var b=function(){var t=(0,at.Z)(i);o.query.lite&&((t=at.L).codeIntelligence=!1);var r=(0,ct.Z)(i,"windowing")&&!o.query.lite,n=Boolean(window.AudioContext||window.webkitAudioContext),b=(0,ct.Z)(e.props.user,"flag-cluicurl"),m=i&&i.isLoggedIn&&i.roles.includes("admin"),h=(0,ct.Z)(i,"flag-yt-in-the-ws")&&a.language.includes("python")&&f,v=(0,ct.Z)(i,"flag-webview-devtools");return tt({lang:a.language,lite:o.query.lite,outputonly:Boolean(o.query.outputonly),sharing:!a.isOwner,isMobile:p,preferences:t,isServer:a.config.isServer||!1,isVnc:a.config.isVnc||!1,gitRemoteUrl:a.config.gitRemoteUrl,inspector:Boolean(o.query.inspector),showShareToTalkPromo:l,shouldShowMPInviteTour:c,shouldShowEducationPane:s,shouldShowAutograderPane:u,shouldShowUnitTestPane:d,isWindowingEnabled:r,hasAudioContext:n,shouldLoadAdminPanel:m,isCluiCurlEnabled:b,isLoggedIn:e.props.user.isLoggedIn,shouldLoadYoutubePane:h,shouldUseDevtoolsWebview:v})}();r.bootstrap(b),r.store.dispatch({type:"REPL_UPDATED",updates:a});var m=window.performance.now(),h=e.state.serverConnectionMetadataUsed?void 0:e.props.connectionMetadata;r.store.dispatch({type:"GOVAL_CONNECT",customConnectionMetadata:h}),e.setState({serverConnectionMetadataUsed:!0}),r.govalConnectionStarted=m,e.props.doRunFlow&&((0,ft.j)(ft.U3.REPL_CREATED,{isSignup:!1,isOnboarding:!1,isForked:!1,isPrivate:a.isPrivate,replId:a.id,isRenamed:!1,language:a.language,isSelfForked:!1,isGithubImport:!0}),r.store.dispatch({type:"LOAD_PLUGIN",pluginPud:"runflow",pluginType:"runflow"}),r.store.dispatch(lZ({type:"UPDATE_LAYOUT"},bt.$T(r.store.getState().layout,"runflow","inside",bt.cV())))),r.store.dispatch({type:"UPDATE_WORKSPACE_PREFERENCES",updates:b.preferences});var v="/home/runner/".concat(a.slug);r.store.dispatch({type:"UPDATE_WORKING_DIRECTORY",path:v}),window.debug=function(){return bZ(r.store)},window.services=e.services,o.query.debug&&(bZ(r.store),r.store.dispatch({type:"START_CROSIS_ADMIN_LOGS"})),e.ws=r,e.WsComponent=r.component()},e.handleBeforePopState=function(e){var t=e.as;return!e.options.shallow||(window.location.href=t,window.location.reload(),!1)},e.handleRouteChange=function(){if(e.props.router.query.replUrl!==e.props.repl.url){var t=e.props.replsByUrl[e.props.router.query.replUrl];if(!t)return;e.props.setActiveReplId({replId:t})}},e}var n=r.prototype;return n.UNSAFE_componentWillMount=function(){var e=this;if(st.YA("replId",this.props.repl.id),ut.YA("replId",this.props.repl.id),(0,lt.Fy)(this.props.repl),!this.props.shouldRedirectToExpired&&!this.props.shouldRedirectToDepricated){(0,ct.Z)(this.props.user,"flag-handicap-goval-conn")&&setInterval((function(){window.v1ws&&(window.v1ws.close(),window.v1ws=null),window.v6ws&&(window.v6ws.close(),window.v6ws=null)}),6e4),window["flag-windowing"]=(0,ct.Z)(this.props.user,"windowing"),window["flag-ot-high-consitency"]=(0,ct.Z)(this.props.user,"flag-ot-high-consitency"),window["open-markdown-split"]=(0,ct.Z)(this.props.user,"open-markdown-split"),this.services=(0,Fk.Z)({onUnrecoverableError:function(t){if(t.message.toLowerCase().includes("repl not found"))ue.default.push("/home","~/");else{var r={replenvironmentservices:!0};$j.error(t),st.Tb(t,{tags:r});var n=(0,Bw.Q)(t,{tags:r});e.setState({isWorkspaceCrashed:!0,sentryEventId:n})}}}),this.createNewWorkspace(),this.props.router.events.on("routeChangeComplete",this.handleRouteChange),window.performance&&window.performance.navigation&&1===window.performance.navigation.type&&(0,ft.j)(ft.U3.PAGE_RELOADED,{repl:this.props.repl});var t=this.services.presence.onActiveUsersChange((function(){var r;t(),(0,ft.j)(ft.U3.MULTIPLAYER_REPL_OPENED,{replId:e.props.repl.id,participantsCount:e.props.multiplayers,usersOnlineCount:null===(r=e.services)||void 0===r?void 0:r.presence.getActiveUsers().length,threadsVariant:"replace-chat"})}));(0,ft.j)(ft.U3.CLIENT_PING,{});var r=lt.kg.timeStart();(0,nt.LK)("/data/t/ping").then((function(){r("latency to node server")}))}},n.componentDidMount=function(){this.setState({isMounted:!0});var e=this.props,t=e.repl,r=e.router,n=e.shouldRedirectToExpired,a=e.shouldRedirectToDepricated,i=e.user;r.beforePopState(this.handleBeforePopState);var o=t.url.split("/")[1].slice(1);if(n)r.replace({pathname:"/expiredPrivateRepl",query:{isOwner:t.isOwner,ownerUsername:o,replId:t.id}},r.asPath);else if(a)r.replace({pathname:"/deprecatedLangauge",query:{replId:t.id}},r.asPath);else{if((0,ct.Z)(i,"flag-replco-probe")){var l=this,c={replId:t.id,slug:t.slug,user:o};(0,Wj.dp)(c,(function(e){l.setState({unreachable:!e})}))}(0,ct.Z)(i,"flag-dd-rum")&&(qj.v.init({applicationId:"70f7ac46-ee96-4ddc-91fa-db466436f768",clientToken:"pub1bf559fff8bd97cc0f38da70d80a0a17",site:"datadoghq.com",service:"repl-it-web-workspace",env:"production",version:"b88ffe5",sampleRate:100,trackInteractions:!0,beforeSend:function(e){var t;return!!(null===(t=e.context)||void 0===t?void 0:t.bsod)}}),(0,ct.Z)(i,"flag-dd-rum-session-replay")&&qj.v.startSessionReplayRecording()),i&&!t.isOwner&&(0,ft.j)(ft.U3.REPL_GUEST_VIEW,{page:"replEnvironment"})}},n.componentWillUnmount=function(){this.props.router.beforePopState((function(){return!0})),this.props.router.events.off("routeChangeComplete",this.handleRouteChange),window.debug=void 0,window.__SOCIAL_VIEW_FORK=void 0,this.services&&this.services.container.destroy(),(0,Wj._Y)(this.props.repl.id),this.unmounted=!0,st.YA("replId",void 0),ut.YA("replId",void 0),(0,lt.dv)()},n.componentDidUpdate=function(e){var t=e.repl.id!==this.props.repl.id,r=e.repl.url!==this.props.repl.url;if(t||r){var n=this.props.repl,a=n.url,i=lZ({},this.props.router.query,{replUrl:n.url}),o=mt(i);ue.default.push({pathname:"/replEnvironment",query:i},{pathname:a,query:o},{shallow:!0}),this.state.forking||t&&this.services&&(window.location.href=n.url)}},n.getDescription=function(e){return this.props.repl.description?this.props.repl.description:"A ".concat(e," repl")},n.render=function(){var e=this,t=this.props,r=t.shouldRedirectToExpired,n=t.shouldRedirectToDepricated;if(r||n)return null;var a=this.props,i=a.lite,o=a.repl,l=a.user,c=a.stacked,s=a.connectionMetadata,u=a.userImage,d="https://replit.com"+o.url,f=me().get(o.language).displayName,p=this.getDescription(f),b=l.isLoggedIn&&o.userId===l.id,m=this.WsComponent;return(0,ee.tZ)(mn.E,{children:(0,ee.tZ)("div",{className:At()("workspace-wrapper",{desktop:!i,lite:i}),id:Bj.b,children:(0,ee.tZ)(ot.Z,{children:(0,ee.BX)(de.Z,{title:o.title,oembedUrl:d,description:p||void 0,noHeader:!0,noFooter:!0,forceDrawer:!0,hideEmailVerify:!0,children:[(0,ee.tZ)(Cj,{language:o.language}),this.state.isWorkspaceCrashed&&(0,ee.tZ)(Xk.Z,{devHide:function(){return e.setState({isWorkspaceCrashed:!1})},eventId:this.state.sentryEventId,currentUserImage:u,currentUserUsername:l.isLoggedIn?l.username:void 0}),(0,ee.tZ)("div",{className:"jsx-849e56f81ae5af67 "+(At()("workspace-page-wrapper",{desktop:!i,lite:i})||""),children:m&&this.ws&&this.services&&this.state.isMounted?(0,ee.tZ)(Mk.Z.Provider,{value:this.services,children:(0,ee.tZ)(Mj.Z.Provider,{value:o.id,children:(0,ee.BX)(Tf,{children:[(0,ee.tZ)(vo.F.Provider,{value:this.state.unreachable,children:(0,ee.tZ)(hZ,{children:(0,ee.tZ)(m,{className:"jsx-849e56f81ae5af67"})})}),(0,ee.tZ)(Zj,{ws:this.ws,user:l,isOwner:b,customConnectionMetadata:s}),(0,ee.tZ)(Yj.Z,{})]})})}):(0,ee.tZ)(Sj,{lite:Boolean(i),stacked:c})}),this.props.repl.isOwner?null:(0,ee.tZ)(Hj,{isLoggedIn:this.props.user.isLoggedIn,isOpen:this.state.showAuthOnForkPrompt,onRequestClose:function(){return e.setState({showAuthOnForkPrompt:!1})},replId:o.id}),(0,ee.tZ)(re(),{id:"baeb5e765c090367",children:"html,body{scrollbar-width:none}"}),(0,ee.tZ)(re(),{id:"4238847a03fd19eb",children:".workspace-page-wrapper.jsx-849e56f81ae5af67{height:100%;width:100%;position:fixed;left:0px;right:0px;top:0;bottom:0px;background-color:var(--background-root)}.workspace-page-wrapper.desktop.jsx-849e56f81ae5af67{padding:var(--space-8);padding-top:0}.banner+.content>.workspace-page-wrapper.jsx-849e56f81ae5af67{height:-webkit-calc(100% - 36px);height:-moz-calc(100% - 36px);height:calc(100% - 36px);top:36px}"})]})})})})},r.getInitialProps=function(e){var t=e.req,r=e.store,n=e.query,a=e.apolloClient;return tZ(J().mark((function e(){var i,o,l,c,s,u,d,f,p,b,m,h,v,g,y,x,w,k,j,Z,S,E,O,_,C,A,I,N,T,P,R,L,D;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}throw new Error("Expected apolloClient");case 2:if(i="string"===typeof n.lite&&n.lite?n.lite:!!n.lite,l=!1,n.replUrl){e.next=7;break}throw new Error("Please add replUrl to query");case 7:return c=uZ(n.replUrl.split("/"),3),s=c[1],u=c[2],d="/data/repls/",d+="repls"!==s?s+"/":"anon/",e.t0=uZ,e.next=15,Promise.all([(0,nt.LK)("".concat(d).concat(u)),(0,dt.Z)(t,r)]);case 15:e.t1=e.sent,f=(0,e.t0)(e.t1,1),o=f[0],l=Boolean(o.is_mobile),e.next=31;break;case 22:if(t&&t.headers["user-agent"]){e.next=24;break}throw new Error("Invalid request");case 24:return o=pZ(t.repl),l=pZ(t.isMobile),e.next=28,(0,dt.Z)(t,r);case 28:if(!(p=e.sent.error)){e.next=31;break}return e.abrupt("return",{error:p});case 31:if((b=r.getState().user.userInfo).isLoggedIn||(b=null),m=(0,at.Z)(b),n.lite&&((m=at.L).codeIntelligence=!1),r.dispatch((0,it.h$)(o)),h=r.getState().repls.data[o.id],st.YA("replId",h.id),ut.YA("replId",h.id),(0,lt.Fy)(h),r.dispatch(fe({replId:h.id})),g=!1,y=!1,x=!1,w=!1,k=!1,j=!1,Z=!1,S=!0,E=!0,O=0,!b){e.next=59;break}return e.next=56,a.query({query:ke.dFe,variables:{replId:h.id}});case 56:(null===(C=e.sent.data)||void 0===C?void 0:C.currentUser)&&(g=!C.currentUser.shareToTalkPromoSeen,w=!C.currentUser.shouldShowMPInviteTour,_=C.currentUser.image,"Repl"===(null===C||void 0===C||null===(A=C.repl)||void 0===A?void 0:A.__typename)?(C.repl.lang.isDeprecated&&(x=!0),"Team"===(null===(N=C.repl.owner)||void 0===N?void 0:N.__typename)&&(S=!1),C.repl.isProject||C.repl.isProjectFork?j=!0:Z=!0,E=!1,R="Team"===(null===(T=C.repl.owner)||void 0===T?void 0:T.__typename)&&C.repl.owner.isAdmin,C.repl.isProjectFork&&!C.repl.isModelSolution&&(k=R),v=null===C||void 0===C||null===(P=C.repl)||void 0===P?void 0:P.owner):"SubscriptionExpiredError"===(null===C||void 0===C||null===(I=C.repl)||void 0===I?void 0:I.__typename)&&(y=!0)),"Repl"===C.repl.__typename&&(O=C.repl.multiplayers.length,"User"===(null===(L=C.repl.owner)||void 0===L?void 0:L.__typename)&&(O+=1));case 59:return n.token&&n.gurl&&n.conmanURL&&(D={token:n.token,gurl:n.gurl,conmanURL:n.conmanURL}),e.abrupt("return",{doRunFlow:Boolean(n.doRunFlow),owner:v,showShareToTalkPromo:g,shouldRedirectToExpired:y,shouldRedirectToDepricated:x,shouldShowMPInviteTour:w,isMobile:l,shouldShowEducationPane:k,shouldShowAutograderPane:j,shouldShowUnitTestPane:Z,shouldShowYoutubePane:S,shouldEnableChat:E,multiplayers:O,lite:i,connectionMetadata:D,stacked:l||Boolean(i)||m.isLayoutStacked,userImage:_});case 62:case"end":return e.stop()}}),e)})))()},r}(ie.Component);function hZ(e){var t=e.children,r=ie.useRef({fileMap:new Map});return(0,ee.tZ)(Kj.Z.Provider,{value:r,children:t})}var vZ=function(e){var t=function(t){iZ(n,t);var r=fZ(n);function n(){return rZ(this,n),r.apply(this,arguments)}return n.prototype.render=function(){var t=this;return(0,ee.tZ)(rt.ET.Consumer,{children:function(r){var n=r.store;return(0,ee.tZ)(e,lZ({},t.props,{reduxStore:n}))}})},n}(ie.Component);return t.displayName="withStore(ReplEnvironment)",ce()(t,e)}(mZ),gZ=(0,rt.$j)((function(e){var t=e.repls.data[e.replEnvironment.activeReplId];return lZ({},e.replEnvironment,{repl:t,replsByUrl:e.replsByUrl,isAnon:!e.user.userInfo.isLoggedIn,user:e.user.userInfo})}),(function(e){return(0,se.DE)({showMessage:pe.P,setActiveReplId:fe,updateRepl:it.rM,updateReplSuccess:it.G5},e)}))((0,ue.withRouter)(vZ))}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[5762,8350,3443,2240,4700,6344,6351,4012,2489,4778,4007,8966,9998,6354,9710,8944,3220,5930,7485,2448,1952,815,1889,3129,7824,4476,7521,2298,1,1575,6708,6950,2692,9742,5469,9341,3612,4088,9096,9774,2888,179],(function(){return t(60964),t(47169)}));var r=e.O();_N_E=r}]);
//# sourceMappingURL=replEnvironment-06bbd421fbd1c2b0.js.map