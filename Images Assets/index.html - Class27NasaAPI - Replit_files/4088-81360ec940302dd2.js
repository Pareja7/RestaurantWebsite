"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4088],{8849:function(e,t,n){function r(e){return e.replace("GraphQL error: ","")}n.d(t,{Z:function(){return r}})},40746:function(e,t,n){function r(e,t){var n=t.existing,r=t.getKey,l=new Map,i=!0,o=!1,a=void 0;try{for(var c,u=e[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var s=c.value;l.set(r(s),s)}}catch(S){o=!0,a=S}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}var d=new Set,h=[],p=!0,f=!1,m=void 0;try{for(var g,v=n[Symbol.iterator]();!(p=(g=v.next()).done);p=!0){var Z=r(g.value),y=l.get(Z);y&&(h.push(y),d.add(Z))}}catch(S){f=!0,m=S}finally{try{p||null==v.return||v.return()}finally{if(f)throw m}}var b=!0,x=!1,w=void 0;try{for(var I,B=e[Symbol.iterator]();!(b=(I=B.next()).done);b=!0){var P=I.value;d.has(r(P))||h.push(P)}}catch(S){x=!0,w=S}finally{try{b||null==B.return||B.return()}finally{if(x)throw w}}return h}n.d(t,{Z:function(){return r}})},72304:function(e,t,n){n.d(t,{Z:function(){return j}});var r=n(35944),l=(n(67294),n(54929)),i=n(3204),o=n(24506),a=n(67938),c=n(66552),u=n(98741),s=n(92704),d=n(27464),h=n(17314),p=n(11935),f=n(89957),m=n(28614),g=n(69056),v=n(63051),Z=n(5383),y=n(35060),b=n(52620),x=n(23573),w=n(79236),I=n(53009),B=n(56408),P=n(88942),S=n(13604),C=n(78845);function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){X(e,t,n[t])}))}return e}function W(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var T=(0,l.K)("form"),A=(0,l.K)("button");function k(){return(0,r.BX)(l.Z,{css:[i.l0.rowWithGap(4),i.l0.align.center,i.l0.py(12)],children:[(0,r.tZ)(Z.Z,{}),(0,r.tZ)(a.x,{children:"Add a Post to your Repl"})]})}function R(e){var t=e.onClick;return(0,r.BX)(A,{onClick:t,css:[i.l0.rowWithGap(8),i.l0.align.center,i.l0.justify.spaceBetween,i.l0.px(8),i.l0.color.foregroundDefault,o.gU.outlined],children:[(0,r.tZ)(k,{}),(0,r.tZ)(l.Z,{children:(0,r.tZ)(v.Z,{})})]})}function V(e){var t=e.onClose;return(0,r.BX)(l.Z,{css:[i.l0.rowWithGap(8),i.l0.align.center,i.l0.justify.spaceBetween],children:[(0,r.tZ)(k,{}),(0,r.tZ)(l.Z,{children:(0,r.tZ)(d.Z,{alt:"Remove post",onClick:function(){return t()},children:(0,r.tZ)(y.Z,{})})})]})}function j(e){var t=e.replId,n=(0,w.c)({replId:t}),o=n.replIdField,d=n.titleField,v=n.bodyField,Z=n.replIconUrlField,O=n.tagsField,X=n.addPostIsExpanded,A=n.setAddPostIsExpanded,k=n.input,j=n.inputError,U=n.selectedRepl,E=(0,u.cX)(),F=(0,P.Kb)({items:E.repls,initialHighlightedIndex:-1,onInputValueChange:function(e){var t=e.inputValue;E.setSearchValue(t)},onSelectedItemChange:function(e){(null===e||void 0===e?void 0:e.selectedItem)&&(o.setValue(e.selectedItem.id),F.closeMenu())},itemToString:u._J}),D=(0,w.Z)({source:"replTalk"}),M=D.createReplPost,_=D.error,K=D.loading,L=Boolean(Z.value&&!Z.value.endsWith(".svg")),z=(0,B.W)(Z.setValue);return(0,r.BX)(c.Z,{elevated:!0,css:[i.l0.p(16),i.l0.colWithGap(16),i.l0.borderRadius(8)],children:[(0,r.BX)(a.x,{variant:"subheadBig",children:["Publish ",t?"this":"a"," Repl"]}),(0,r.BX)(T,{onSubmit:function(e){e.preventDefault(),null!==k&&M(k)},css:[i.l0.colWithGap(24)],children:[(0,r.BX)(l.Z,{css:[i.l0.colWithGap(8)],children:[(0,r.tZ)(a.x,{variant:"small",color:"dimmer",children:"REPL"}),t&&U?(0,r.BX)(l.Z,{css:[i.l0.rowWithGap(8),i.l0.align.center],children:[(0,r.tZ)(I.ZP,{size:24,iconUrl:Z.value||U.iconUrl,alt:U.title}),(0,r.tZ)(a.x,{variant:"subheadBig",children:U.title})]}):null,t?null:(0,r.tZ)(u.BP,{getComboboxProps:F.getComboboxProps,getInputProps:F.getInputProps,getItemProps:F.getItemProps,getMenuProps:F.getMenuProps,isOpen:F.isOpen,highlightedIndex:F.highlightedIndex,inputValue:F.inputValue,selectedRepl:F.selectedItem?G({},F.selectedItem,{iconUrl:Z.value||F.selectedItem.iconUrl}):void 0,repls:E.repls,loading:E.loading,onFocus:function(e){F.selectedItem&&(e.preventDefault(),e.currentTarget.select(),E.setSearchValue("")),F.openMenu()}})]}),(0,r.BX)(l.Z,{css:[i.l0.colWithGap(8)],children:[(0,r.BX)(l.Z,{css:[i.l0.rowWithGap(4)],children:[(0,r.tZ)(a.x,{variant:"small",color:"dimmer",children:"TAGS"})," ",(0,r.BX)(a.x,{variant:"small",color:"dimmest",children:[O.value.length,"/",5]})]}),(0,r.BX)(l.Z,{css:[i.l0.colWithGap(4)],children:[(0,r.tZ)(g.Z,{max:5,tags:O.value,onAdd:function(e){return O.setValue(W(O.value).concat([e]))},onRemove:function(e){return O.setValue(W(O.value.slice(0,e)).concat(W(O.value.slice(e+1))))}}),(0,r.tZ)(a.x,{multiline:!0,color:"dimmest",variant:"small",children:(0,C.Z)(O.value)})]})]}),(0,r.BX)(l.Z,{css:[i.l0.colWithGap(8)],children:[(0,r.tZ)(a.x,{variant:"small",color:"dimmer",children:"ICON"}),(0,r.BX)(l.Z,{css:[i.l0.rowWithGap(8),i.l0.align.start],children:[(0,r.tZ)(I.LN,{alt:"icon",size:84,iconUrl:z.previewUrl||Z.value||(null===U||void 0===U?void 0:U.templateInfo.iconUrl),isLoading:Boolean(z.previewUrl)}),(0,r.BX)(l.Z,{css:[i.l0.colWithGap(8),i.l0.flex.growAndShrink(1)],children:[L?(0,r.BX)(l.Z,{css:[i.l0.rowWithGap(8),i.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(l.Z,{css:[i.l0.flex.growAndShrink(1)],children:(0,r.tZ)(S.T,{text:"Change image",onFile:z.uploadImage})}),(0,r.tZ)(l.Z,{css:[i.l0.flex.growAndShrink(1)],children:(0,r.tZ)(s.zx,{text:"Remove image",onClick:function(){return Z.setValue(null)},outlined:!0,stretch:!0,iconLeft:(0,r.tZ)(y.Z,{}),type:"button"})})]}):(0,r.tZ)(l.Z,{css:[i.l0.flex.growAndShrink(1)],children:(0,r.tZ)(S.T,{text:"Upload custom image",onFile:z.uploadImage})}),z.error?(0,r.tZ)(l.Z,{children:(0,r.tZ)(p.Z,{icon:(0,r.tZ)(m.Z,{}),colorway:"negative",text:z.error,closable:!0,closeAction:z.clearError})}):null]})]})]}),(0,r.tZ)(l.Z,{css:{borderBottom:"1px solid "+i.TV.outlineDimmest}}),(0,r.BX)(l.Z,{css:[i.l0.colWithGap(8)],children:[(0,r.BX)(l.Z,{css:[i.l0.rowWithGap(4)],children:[(0,r.tZ)(a.x,{variant:"small",color:"dimmer",children:"POST"})," ",(0,r.tZ)(a.x,{variant:"small",color:"dimmest",children:"(Optional)"})]}),X?(0,r.BX)(l.Z,{css:[i.l0.borderRadius(8),i.l0.px(8),i.l0.pb(8),{border:"1px solid "+i.TV.outlineDefault}],children:[(0,r.tZ)(V,{onClose:function(){return A(!1)}}),(0,r.BX)(l.Z,{css:[i.l0.colWithGap(8)],children:[(0,r.tZ)(f.ZP,{autoFocus:!0,value:d.value,onChange:function(e){return d.setValue(e.currentTarget.value)},placeholder:"Give your post a title"}),(0,r.tZ)(x.Z,{onChange:v.setValue,placeholder:"You can write a Post to explain why you are sharing your Repl in detail. Posts can be about project updates, bug fixes, launches, questions, and more."}),(0,r.tZ)(h.Z,{})]})]}):(0,r.tZ)(R,{onClick:function(){return A(!0)}})]}),_?(0,r.tZ)(p.Z,{colorway:"negative",icon:(0,r.tZ)(m.Z,{}),text:_}):null,(0,r.tZ)(l.Z,G({},j?{"aria-label":j,"data-microtip-position":"bottom",role:"tooltip"}:{},{children:(0,r.tZ)(s.zx,{iconLeft:(0,r.tZ)(b.Z,{}),disabled:K||Boolean(j),colorway:"primary",text:K?"Publishing...":"Publish Repl",type:"submit",stretch:!0})}))]})]})}},13604:function(e,t,n){n.d(t,{T:function(){return s}});var r=n(35944),l=n(67294),i=n(54929),o=n(3204),a=n(92704),c=n(20255),u=n(33717);function s(e){var t=e.onFile,n=e.text,s=(0,l.useRef)(null);return(0,r.BX)(i.Z,{css:[o.l0.position.relative],children:[(0,r.tZ)("input",{css:[[o.l0.coverContainer,{opacity:0,zIndex:-1}]],ref:s,accept:u.W.join(","),type:"file",onChange:function(e){var n=e.target,r=n.validity,l=n.files;if(r.valid){var i=l?l[0]:null;i&&t(i)}}}),(0,r.tZ)(a.zx,{outlined:!0,stretch:!0,text:n,iconLeft:(0,r.tZ)(c.Z,{}),onClick:function(){var e;return null===(e=s.current)||void 0===e?void 0:e.click()},type:"button"})]})}},17314:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(35944),l=n(67294),i=n(67938),o=n(66552),a=n(54929),c=n(3204),u=n(50553);function s(){var e=(0,l.useState)(!1),t=e[0],n=e[1];return(0,r.BX)(o.Z,{background:t?"higher":"default",css:[c.l0.borderRadius(8),c.l0.colWithGap(16),c.l0.p(8)],children:[(0,r.BX)(a.Z,{css:[c.l0.colWithGap(8)],children:[(0,r.BX)(a.Z,{onClick:function(){return n(!t)},css:[c.l0.rowWithGap(8),{cursor:"pointer"}],children:[(0,r.tZ)(i.x,{children:"Style your post with Markdown"}),(0,r.tZ)(u.Z,{rotate:t?0:270})]}),t?(0,r.tZ)(i.x,{color:"dimmer",multiline:!0,children:"You can style your post with a limited set of Markdown. Here are some supported content types:"}):null]}),t?(0,r.BX)(r.HY,{children:[(0,r.BX)(a.Z,{css:[c.l0.colWithGap(8)],children:[(0,r.tZ)(i.x,{children:"Bold Text"}),(0,r.tZ)(i.x,{color:"dimmer",children:"**bold**"})]}),(0,r.BX)(a.Z,{css:[c.l0.colWithGap(8)],children:[(0,r.tZ)(i.x,{children:"Italic Text"}),(0,r.tZ)(i.x,{color:"dimmer",children:"__italic__"})]}),(0,r.BX)(a.Z,{css:[c.l0.colWithGap(8)],children:[(0,r.tZ)(i.x,{children:"Links"}),(0,r.tZ)(i.x,{color:"dimmer",children:"[Link Name](https://yourlink.com)"})]}),(0,r.BX)(a.Z,{css:[c.l0.colWithGap(8)],children:[(0,r.tZ)(i.x,{children:"Images"}),(0,r.tZ)(i.x,{color:"dimmer",children:"![Image alt text](https://linktoyourimage.com)"})]}),(0,r.BX)(a.Z,{css:[c.l0.colWithGap(8)],children:[(0,r.tZ)(i.x,{children:"Code Blocks"}),(0,r.BX)(i.x,{color:"dimmer",children:["```",(0,r.tZ)("br",{}),"this is for large, multiline code blocks",(0,r.tZ)("br",{}),"```"]})]}),(0,r.BX)(a.Z,{css:[c.l0.colWithGap(8)],children:[(0,r.tZ)(i.x,{children:"Inline Code"}),(0,r.tZ)(i.x,{color:"dimmer",children:"`this is for code in the middle of sentences`"})]})]}):null]})}},98741:function(e,t,n){n.d(t,{cX:function(){return P},_J:function(){return S},BP:function(){return C}});var r=n(35944),l=n(67294),i=n(88768),o=n(67938),a=n(89957),c=n(90652),u=n(9917),s=n(40746),d=n(53009),h=n(1517),p=n(54929),f=n(3204),m=n(88503),g=n(79162),v=n(45718),Z=n(19815);function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){y(e,t,n[t])}))}return e}var x=(0,p.K)("div"),w=(0,p.K)("li"),I={searchValue:"",loading:!1,repls:[]};function B(e,t){switch(t.type){case"data":var n,r=(null===(n=t.data.currentUser)||void 0===n?void 0:n.publishableReplSearch)||[];return b({},e,{loading:!1,repls:(0,s.Z)(r,{existing:e.repls,getKey:function(e){return e.id}})});case"loading":return b({},e,{loading:!0});case"searchValue":return b({},e,{searchValue:t.searchValue})}}function P(){var e=(0,l.useReducer)(B,I),t=e[0],n=e[1],r=(0,c.Z)(t.searchValue,200),o=(0,i.b1W)({variables:{search:r},notifyOnNetworkStatusChange:!0,onCompleted:function(e){n({type:"data",data:e})}}).loading;(0,l.useEffect)((function(){o&&n({type:"loading"})}),[o]);var a=(0,l.useCallback)((function(e){return n({type:"searchValue",searchValue:e})}),[]);return{repls:t.repls,loading:t.loading,searchValue:t.searchValue,setSearchValue:a}}function S(e){var t;return e?"".concat(null===(t=e.owner)||void 0===t?void 0:t.username,"/").concat(e.title):""}function C(e){var t,n=l.useRef(null);(0,Z.rf)((function(){var t;e.selectedRepl&&(null===(t=n.current)||void 0===t||t.blur())}),[e.selectedRepl]);var i=(null===(t=e.selectedRepl)||void 0===t?void 0:t.iconUrl)&&e.inputValue&&S(e.selectedRepl)===e.inputValue?(0,r.tZ)(p.Z,{css:[f.l0.px(8),f.l0.center,{position:"absolute",top:0,left:0,height:"100%"}],children:(0,r.tZ)(d.ZP,{alt:e.selectedRepl.title,iconUrl:e.selectedRepl.iconUrl,size:16})}):null;return(0,r.BX)(p.Z,{css:[{position:"relative"}],children:[(0,r.BX)(x,b({},e.getComboboxProps(),{css:{position:"relative"},children:[i,(0,r.tZ)(a.ZP,b({css:[f.l0.pr(32),i&&f.l0.pl(32)]},e.getInputProps({placeholder:"Search for a repl",onFocus:e.onFocus,ref:n}))),(0,r.tZ)(p.Z,{css:[f.l0.center,f.l0.px(8),{position:"absolute",top:0,right:0,height:"100%"}],children:e.loading&&e.isOpen?(0,r.tZ)(h.Z,{}):(0,r.tZ)(m.Z,{})})]})),(0,r.tZ)(x,b({},e.getMenuProps(),{css:{position:"relative"},children:e.isOpen?(0,r.BX)(g.Z,{children:[e.loading&&0===e.repls.length?(0,r.tZ)(w,{css:[f.l0.center,f.l0.py(32)],children:(0,r.tZ)(h.Z,{})}):null,e.loading||0!==e.repls.length?null:(0,r.tZ)(w,{css:[f.l0.center,f.l0.py(32)],children:(0,r.tZ)(o.x,{color:"dimmer",variant:"small",children:"No repls found"})}),e.repls.map((function(t,n){return(0,r.tZ)(w,b({},e.getItemProps({item:t,index:n}),{children:(0,r.tZ)(v.Z,{filter:"",title:S(t),subtitle:(0,u.F)(t.timeUpdated),selected:e.selectedRepl===t,highlighted:e.highlightedIndex===n,icon:t.iconUrl?(0,r.tZ)(d.ZP,{iconUrl:t.iconUrl,alt:t.title,size:16}):void 0})}),t.id)}))]}):null}))]})}},69056:function(e,t,n){n.d(t,{Z:function(){return M}});var r=n(35944),l=n(67294),i=n(54929),o=n(3204),a=n(27802),c=n(70917),u=n(66552),s=n(94590),d=n(67938),h=n(88942),p=n(88768),f=n(65577),m=n(85060),g=n(90652),v=n(40746);function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e){return function(e){if(Array.isArray(e))return Z(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b=/^[0-9a-zA-Z]+$/,x=function(e){return e.id};function w(e){var t=e.onSelect,n=e.filter,r=void 0===n?function(){return!0}:n,i=(0,l.useState)(""),o=i[0],a=i[1],c=(0,g.Z)(o,100),u=(0,f.Z)(t),s=function(e){var t=e.search,n=e.filter,r=(0,p.zdu)({variables:{limit:t?10:3,search:t}}).data,i=(0,l.useState)({official:[],community:[]}),o=i[0],a=i[1],c=(0,l.useMemo)((function(){if(r){var e=[],l=[],i=new Set,o=!0,a=!1,c=void 0;try{for(var u,s=r.tagGroups.official[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var d=u.value;i.add(d.id.toLowerCase()),n(d)&&e.push(d)}}catch(y){a=!0,c=y}finally{try{o||null==s.return||s.return()}finally{if(a)throw c}}var h=!0,p=!1,f=void 0;try{for(var m,g=r.tagGroups.community[Symbol.iterator]();!(h=(m=g.next()).done);h=!0){var v=m.value;i.add(v.id.toLowerCase()),n(v)&&l.push(v)}}catch(y){p=!0,f=y}finally{try{h||null==g.return||g.return()}finally{if(p)throw f}}var Z=t&&0===l.length&&!i.has(t.toLowerCase())?{id:t,isOfficial:!1,replCount:0}:void 0;return{official:e,community:l,newTag:Z&&n(Z)?Z:void 0}}}),[r,n,t]);return(0,l.useEffect)((function(){if(c){var e=c.official,t=c.community,n=c.newTag;a((function(r){return{official:(0,v.Z)(e,{existing:r.official,getKey:x}),community:(0,v.Z)(t,{existing:r.community,getKey:x}),newTag:n}}))}}),[c]),{tagGroups:o,reset:function(){a({official:[],community:[]})}}}({search:c,filter:r}),d=s.tagGroups,Z=s.reset,w=(0,h.Kb)({inputValue:o,items:d.newTag?[d.newTag]:y(d.official).concat(y(d.community)),defaultHighlightedIndex:0,itemToString:function(e){return e?e.id:""},onSelectedItemChange:function(e){e.selectedItem&&(Z(),a(""),w.reset(),w.openMenu())}});return(0,m.Z)((function(){w.selectedItem&&u.current(w.selectedItem)}),[w.selectedItem]),{tagGroups:d,combobox:w,onChange:function(e){var t=e.currentTarget.value;t&&!b.test(t)||t.length>30||a(t)}}}var I=n(24388),B=n(24506),P=n(79162),S=n(37466);function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){C(e,t,n[t])}))}return e}var X=(0,i.K)("ul"),G=(0,i.K)("li");function W(e){var t=e.children;return(0,r.tZ)(i.Z,{css:[o.l0.px(8),o.l0.pt(8)],children:(0,r.tZ)(d.x,{css:[{textTransform:"uppercase"}],variant:"small",color:"dimmer",children:t})})}function T(e){var t=e.highlighted,n=e.tag;return(0,r.BX)(i.Z,{css:[o.l0.rowWithGap(8),o.l0.p(8),t&&{backgroundColor:B.gU.listItem[":not([disabled])"][":active"].backgroundColor},{cursor:"pointer"}],children:[(0,r.BX)(i.Z,{css:[o.l0.flex.growAndShrink(1),o.l0.rowWithGap(4)],children:[(0,r.tZ)(d.x,{children:n.id}),n.isOfficial?(0,r.tZ)(S.Z,{}):null]}),n.replCount>0?(0,r.tZ)(d.x,{variant:"small",color:"dimmest",children:(0,I.d)(n.replCount)}):null]})}var A=l.memo((function(e){var t=e.getItemProps,n=e.highlightedIndex,l=e.data;return"newTag"===l.type?(0,r.tZ)(P.Z,{css:[o.l0.minWidth(200)],children:(0,r.BX)(G,{children:[(0,r.tZ)(W,{children:"Community Tags"}),(0,r.tZ)(d.x,{css:[o.l0.p(8),o.l0.pt(16)],color:"dimmest",children:"No tags found"}),(0,r.tZ)(X,{children:(0,r.tZ)(G,O({},t({item:l.newTag,index:0}),{css:[o.l0.p(8)],children:(0,r.BX)(u.Z,{elevated:!0,css:[o.l0.borderRadius(8),o.l0.p(8),{cursor:"pointer"}],children:['Create "',l.newTag.id,'" tag']})}))})]})}):(0,r.tZ)(P.Z,{css:[o.l0.minWidth(200)],children:l.sections.reduce((function(e,l){return e.sections.push((0,r.BX)(G,{children:[(0,r.tZ)(W,{children:l.title}),(0,r.tZ)(X,{css:[o.l0.pt(4),o.l0.pb(8)],children:l.tags.map((function(l){var i=e.itemIndex++;return(0,r.tZ)(G,O({},t({item:l,index:i}),{children:(0,r.tZ)(T,{tag:l,highlighted:n===i})}),l.id)}))})]},l.title)),e}),{sections:[],itemIndex:0}).sections})}));function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){k(e,t,n[t])}))}return e}var V=(0,i.K)("div"),j=(0,i.K)("input"),U=(0,c.iv)([o.l0.fontSize(12),o.l0.pl(24),o.l0.pr(8),o.l0.py(4)]);function E(){return(0,r.tZ)(d.x,{css:[o.l0.px(4),o.l0.flex.row,o.l0.align.center,o.l0.position.absolute,o.l0.height("100%"),o.l0.color.foregroundDefault,{top:0,left:4,pointerEvents:"none"}],children:(0,r.tZ)(s.Z,{size:12})})}function F(e){var t=e.text,n=e.children;return(0,r.BX)(u.Z,{elevated:!0,css:[o.l0.position.relative,o.l0.minWidth(30),o.l0.borderRadius(16),{border:"1px solid transparent","&:focus-within":{borderColor:o.TV.outlineDimmer,backgroundColor:"transparent"}}],children:[(0,r.tZ)(E,{}),(0,r.tZ)(d.x,{css:[{visibility:"hidden"},U],children:t}),n]})}function D(e){var t=e.onSelect,n=w({filter:e.filter,onSelect:t}),a=n.combobox,c=n.tagGroups,u=n.onChange,s=(0,l.useMemo)((function(){return function(e){if(e.newTag)return{type:"newTag",newTag:e.newTag};var t=[];return e.official.length&&t.push({title:"Official Tags",tags:e.official}),e.community.length&&t.push({title:"Community Tags",tags:e.community}),0===t.length?null:{type:"sections",sections:t}}(c)}),[c]),d="Add tag";return(0,r.BX)(i.Z,{children:[(0,r.tZ)(V,R({},a.getComboboxProps(),{css:[o.l0.flex.row],children:(0,r.tZ)(F,{text:a.inputValue||d,children:(0,r.tZ)(j,R({css:[o.l0.coverContainer,U,o.l0.color.foregroundDefault,{backgroundColor:"transparent","&::placeholder":o.l0.color.foregroundDefault,"&:focus::placeholder":o.l0.color.foregroundDimmest}]},a.getInputProps({placeholder:d,onChange:u,onFocus:function(){a.openMenu()}})))})})),(0,r.tZ)(V,R({},a.getMenuProps(),{css:[o.l0.position.relative],children:s&&a.isOpen?(0,r.tZ)(A,{getItemProps:a.getItemProps,highlightedIndex:a.highlightedIndex,data:s}):null}))]})}function M(e){var t=e.tags,n=e.max,l=void 0===n?5:n,c=e.onAdd,u=e.onRemove,s=t.map((function(e){return e.id}));return(0,r.BX)(i.Z,{css:[o.l0.flex.row,o.l0.flex.wrap,{margin:"calc(-1 * ".concat(o.TV.space4,")")}],children:[t.map((function(e,t){return(0,r.tZ)(i.Z,{css:[o.l0.m(4)],children:(0,r.tZ)(a.g,{small:!0,tag:e,onClick:function(){return u(t)}})},e.id)})),t.length<l?(0,r.tZ)(i.Z,{css:[o.l0.m(4)],children:(0,r.tZ)(D,{onSelect:c,filter:function(e){return!s.includes(e.id.toLowerCase())}})}):null]})}},78845:function(e,t,n){function r(e){if(0===e.length)return"Adding tags helps others find your repl.";var t="Your Repl will be shared to";if(1===e.length)return"".concat(t," #").concat(e[0].id,".");if(2===e.length)return"".concat(t," #").concat(e[0].id," and #").concat(e[1].id,".");var n=e[e.length-1];return"".concat(t," ").concat(e.slice(0,-1).map((function(e){return"#".concat(e.id)})).join(", "),", and #").concat(n.id,".")}n.d(t,{Z:function(){return r}})},79236:function(e,t,n){n.d(t,{c:function(){return p},Z:function(){return m}});var r=n(67294),l=n(11163),i=n(77070),o=n(88768),a=n(33108),c=n(65577);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,i=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(c){a=!0,l=c}finally{try{o||null==n.return||n.return()}finally{if(a)throw l}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e){return e?e.length>100?{message:"Title should not be more than ".concat(100," characters")}:void 0:{message:"Give your post a title"}}function h(e){return e?e.length>5e3?{message:"Post should not be more than ".concat(5e3," characters")}:void 0:{message:"Write something about this post"}}function p(e){var t,n=function(){if(!s.isValid)return null;if(w&&(!p.isValid||!f.isValid))return null;var e=s.value;if(null===e)throw new Error("Expected replId");var t=w?p.value:void 0,n=w?f.value:void 0;return{replId:e,iconUrl:m.value||void 0,title:t,body:n,tags:g.value.map((function(e){return e.id}))}},l=(0,r.useState)(!1),i=l[0],u=l[1],s=(0,a.Y)(e.replId||null,(function(e){return e?null:{message:"Select a Repl to share"}})),p=(0,a.Y)("",d),f=(0,a.Y)("",h),m=(0,a.Y)(null,(function(){return null})),g=(0,a.Y)([],(function(){return null})),v=(0,o.Nfb)({variables:{id:s.value||""},skip:!s.value}),Z="Repl"===(null===(t=v.data)||void 0===t?void 0:t.repl.__typename)?v.data.repl:null,y=(0,c.Z)(g.setValue),b=(0,c.Z)(m.setValue);(0,r.useEffect)((function(){Z&&(y.current(Z.tags),b.current(Z.iconUrl.endsWith(".svg")?null:Z.iconUrl))}),[Z,y,b]);var x=(0,c.Z)([s.validate,p.validate,f.validate]);(0,r.useEffect)((function(){x.current.map((function(e){return e()}))}),[x]);var w=Boolean(i&&(p.value||f.value));return{replIdField:s,titleField:p,bodyField:f,replIconUrlField:m,tagsField:g,addPostIsExpanded:i,setAddPostIsExpanded:u,getInput:n,input:n(),inputError:function(){var e,t;return s.error?s.error.message:w?(null===(e=p.error)||void 0===e?void 0:e.message)||(null===(t=f.error)||void 0===t?void 0:t.message):void 0}(),selectedRepl:Z}}function f(e){var t;if(null===e||void 0===e?void 0:e.error)return"Something went wrong";if(!(null===e||void 0===e?void 0:e.data))return null;var n=null===(t=e.data)||void 0===t?void 0:t.createReplPost2;return"UserError"===n.__typename||"NotFoundError"===n.__typename?n.message:null}function m(e){var t=e.source,n=(0,l.useRouter)(),r=s((0,o.HKC)({onCompleted:function(e){var r,l,o,a="Post"===e.createReplPost2.__typename?e.createReplPost2:null;a&&((0,i.j)(i.U3.POST_MADE,{source:t,isPublish:!1,title:a.title,description:null===(r=a.replComment)||void 0===r?void 0:r.body,isRemixed:Boolean(null===(l=a.repl)||void 0===l||null===(o=l.origin)||void 0===o?void 0:o.id),coverImage:!1}),n.push({pathname:"/postsFeed",query:{order:"new"}},{pathname:"/community/all",query:{order:"new"}}))}}),2),a=r[0],c=r[1];return{createReplPost:function(e){c.loading||a({variables:{input:e}})},error:f(c),loading:c.loading}}},16134:function(e,t,n){n.d(t,{Z:function(){return R}});var r=n(35944),l=n(67294),i=n(54929),o=n(3204),a=n(24506),c=n(98741),u=n(17314),s=n(28614),d=n(69056),h=n(63051),p=n(5383),f=n(35060),m=n(52620),g=n(23573),v=n(79236),Z=n(56408),y=n(88942),b=n(13604),x=n(53009),w=n(95694),I=n(37424);function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){P(e,t,n[t])}))}return e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,i=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(c){a=!0,l=c}finally{try{o||null==n.return||n.return()}finally{if(a)throw l}}return i}}(e,t)||X(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||X(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){if(e){if("string"===typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}var G=(0,i.K)("form"),W=(0,i.K)("button");function T(){return(0,r.BX)(i.Z,{css:[o.l0.rowWithGap(4),o.l0.align.center,o.l0.py(12)],children:[(0,r.tZ)(p.Z,{}),(0,r.tZ)(w.xv,{children:"Add a Post to your Repl"})]})}function A(e){var t=e.onClick;return(0,r.BX)(W,{onClick:t,css:[o.l0.rowWithGap(8),o.l0.align.center,o.l0.justify.spaceBetween,o.l0.px(8),o.l0.color.foregroundDefault,a.gU.outlined],children:[(0,r.tZ)(T,{}),(0,r.tZ)(i.Z,{children:(0,r.tZ)(h.Z,{})})]})}function k(e){var t=e.onClose;return(0,r.BX)(i.Z,{css:[o.l0.rowWithGap(8),o.l0.align.center,o.l0.justify.spaceBetween],children:[(0,r.tZ)(T,{}),(0,r.tZ)(i.Z,{children:(0,r.tZ)(w.hU,{alt:"Remove post",onClick:function(){return t()},children:(0,r.tZ)(f.Z,{})})})]})}function R(e){var t=e.replId,n=(0,v.c)({replId:t}),a=n.replIdField,h=n.titleField,p=n.bodyField,B=n.replIconUrlField,P=n.tagsField,X=n.addPostIsExpanded,W=n.setAddPostIsExpanded,T=n.input,R=n.inputError,V=n.selectedRepl,j=(0,c.cX)(),U=(0,y.Kb)({items:j.repls,initialHighlightedIndex:-1,onInputValueChange:function(e){var t=e.inputValue;j.setSearchValue(t)},onSelectedItemChange:function(e){(null===e||void 0===e?void 0:e.selectedItem)&&(a.setValue(e.selectedItem.id),U.closeMenu())},itemToString:c._J}),E=(0,v.Z)({source:"replTalk"}),F=E.error,D=E.loading,M=Boolean(B.value&&!B.value.endsWith(".svg")),_=(0,Z.W)(B.setValue),K=C(l.useState(!1),2),L=K[0],z=K[1],N=(0,I.H)()("templateCheckbox");return(0,r.BX)(w.Tg,{css:[o.l0.p(16),o.l0.borderRadius(8)],children:[(0,r.BX)(w.xv,{variant:"subheadBig",children:["Publish ",t?"this":"a"," Repl"]}),(0,r.BX)(G,{onSubmit:function(e){e.preventDefault(),null!==T&&window.alert("TODO: publish, this form is still being developed.")},css:[o.l0.colWithGap(24)],children:[(0,r.tZ)(i.Z,{css:[o.l0.colWithGap(8)],children:t?null:(0,r.tZ)(c.BP,{getComboboxProps:U.getComboboxProps,getInputProps:U.getInputProps,getItemProps:U.getItemProps,getMenuProps:U.getMenuProps,isOpen:U.isOpen,highlightedIndex:U.highlightedIndex,inputValue:U.inputValue,selectedRepl:U.selectedItem?S({},U.selectedItem,{iconUrl:B.value||U.selectedItem.iconUrl}):void 0,repls:j.repls,loading:j.loading,onFocus:function(e){U.selectedItem&&(e.preventDefault(),e.currentTarget.select(),j.setSearchValue("")),U.openMenu()}})}),(0,r.BX)(i.Z,{css:[o.l0.colWithGap(4)],children:[(0,r.BX)(i.Z,{css:[o.l0.rowWithGap(8)],children:[(0,r.tZ)(w.XZ,{id:N,checked:L,onChange:function(){return z(!L)}}),(0,r.tZ)("label",{htmlFor:N,children:"Publish as Template"})]}),(0,r.tZ)(w.xv,{variant:"small",color:"dimmer",multiline:!0,children:"This is a good option for Repls meant as starting points for future work"})]}),(0,r.BX)(i.Z,{css:[o.l0.colWithGap(4)],children:[(0,r.tZ)(w.xv,{color:"dimmer",children:"Add to your post"}),(0,r.BX)(w.Qd,{headerContent:(0,r.BX)(i.Z,{css:[o.l0.rowWithGap(4)],children:[(0,r.tZ)(w.xv,{variant:"small",children:"Tags"}),(0,r.BX)(w.xv,{variant:"small",color:"dimmer",children:[P.value.length,"/",5]})]}),children:[(0,r.tZ)(i.Z,{css:[o.l0.colWithGap(8)],children:(0,r.tZ)(d.Z,{max:5,tags:P.value,onAdd:function(e){return P.setValue(O(P.value).concat([e]))},onRemove:function(e){return P.setValue(O(P.value.slice(0,e)).concat(O(P.value.slice(e+1))))}})}),(0,r.tZ)(w.xv,{multiline:!0,color:"dimmer",variant:"small",children:"Adding tags helps others find your Repl"})]}),(0,r.tZ)(w.Qd,{headerContent:(0,r.tZ)(i.Z,{css:[o.l0.rowWithGap(4)],children:(0,r.tZ)(w.xv,{variant:"small",children:"Title & Description"})}),children:(0,r.tZ)(i.Z,{css:[o.l0.colWithGap(8)],children:(0,r.tZ)(w.xv,{children:"TODO"})})}),(0,r.tZ)(w.Qd,{headerContent:(0,r.tZ)(i.Z,{css:[o.l0.rowWithGap(4)],children:(0,r.tZ)(w.xv,{variant:"small",children:"Cover page"})}),children:(0,r.tZ)(i.Z,{css:[o.l0.colWithGap(8)],children:(0,r.tZ)(w.xv,{children:"TODO"})})}),(0,r.tZ)(w.Qd,{headerContent:(0,r.tZ)(i.Z,{css:[o.l0.rowWithGap(4)],children:(0,r.tZ)(w.xv,{variant:"small",children:"Custom icon"})}),children:(0,r.tZ)(i.Z,{css:[o.l0.colWithGap(8)],children:(0,r.tZ)(w.xv,{children:"TODO"})})})]}),(0,r.BX)(i.Z,{css:[o.l0.colWithGap(8)],children:[(0,r.tZ)(w.xv,{variant:"small",color:"dimmer",children:"ICON"}),(0,r.BX)(i.Z,{css:[o.l0.rowWithGap(8),o.l0.align.start],children:[(0,r.tZ)(x.LN,{alt:"icon",size:84,iconUrl:_.previewUrl||B.value||(null===V||void 0===V?void 0:V.templateInfo.iconUrl),isLoading:Boolean(_.previewUrl)}),(0,r.BX)(i.Z,{css:[o.l0.colWithGap(8),o.l0.flex.growAndShrink(1)],children:[M?(0,r.BX)(i.Z,{css:[o.l0.rowWithGap(8),o.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(i.Z,{css:[o.l0.flex.growAndShrink(1)],children:(0,r.tZ)(b.T,{text:"Change image",onFile:_.uploadImage})}),(0,r.tZ)(i.Z,{css:[o.l0.flex.growAndShrink(1)],children:(0,r.tZ)(w.zx,{text:"Remove image",onClick:function(){return B.setValue(null)},outlined:!0,stretch:!0,iconLeft:(0,r.tZ)(f.Z,{}),type:"button"})})]}):(0,r.tZ)(i.Z,{css:[o.l0.flex.growAndShrink(1)],children:(0,r.tZ)(b.T,{text:"Upload custom image",onFile:_.uploadImage})}),_.error?(0,r.tZ)(i.Z,{children:(0,r.tZ)(w.E_,{icon:(0,r.tZ)(s.Z,{}),colorway:"negative",text:_.error,closable:!0,closeAction:_.clearError})}):null]})]})]}),(0,r.tZ)(i.Z,{css:{borderBottom:"1px solid "+o.TV.outlineDimmest}}),(0,r.BX)(i.Z,{css:[o.l0.colWithGap(8)],children:[(0,r.BX)(i.Z,{css:[o.l0.rowWithGap(4)],children:[(0,r.tZ)(w.xv,{variant:"small",color:"dimmer",children:"POST"})," ",(0,r.tZ)(w.xv,{variant:"small",color:"dimmest",children:"(Optional)"})]}),X?(0,r.BX)(i.Z,{css:[o.l0.borderRadius(8),o.l0.px(8),o.l0.pb(8),{border:"1px solid "+o.TV.outlineDefault}],children:[(0,r.tZ)(k,{onClose:function(){return W(!1)}}),(0,r.BX)(i.Z,{css:[o.l0.colWithGap(8)],children:[(0,r.tZ)(w.II,{autoFocus:!0,value:h.value,onChange:function(e){return h.setValue(e.currentTarget.value)},placeholder:"Give your post a title"}),(0,r.tZ)(g.Z,{onChange:p.setValue,placeholder:"You can write a Post to explain why you are sharing your Repl in detail. Posts can be about project updates, bug fixes, launches, questions, and more."}),(0,r.tZ)(u.Z,{})]})]}):(0,r.tZ)(A,{onClick:function(){return W(!0)}})]}),F?(0,r.tZ)(w.E_,{colorway:"negative",icon:(0,r.tZ)(s.Z,{}),text:F}):null,(0,r.tZ)(i.Z,S({},R?{"aria-label":R,"data-microtip-position":"bottom",role:"tooltip"}:{},{children:(0,r.tZ)(w.zx,{iconLeft:(0,r.tZ)(m.Z,{}),disabled:D||Boolean(R),colorway:"primary",text:D?"Publishing...":"Publish Repl",type:"submit",stretch:!0})}))]})]})}}}]);
//# sourceMappingURL=4088-81360ec940302dd2.js.map